(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7612],{87600:function(e,t,n){"use strict";var i=n(37014);let a=(0,i.Z)();t.Z=a},65814:function(e,t,n){"use strict";n.d(t,{S:function(){return l},i:function(){return o}});var i,a=n(75747),r=(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.moduleName="column",t}(a.bn),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.propertyName="columns",t.moduleName="columns",t}(a.bn)},55339:function(e,t,n){"use strict";n.d(t,{C:function(){return tW}});var i,a,r,o,l,s,d,c,p,h,u,g=n(2265),m=n(92268),f=n(58174),y=n(63302),v=n(12878),b=n(22100),S="actionBegin",C="actionComplete",w="actionFailure",k="cardRendered",x="queryCellInfo",E="dataBinding",A="dataBound",O="content-ready",D="data-ready",T="dataStateChange",M=function(){function e(e){this.dataState={isPending:!1,resolver:null,isDataChanged:!1},this.parent=e,this.keyField=this.parent.cardSettings.headerField,this.dataState={isDataChanged:!1},this.isObservable=!1,this.initDataManager(e.dataSource,e.query),this.refreshDataManager()}return e.prototype.initDataManager=function(e,t){this.dataManager=e instanceof y.h?e:new y.h(e),this.query=t instanceof v.A?t:new v.A,this.kanbanData=new y.h(this.parent.kanbanData)},e.prototype.isRemote=function(){return!0!==this.dataManager.dataSource.offline&&void 0!==this.dataManager.dataSource.url&&""!==this.dataManager.dataSource.url},e.prototype.columnKeyFields=function(){for(var e=[],t=0,n=this.parent.columns;t<n.length;t++){var i=n[t];if(i.keyField.toString().split(",").length>1)for(var a=0,r=i.keyField.toString().split(",");a<r.length;a++){var o=r[a];e.push(o.trim())}else e.push(i.keyField.toString())}return e},e.prototype.getQuery=function(e){var t=this.query.clone();if(this.isRemote()&&this.parent.enableVirtualization){for(var n="auto"===this.parent.cardHeight?100:parseInt((0,m.Ac)(this.parent.cardHeight).split("px")[0],10),i="auto"===this.parent.height?2*Math.ceil(window.innerHeight/n):2*Math.ceil(parseInt((0,m.Ac)(this.parent.height).split("px")[0],10)/n),a=this.columnKeyFields(),r=0;r<a.length;r++)t.where(this.parent.keyField,"equal",a[r]);t.take(i),(0,m.le)(e)&&(e="KanbanVirtualization"),t.addParams("KanbanVirtualization",e)}return t},e.prototype.getData=function(e){if(this.parent.dataSource&&"result"in this.parent.dataSource){var t=this.eventPromise({requestType:""},e);return this.isObservable=!0,t.promise}return this.dataManager.executeQuery(e)},e.prototype.setState=function(e){return this.dataState=e},e.prototype.getStateEventArgument=function(e){var t=new b.lM,n=new y.h({url:"",adaptor:new b.lM}),i=t.processQuery(n,e),a=JSON.parse(i.data);return(0,m.l7)(a,i.pvtData)},e.prototype.eventPromise=function(e,t,n){var i=this,a=this.getStateEventArgument(t),r=new y.B,o=new y.B;return void 0!==e.requestType&&!1!==this.dataState.isDataChanged?(a.action=e,"cardChanged"===e.requestType||"cardRemoved"===e.requestType||"cardCreated"===e.requestType?(e.promise=o.promise,e.state=a,e.index=n,this.setState({isPending:!0,resolver:o.resolve}),e.endEdit=o.resolve,e.cancelEdit=o.reject,this.parent.trigger("dataSourceChanged",e),o.promise.then(function(){i.setState({isPending:!0,resolver:r.resolve}),i.parent.trigger(T,a),e.addedRecords.forEach(function(e){i.parent.kanbanData.push(e)}),e.changedRecords.forEach(function(e){var t=i.parent.kanbanData.filter(function(t){return t[i.parent.cardSettings.headerField]===e[i.parent.cardSettings.headerField]})[0];(0,m.l7)(t,e)}),e.deletedRecords.forEach(function(e){var t=i.parent.kanbanData.findIndex(function(t){return t[i.parent.cardSettings.headerField]===e[i.parent.cardSettings.headerField]});i.parent.kanbanData.splice(t,1)})}).catch(function(){i.parent.hideSpinner()})):(this.setState({isPending:!0,resolver:r.resolve}),this.parent.trigger(T,a))):(this.setState({}),r.resolve(this.parent.dataSource)),r},e.prototype.getTable=function(){return this.parent.query?this.getQuery().fromTable:null},e.prototype.refreshDataManager=function(){var e=this;this.getData(this.getQuery()).then(function(t){return e.dataManagerSuccess(t)}).catch(function(t){return e.dataManagerFailure(t)})},e.prototype.dataManagerSuccess=function(e,t,n,i){var a=this;!this.parent.isDestroyed&&(t?(this.updateKanbanData(e),this.parent.enableVirtualization&&this.isRemote()&&this.parent.virtualLayoutModule.refresh()):this.parent.trigger(E,e,function(e){a.updateKanbanData(e),a.parent.notify(D,{processedData:a.parent.kanbanData}),a.parent.trigger(A,null,function(){return a.parent.hideSpinner()})}))},e.prototype.updateKanbanData=function(e){var t=(0,m.l7)([],(0,m.le)(e.result.result)?e.result:e.result.result,null,!0);if(this.isRemote()&&this.parent.enableVirtualization&&t.length>0&&!(0,m.le)(e.result.count))for(var n=this.columnKeyFields(),i=0;i<n.length;i++)e.result.count[i].Key===n[i]&&(this.parent.columnDataCount[n[i]]=e.result.count[i].Value);this.parent.kanbanData=t},e.prototype.dataManagerFailure=function(e){var t=this;this.parent.isDestroyed||this.parent.trigger(w,{error:e},function(){return t.parent.hideSpinner()})},e.prototype.updateDataManager=function(e,t,n,i,a,r,o,l,s,d){var c,p=this;this.parent.showSpinner();var h={requestType:n,cancel:!1,addedRecords:t.addedRecords,changedRecords:t.changedRecords,deletedRecords:t.deletedRecords};this.setState({isDataChanged:!0}),this.eventPromise(h,this.query,a),this.parent.trigger(C,h,function(n){if(!n.cancel){switch(e){case"insert":c=p.dataManager.insert(i,p.getTable(),p.getQuery());break;case"update":p.parent.enableVirtualization&&!p.parent.dataModule.isRemote()&&r?(c=p.dataManager.remove(p.keyField,i,p.getTable(),p.getQuery()),c=p.dataManager.insert(i,p.getTable(),p.getQuery(),p.dataManager.dataSource.json.findIndex(function(e){return e[p.parent.cardSettings.headerField]===o}))):c=p.dataManager.update(p.keyField,i,p.getTable(),p.getQuery());break;case"delete":c=p.dataManager.remove(p.keyField,i,p.getTable(),p.getQuery());break;case"batch":if(!p.parent.dataModule.isRemote()&&r&&p.parent.enableVirtualization&&i){for(var h=0;h<i.length;h++)c=p.dataManager.remove(p.keyField,i[h],p.getTable(),p.getQuery());for(var u=p.dataManager.dataSource.json.findIndex(function(e){return e[p.parent.cardSettings.headerField]===o}),h=0;h<i.length;h++,u++)c=p.dataManager.insert(i[h],p.getTable(),p.getQuery(),u)}else c=p.dataManager.saveChanges(t,p.keyField,p.getTable(),p.getQuery())}p.dataManager.dataSource.offline?!p.isObservable&&(p.kanbanData=p.dataManager,p.parent.kanbanData=p.dataManager.dataSource.json,a=l===s&&d?a-1:a,p.refreshUI(n,a,r),p.parent.enableVirtualization&&p.parent.virtualLayoutModule.refreshColumnData(l,s,n.requestType,i[p.parent.keyField])):c.then(function(e){!p.parent.isDestroyed&&(p.getData(p.getQuery()).then(function(e){return p.dataManagerSuccess(e,"DataSourceChange",n,a)}).catch(function(e){return p.dataManagerFailure(e)}),"cardCreated"===n.requestType?Array.isArray(e)?p.modifyArrayData(n.addedRecords,e):n.addedRecords[0]=(0,m.l7)(n.addedRecords[0],e):"cardChanged"===n.requestType?Array.isArray(e)?p.modifyArrayData(n.changedRecords,e):n.changedRecords[0]=(0,m.l7)(n.changedRecords[0],e):"cardRemoved"===n.requestType&&(Array.isArray(e)?p.modifyArrayData(n.deletedRecords,e):n.deletedRecords[0]=(0,m.l7)(n.deletedRecords[0],e)),a=l===s&&d?a-1:a,p.refreshUI(n,a,r),p.parent.enableVirtualization&&p.parent.virtualLayoutModule.refreshColumnData(l,s,n.requestType,i[p.parent.keyField]))}).catch(function(e){p.dataManagerFailure(e)})}})},e.prototype.modifyArrayData=function(e,t){if(e.length===t.length)for(var n=0;n<t.length;n++)e[n]=(0,m.l7)(e[n],t[n]);return e},e.prototype.refreshUI=function(e,t,n){var i=this;this.parent.enableVirtualization?(this.parent.virtualLayoutModule.columnData=this.parent.virtualLayoutModule.getColumnCards(),e.addedRecords.forEach(function(a,r){i.parent.virtualLayoutModule.renderCardBasedOnIndex(a,t+r,n,e.requestType)}),e.changedRecords.forEach(function(a){i.parent.virtualLayoutModule.removeCard(a),i.parent.virtualLayoutModule.renderCardBasedOnIndex(a,t,n,e.requestType),i.parent.virtualLayoutModule.isSelectedCard&&i.parent.actionModule.SingleCardSelection(a),i.parent.sortSettings.field&&"Index"===i.parent.sortSettings.sortBy&&"Descending"===i.parent.sortSettings.direction&&t>0?--t:t++}),e.deletedRecords.forEach(function(e){i.parent.virtualLayoutModule.removeCard(e)}),this.parent.virtualLayoutModule.refresh()):(this.parent.layoutModule.columnData=this.parent.layoutModule.getColumnCards(),this.parent.swimlaneSettings.keyField&&(this.parent.layoutModule.kanbanRows=this.parent.layoutModule.getRows(),this.parent.layoutModule.swimlaneData=this.parent.layoutModule.getSwimlaneCards()),e.addedRecords.forEach(function(e,n){i.parent.swimlaneSettings.keyField&&!e[i.parent.swimlaneSettings.keyField]&&(e[i.parent.swimlaneSettings.keyField]=""),i.parent.layoutModule.renderCardBasedOnIndex(e,t+n)}),e.changedRecords.forEach(function(e){i.parent.swimlaneSettings.keyField&&!e[i.parent.swimlaneSettings.keyField]&&(e[i.parent.swimlaneSettings.keyField]=""),i.parent.layoutModule.removeCard(e),i.parent.layoutModule.renderCardBasedOnIndex(e,t),i.parent.layoutModule.isSelectedCard&&i.parent.actionModule.SingleCardSelection(e),i.parent.sortSettings.field&&"Index"===i.parent.sortSettings.sortBy&&"Descending"===i.parent.sortSettings.direction&&t>0?--t:t++}),e.deletedRecords.forEach(function(e){i.parent.layoutModule.removeCard(e)}),this.parent.layoutModule.refresh()),this.parent.renderTemplates(),this.parent.notify(O,{}),this.parent.trigger(A,e,function(){return i.parent.hideSpinner()})},e}(),F=(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),j=function(e,t,n,i){var a,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(o=(r<3?a(o):r>3?a(t,n,o):a(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},q=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return F(t,e),j([(0,m.Z9)()],t.prototype,"keyField",void 0),j([(0,m.Z9)()],t.prototype,"textField",void 0),j([(0,m.Z9)(!1)],t.prototype,"showEmptyRow",void 0),j([(0,m.Z9)(!0)],t.prototype,"showItemCount",void 0),j([(0,m.Z9)(!1)],t.prototype,"allowDragAndDrop",void 0),j([(0,m.Z9)()],t.prototype,"template",void 0),j([(0,m.Z9)("Ascending")],t.prototype,"sortDirection",void 0),j([(0,m.Z9)()],t.prototype,"sortComparer",void 0),j([(0,m.Z9)(!0)],t.prototype,"showUnassignedRow",void 0),j([(0,m.Z9)(!1)],t.prototype,"enableFrozenRows",void 0),t}(m.rt),R=(a=function(e,t){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),L=function(e,t,n,i){var a,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(o=(r<3?a(o):r>3?a(t,n,o):a(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},I=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return R(t,e),L([(0,m.Z9)(!0)],t.prototype,"showHeader",void 0),L([(0,m.Z9)()],t.prototype,"headerField",void 0),L([(0,m.Z9)()],t.prototype,"contentField",void 0),L([(0,m.Z9)()],t.prototype,"tagsField",void 0),L([(0,m.Z9)()],t.prototype,"grabberField",void 0),L([(0,m.Z9)()],t.prototype,"footerCssField",void 0),L([(0,m.Z9)()],t.prototype,"template",void 0),L([(0,m.Z9)("Single")],t.prototype,"selectionType",void 0),t}(m.rt),z=(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),P=function(e,t,n,i){var a,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(o=(r<3?a(o):r>3?a(t,n,o):a(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},H=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return z(t,e),P([(0,m.Z9)()],t.prototype,"template",void 0),P([(0,m.Z9)([])],t.prototype,"fields",void 0),P([(0,m.Z9)(null)],t.prototype,"model",void 0),t}(m.rt),V=(o=function(e,t){return(o=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),N=function(e,t,n,i){var a,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(o=(r<3?a(o):r>3?a(t,n,o):a(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},B=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return V(t,e),N([(0,m.Z9)()],t.prototype,"keyField",void 0),N([(0,m.Z9)()],t.prototype,"headerText",void 0),N([(0,m.Z9)()],t.prototype,"template",void 0),N([(0,m.Z9)(!1)],t.prototype,"allowToggle",void 0),N([(0,m.Z9)(!0)],t.prototype,"isExpanded",void 0),N([(0,m.Z9)()],t.prototype,"minCount",void 0),N([(0,m.Z9)()],t.prototype,"maxCount",void 0),N([(0,m.Z9)(!0)],t.prototype,"showItemCount",void 0),N([(0,m.Z9)(!1)],t.prototype,"showAddButton",void 0),N([(0,m.Z9)(!0)],t.prototype,"allowDrag",void 0),N([(0,m.Z9)(!0)],t.prototype,"allowDrop",void 0),N([(0,m.Z9)([])],t.prototype,"transitionColumns",void 0),t}(m.rt),_=(l=function(e,t){return(l=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),W=function(e,t,n,i){var a,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(o=(r<3?a(o):r>3?a(t,n,o):a(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},Z=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return _(t,e),W([(0,m.Z9)()],t.prototype,"text",void 0),W([(0,m.Z9)()],t.prototype,"keyFields",void 0),t}(m.rt),K=(s=function(e,t){return(s=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),U=function(e,t,n,i){var a,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(o=(r<3?a(o):r>3?a(t,n,o):a(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},Y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return K(t,e),U([(0,m.Z9)("Index")],t.prototype,"sortBy",void 0),U([(0,m.Z9)()],t.prototype,"field",void 0),U([(0,m.Z9)("Ascending")],t.prototype,"direction",void 0),t}(m.rt),Q="e-kanban",X="e-rtl",G="e-device",J="e-icons",$="e-template",ee="e-swimlane",et="e-kanban-table",en="e-kanban-header",ei="e-header-table",ea="e-header-cells",er="e-header-wrap",eo="e-header-title",el="e-header-text",es="e-header-icon",ed="e-stacked-header-row",ec="e-stacked-header-cell",ep="e-content-cells",eh="e-kanban-content",eu="e-content-table",eg="e-toggle-header",em="e-header-row",ef="e-content-row",ey="e-swimlane-row",ev="e-swimlane-row-expand",eb="e-swimlane-row-collapse",eS="e-item-count",eC="e-card-wrapper",ew="e-card-virtual-wrapper",ek="e-card",ex="e-droppable",eE="e-drag",eA="e-drop",eO="e-disabled",eD="e-card-header",eT="e-card-content",eM="e-card-header-caption",eF="e-card-header-title",ej="e-card-tags",eq="e-card-tag",eR="e-card-color",eL="e-card-label",eI="e-card-footer",ez="e-empty-card",eP="e-card-footer-css",eH="e-column-expand",eV="e-column-collapse",eN="e-collapse-header-text",eB="e-collapsed",e_="e-kanban-dialog",eW="e-kanban-form",eZ="e-kanban-error",eK="e-field",eU="e-target-dragged-clone",eY="e-cloned-card",eQ="e-kanban-dragged-card",eX="e-target-dropped-clone",eG="e-dropping",eJ="e-kanban-border",e$="e-toggle-visible",e0="e-multi-card-wrapper",e1="e-target-multi-clone",e3="e-column-key",e9="e-selection",e2="e-tooltip-text",e7="e-swimlane-header",e5="e-icon-menu",e8="e-toolbar-swimlane-name",e6="e-swimlane-overlay",e4="e-swimlane-content",te="e-swimlane-resource",tt="e-limits",tn="e-max-count",ti="e-min-count",ta="e-max-color",tr="e-min-color",to="e-close",tl="e-popup-content",ts="e-show-add-button",td="e-show-add-icon",tc="e-show-add-focus",tp="e-frozen-swimlane-row",th="e-frozen-row",tu=function(){function e(e){this.parent=e,this.columnToggleArray=[],this.selectionArray=[],this.lastCardSelection=null,this.lastSelectionRow=null,this.lastCard=null,this.selectedCardsElement=[],this.selectedCardsData=[],this.hideColumnKeys=[]}return e.prototype.clickHandler=function(e){var t="."+ek+",."+es+",."+ef+"."+ey+",."+ts+",."+tp+",."+ef+":not(."+ey+") ."+ep,n=(0,m.oq)(e.target,t);if(n){if(n.classList.contains(ek))this.parent.allowKeyboard&&this.parent.keyboardModule.cardTabIndexRemove(),this.cardClick(e);else if(n.classList.contains(es))this.columnExpandCollapse(e);else if(n.classList.contains(ef)&&n.classList.contains(ey))this.rowExpandCollapse(e);else if(n.classList.contains(ts))this.addButtonClick(n);else if(n.classList.contains(tp)){var i=[].slice.call(this.parent.element.querySelectorAll("."+ey)),a=this.parent.layoutModule.frozenSwimlaneRow.querySelector("."+J);this.rowExpandCollapse(e,i[this.parent.layoutModule.frozenOrder]),a.classList.contains(eb)?(0,m.s1)(a,[ev],[eb]):(0,m.s1)(a,[eb],[ev])}}},e.prototype.addButtonClick=function(e){var t=this,n={};if(0===this.parent.kanbanData.length)n[this.parent.cardSettings.headerField]=1;else if("number"==typeof this.parent.kanbanData[0][this.parent.cardSettings.headerField]){var i=this.parent.kanbanData.map(function(e){return parseInt(e[t.parent.cardSettings.headerField],10)});n[this.parent.cardSettings.headerField]=Math.max.apply(Math,i)+1}if(n[this.parent.keyField]=(0,m.oq)(e,"."+ep).getAttribute("data-key"),"Index"===this.parent.sortSettings.sortBy&&(n[this.parent.sortSettings.field]=1,(0,m.oq)(e,"."+ep).querySelector("."+ek))){var a="Ascending"===this.parent.sortSettings.direction?e.nextElementSibling.classList.contains(eJ)?e.nextElementSibling.nextElementSibling.lastElementChild:e.nextElementSibling.lastElementChild:e.nextElementSibling.classList.contains(eJ)?e.nextElementSibling.nextElementSibling.firstElementChild:e.nextElementSibling.firstElementChild,r=this.parent.getCardDetails(a);n[this.parent.sortSettings.field]=r[this.parent.sortSettings.field]+1}0!==this.parent.kanbanData.length&&this.parent.swimlaneSettings.keyField&&(0,m.oq)(e,"."+ef).previousElementSibling&&(n[this.parent.swimlaneSettings.keyField]=(0,m.oq)(e,"."+ef).previousElementSibling.getAttribute("data-key")),this.parent.openDialog("Add",n)},e.prototype.doubleClickHandler=function(e){(0,m.oq)(e.target,"."+ek)&&this.cardDoubleClick(e)},e.prototype.cardClick=function(e,t){var n=this,i=(0,m.oq)(t||e.target,"."+ek),a=this.parent.getCardDetails(i);a&&(this.parent.activeCardData={data:a,element:i},this.parent.trigger("cardClick",{data:a,element:i,cancel:!1,event:e},function(t){if(!t.cancel){if(i.classList.contains(e9)&&"click"===e.type)(0,m.IV)([i],e9),n.parent.enableVirtualization?n.parent.virtualLayoutModule.disableAttributeSelection(i):n.parent.layoutModule.disableAttributeSelection(i);else{var a=e.ctrlKey;n.parent.isAdaptive&&n.parent.touchModule&&(a=n.parent.touchModule.mobilePopup&&n.parent.touchModule.tabHold||a),n.cardSelection(i,a,e.shiftKey)}n.parent.isAdaptive&&n.parent.touchModule&&n.parent.touchModule.updatePopupContent();var r=(0,m.oq)(i,"."+ep);n.parent.allowKeyboard&&([].slice.call(r.querySelectorAll("."+ek)).forEach(function(e){e.setAttribute("tabindex","0")}),n.parent.keyboardModule.addRemoveTabIndex("Remove"))}}))},e.prototype.cardDoubleClick=function(e){var t=this,n=(0,m.oq)(e.target,"."+ek),i=this.parent.getCardDetails(n);this.parent.activeCardData={data:i,element:n},this.cardSelection(n,!1,!1);var a={data:i,element:n,cancel:!1,event:e};this.parent.trigger("cardDoubleClick",a,function(e){e.cancel||t.parent.dialogModule.openDialog("Edit",a.data)})},e.prototype.rowExpandCollapse=function(e,t){var n=this,i=e instanceof HTMLElement?e:e.target,a=(0,m.le)(t)?i:t;this.parent.trigger(S,{cancel:!1,target:i,requestType:"rowExpandCollapse"},function(e){if(!e.cancel){var t,r=(0,m.oq)(a,"."+ey),o=r.getAttribute("data-key"),l=n.parent.element.querySelector("."+ef+":nth-child("+(r.rowIndex+2)+")"),s=r.querySelector("."+ev+",."+eb),d=!!r.classList.contains(eB);d?((0,m.IV)([l,r],eB),(0,m.s1)(s,[ev],[eb]),n.parent.swimlaneToggleArray.splice(n.parent.swimlaneToggleArray.indexOf(o),1),t="0"):((0,m.cn)([l,r],eB),(0,m.s1)(s,[eb],[ev]),n.parent.swimlaneToggleArray.push(o),t="-1"),s.setAttribute("aria-label",d?o+" Expand":o+" Collapse"),r.setAttribute("aria-expanded",d.toString()),l.setAttribute("aria-expanded",d.toString()),[].slice.call(l.querySelectorAll("."+ep)).forEach(function(e){e.setAttribute("tabindex",t)}),n.parent.notify(O,{}),n.parent.trigger(C,{target:i,requestType:"rowExpandCollapse"})}})},e.prototype.columnExpandCollapse=function(e){var t=this,n=e instanceof HTMLElement?e:e.target;this.parent.trigger(S,{cancel:!1,target:n,requestType:"columnExpandCollapse"},function(e){if(!e.cancel){var i=(0,m.oq)(n,"."+ea),a=i.cellIndex;t.columnToggle(i);var r=t.parent.element.querySelectorAll("."+ea+"."+eB).length;if(r===t.parent.columns.length-t.hideColumnKeys.length){var o="."+ea+":not(."+ec+"):nth-child("+(a+1===r?1:a+2)+")",l=t.parent.element.querySelector(o);(0,m.cn)([l],eB),t.columnToggle(l)}t.parent.notify(O,{}),t.parent.trigger(C,{target:n,requestType:"columnExpandCollapse"})}})},e.prototype.columnToggle=function(e){var t=this,n=e.cellIndex,i="."+ef+":not(."+ey+")",a=[].slice.call(this.parent.element.querySelectorAll(i)),r="."+et+" col:nth-child("+(n+1)+")",o=e.querySelector("."+eH+",."+eV),l=[].slice.call(this.parent.element.querySelectorAll(r));if(e.classList.contains(eB)){(0,m.IV)(l,eB),this.parent.isAdaptive&&(this.parent.enableVirtualization?l.forEach(function(e){return e.style.width=(0,m.Ac)(t.parent.virtualLayoutModule.getWidth())}):l.forEach(function(e){return e.style.width=(0,m.Ac)(t.parent.layoutModule.getWidth())})),(0,m.s1)(o,[eH],[eV]);for(var s=0;s<a.length;s++){var d=a[s];!function(t){var i=t.querySelector("."+ep+":nth-child("+(n+1)+")");(0,m.IV)([i,e],eB),(0,m.Od)(i.querySelector("."+eN)),e.setAttribute("aria-expanded","true"),i.setAttribute("aria-expanded","true"),[].slice.call(i.parentElement.querySelectorAll("."+eB)).forEach(function(e){var t=e.querySelector("."+eN);t.style.height="auto",t&&i.getBoundingClientRect().height<t.getBoundingClientRect().height+10&&(t.style.height=i.getBoundingClientRect().height-4+"px")})}(d)}this.columnToggleArray.splice(this.columnToggleArray.indexOf(e.getAttribute("data-key")),1),this.parent.columns[n].setProperties({isExpanded:!0},!0),e.querySelector(".e-header-icon").setAttribute("aria-label",e.getAttribute("data-key")+" Expand")}else{(0,m.cn)(l,eB),this.parent.isAdaptive&&l.forEach(function(e){return e.style.width=(0,m.Ac)(50)}),(0,m.s1)(o,[eV],[eH]);for(var c=e.getAttribute("data-key"),p=this,h=0;h<a.length;h++){var d=a[h];!function(t){var n=t.querySelector("."+ep+'[data-key="'+c+'"]'),i=n.cellIndex,a=void 0;if(p.parent.enableVirtualization){var r=p.parent.dataModule.isRemote()?p.parent.columnDataCount[p.parent.columns[i].keyField]:p.parent.virtualLayoutModule.columnData[p.parent.columns[i].keyField].length;a=(p.parent.columns[i].showItemCount?"["+r+"] ":"")+p.parent.columns[i].headerText}else a=(p.parent.columns[i].showItemCount?"["+n.querySelectorAll("."+ek).length+"] ":"")+p.parent.columns[i].headerText;n.appendChild((0,m.az)("div",{className:eN,innerHTML:a})),(0,m.cn)([n,e],eB),e.setAttribute("aria-expanded","false"),n.setAttribute("aria-expanded","false"),[].slice.call(n.parentElement.querySelectorAll("."+eB)).forEach(function(e){var t=e.querySelector("."+eN);t&&n.getBoundingClientRect().height<t.getBoundingClientRect().height+10&&(t.style.height=n.getBoundingClientRect().height-4+"px")})}(d)}this.columnToggleArray.push(e.getAttribute("data-key")),this.parent.columns[n].setProperties({isExpanded:!1},!0),e.querySelector(".e-header-icon").setAttribute("aria-label",c+" Collapse")}},e.prototype.cardSelection=function(e,t,n){var i=this;if(e){var a=this.parent.getSelectedCards();if("None"!==this.parent.cardSettings.selectionType){var r=(0,m.oq)(e,"."+ef);if(((0,m.le)(this.lastSelectionRow)?r.rowIndex:this.lastSelectionRow.rowIndex)!==r.rowIndex&&(t||n)&&"Multiple"===this.parent.cardSettings.selectionType)return;if(0===a.length||t&&"Single"!==this.parent.cardSettings.selectionType||((0,m.IV)(a,e9),this.parent.enableVirtualization?this.parent.virtualLayoutModule.disableAttributeSelection(a):this.parent.layoutModule.disableAttributeSelection(a),a.forEach(function(e){i.selectionArray.splice(i.selectionArray.indexOf(e.getAttribute("data-id")),1),i.selectedCardsElement.splice(i.selectedCardsElement.indexOf(e),1),i.selectedCardsData.splice(i.selectedCardsData.indexOf(i.parent.getCardDetails(e),1))})),a.length>0&&n&&"Multiple"===this.parent.cardSettings.selectionType){var o=[],l=void 0,s=void 0,d=void 0,c=[].slice.call(r.querySelectorAll("."+ek));c.forEach(function(e){return o.push(e.getAttribute("data-id"))});var p=e.getAttribute("data-id"),h=this.lastCard.getAttribute("data-id"),u=s=o.indexOf(p),g=l=o.indexOf(h),f=u>g?"next":"prev";for("prev"===f&&(l=u,s=g),d=l;d<=s;d++){var y=c[d];(0,m.cn)([y],e9),y.setAttribute("aria-selected","true"),y.setAttribute("tabindex","0"),this.selectionArray.push(y.getAttribute("data-id")),this.selectedCardsElement.push(y),this.selectedCardsData.push(this.parent.getCardDetails(y)),this.lastCardSelection=y,"prev"===f&&(this.lastCardSelection=c[l])}}else if((0,m.cn)([e],e9),e.setAttribute("aria-selected","true"),e.setAttribute("tabindex","0"),this.selectionArray.push(e.getAttribute("data-id")),this.selectedCardsElement.push(e),this.selectedCardsData.push(this.parent.getCardDetails(e)),this.lastCard=this.lastCardSelection=e,this.lastSelectionRow=(0,m.oq)(e,"."+ef),this.lastSelectionRow.previousElementSibling){var v="."+ev+",."+eb,b=this.lastSelectionRow.previousElementSibling.querySelector(v);b&&b.classList.contains(eb)&&this.rowExpandCollapse(b)}}}},e.prototype.addColumn=function(e,t){var n=(0,m.Fs)(B,[this.parent,"columns",e,!0]);this.parent.columns.splice(t,0,n),this.parent.notify(D,{processedData:this.parent.kanbanData})},e.prototype.deleteColumn=function(e){var t=this.parent.element.querySelectorAll("."+ea).item(e);t&&t.classList.contains(eg)&&this.columnToggleArray.splice(this.columnToggleArray.indexOf(t.getAttribute("data-key"),0)),this.parent.columns.splice(e,1),0===this.parent.columns.length?((0,m.og)(this.parent.element.querySelector("."+en)),(0,m.og)(this.parent.element.querySelector("."+eh))):this.parent.notify(D,{processedData:this.parent.kanbanData})},e.prototype.showColumn=function(e){var t=this.hideColumnKeys.indexOf(e.toString());-1!==t&&(this.hideColumnKeys.splice(t,1),this.parent.notify(D,{processedData:this.parent.kanbanData}))},e.prototype.hideColumn=function(e){this.hideColumnKeys.push(e.toString()),this.parent.notify(D,{processedData:this.parent.kanbanData})},e.prototype.SingleCardSelection=function(e){if("None"!==this.parent.cardSettings.selectionType&&e[this.parent.cardSettings.headerField]){var t=this.parent.element.querySelector('.e-card[data-id="'+e[this.parent.cardSettings.headerField].toString()+'"]');t&&((0,m.cn)([t],e9),t.setAttribute("aria-selected","true"),t.setAttribute("tabindex","0"))}},e}(),tg=function(){function e(e){this.parent=e}return e.prototype.addCard=function(e,t){var n=this;this.parent.trigger(S,{cancel:!1,requestType:"cardCreate",addedRecords:e instanceof Array?e:[e],changedRecords:[],deletedRecords:[]},function(i){if(!i.cancel){var a=[];n.parent.sortSettings.field&&"Index"===n.parent.sortSettings.sortBy&&(e instanceof Array?a=e:a.push(e),a.forEach(function(e,t){if(!e[n.parent.sortSettings.field]){var i=n.parent.getColumnData(e[n.parent.keyField]);"Ascending"===n.parent.sortSettings.direction&&i.length>0?e[n.parent.sortSettings.field]=i[i.length-1][n.parent.sortSettings.field]+t+1:"Descending"===n.parent.sortSettings.direction&&i.length>0&&(e[n.parent.sortSettings.field]=i[0][n.parent.sortSettings.field]+t+1),0===i.length&&(e[n.parent.sortSettings.field]=1)}}),e instanceof Array||t||"Descending"!==n.parent.sortSettings.direction||n.parent.getColumnData(a[0][n.parent.keyField]).filter(function(e,i){e[n.parent.sortSettings.field]===a[0][n.parent.sortSettings.field]&&(t=i+1)}),0===t||t||"Descending"!==n.parent.sortSettings.direction||(t=0),a=n.priorityOrder(a,t));var r=e instanceof Array?e:[e],o=n.parent.sortSettings.field&&"Index"===n.parent.sortSettings.sortBy?a:[],l=e instanceof Array||a.length>0?"batch":"insert";n.parent.dataModule.updateDataManager(l,{addedRecords:r,changedRecords:o,deletedRecords:[]},"cardCreated",e,t)}})},e.prototype.getIndexFromData=function(e){var t=this.parent.element.querySelector("."+ek+'[data-id="'+e[this.parent.cardSettings.headerField]+'"]'),n=(0,m.oq)(t,"."+ep);return[].slice.call(n.querySelectorAll("."+ek)).indexOf(t)},e.prototype.updateCard=function(e,t,n,i,a,r,o){var l=this,s={requestType:"cardChange",cancel:!1,addedRecords:[],changedRecords:e instanceof Array?e:[e],deletedRecords:[]};t=(0,m.le)(t)?this.getIndexFromData(s.changedRecords[0]):t,this.parent.trigger(S,s,function(s){if(!s.cancel){if(l.parent.sortSettings.field&&"Index"===l.parent.sortSettings.sortBy){var d=[];e instanceof Array?d=e:d.push(e),e=l.priorityOrder(d,t)}var c={addedRecords:[],changedRecords:e instanceof Array?e:[e],deletedRecords:[]},p=e instanceof Array?"batch":"update";l.parent.dataModule.updateDataManager(p,c,"cardChanged",e,t,n,i,a,r,o)}})},e.prototype.deleteCard=function(e){var t=this,n={addedRecords:[],changedRecords:[],deletedRecords:[]};"string"==typeof e||"number"==typeof e?n.deletedRecords=this.parent.kanbanData.filter(function(n){return n[t.parent.cardSettings.headerField]===e}):n.deletedRecords=e instanceof Array?e:[e];var i={requestType:"cardRemove",cancel:!1,addedRecords:[],changedRecords:[],deletedRecords:n.deletedRecords};this.parent.trigger(S,i,function(e){if(!e.cancel){var i=n.deletedRecords.length>1?"batch":"delete",a=n.deletedRecords;t.parent.dataModule.updateDataManager(i,n,"cardRemoved",a[0])}})},e.prototype.priorityOrder=function(e,t){for(var n,i=this,a=e.map(function(e){return e[i.parent.cardSettings.headerField]}),r=e[e.length-1][this.parent.sortSettings.field],o=e.map(function(e){return e[i.parent.keyField]}),l=o.filter(function(e,t){return o.indexOf(e)===t}).sort(),s=[],d=[],c=function(o){var l=e.filter(function(e){return e[i.parent.keyField]===o});n=p.parent.enableVirtualization?p.parent.virtualLayoutModule.getColumnData(o):p.parent.layoutModule.getColumnData(o);for(var c=0;c<l.length;c++){var h=l[c];if(p.parent.swimlaneSettings.keyField){var u=p.parent.getSwimlaneData(h[p.parent.swimlaneSettings.keyField]);n=p.parent.getColumnData(o,u)}}if(l.forEach(function(e){return s.push(e)}),!(0,m.le)(t)){for(var g=function(e){n.filter(function(n,r){n[i.parent.cardSettings.headerField]===a[e]&&r<=t&&d.push(r)})},f=0;f<a.length;f++)g(f);if(d.length>0&&(t+=d.length),"Ascending"===p.parent.sortSettings.direction)for(var y=t;y<n.length;y++)-1===a.indexOf(n[y][p.parent.cardSettings.headerField])&&(n[y][p.parent.sortSettings.field]=++r,s.push(n[y]));else for(var y=t-1;y>=0;y--)-1===a.indexOf(n[y][p.parent.cardSettings.headerField])&&(n[y][p.parent.sortSettings.field]=++r,s.push(n[y]))}},p=this,h=0;h<l.length;h++)c(l[h]);return s},e}(),tm=function(){function e(e){this.insertClone="afterend",this.parent=e,this.dragObj={element:null,cloneElement:null,instance:null,targetClone:null,draggedClone:null,targetCloneMulti:null,selectedCards:[],pageX:0,pageY:0,navigationInterval:null,cardDetails:[],modifiedData:[]},this.dragEdges={left:!1,right:!1,top:!1,bottom:!1},this.isDragging=!1,this.isExternalDrop=!1}return e.prototype.wireDragEvents=function(e){var t;null!=!this.parent.element&&0===this.parent.externalDropId.length&&(t=this.parent.element.querySelector("."+eh)),this.dragObj.instance=new m._l(e,{clone:!0,enableTapHold:this.parent.isAdaptive,enableTailMode:!0,cursorAt:{top:-10,left:-10},dragArea:t,dragStart:this.dragStart.bind(this),drag:this.drag.bind(this),dragStop:this.dragStop.bind(this),enableAutoScroll:!1,helper:this.dragHelper.bind(this)})},e.prototype.dragHelper=function(e){if(this.parent.isAdaptive&&this.parent.touchModule.mobilePopup&&this.parent.touchModule.mobilePopup.element.classList.contains("e-popup-open")&&this.parent.touchModule.mobilePopup.hide(),this.dragObj.element=(0,m.oq)(e.sender.target,"."+ek),(0,m.le)(this.dragObj.element))return null;this.dragObj.element.style.width=(0,m.Ac)(this.dragObj.element.offsetWidth);var t=(0,m.az)("div",{innerHTML:this.dragObj.element.outerHTML});return this.dragObj.cloneElement=t.children.item(0),(0,m.cn)([this.dragObj.cloneElement],eY),this.dragObj.element.parentElement.appendChild(this.dragObj.cloneElement),this.dragObj.targetCloneMulti=(0,m.az)("div",{className:e1}),this.dragObj.targetClone=(0,m.az)("div",{className:eX,styles:"width:100%;height:"+(0,m.Ac)(this.dragObj.element.offsetHeight)}),this.dragObj.modifiedData=[],this.dragObj.cloneElement},e.prototype.dragStart=function(e){var t=this;if(this.dragObj.selectedCards=this.dragObj.element,this.borderElm=this.parent.element.querySelectorAll("."+eJ),this.dragObj.element.classList.contains(e9)){var n="."+ek+"."+e9+":not(."+eY+")",i=(0,m.oq)(this.dragObj.element,"."+ef);this.dragObj.selectedCards=[].slice.call(i.querySelectorAll(n)),this.dragObj.selectedCards.forEach(function(e){t.dragObj.cardDetails.push(t.parent.getCardDetails(e))})}else this.dragObj.cardDetails=[this.parent.getCardDetails(this.dragObj.element)];(0,m.le)(this.dragObj.selectedCards)||(0,m.le)(this.dragObj.selectedCards.length)||!(this.dragObj.selectedCards.length>=1)?(0,m.le)(this.dragObj.selectedCards)||(0,m.le)(this.dragObj.selectedCards.closest(".e-content-cells"))||this.dragObj.selectedCards.closest(".e-content-cells").classList.add("e-dragged-column"):this.dragObj.selectedCards[0].closest(".e-content-cells").classList.add("e-dragged-column");var a={cancel:!1,data:this.dragObj.cardDetails,event:e,element:this.dragObj.selectedCards};this.parent.trigger("dragStart",a,function(n){if(n.cancel){t.removeElement(t.dragObj.cloneElement),t.dragObj.instance.intDestroy(e),t.dragObj.element=null,t.dragObj.targetClone=null,t.dragObj.draggedClone=null,t.dragObj.cloneElement=null,t.dragObj.targetCloneMulti=null;return}if(t.dragObj.element.classList.contains(e9)){if(t.dragObj.selectedCards.forEach(function(e){t.draggedClone(e)}),t.dragObj.selectedCards.length>1){t.dragObj.cloneElement.innerHTML="";var i=(0,m.az)("div",{className:"e-multi-card-text",innerHTML:t.dragObj.selectedCards.length+" Cards"});t.dragObj.cloneElement.appendChild(i),(0,m.s1)(t.dragObj.cloneElement,["e-multi-card-clone"],[e9]),t.parent.enableVirtualization?t.parent.virtualLayoutModule.disableAttributeSelection(t.dragObj.cloneElement):t.parent.layoutModule.disableAttributeSelection(t.dragObj.cloneElement),t.dragObj.cloneElement.style.width="90px"}}else t.draggedClone(t.dragObj.element);m.bi.add(document.body,"keydown",t.keydownHandler,t),t.parent.notify(O,{})})},e.prototype.draggedClone=function(e){this.dragObj.draggedClone=(0,m.az)("div",{className:eU,styles:"width:"+(0,m.Ac)(e.offsetWidth-1)+";height:"+(0,m.Ac)(e.offsetHeight)}),e.insertAdjacentElement("afterend",this.dragObj.draggedClone),(0,m.cn)([e],eQ)},e.prototype.drag=function(e){var t,n,i,a=this;if(e.target){var r=(0,m.oq)(e.target,"."+Q+" ."+ek);(0,m.le)(r)||!this.parent.enableVirtualization||(0,m.le)(e.target.previousElementSibling)||(0,m.le)(e.target.previousElementSibling.querySelector(".e-target-dropped-clone"))||(r=e.target.previousElementSibling.querySelector(".e-target-dropped-clone").nextElementSibling);var o=e.target,l=this.parent.element.querySelector(".e-target-dropped-clone"),s=null;(0,m.le)(l)||(s=l.previousSibling),!(0,m.le)(e.target.parentElement)&&("SPAN"===e.target.nodeName&&e.target.classList.contains("e-empty-card")?o=e.target.parentElement:"DIV"===e.target.nodeName&&e.target.classList.contains("e-kanban-border")&&(!(0,m.le)(s)||!(0,m.le)(e.target.parentElement.querySelector(".e-empty-card")))&&(o=e.target.parentElement));var d=r||o,c="."+ef+":not(."+ey+") ."+ep+"."+ex,p=(0,m.oq)(d,c);if(d.nextElementSibling&&d.nextElementSibling.lastChild&&(i=d.nextElementSibling.lastChild.previousElementSibling),this.externalDrop(d),this.kanbanObj=this.parent.isExternalKanbanDrop?this.parent.externalDropObj:this.parent,this.calculateArgs(e),p&&"not-allowed"!==document.body.style.cursor){var h=this.getColumnKey(p),u=h.split(",");this.multiCloneRemove();var g=h===this.getColumnKey((0,m.oq)(this.dragObj.draggedClone,"."+ep));if(1===u.length||g){if(d.classList.contains(eU)&&this.removeElement(this.dragObj.targetClone,this.kanbanObj),d.classList.contains(ek)||"beforebegin"===this.insertClone){var f=d.classList.contains(eU)&&d.previousElementSibling.classList.contains(eQ)?null:d.previousElementSibling;if(this.insertClone="afterend",(0,m.le)(f)){var y=d.classList.contains(eU)?this.dragObj.pageY/2:this.dragObj.pageY,v=d.classList.contains(eU)?d.offsetHeight:d.offsetHeight/2;y-(this.kanbanObj.element.getBoundingClientRect().top+d.offsetTop)<v&&(this.insertClone="beforebegin")}d.classList.contains(ek)&&(this.parent.enableVirtualization&&(this.insertClone=this.isTargetElementVisible(d)?this.insertClone:"beforebegin"),d.insertAdjacentElement(this.insertClone,this.dragObj.targetClone))}else if(d.classList.contains(ep)&&!(0,m.oq)(d,"."+ey)){if(0!==d.querySelectorAll("."+eQ).length&&0===d.querySelectorAll("."+ek+":not(.e-kanban-dragged-card):not(.e-cloned-card)").length)return;d.querySelector("."+eC).appendChild(this.dragObj.targetClone)}else(d.classList.contains(eC)||d.classList.contains(ew))&&!(0,m.oq)(d,"."+ey)&&0===p.querySelectorAll("."+ek).length?d.appendChild(this.dragObj.targetClone):d.classList.contains(eJ)&&!(0,m.oq)(d,"."+ey)&&d.nextElementSibling&&d.nextElementSibling.classList.contains(eC)&&this.dragObj.targetClone&&(!i||!i.classList.contains(eX))&&!this.parent.enableVirtualization&&!this.isTargetElementVisible(d.nextElementSibling)&&d.nextElementSibling.appendChild(this.dragObj.targetClone)}else u.length>1&&(p.classList.contains(eG)||p.firstChild&&p.firstChild.classList.contains(eG))&&this.multiCloneCreate(u,p);this.kanbanObj.notify(O,{})}0===this.kanbanObj.element.querySelectorAll("."+eG).length&&this.cellDropping();var b=!1;p&&(b=p.classList.contains(eB)&&p.classList.contains(eG),"true"!==p.getAttribute("aria-expanded")&&p.parentElement.hasAttribute("aria-expanded")||(t=p.getBoundingClientRect(),this.updateDimension(t)),n=p.querySelector("."+eJ)),d&&"TABLE"===d.tagName&&!(0,m.le)(d.querySelector("."+ef))&&(t=d.querySelector("."+ef).getBoundingClientRect(),this.updateDimension(t,d)),b&&(this.toggleVisible(d),(0,m.cn)([p],e$));var S=[].slice.call(this.kanbanObj.element.querySelectorAll("."+e$));!(S.length>0)||d.classList.contains(e$)||(0,m.oq)(d,"."+e$)||(this.toggleVisible(d,S.slice(-1)[0]),(0,m.IV)(S,e$)),this.kanbanObj.notify(O,{});var C=(0,m.oq)(d,"."+e3);if(C){var w=[].slice.call(this.kanbanObj.element.querySelectorAll("."+e3+":not(."+eO+")")).filter(function(e){return a.getColumnKey(e)===a.getColumnKey(C)});w.length>0&&((0,m.cn)(w,"e-multi-active"),w[0].previousElementSibling&&(0,m.cn)([w[0].previousElementSibling],"e-multi-bottom-border"))}document.body.style.cursor=p&&p.classList.contains(eG)||p&&n&&n.classList.contains(eG)?"":"not-allowed",!r||(0,m.oq)(r,"."+ep).classList.contains(eG)||p&&n&&n.classList.contains(eG)||(r.style.cursor="not-allowed",document.body.style.cursor="not-allowed"),this.isExternalDrop&&"not-allowed"===document.body.style.cursor&&(document.body.style.cursor=""),"not-allowed"===document.body.style.cursor&&(this.removeElement(this.dragObj.targetClone,this.kanbanObj),this.multiCloneRemove()),this.updateScrollPosition();var k={data:this.dragObj.cardDetails,event:e,element:this.dragObj.selectedCards};this.kanbanObj.trigger("drag",k),this.parent.isExternalKanbanDrop=!1,this.isExternalDrop=!1}},e.prototype.removeElement=function(e,t){(t=t||this.parent).element.getElementsByClassName(e.className).length>0&&(0,m.Od)(e)},e.prototype.isTargetElementVisible=function(e){var t=(0,m.oq)(e,"."+eC);if(!(0,m.le)(t)){var n=t.getBoundingClientRect().bottom;if(e.getBoundingClientRect().bottom>n)return!1}return!0},e.prototype.externalDrop=function(e){var t=this;this.parent.externalDropId.forEach(function(n){var i=(0,m.oq)(e,n);if(i){if(i.classList.contains("e-kanban")){t.parent.externalDropObj=document.querySelector(n).ej2_instances[0],t.parent.isExternalKanbanDrop=!0;var a="."+ef+":not(."+ey+"):not(."+eB+") ."+ep,r=[].slice.call(t.parent.externalDropObj.element.querySelectorAll(a));(0,m.cn)(r,eG)}else t.isExternalDrop=!0}})},e.prototype.multiCloneCreate=function(e,t){var n=t.offsetHeight,i=t.querySelector("."+tt);i&&(n-=i.offsetHeight),this.dragObj.targetCloneMulti.style.height=(0,m.Ac)(n),t.querySelector("."+ts)&&(0,m.cn)([t.querySelector("."+ts)],e0),(0,m.cn)([t.querySelector("."+eC)],e0),t.querySelector("."+eC).style.height="auto",t.style.borderStyle="none",this.removeElement(this.dragObj.targetClone);for(var a=0;a<e.length;a++){var r=e[a],o=(0,m.oq)(this.dragObj.draggedClone,"."+ep),l=this.kanbanObj.columns[o.cellIndex].transitionColumns,s=this.allowedTransition(this.dragObj.element.getAttribute("data-key"),r,l),d=s?"":" "+eO,c=(0,m.az)("div",{className:e3+d,attrs:{"data-key":r.trim()}}),p=(0,m.az)("div",{className:"e-text",innerHTML:r.trim()});t.appendChild(this.dragObj.targetCloneMulti).appendChild(c).appendChild(p),c.style.cursor=s?"":"not-allowed",c.style.lineHeight=c.style.height=(0,m.Ac)(n/e.length),p.style.top=(0,m.Ac)(n/2-p.offsetHeight/2)}},e.prototype.allowedTransition=function(e,t,n){for(var i=!0,a=t.split(","),r=0;r<a.length;r++){if(e===a[r].trim())return!0;if(n){if(1===n.length&&0===n[0].length)return!0;for(var o=0;o<n.length;o++){if(a[r].trim()===n[o].trim())return!0;i=!1}}}return i},e.prototype.cellDropping=function(){var e=this,t=(0,m.oq)(this.dragObj.draggedClone,"."+ep),n=(0,m.oq)(this.dragObj.draggedClone,"."+ef);if(t&&t.classList.contains(eA)&&(0,m.cn)([t],eG),this.addDropping(n,t),this.kanbanObj.swimlaneSettings.keyField&&this.kanbanObj.swimlaneSettings.allowDragAndDrop){var i="."+ef+":not(."+ey+"):not(."+eB+")",a=[].slice.call(this.kanbanObj.element.querySelectorAll(i));[].slice.call(a).forEach(function(i){n!==i&&e.addDropping(i,t)})}},e.prototype.addDropping=function(e,t){var n=this;if(t&&this.borderElm&&0!==this.borderElm.length){t.classList.contains(eG)&&(0,m.IV)([t],eG);var i=t.getBoundingClientRect();this.updateDimension(i)}else t&&e&&[].slice.call(e.children).forEach(function(e){var i=n.kanbanObj.columns[t.cellIndex].transitionColumns;e!==t&&e.classList.contains(eA)&&n.allowedTransition(t.getAttribute("data-key"),e.getAttribute("data-key"),i)&&(0,m.cn)([e],eG)})},e.prototype.updateDimension=function(e,t){[].slice.call(this.borderElm).forEach(function(n){n.parentElement&&("true"===n.parentElement.getAttribute("aria-expanded")||!n.parentElement.hasAttribute("aria-expanded"))&&(0,m.cn)([n],eG);var i=n.previousElementSibling;n.style.height=parseInt(e.height.toString(),10)-(i&&i.classList.contains(ts)?i.offsetHeight+i.offsetTop:0)+"px",t&&"TABLE"===t.tagName||(n.style.width=parseInt(e.width.toString(),10)+"px"),n.style.left=n.parentElement.getBoundingClientRect().left-(0,m.oq)(n,".e-kanban").getBoundingClientRect().left+"px"})},e.prototype.keydownHandler=function(e){"Escape"===e.code&&this.dragObj.cloneElement&&(m.bi.remove(this.dragObj.cloneElement,"keydown",this.keydownHandler),this.dragObj.element.removeAttribute("aria-grabbed"),this.dragStopClear(),this.dragStopPostClear())},e.prototype.dragStop=function(e){var t,n,i,a,r,o=this,l=(0,m.oq)(this.dragObj.targetClone,"."+ep);if(this.parent.enableVirtualization&&!(0,m.le)(l)&&l.classList.add("e-dropped-column"),m.bi.remove(document.body,"keydown",this.keydownHandler),[].slice.call(this.borderElm).forEach(function(e){e.classList.remove(eG)}),this.dragObj.targetClone.parentElement){var s=(a=this.dragObj.selectedCards&&this.dragObj.selectedCards.length>1&&"Index"===this.parent.sortSettings.sortBy)?"."+ek+":not(."+eY+"),."+eX:"."+ek+":not(."+eQ+", ."+eY+"),."+eX;n=[].slice.call(this.dragObj.targetClone.parentElement.querySelectorAll(s)).indexOf(this.dragObj.targetClone),this.parent.enableVirtualization&&!(0,m.le)(this.dragObj.targetClone.nextElementSibling)&&(i=this.dragObj.targetClone.nextElementSibling.getAttribute("data-id"))}!(0,m.le)(this.kanbanObj)&&this.kanbanObj.element.querySelector("."+e1)&&(t=(0,m.oq)(e.target,"."+e3+":not(."+eO+")")),(l||t)&&(l?r=this.getColumnKey(l):(r=this.getColumnKey(t),l=(0,m.oq)(t,"."+ep)),this.dragObj.selectedCards instanceof HTMLElement?this.updateDroppedData(this.dragObj.selectedCards,r,l):this.dragObj.selectedCards.forEach(function(e){o.updateDroppedData(e,r,l)}),this.parent.sortSettings.field&&"Index"===this.parent.sortSettings.sortBy&&this.changeOrder(this.dragObj.modifiedData,e.helper)),0===this.dragObj.modifiedData.length&&(this.dragObj.modifiedData=this.dragObj.cardDetails);var d={cancel:!1,data:this.dragObj.modifiedData,event:e,element:this.dragObj.selectedCards,dropIndex:n};this.parent.trigger("dragStop",d,function(e){if(o.dragStopClear(),!e.cancel&&(l||t)){var n=e.data instanceof Array&&e.data.length>1?e.data:e.data[0],r=void 0,s=void 0;o.parent.enableVirtualization&&(r=l.closest(".e-kanban").querySelector(".e-dragged-column").getAttribute("data-key"),s=l.getAttribute("data-key")),o.parent.crudModule.updateCard(n,e.dropIndex,!0,i,r,s,a),o.parent.enableVirtualization&&(o.parent.virtualLayoutModule.refreshColumnData(r,s),o.parent.virtualLayoutModule.ensureColumnNotEmpty(r))}o.dragStopPostClear()})},e.prototype.dragStopClear=function(){this.removeElement(this.dragObj.draggedClone),this.removeElement(this.dragObj.targetClone,this.kanbanObj),this.removeElement(this.dragObj.cloneElement),[].slice.call(this.parent.element.querySelectorAll("."+eU)).forEach(function(e){(0,m.Od)(e)}),this.dragObj.element.style.removeProperty("width"),this.multiCloneRemove(),this.dragObj.selectedCards instanceof HTMLElement?(0,m.IV)([this.dragObj.selectedCards],eQ):(0,m.IV)(this.dragObj.selectedCards,eQ),clearInterval(this.dragObj.navigationInterval),this.dragObj.navigationInterval=null,"not-allowed"===document.body.style.cursor&&(document.body.style.cursor=""),[].slice.call(this.parent.element.querySelectorAll("."+ek+"[style]")).forEach(function(e){e.style.cursor=""});var e="."+ef+":not(."+ey+")";[].slice.call(this.parent.element.querySelectorAll(e+" ."+ep)).forEach(function(e){return(0,m.IV)([e],eG)}),this.parent.externalDropObj&&[].slice.call(this.parent.externalDropObj.element.querySelectorAll(e+" ."+ep)).forEach(function(e){return(0,m.IV)([e],eG)})},e.prototype.dragStopPostClear=function(){this.parent.isAdaptive&&(this.parent.touchModule.tabHold=!1),this.parent.element.querySelector(".e-dragged-column")&&this.parent.element.querySelector(".e-dragged-column").classList.remove("e-dragged-column"),this.parent.element.querySelector(".e-dropped-column")&&this.parent.element.querySelector(".e-dropped-column").classList.remove("e-dropped-column"),this.dragObj.cardDetails=this.dragObj.modifiedData=[],this.isDragging=!1,this.parent.isExternalKanbanDrop=!1,this.parent.externalDropObj=null},e.prototype.updateDroppedData=function(e,t,n){var i=this.parent.getCardDetails(e),a=(0,m.l7)({},i,null,!0);if(1===t.split(",").length&&(a[this.parent.keyField]=t),this.parent.swimlaneSettings.keyField&&this.parent.swimlaneSettings.allowDragAndDrop){var r=(0,m.oq)(n,"."+ef).previousElementSibling;if(this.parent.isAdaptive){var o=this.parent.layoutModule.kanbanRows[this.parent.layoutModule.swimlaneIndex].keyField;a[this.parent.swimlaneSettings.keyField]=o}else a[this.parent.swimlaneSettings.keyField]=this.getColumnKey(r)}this.dragObj.modifiedData.push(a)},e.prototype.changeOrder=function(e,t){var n,i=this,a=!1;if(!(n="Ascending"===this.kanbanObj.sortSettings.direction?t===this.dragObj.targetClone.previousElementSibling&&this.dragObj.targetClone.previousElementSibling&&this.dragObj.targetClone.previousElementSibling.previousElementSibling?this.dragObj.targetClone.previousElementSibling.previousElementSibling:this.dragObj.targetClone.previousElementSibling:this.dragObj.targetClone.nextElementSibling)||n.classList.contains(eQ)||n.classList.contains(eY)||n.classList.contains(eU)){if(this.dragObj.targetClone.nextElementSibling&&"Ascending"===this.kanbanObj.sortSettings.direction)n=this.dragObj.targetClone.nextElementSibling;else{if(!this.dragObj.targetClone.previousElementSibling||"Descending"!==this.kanbanObj.sortSettings.direction)return;n=this.dragObj.targetClone.previousElementSibling}}else a=!0;if(n.classList.contains(ek)){var r=this.kanbanObj.getCardDetails(n)[this.kanbanObj.sortSettings.field];e.length>1&&"Descending"===this.kanbanObj.sortSettings.direction&&(e=e.reverse()),e.forEach(function(e,t){a?e[i.kanbanObj.sortSettings.field]=++r:1!==r&&t<=e[i.kanbanObj.sortSettings.field]?e[i.kanbanObj.sortSettings.field]=--r:1===r&&(e[i.kanbanObj.sortSettings.field]=t+1)})}},e.prototype.toggleVisible=function(e,t){var n=this,i="."+ea+":not(."+ec+")";[].slice.call(this.kanbanObj.element.querySelectorAll(i)).forEach(function(i){n.getColumnKey(i)===n.getColumnKey(t||e)&&n.kanbanObj.actionModule.columnToggle(i)});var a=(0,m.oq)(this.dragObj.draggedClone,"."+ep);if(a){var r=(0,m.Ac)(a.offsetWidth-16);this.dragObj.draggedClone.style.width=r,this.dragObj.cloneElement.style.width=r}},e.prototype.multiCloneRemove=function(){var e=(0,m.le)(this.kanbanObj)?[]:[].slice.call(this.kanbanObj.element.querySelectorAll("."+e1));e.length>0&&([].slice.call(this.kanbanObj.element.querySelectorAll("."+e3)).forEach(function(e){return(0,m.Od)(e)}),e.forEach(function(e){var t=(0,m.oq)(e,"."+ep);t&&(t.style.borderStyle="",t.querySelector("."+ts)&&(0,m.IV)([t.querySelector("."+ts)],e0),(0,m.IV)([t.querySelector("."+eC)],e0))}),this.removeElement(this.dragObj.targetCloneMulti,this.kanbanObj))},e.prototype.calculateArgs=function(e){var t=this.getPageCoordinates(e);this.dragObj.pageY=t.pageY,this.dragObj.pageX=t.pageX,this.isDragging=!0,this.kanbanObj.isAdaptive&&this.kanbanObj.tooltipModule&&this.kanbanObj.tooltipModule.tooltipObj.close()},e.prototype.getPageCoordinates=function(e){var t=e.event;return t&&t.changedTouches?t.changedTouches[0]:e.changedTouches?e.changedTouches[0]:t||e},e.prototype.getColumnKey=function(e){return e&&e.getAttribute("data-key")?e.getAttribute("data-key").trim():""},e.prototype.updateScrollPosition=function(){var e=this;(0,m.le)(this.dragObj.navigationInterval)&&(this.dragObj.navigationInterval=window.setInterval(function(){e.autoScroll()},100))},e.prototype.autoScrollValidation=function(){var e=this.dragObj.pageY,t=this.dragObj.pageX,n={left:!1,right:!1,top:!1,bottom:!1},i=this.kanbanObj.element.querySelector("."+eh).getBoundingClientRect();e<i.top+30+window.pageYOffset&&e>i.top+window.pageYOffset&&(n.top=!0),e>i.bottom-30+window.pageYOffset&&e<i.bottom+window.pageYOffset&&(n.bottom=!0),t<i.left+30+window.pageXOffset&&t>i.left+window.pageXOffset&&(n.left=!0),t>i.right-30+window.pageXOffset&&t<i.right+window.pageXOffset&&(n.right=!0),this.dragEdges=n},e.prototype.autoScroll=function(){var e;if(this.autoScrollValidation(),this.kanbanObj.isAdaptive){if(this.dragEdges.top||this.dragEdges.bottom?e=this.dragObj.targetClone?(0,m.oq)(this.dragObj.targetClone,"."+eC):(0,m.oq)(this.dragObj.draggedClone,"."+eC):(this.dragEdges.right||this.dragEdges.left)&&(e=this.kanbanObj.element.querySelector("."+eh)),e){var t=e.offsetHeight<=e.scrollHeight,n=e.offsetWidth<=e.scrollWidth,i=e.scrollTop>=0&&e.scrollTop+e.offsetHeight<=e.scrollHeight,a=e.scrollLeft>=0&&e.scrollLeft+e.offsetWidth<=e.scrollWidth;t&&i&&(this.dragEdges.top||this.dragEdges.bottom)&&(e.scrollTop+=this.dragEdges.top?-66:30),n&&a&&(this.dragEdges.left||this.dragEdges.right)&&((this.parent.enableVirtualization?this.kanbanObj.virtualLayoutModule.getWidth():this.kanbanObj.layoutModule.getWidth())*(this.kanbanObj.columns.length-1)>e.scrollLeft||this.dragEdges.left)&&(e.scrollLeft+=this.dragEdges.left?-30:30)}}else{var r=this.kanbanObj.element.querySelector("."+eh),o=this.dragObj.targetClone.parentElement,l=r.offsetHeight<=r.scrollHeight,s=r.offsetWidth<=r.scrollWidth,d=l&&r.scrollTop>=0&&r.scrollTop+r.offsetHeight<=r.scrollHeight,c=s&&r.scrollLeft>=0&&r.scrollLeft+r.offsetWidth<=r.scrollWidth;d&&(this.dragEdges.top||this.dragEdges.bottom)&&(r.scrollTop+=this.dragEdges.top?-30:30,this.parent.swimlaneSettings.enableFrozenRows&&(this.dragObj.cloneElement.style.top=this.dragEdges.top?parseInt(this.dragObj.cloneElement.style.top,10)-30+"px":parseInt(this.dragObj.cloneElement.style.top,10)+30+"px"),o&&(o.scrollTop+=this.dragEdges.top?-30:30)),c&&(this.dragEdges.left||this.dragEdges.right)&&(r.scrollLeft+=this.dragEdges.left?-30:30,o&&(o.scrollLeft+=this.dragEdges.left?-30:30)),this.dragObj.pageY-window.scrollY<30?window.scrollTo(window.scrollX,window.scrollY-30):window.innerHeight-(this.dragObj.pageY-window.scrollY)<30&&window.scrollTo(window.scrollX,window.scrollY+30)}},e.prototype.unWireDragEvents=function(e){if(!(0,m.le)(e)&&!(0,m.le)(e.ej2_instances[0])){var t=e.ej2_instances[0];t&&!t.isDestroyed&&t.destroy()}},e}(),tf=n(58433),ty=n(81616),tv=n(67491),tb=(d=function(e,t){return(d=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}d(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),tS=function(e,t,n,i){var a,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(o=(r<3?a(o):r>3?a(t,n,o):a(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},tC="e-input-focus",tw=["title","style","class"],tk=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.previousValue=null,i.isAngular=!1,i.isHiddenInput=!1,i.isForm=!1,i.inputPreviousValue=null,i.isVue=!1,i.textboxOptions=t,i}return tb(t,e),t.prototype.onPropertyChanged=function(e,t){for(var n=0,i=Object.keys(e);n<i.length;n++)switch(i[n]){case"floatLabelType":tv.I.removeFloating(this.textboxWrapper),tv.I.addFloating(this.respectiveElement,this.floatLabelType,this.placeholder);break;case"enabled":tv.I.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container),this.bindClearEvent();break;case"width":tv.I.setWidth(e.width,this.textboxWrapper.container);break;case"value":var a=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.isBlank(this.value)||(this.value=this.value.toString()),this.isProtectedOnChange=a,tv.I.setValue(this.value,this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value),this.inputPreviousValue=this.respectiveElement.value,(this.isAngular||this.isVue)&&!0===this.preventChange?(this.previousValue=this.isAngular?this.value:this.previousValue,this.preventChange=!1):((0,m.le)(this.isAngular)||!this.isAngular||this.isAngular&&!this.preventChange||this.isAngular&&(0,m.le)(this.preventChange))&&this.raiseChangeEvent();break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.checkAttributes(!0),this.multiline&&!(0,m.le)(this.textarea)?tv.I.validateInputType(this.textboxWrapper.container,this.textarea):tv.I.validateInputType(this.textboxWrapper.container,this.element);break;case"readonly":tv.I.setReadonly(this.readonly,this.respectiveElement);break;case"type":"TEXTAREA"!==this.respectiveElement.tagName&&(this.respectiveElement.setAttribute("type",this.type),tv.I.validateInputType(this.textboxWrapper.container,this.element),this.raiseChangeEvent());break;case"showClearButton":tv.I.setClearButton(this.showClearButton,this.respectiveElement,this.textboxWrapper),this.bindClearEvent();break;case"enableRtl":tv.I.setEnableRtl(this.enableRtl,[this.textboxWrapper.container]);break;case"placeholder":tv.I.setPlaceholder(this.placeholder,this.respectiveElement),tv.I.calculateWidth(this.respectiveElement,this.textboxWrapper.container);break;case"autocomplete":"on"!==this.autocomplete&&""!==this.autocomplete?this.respectiveElement.autocomplete=this.autocomplete:this.removeAttributes(["autocomplete"]);break;case"cssClass":this.updateCssClass(e.cssClass,t.cssClass);break;case"locale":this.globalize=new m.eC(this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),tv.I.setPlaceholder(this.placeholder,this.respectiveElement)}},t.prototype.getModuleName=function(){return"textbox"},t.prototype.isBlank=function(e){return!e||/^\s*$/.test(e)},t.prototype.preRender=function(){if(this.cloneElement=this.element.cloneNode(!0),this.formElement=(0,m.oq)(this.element,"form"),(0,m.le)(this.formElement)||(this.isForm=!0),"EJS-TEXTBOX"===this.element.tagName){for(var e=(0,m.NA)("ej2_instances",this.element),t=this.multiline?this.createElement("textarea"):this.createElement("input"),n=0;n<this.element.attributes.length;n++){var i=this.element.attributes[n].nodeName;"id"!==i&&"class"!==i?(t.setAttribute(i,this.element.attributes[n].nodeValue),t.innerHTML=this.element.innerHTML,"name"===i&&this.element.removeAttribute("name")):"class"===i&&t.setAttribute(i,this.element.className.split(" ").filter(function(e){return 0!==e.indexOf("ng-")}).join(" "))}this.element.appendChild(t),this.element=t,(0,m.sO)("ej2_instances",e,this.element)}this.updateHTMLAttrToElement(),this.checkAttributes(!1),((0,m.le)(this.textboxOptions)||void 0===this.textboxOptions.value)&&""!==this.element.value&&this.setProperties({value:this.element.value},!0),"TEXTAREA"!==this.element.tagName&&this.element.setAttribute("type",this.type),"text"===this.type&&this.element.setAttribute("role","textbox"),this.globalize=new m.eC(this.locale);var a={placeholder:this.placeholder};if(this.l10n=new m.E7("textbox",a,this.locale),""!==this.l10n.getConstant("placeholder")&&this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),this.element.hasAttribute("id")||this.element.setAttribute("id",(0,m.QI)("textbox")),this.element.hasAttribute("name")||this.element.setAttribute("name",this.element.getAttribute("id")),"INPUT"===this.element.tagName&&this.multiline){this.isHiddenInput=!0,this.textarea=this.createElement("textarea"),this.element.parentNode.insertBefore(this.textarea,this.element),this.element.setAttribute("type","hidden"),this.textarea.setAttribute("name",this.element.getAttribute("name")),this.element.removeAttribute("name"),this.textarea.setAttribute("role",this.element.getAttribute("role")),this.element.removeAttribute("role"),this.textarea.setAttribute("id",(0,m.QI)("textarea"));for(var r=["placeholder","disabled","value","readonly","type","autocomplete"],n=0;n<this.element.attributes.length;n++){var i=this.element.attributes[n].nodeName;this.element.hasAttribute(i)&&0>tw.indexOf(i)&&!("id"===i||"type"===i||"e-mappinguid"===i)&&(this.textarea.setAttribute(i,this.element.attributes[n].nodeValue),0>r.indexOf(i)&&(this.element.removeAttribute(i),n--))}}},t.prototype.checkAttributes=function(e){for(var t=e?(0,m.le)(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["placeholder","disabled","value","readonly","type","autocomplete"],n=0;n<t.length;n++){var i=t[n];if(!(0,m.le)(this.element.getAttribute(i)))switch(i){case"disabled":if((0,m.le)(this.textboxOptions)||void 0===this.textboxOptions.enabled||e){var a="disabled"!==this.element.getAttribute(i)&&""!==this.element.getAttribute(i)&&"true"!==this.element.getAttribute(i);this.setProperties({enabled:a},!e)}break;case"readonly":if((0,m.le)(this.textboxOptions)||void 0===this.textboxOptions.readonly||e){var r="readonly"===this.element.getAttribute(i)||""===this.element.getAttribute(i)||"true"===this.element.getAttribute(i);this.setProperties({readonly:r},!e)}break;case"placeholder":((0,m.le)(this.textboxOptions)||void 0===this.textboxOptions.placeholder||e)&&this.setProperties({placeholder:this.element.placeholder},!e);break;case"autocomplete":if((0,m.le)(this.textboxOptions)||void 0===this.textboxOptions.autocomplete||e){var o="off"===this.element.autocomplete?"off":"on";this.setProperties({autocomplete:o},!e)}break;case"value":((0,m.le)(this.textboxOptions)||void 0===this.textboxOptions.value||e)&&""!==this.element.value&&this.setProperties({value:this.element.value},!e);break;case"type":((0,m.le)(this.textboxOptions)||void 0===this.textboxOptions.type||e)&&this.setProperties({type:this.element.type},!e)}}},t.prototype.render=function(){var e=this.cssClass;(0,m.le)(this.cssClass)||""===this.cssClass||(e=this.getInputValidClassList(this.cssClass)),this.respectiveElement=this.isHiddenInput?this.textarea:this.element,this.textboxWrapper=tv.I.createInput({element:this.respectiveElement,floatLabelType:this.floatLabelType,properties:{enabled:this.enabled,enableRtl:this.enableRtl,cssClass:e,readonly:this.readonly,placeholder:this.placeholder,showClearButton:this.showClearButton}}),this.updateHTMLAttrToWrapper(),this.isHiddenInput&&this.respectiveElement.parentNode.insertBefore(this.element,this.respectiveElement),this.wireEvents(),!(0,m.le)(this.value)&&(tv.I.setValue(this.value,this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value)),(0,m.le)(this.value)||(this.initialValue=this.value,this.setInitialValue()),"on"!==this.autocomplete&&""!==this.autocomplete?this.respectiveElement.autocomplete=this.autocomplete:(0,m.le)(this.textboxOptions)||void 0===this.textboxOptions.autocomplete||this.removeAttributes(["autocomplete"]),this.previousValue=this.value,this.inputPreviousValue=this.value,this.respectiveElement.defaultValue=this.respectiveElement.value,tv.I.setWidth(this.width,this.textboxWrapper.container),!(0,m.le)((0,m.oq)(this.element,"fieldset"))&&(0,m.oq)(this.element,"fieldset").disabled&&(this.enabled=!1),this.renderComplete()},t.prototype.updateHTMLAttrToWrapper=function(){if(!(0,m.le)(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var n=t[e];if(tw.indexOf(n)>-1){if("class"===n){var i=this.getInputValidClassList(this.htmlAttributes[""+n]);""!==i&&(0,m.cn)([this.textboxWrapper.container],i.split(" "))}else if("style"===n){var a=this.textboxWrapper.container.getAttribute(n);a=(0,m.le)(a)?this.htmlAttributes[""+n]:a+this.htmlAttributes[""+n],this.textboxWrapper.container.setAttribute(n,a)}else this.textboxWrapper.container.setAttribute(n,this.htmlAttributes[""+n])}}},t.prototype.updateHTMLAttrToElement=function(){if(!(0,m.le)(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var n=t[e];0>tw.indexOf(n)&&(this.multiline&&!(0,m.le)(this.textarea)?this.textarea.setAttribute(n,this.htmlAttributes[""+n]):this.element.setAttribute(n,this.htmlAttributes[""+n]))}},t.prototype.updateCssClass=function(e,t){tv.I.setCssClass(this.getInputValidClassList(e),[this.textboxWrapper.container],this.getInputValidClassList(t))},t.prototype.getInputValidClassList=function(e){var t=e;return(0,m.le)(e)||""===e||(t=e.replace(/\s+/g," ").trim()),t},t.prototype.setInitialValue=function(){this.isAngular||this.respectiveElement.setAttribute("value",this.initialValue)},t.prototype.wireEvents=function(){m.bi.add(this.respectiveElement,"focus",this.focusHandler,this),m.bi.add(this.respectiveElement,"blur",this.focusOutHandler,this),m.bi.add(this.respectiveElement,"keydown",this.keydownHandler,this),m.bi.add(this.respectiveElement,"input",this.inputHandler,this),m.bi.add(this.respectiveElement,"change",this.changeHandler,this),this.isForm&&m.bi.add(this.formElement,"reset",this.resetForm,this),this.bindClearEvent(),!(0,m.le)(this.textboxWrapper.container.querySelector(".e-float-text"))&&"Auto"===this.floatLabelType&&this.textboxWrapper.container.classList.contains("e-autofill")&&this.textboxWrapper.container.classList.contains("e-outline")&&m.bi.add(this.textboxWrapper.container.querySelector(".e-float-text"),"animationstart",this.animationHandler,this)},t.prototype.animationHandler=function(){this.textboxWrapper.container.classList.add("e-valid-input");var e=this.textboxWrapper.container.querySelector(".e-float-text");!(0,m.le)(e)&&(e.classList.add("e-label-top"),e.classList.contains("e-label-bottom")&&e.classList.remove("e-label-bottom"))},t.prototype.resetValue=function(e){var t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.value=e,this.isProtectedOnChange=t},t.prototype.resetForm=function(){if(this.isAngular?this.resetValue(""):this.resetValue(this.initialValue),!(0,m.le)(this.textboxWrapper)){var e=this.textboxWrapper.container.querySelector(".e-float-text");(0,m.le)(e)||"Always"===this.floatLabelType||((0,m.le)(this.initialValue)||""===this.initialValue?(e.classList.add("e-label-bottom"),e.classList.remove("e-label-top")):""!==this.initialValue&&(e.classList.add("e-label-top"),e.classList.remove("e-label-bottom")))}},t.prototype.focusHandler=function(e){var t={container:this.textboxWrapper.container,event:e,value:this.value};this.trigger("focus",t)},t.prototype.focusOutHandler=function(e){null===this.previousValue&&null===this.value&&""===this.respectiveElement.value||this.previousValue===this.value||this.raiseChangeEvent(e,!0);var t={container:this.textboxWrapper.container,event:e,value:this.value};this.trigger("blur",t)},t.prototype.keydownHandler=function(e){13!==e.keyCode&&9!==e.keyCode||(null===this.previousValue||""===this.previousValue)&&(null===this.value||""===this.value)&&""===this.respectiveElement.value||this.setProperties({value:this.respectiveElement.value},!0)},t.prototype.inputHandler=function(e){var t={event:e,value:this.respectiveElement.value,previousValue:this.inputPreviousValue,container:this.textboxWrapper.container};this.inputPreviousValue=this.respectiveElement.value,this.isAngular&&(this.localChange({value:this.respectiveElement.value}),this.preventChange=!0),this.isVue&&(this.preventChange=!0),this.trigger("input",t),e.stopPropagation()},t.prototype.changeHandler=function(e){this.setProperties({value:this.respectiveElement.value},!0),this.previousValue!=this.value&&this.raiseChangeEvent(e,!0),e.stopPropagation()},t.prototype.raiseChangeEvent=function(e,t){var n={event:e,value:this.value,previousValue:this.previousValue,container:this.textboxWrapper.container,isInteraction:!!t&&t,isInteracted:!!t&&t};this.preventChange=!1,this.trigger("change",n),this.previousValue=this.value,"INPUT"===this.element.tagName&&this.multiline&&"mozilla"===m.AR.info.name&&(this.element.value=this.respectiveElement.value)},t.prototype.bindClearEvent=function(){this.showClearButton&&(this.enabled?m.bi.add(this.textboxWrapper.clearButton,"mousedown touchstart",this.resetInputHandler,this):m.bi.remove(this.textboxWrapper.clearButton,"mousedown touchstart",this.resetInputHandler))},t.prototype.resetInputHandler=function(e){if(e.preventDefault(),!this.textboxWrapper.clearButton.classList.contains("e-clear-icon-hide")||this.textboxWrapper.container.classList.contains("e-static-clear")){tv.I.setValue("",this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value),this.setProperties({value:this.respectiveElement.value},!0);var t={event:e,value:this.respectiveElement.value,previousValue:this.inputPreviousValue,container:this.textboxWrapper.container};if(this.trigger("input",t),this.inputPreviousValue=this.respectiveElement.value,this.raiseChangeEvent(e,!0),(0,m.oq)(this.element,"form")){var n=this.element,i=document.createEvent("KeyboardEvent");i.initEvent("keyup",!1,!0),n.dispatchEvent(i)}}},t.prototype.unWireEvents=function(){m.bi.remove(this.respectiveElement,"focus",this.focusHandler),m.bi.remove(this.respectiveElement,"blur",this.focusOutHandler),m.bi.remove(this.respectiveElement,"keydown",this.keydownHandler),m.bi.remove(this.respectiveElement,"input",this.inputHandler),m.bi.remove(this.respectiveElement,"change",this.changeHandler),this.isForm&&m.bi.remove(this.formElement,"reset",this.resetForm),!(0,m.le)(this.textboxWrapper.container.querySelector(".e-float-text"))&&"Auto"===this.floatLabelType&&this.textboxWrapper.container.classList.contains("e-outline")&&this.textboxWrapper.container.classList.contains("e-autofill")&&m.bi.remove(this.textboxWrapper.container.querySelector(".e-float-text"),"animationstart",this.animationHandler)},t.prototype.destroy=function(){this.unWireEvents(),"INPUT"===this.element.tagName&&this.multiline&&((0,m.og)(this.textboxWrapper.container.getElementsByTagName("textarea")[0]),this.respectiveElement=this.element,this.element.removeAttribute("type")),this.respectiveElement.value=this.respectiveElement.defaultValue,this.respectiveElement.classList.remove("e-input"),this.removeAttributes(["aria-disabled","aria-readonly","aria-labelledby"]),(0,m.le)(this.textboxWrapper)||(this.textboxWrapper.container.insertAdjacentElement("afterend",this.respectiveElement),(0,m.og)(this.textboxWrapper.container)),this.textboxWrapper=null,tv.I.destroy(),e.prototype.destroy.call(this)},t.prototype.addIcon=function(e,t){tv.I.addIcon(e,t,this.textboxWrapper.container,this.respectiveElement,this.createElement)},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.addAttributes=function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var i=n[t];"disabled"===i?(this.setProperties({enabled:!1},!0),tv.I.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container)):"readonly"===i?(this.setProperties({readonly:!0},!0),tv.I.setReadonly(this.readonly,this.respectiveElement)):"class"===i?this.respectiveElement.classList.add(e[""+i]):"placeholder"===i?(this.setProperties({placeholder:e[""+i]},!0),tv.I.setPlaceholder(this.placeholder,this.respectiveElement)):("rows"===i&&this.respectiveElement.tagName,this.respectiveElement.setAttribute(i,e[""+i]))}},t.prototype.removeAttributes=function(e){for(var t=0;t<e.length;t++){var n=e[t];"disabled"===n?(this.setProperties({enabled:!0},!0),tv.I.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container)):"readonly"===n?(this.setProperties({readonly:!1},!0),tv.I.setReadonly(this.readonly,this.respectiveElement)):"placeholder"===n?(this.setProperties({placeholder:null},!0),tv.I.setPlaceholder(this.placeholder,this.respectiveElement)):this.respectiveElement.removeAttribute(n)}},t.prototype.focusIn=function(){document.activeElement!==this.respectiveElement&&this.enabled&&(this.respectiveElement.focus(),(this.textboxWrapper.container.classList.contains("e-input-group")||this.textboxWrapper.container.classList.contains("e-outline")||this.textboxWrapper.container.classList.contains("e-filled"))&&(0,m.cn)([this.textboxWrapper.container],[tC]))},t.prototype.focusOut=function(){document.activeElement===this.respectiveElement&&this.enabled&&(this.respectiveElement.blur(),(this.textboxWrapper.container.classList.contains("e-input-group")||this.textboxWrapper.container.classList.contains("e-outline")||this.textboxWrapper.container.classList.contains("e-filled"))&&(0,m.IV)([this.textboxWrapper.container],[tC]))},tS([(0,m.Z9)("text")],t.prototype,"type",void 0),tS([(0,m.Z9)(!1)],t.prototype,"readonly",void 0),tS([(0,m.Z9)(null)],t.prototype,"value",void 0),tS([(0,m.Z9)("Never")],t.prototype,"floatLabelType",void 0),tS([(0,m.Z9)("")],t.prototype,"cssClass",void 0),tS([(0,m.Z9)(null)],t.prototype,"placeholder",void 0),tS([(0,m.Z9)("on")],t.prototype,"autocomplete",void 0),tS([(0,m.Z9)({})],t.prototype,"htmlAttributes",void 0),tS([(0,m.Z9)(!1)],t.prototype,"multiline",void 0),tS([(0,m.Z9)(!0)],t.prototype,"enabled",void 0),tS([(0,m.Z9)(!1)],t.prototype,"showClearButton",void 0),tS([(0,m.Z9)(!1)],t.prototype,"enablePersistence",void 0),tS([(0,m.Z9)(null)],t.prototype,"width",void 0),tS([(0,m.ju)()],t.prototype,"created",void 0),tS([(0,m.ju)()],t.prototype,"destroyed",void 0),tS([(0,m.ju)()],t.prototype,"change",void 0),tS([(0,m.ju)()],t.prototype,"blur",void 0),tS([(0,m.ju)()],t.prototype,"focus",void 0),tS([(0,m.ju)()],t.prototype,"input",void 0),t=tS([m.Zl],t)}(m.wA),tx=n(3348),tE=n(58169),tA=function(){function e(e){this.preventUpdate=!1,this.parent=e}return e.prototype.openDialog=function(e,t){this.action=e,this.parent.activeCardData.data=t,this.renderDialog(t,e),this.dialogObj.show()},e.prototype.closeDialog=function(){this.dialogObj.hide()},e.prototype.renderDialog=function(e,t){this.element=(0,m.az)("div",{id:this.parent.element.id+"_dialog_wrapper"}),this.parent.element.appendChild(this.element);var n={buttons:this.getDialogButtons(t),content:this.getDialogContent(e,t),cssClass:e_,enableRtl:this.parent.enableRtl,header:this.parent.localeObj.getConstant("Add"===t?"addTitle":"Edit"===t?"editTitle":"deleteTitle"),height:"auto",isModal:!0,showCloseIcon:!0,width:"Delete"===t?400:350,visible:!1,beforeOpen:this.onBeforeDialogOpen.bind(this),beforeClose:this.onBeforeDialogClose.bind(this)};this.dialogObj=new tE.Vq((0,m.l7)(n,"Delete"!==t&&this.parent.dialogSettings.model||{}),this.element),"Delete"!==t&&this.applyFormValidation(),this.dialogObj.element.querySelector(".e-dlg-closeicon-btn").title=this.parent.localeObj.getConstant("close")},e.prototype.getDialogContent=function(e,t){if("Delete"===t)return this.parent.localeObj.getConstant("deleteContent");var n=(0,m.az)("div",{className:"e-kanban-form-wrapper"}),i=(0,m.az)("form",{id:this.parent.element.id+"EditForm",className:eW,attrs:{onsubmit:"return false;"}});if(this.parent.dialogSettings.template){e&&(this.destroyComponents(),[].slice.call(i.childNodes).forEach(function(e){return(0,m.Od)(e)}));var a=this.parent.element.id+"_dialogTemplate",r=this.parent.templateParser(this.parent.dialogSettings.template)(e,this.parent,"dialogTemplate",a,!1);(0,m.R3)(r,i),this.parent.renderTemplates()}else{var o=(0,m.az)("div",{className:"e-kanban-dialog-content"});i.appendChild(o);var l=(0,m.az)("table");o.appendChild(l);for(var s=this.getDialogFields(),d=0;d<s.length;d++){var c=s[d],p=(0,m.az)("tr");l.appendChild(p),p.appendChild((0,m.az)("td",{className:"e-label",innerHTML:c.text?c.text:c.key}));var h=(0,m.az)("td");p.appendChild(h),h.appendChild(this.renderComponents(c))}}return n.appendChild(i),n},e.prototype.getDialogFields=function(){var e=this.parent.dialogSettings.fields;return 0===e.length&&(e=[{text:"ID",key:this.parent.cardSettings.headerField,type:"TextBox"},{key:this.parent.keyField,type:"DropDown"},{key:this.parent.cardSettings.contentField,type:"TextArea"}],this.parent.sortSettings.field&&e.splice(e.length-1,0,{key:this.parent.sortSettings.field,type:"TextBox"}),this.parent.swimlaneSettings.keyField&&e.splice(e.length-1,0,{key:this.parent.swimlaneSettings.keyField,type:"DropDown"})),e},e.prototype.getDialogButtons=function(e){var t="Delete"===e?"e-dialog-yes":"Add"===e?"e-dialog-add":"e-dialog-edit",n="Delete"===e?"e-dialog-no":"e-dialog-cancel",i=[{buttonModel:{cssClass:"e-flat "+t,isPrimary:!0,content:this.parent.localeObj.getConstant("Add"===e||"Edit"===e?"save":"yes")},click:this.dialogButtonClick.bind(this)},{buttonModel:{cssClass:"e-flat "+n,isPrimary:!1,content:this.parent.localeObj.getConstant("Add"===e||"Edit"===e?"cancel":"no")},click:this.dialogButtonClick.bind(this)}];if("Edit"===e){var a={buttonModel:{cssClass:"e-flat e-dialog-delete",isPrimary:!1,content:this.parent.localeObj.getConstant("delete")},click:this.dialogButtonClick.bind(this)};i.splice(0,0,a)}return i},e.prototype.renderComponents=function(e){var t,n,i,a=(0,m.az)("div",{className:e.key+"_wrapper"}),r=(0,m.az)("input",{className:eK,attrs:{name:e.key}});a.appendChild(r);var o=this.parent.activeCardData.data?this.parent.activeCardData.data[e.key]:null;switch(e.type){case"DropDown":if(e.key===this.parent.keyField){var l=this.parent.enableVirtualization?this.parent.virtualLayoutModule.columnKeys:this.parent.layoutModule.columnKeys;if(this.parent.actionModule.hideColumnKeys.length>0){l=[];for(var s=0;s<this.parent.columns.length;s++)(this.parent.enableVirtualization?this.parent.virtualLayoutModule.isColumnVisible(this.parent.columns[s]):this.parent.layoutModule.isColumnVisible(this.parent.columns[s]))&&(l="number"==typeof this.parent.columns[s].keyField?l.concat(this.parent.columns[s].keyField.toString()):l.concat(this.parent.columns[s].keyField.split(",").map(function(e){return e.trim()})))}n={dataSource:l,value:o?o.toString():o}}else e.key===this.parent.swimlaneSettings.keyField&&(n={dataSource:[].slice.call(this.parent.enableVirtualization?this.parent.virtualLayoutModule.kanbanRows:this.parent.layoutModule.kanbanRows),fields:{text:"textField",value:"keyField"},value:o});i=new tf.N(n);break;case"Numeric":i=new ty.N({value:o});break;case"TextBox":i=new tk({value:o}),o&&this.parent.cardSettings.headerField===e.key&&(i.enabled=!1);break;case"TextArea":(0,m.Od)(r),t=(0,m.az)("div"),r=(0,m.az)("textarea",{className:eK,attrs:{name:e.key,rows:"3","aria-label":this.parent.cardSettings.contentField},innerHTML:o}),a.appendChild(t).appendChild(r)}return i&&i.appendTo(r),a},e.prototype.onBeforeDialogOpen=function(e){var t=this,n={data:this.parent.activeCardData.data,cancel:!1,element:this.element,target:this.parent.activeCardData.element,requestType:this.action};this.storeElement=document.activeElement,250>=parseInt(e.maxHeight,10)&&(e.maxHeight="250px"),this.parent.trigger("dialogOpen",n,function(n){e.cancel=n.cancel,n.cancel&&t.destroy()})},e.prototype.onBeforeDialogClose=function(e){var t=this,n=this.getFormElements(),i={};if(e.isInteracted&&(this.preventUpdate=!0),!this.preventUpdate)for(var a=0;a<n.length;a++){var r=n[a],o=r.name||this.getColumnName(r);if(!(0,m.le)(o)&&""!==o){var l=this.getValueFromElement(r);o===this.parent.cardSettings.headerField&&(l="string"===this.getIDType()?l:parseInt(l,10)),i[o]=l}}this.preventUpdate=!1;var s={data:i=(0,m.l7)(this.parent.activeCardData.data,i),cancel:!1,element:this.element,requestType:this.action};this.parent.trigger("dialogClose",s,function(n){e.cancel=n.cancel,n.cancel||(t.cardData=s.data,t.destroy(),t.parent.actionModule.SingleCardSelection(t.cardData))})},e.prototype.getIDType=function(){return 0!==this.parent.kanbanData.length?typeof this.parent.kanbanData[0][this.parent.cardSettings.headerField]:"string"},e.prototype.applyFormValidation=function(){for(var e=this,t=this.element.querySelector("."+eW),n={},i=0,a=this.parent.dialogSettings.fields;i<a.length;i++){var r=a[i];n[r.key]=r.validationRules&&Object.keys(r.validationRules).length>0?r.validationRules:null}this.formObj=new tx.Tl(t,{rules:n,customPlacement:function(t,n){var i=n.getAttribute("for");e.element.querySelector("#"+i+"_Error")||e.createTooltip(t,n,i,"")},validationComplete:function(t){var n=e.element.querySelector("#"+t.inputName+"_Error");n&&(n.style.display="failure"===t.status?"":"none")}})},e.prototype.createTooltip=function(e,t,n,i){var a,r,o=e.parentElement.getBoundingClientRect();this.element.classList.contains(e_)?(a=this.element,r=this.element.getBoundingClientRect()):r=(a=this.element.querySelector(".e-kanban-dialog .e-dlg-content")).getBoundingClientRect();var l=(0,m.az)("div",{className:"e-tooltip-wrap e-popup "+eZ,id:n+"_Error",styles:"display:"+i+";top:"+(o.bottom-r.top+a.scrollTop+9)+"px;left:"+(o.left-r.left+a.scrollLeft+o.width/2)+"px;"}),s=(0,m.az)("div",{className:"e-tip-content"});s.appendChild(t);var d=(0,m.az)("div",{className:"e-arrow-tip e-tip-top"});d.appendChild((0,m.az)("div",{className:"e-arrow-tip-outer e-tip-top"})),d.appendChild((0,m.az)("div",{className:"e-arrow-tip-inner e-tip-top"})),l.appendChild(s),l.appendChild(d),a.appendChild(l),l.style.left=parseInt(l.style.left,10)-l.offsetWidth/2+"px"},e.prototype.destroyToolTip=function(){this.element&&this.element.querySelectorAll("."+eZ).forEach(function(e){return(0,m.Od)(e)}),this.formObj&&this.formObj.element&&this.formObj.reset()},e.prototype.dialogButtonClick=function(e){var t=e.target.cloneNode(!0),n=this.formObj.element.id;if(document.getElementById(n)&&this.formObj.validate()&&(t.classList.contains("e-dialog-edit")||t.classList.contains("e-dialog-add"))){if(this.dialogObj.hide(),t.classList.contains("e-dialog-edit")){var i=this.parent.activeCardData,a=void 0;i.data[this.parent.keyField]===this.cardData[this.parent.keyField]&&i.element&&(a=[].slice.call(i.element.parentElement.children).indexOf(i.element)),this.parent.enableHtmlSanitizer&&"string"==typeof this.cardData[this.parent.cardSettings.contentField]&&(this.cardData[this.parent.cardSettings.contentField]=m.pJ.sanitize(this.cardData[this.parent.cardSettings.contentField])),this.parent.crudModule.updateCard(this.cardData,a)}t.classList.contains("e-dialog-add")&&this.parent.crudModule.addCard(this.cardData),this.parent.actionModule.SingleCardSelection(this.cardData),this.cardData=null}t.classList.contains("e-dialog-edit")||t.classList.contains("e-dialog-add")||(t.classList.contains("e-dialog-cancel")&&(this.preventUpdate=!0),this.dialogObj.hide(),t.classList.contains("e-dialog-yes")?this.parent.crudModule.deleteCard(this.parent.activeCardData.data):t.classList.contains("e-dialog-no")?this.openDialog("Edit",this.parent.activeCardData.data):t.classList.contains("e-dialog-delete")&&this.openDialog("Delete",this.parent.activeCardData.data))},e.prototype.getFormElements=function(){for(var e=[].slice.call(this.element.querySelectorAll("."+eK)),t=[],n=0;n<e.length;n++){var i=e[n];i.classList.contains("e-control")?t.push(i):i.querySelector(".e-control")?t.push(i.querySelector(".e-control")):t.push(i)}return t},e.prototype.getColumnName=function(e){var t=e.getAttribute("data-name")||"";if(""===t){var n=!1,i="";e.classList.contains("e-dropdownlist")||e.classList.contains("e-multiselect")?(i=e.classList.contains("e-dropdownlist")?"e-ddl":"e-multiselect",n=!0):e.classList.contains("e-numerictextbox")&&(i="e-numeric");var a=n?"."+i+":not(.e-control)":"."+i,r=(0,m.oq)(e,a)||e.querySelector("."+i);if(r){var o=r.querySelector("[name]");o&&(t=o.name)}}return t},e.prototype.getValueFromElement=function(e){return e.classList.contains("e-dropdownlist")?e.ej2_instances[0].value:e.classList.contains("e-multiselect")?e.ej2_instances[0].value:e.classList.contains("e-checkbox")?e.ej2_instances[0].checked:"checkbox"===e.type?e.checked:e.value},e.prototype.destroyComponents=function(){for(var e=this.getFormElements(),t=0;t<e.length;t++){var n=e[t].ej2_instances;n&&n.length>0&&n.forEach(function(e){return e.destroy()})}},e.prototype.destroy=function(){this.destroyToolTip(),this.destroyComponents(),this.dialogObj&&(this.dialogObj.destroy(),this.storeElement.focus(),this.dialogObj=null,(0,m.Od)(this.element),this.element=null)},e}(),tO=function(){function e(e){this.keyConfigs={firstCardSelection:"36",lastCardSelection:"35",upArrow:"38",downArrow:"40",rightArrow:"39",leftArrow:"37",multiSelectionEnter:"ctrl+13",multiSelectionSpace:"ctrl+32",multiSelectionByUpArrow:"shift+38",multiSelectionByDownArrow:"shift+40",shiftTab:"shift+tab",enter:"13",tab:"tab",delete:"46",escape:"27",space:"32"},this.parent=e,this.parent.element.tabIndex=-1===this.parent.element.tabIndex?0:this.parent.element.tabIndex,this.keyboardModule=new m.nv(this.parent.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),this.multiSelection=!1}return e.prototype.keyActionHandler=function(e){var t,n=this,i=this.parent.element.querySelectorAll("."+ek+"."+e9).item(0);if(i||(0,m.oq)(document.activeElement,"."+Q)){var a=[];switch(e.action){case"upArrow":case"downArrow":case"multiSelectionByUpArrow":case"multiSelectionByDownArrow":e.preventDefault(),this.processUpDownArrow(e.action,i);break;case"rightArrow":case"leftArrow":this.processLeftRightArrow(e);break;case"firstCardSelection":case"lastCardSelection":this.processCardSelection(e.action,i);break;case"multiSelectionEnter":case"multiSelectionSpace":document.activeElement&&this.parent.actionModule.cardSelection(document.activeElement,!0,!1);break;case"space":case"enter":this.processEnter(e,i);break;case"escape":if(document.activeElement.classList.contains(ek)||document.activeElement.classList.contains(ts)){if(document.activeElement.classList.contains(e9))(0,m.IV)([document.activeElement],e9),document.activeElement.focus();else{var r=(0,m.oq)(document.activeElement,"."+ep),o=[].slice.call(r.querySelectorAll("."+ek));(0,m.IV)(o,e9),r.focus(),this.cardTabIndexRemove(),this.addRemoveTabIndex("Add")}}break;case"tab":case"shiftTab":t=(0,m.oq)(document.activeElement,"."+ep),document.activeElement.classList.contains(ek)&&(document.activeElement.nextElementSibling||"tab"!==e.action||e.preventDefault(),!document.activeElement.previousElementSibling&&t.querySelector("."+ts)&&"tab"===e.action&&(0,m.cn)([t.querySelector("."+ts)],tc)),document.activeElement.classList.contains(ts)&&(!t.querySelector("."+ek)&&"tab"===e.action||"shiftTab"===e.action)&&e.preventDefault(),document.activeElement.classList.contains(Q)&&(this.cardTabIndexRemove(),this.parent.keyboardModule.addRemoveTabIndex("Add"));break;case"delete":[].slice.call(this.parent.element.querySelectorAll("."+ek+"."+e9)).forEach(function(e){a.push(n.parent.getCardDetails(e))}),this.parent.crudModule.deleteCard(a)}}},e.prototype.processCardSelection=function(e,t){if(t){(0,m.IV)([t],e9),this.parent.enableVirtualization?this.parent.virtualLayoutModule.disableAttributeSelection(t):this.parent.layoutModule.disableAttributeSelection(t);var n=this.parent.actionModule.selectionArray;n.splice(n.indexOf(t.getAttribute("data-id")),1)}this.cardTabIndexRemove();var i=[].slice.call(this.parent.element.querySelectorAll("."+ek)),a="firstCardSelection"===e?i[0]:i[i.length-1];this.parent.actionModule.cardSelection(a,!1,!1),this.addRemoveTabIndex("Remove"),a.focus(),[].slice.call((0,m.oq)(a,"."+ep).querySelectorAll("."+ek)).forEach(function(e){e.setAttribute("tabindex","0")})},e.prototype.processLeftRightArrow=function(e){document.activeElement.classList.contains(ep)&&("rightArrow"===e.action&&document.activeElement.nextElementSibling?document.activeElement.nextElementSibling.focus():"leftArrow"===e.action&&document.activeElement.previousElementSibling&&document.activeElement.previousElementSibling.focus())},e.prototype.processUpDownArrow=function(e,t){if("upArrow"===e&&document.activeElement){if(document.activeElement.classList.contains(ek)&&document.activeElement.previousElementSibling)document.activeElement.previousElementSibling.focus();else if(document.activeElement.classList.contains(ts)){document.activeElement.setAttribute("tabindex","-1"),(0,m.IV)([document.activeElement],tc);var n=(0,m.oq)(document.activeElement,"."+ep);n.querySelectorAll("."+ek).length>0&&[].slice.call(n.querySelectorAll("."+ek)).slice(-1)[0].focus()}this.removeSelection()}else if("downArrow"===e&&document.activeElement&&document.activeElement.classList.contains(ek)){if(document.activeElement.nextElementSibling)document.activeElement.nextElementSibling.focus();else if((0,m.oq)(document.activeElement,"."+eC).nextElementSibling){var i=(0,m.oq)(document.activeElement,"."+eC).nextElementSibling;i.setAttribute("tabindex","0"),(0,m.cn)([i],tc),i.focus()}this.removeSelection()}if(("multiSelectionByUpArrow"===e||"multiSelectionByDownArrow"===e)&&t&&"Multiple"===this.parent.cardSettings.selectionType){var a=void 0;(a="multiSelectionByUpArrow"===e?document.activeElement.previousElementSibling:document.activeElement.nextElementSibling)&&(this.parent.actionModule.cardSelection(a,!1,!0),a.focus(),this.multiSelection=!0)}},e.prototype.removeSelection=function(){if(this.multiSelection){var e=this.parent.getSelectedCards();e.length>0&&((0,m.IV)(e,e9),this.parent.enableVirtualization?this.parent.virtualLayoutModule.disableAttributeSelection(e):this.parent.layoutModule.disableAttributeSelection(e)),this.multiSelection=!1}},e.prototype.cardTabIndexRemove=function(){[].slice.call(this.parent.element.querySelectorAll("."+ek)).forEach(function(e){e.setAttribute("tabindex","-1")}),[].slice.call(this.parent.element.querySelectorAll("."+ts)).forEach(function(e){e.setAttribute("tabindex","-1"),(0,m.IV)([e],tc)})},e.prototype.processEnter=function(e,t){"space"===e.action&&e.preventDefault();var n=e.target;if(n.classList.contains(es)&&this.parent.actionModule.columnExpandCollapse(e),(n.classList.contains(ev)||n.classList.contains(eb))&&this.parent.actionModule.rowExpandCollapse(e),document.activeElement.classList.contains(ek)&&this.parent.actionModule.cardSelection(document.activeElement,!1,!1),document.activeElement.classList.contains(ts)&&(this.parent.dialogModule.dialogObj||this.parent.actionModule.addButtonClick(document.activeElement),document.activeElement.focus()),n.classList.contains(ep)){var i=[].slice.call(n.querySelectorAll("."+ek));this.addRemoveTabIndex("Remove"),i.length>0&&(n.querySelector("."+ek).focus(),i.forEach(function(e){e.setAttribute("tabindex","0")})),n.querySelector("."+ts)&&(n.querySelector("."+ts).setAttribute("tabindex","0"),n.querySelector("."+ts).focus())}t===document.activeElement&&1===this.parent.element.querySelectorAll("."+e9).length&&(this.parent.activeCardData={data:this.parent.getCardDetails(t),element:t},this.parent.dialogModule.dialogObj||this.parent.dialogModule.openDialog("Edit",this.parent.getCardDetails(t)),t.focus())},e.prototype.addRemoveTabIndex=function(e){var t="Add"===e?"0":"-1",n=[].slice.call(this.parent.element.querySelectorAll("."+es));n.length>0&&n.forEach(function(e){e.setAttribute("tabindex",t)});var i=[].slice.call(this.parent.element.querySelectorAll("."+ev));i.length>0&&i.forEach(function(e){e.setAttribute("tabindex",t)});var a="."+ef+":not(."+ey+") ."+ep;[].slice.call(this.parent.element.querySelectorAll(a)).forEach(function(e){e.setAttribute("tabindex",t)})},e.prototype.destroy=function(){this.keyboardModule.destroy()},e}(),tD=n(52385),tT=function(){function e(e){this.parent=e,this.renderTooltip()}return e.prototype.renderTooltip=function(){this.tooltipObj=new tD.u({cssClass:this.parent.cssClass+" e-kanban-tooltip",enableRtl:this.parent.enableRtl,mouseTrail:!this.parent.isAdaptive,offsetY:5,position:"BottomCenter",showTipPointer:!0,target:"."+e2,beforeRender:this.onBeforeRender.bind(this),beforeClose:this.onBeforeClose.bind(this)}),this.tooltipObj.appendTo(this.parent.element),this.tooltipObj.isStringTemplate=!0},e.prototype.onBeforeRender=function(e){if(this.parent.dragAndDropModule.isDragging){e.cancel=!0;return}if(this.parent.tooltipTemplate){t=(0,m.az)("div");var t,n=(0,m.oq)(e.target,"."+ek),i=this.parent.getCardDetails(n),a=this.parent.element.id+"_tooltipTemplate",r=this.parent.templateParser(this.parent.tooltipTemplate)(i,this.parent,"tooltipTemplate",a,!1);(0,m.R3)(r,t),this.parent.renderTemplates()}else t=(0,m.rN)(function(){return'<div class="e-card-header-caption">'+e.target.innerText+"</div>"});this.tooltipObj.setProperties({content:t},!0)},e.prototype.onBeforeClose=function(){this.parent.resetTemplates(["tooltipTemplate"])},e.prototype.destroy=function(){this.tooltipObj.destroy(),(0,m.cn)([this.parent.element],"e-control"),this.tooltipObj=null},e}(),tM=n(25080),tF=n(48622),tj=function(){function e(e){this.parent=e,this.tabHold=!1}return e.prototype.wireTouchEvents=function(){this.element=this.parent.element.querySelector("."+eh),this.touchObj=new m.Xh(this.element,{tapHold:this.tapHoldHandler.bind(this)})},e.prototype.tapHoldHandler=function(e){this.tabHold=!0;var t=(0,m.oq)(e.originalEvent.target,"."+ek);t&&"Multiple"===this.parent.cardSettings.selectionType&&(this.parent.actionModule.cardSelection(t,!0,!1),this.mobilePopup||(this.renderMobilePopup(),this.mobilePopup.show()),this.updatePopupContent())},e.prototype.renderMobilePopup=function(){if("Multiple"===this.parent.cardSettings.selectionType){var e=(0,m.az)("div",{className:"e-mobile-popup-wrapper e-popup-close",innerHTML:'<div class="e-popup-header"><button class="'+to+'"></button></div><div class="'+tl+'"></div>'});document.body.appendChild(e),(0,m.cn)([e],G),this.mobilePopup=new tM.GI(e,{targetType:"container",enableRtl:this.parent.enableRtl,hideAnimation:{name:"ZoomOut"},showAnimation:{name:"ZoomIn"},collision:{X:"fit",Y:"fit"},position:{X:"left",Y:"top"},viewPortElement:document.body,zIndex:1004,close:this.popupClose.bind(this)});var t=this.mobilePopup.element.querySelector("."+to),n=new tF.zx({cssClass:"e-flat e-round e-small",enableRtl:this.parent.enableRtl,iconCss:J+" e-close-icon"});n.appendTo(t),n.isStringTemplate=!0,m.bi.add(t,"click",this.closeClick,this)}},e.prototype.getPopupContent=function(){var e,t=this.parent.getSelectedCards();return t.length>1?e="("+t.length+") "+this.parent.localeObj.getConstant("cardsSelected"):1===t.length&&(e=" "+this.parent.getCardDetails(t[0])[this.parent.cardSettings.headerField]),e},e.prototype.updatePopupContent=function(){if(this.mobilePopup){var e=this.getPopupContent();e?this.mobilePopup.element.querySelector("."+tl).textContent=e:this.mobilePopup.hide()}},e.prototype.closeClick=function(){this.parent.touchModule.mobilePopup.hide()},e.prototype.popupClose=function(){this.popupDestroy()},e.prototype.popupDestroy=function(){if(this.mobilePopup&&this.mobilePopup.element){var e=this.mobilePopup.element.querySelector(".e-control.e-btn").ej2_instances[0];e&&e.destroy(),this.mobilePopup.destroy(),(0,m.Od)(this.mobilePopup.element),this.mobilePopup=null}},e.prototype.unWireTouchEvents=function(){this.touchObj&&this.touchObj.destroy(),this.touchObj=null,this.element=null},e.prototype.destroy=function(){this.popupDestroy(),this.unWireTouchEvents(),this.tabHold=!1},e}(),tq=n(63872),tR=function(){function e(e){this.parent=e}return e.prototype.renderSwimlaneHeader=function(){var e=(0,m.az)("div",{className:e7,innerHTML:'<div class="e-swimlane-header-toolbar"><div class="e-toolbar-menu"><div class="e-icons '+e5+'"></div></div><div class="e-toolbar-level-title"><div class="'+e8+'"></div></div></div>'});this.parent.element.appendChild(e),m.bi.add(e.querySelector("."+e5),"click",this.menuClick,this)},e.prototype.renderSwimlaneTree=function(){var e=this.parent.element.querySelector("."+e7).offsetHeight,t=window.innerHeight-e;this.popupOverlay=(0,m.az)("div",{className:e6,styles:"height: "+t+"px;"});var n=(0,m.az)("div",{className:e4,styles:"top:"+e+"px;"}),i=(0,m.az)("div",{className:te+" e-popup-close",styles:"height: "+t+"px;"});n.appendChild(i),n.appendChild(this.popupOverlay),this.parent.element.appendChild(n);var a=(0,m.az)("div",{className:"e-swimlane-tree"});i.appendChild(a);var r=this.parent.enableVirtualization?this.parent.virtualLayoutModule.kanbanRows:this.parent.layoutModule.kanbanRows;this.treeViewObj=new tq.LQ({cssClass:this.parent.cssClass,enableRtl:this.parent.enableRtl,fields:{dataSource:r,id:"keyField",text:"textField"},nodeTemplate:this.parent.swimlaneSettings.template,nodeClicked:this.treeSwimlaneClick.bind(this),drawNode:this.drawNode.bind(this)}),this.treeViewObj.appendTo(a);var o={targetType:"relative",actionOnScroll:"none",enableRtl:this.parent.enableRtl,zIndex:10,hideAnimation:{name:"SlideLeftOut",duration:500},showAnimation:{name:"SlideLeftIn",duration:500},viewPortElement:this.parent.element.querySelector("."+eh)};o.content=this.treeViewObj.element,this.treePopup=new tM.GI(i,o)},e.prototype.menuClick=function(){if(this.parent.element.querySelector("."+te).classList.contains("e-popup-open"))this.treePopup.hide(),(0,m.IV)([this.popupOverlay],"e-enable");else{var e=[].slice.call(this.treeViewObj.element.querySelectorAll(".e-list-item"));(0,m.IV)(e,"e-active"),(0,m.cn)([e[this.parent.layoutModule.swimlaneIndex]],"e-active"),this.treePopup.show(),(0,m.cn)([this.popupOverlay],"e-enable")}},e.prototype.treeSwimlaneClick=function(e){this.treePopup.hide();var t=[].slice.call(this.treeViewObj.element.querySelectorAll(".e-list-item"));this.parent.layoutModule.swimlaneIndex=t.indexOf(e.node),this.parent.layoutModule.scrollLeft=0,this.parent.notify(D,{processedData:this.parent.kanbanData}),e.event.preventDefault()},e.prototype.hidePopup=function(){this.treePopup.hide(),(0,m.IV)([this.popupOverlay],"e-enable")},e.prototype.getWidth=function(){return 80*window.innerWidth/100},e.prototype.drawNode=function(e){if(this.parent.swimlaneSettings.template&&this.parent.isReact){var t=this.parent.element.id+"_treeviewTemplate",n=this.parent.templateParser(this.parent.swimlaneSettings.template)(e.nodeData,this.parent,"nodeTemplate",t,!1);(0,m.R3)(n,e.node.querySelector(".e-list-text"))}},e}(),tL=(c=function(e,t){return(c=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),tI=function(e){function t(t){var n=e.call(this,t)||this;return n.kanbanRows=[],n.parent=t,n.columnKeys=[],n.swimlaneIndex=0,n.swimlaneData={},n.scrollLeft=0,n.frozenOrder=0,n.parent.on(D,n.initRender,n),n.parent.on(O,n.scrollUiUpdate,n),n}return tL(t,e),t.prototype.initRender=function(){if(0!==this.parent.columns.length){if(this.columnData=this.getColumnCards(),this.kanbanRows=this.getRows(),this.swimlaneData=this.getSwimlaneCards(),this.parent.isAdaptive){var e=this.parent.element.querySelector("."+eh);e&&(this.scrollLeft=e.scrollLeft)}this.destroy(),this.parent.on(D,this.initRender,this),this.parent.on(O,this.scrollUiUpdate,this),this.parent.isAdaptive&&this.parent.swimlaneSettings.keyField&&0!==this.parent.kanbanData.length&&this.renderSwimlaneHeader();var t=(0,m.az)("div",{className:en});this.parent.element.appendChild(t),this.renderHeader(t),this.renderContent(),this.renderCards(),this.renderValidation(),this.parent.renderTemplates(),this.parent.notify(O,{}),this.wireEvents(),this.parent.isInitialRender&&(this.parent.isInitialRender=!1)}},t.prototype.renderHeader=function(e){var t=(0,m.az)("div",{className:this.parent.swimlaneSettings.keyField?ee:""});e.appendChild(t);var n=(0,m.az)("table",{className:et+" "+ei,attrs:{role:"table","aria-label":"Kanban board header"}});t.appendChild(n),this.renderColGroup(n);var i=(0,m.az)("thead");n.appendChild(i),this.parent.stackedHeaders.length>0&&i.appendChild(this.createStackedRow(this.parent.stackedHeaders));var a=(0,m.az)("tr",{className:em});i.appendChild(a);for(var r=this,o=0,l=this.parent.columns;o<l.length;o++)!function(e){if(r.isColumnVisible(e)){var t=r.parent.actionModule.columnToggleArray.indexOf(e.keyField.toString()),n=(0,m.az)("th",{className:-1===t?ea:ea+" "+eB,attrs:{"data-role":"kanban-column","data-key":e.keyField.toString(),scope:"row"}}),i=[];e.allowToggle&&(i.push(eg),e.isExpanded||i.push(eB)),(0,m.cn)([n],i);var o=(0,m.az)("div",{className:er});n.appendChild(o);var l=r.columnData[e.keyField].length,s=(0,m.az)("div",{className:eo});if(o.appendChild(s),e.template){var d={keyField:e.keyField,headerText:e.headerText,minCount:e.minCount,maxCount:e.maxCount,allowToggle:e.allowToggle,isExpanded:e.isExpanded,showItemCount:e.showItemCount,count:l};(0,m.cn)([n],$);var c=r.parent.element.id+"_columnTemplate",p=r.parent.templateParser(e.template)(d,r.parent,"columnTemplate",c,!1);(0,m.R3)(p,s)}else{var h=(0,m.az)("div",{className:el,innerHTML:e.headerText});if(s.appendChild(h),e.showItemCount){var u=(0,m.az)("div",{className:eS,innerHTML:"- "+l.toString()+" "+r.parent.localeObj.getConstant("items")});s.appendChild(u)}}if(e.allowToggle){var g=!!e.isExpanded&&-1===t,f=g?eH:eV,y=(0,m.az)("div",{className:es+" "+J+" "+f,attrs:{tabindex:"0",role:"button"}});y.setAttribute("aria-label",g?e.keyField+" Expand":e.keyField+" Collapse"),n.setAttribute("aria-expanded",g.toString()),o.appendChild(y)}var v=[{keyField:e.keyField,textField:e.headerText,count:l}];r.parent.trigger(x,{data:v,element:a,cancel:!1,requestType:"headerRow"},function(e){e.cancel||a.appendChild(n)})}}(l[o])},t.prototype.renderContent=function(){var e=(0,m.az)("div",{className:eh});this.parent.element.appendChild(e);var t=(0,m.az)("div",{className:this.parent.swimlaneSettings.keyField?ee:""});e.appendChild(t);var n=(0,m.az)("table",{className:et+" "+eu,attrs:{role:"presentation"}});t.appendChild(n),this.renderColGroup(n);var i=(0,m.az)("tbody");i.setAttribute("role","rowgroup"),n.appendChild(i);var a=!1;this.swimlaneRow=this.kanbanRows,this.initializeSwimlaneTree();for(var r=0,o=this.swimlaneRow;r<o.length;r++){var l=o[r];this.parent.swimlaneSettings.keyField&&0!==this.parent.swimlaneToggleArray.length&&(a=-1!==this.parent.swimlaneToggleArray.indexOf(l.keyField)),this.parent.swimlaneSettings.keyField&&!this.parent.isAdaptive&&this.renderSwimlaneRow(i,l,a),this.renderSingleContent(i,l,a)}},t.prototype.renderSingleContent=function(e,t,n){for(var i=n?ef+" "+eB:ef,a=(0,m.az)("tr",{className:i,attrs:{"aria-expanded":"true",role:"row"}}),r=0,o=this.parent.columns;r<o.length;r++){var l=o[r];if(this.isColumnVisible(l)){var s=this.parent.actionModule.columnToggleArray.indexOf(l.keyField.toString()),d=-1===s?ep:ep+" "+eB,c=(l.allowDrag?" "+eE:"")+(l.allowDrop?" "+eA+" "+ex:""),p=(0,m.az)("td",{className:d+c,attrs:{"data-role":"kanban-column","data-key":l.keyField.toString(),tabindex:"0",role:"treegrid","aria-label":l.keyField.toString()}});if(l.allowToggle&&!l.isExpanded||-1!==s){(0,m.cn)([p],eB);var h=(l.showItemCount?"["+this.getColumnData(l.keyField,this.swimlaneData[t.keyField]).length+"] ":"")+l.headerText;p.appendChild((0,m.az)("div",{className:eN,innerHTML:h})),p.setAttribute("aria-expanded","false")}if(l.showAddButton){var u=(0,m.az)("div",{className:ts,attrs:{tabindex:"-1"}});u.appendChild((0,m.az)("div",{className:td+" "+J})),p.appendChild(u)}a.appendChild(p)}}var g=[{keyField:t.keyField,textField:t.textField,count:t.count}];this.parent.trigger(x,{data:g,element:a,cancel:!1,requestType:"contentRow"},function(t){t.cancel||(e.classList.contains("e-swimlane-row")?e.insertAdjacentElement("beforebegin",a):e.appendChild(a))})},t.prototype.initializeSwimlaneTree=function(){this.parent.swimlaneSettings.keyField&&this.parent.isAdaptive&&0!==this.parent.kanbanData.length&&(this.swimlaneRow=[this.kanbanRows[this.swimlaneIndex]],this.renderSwimlaneTree(),this.parent.element.querySelector("."+e8).innerHTML=this.swimlaneRow[0].textField)},t.prototype.renderSwimlaneRow=function(e,t,n){var i=ef+" "+ey,a=n?" "+eB:"",r=(0,m.az)("tr",{className:i+a,attrs:{"data-key":t.keyField,"aria-expanded":(!n).toString(),role:"row"}}),o=this.parent.columns.length-this.parent.actionModule.hideColumnKeys.length,l=(0,m.az)("td",{className:ep,attrs:{"data-role":"kanban-column",colspan:o.toString()}}),s=(0,m.az)("div",{className:e7});l.appendChild(s);var d=n?eb:ev,c=(0,m.az)("div",{className:J+" "+d,attrs:{tabindex:"0",role:"button","aria-label":n?t.keyField+" Collapse":t.keyField+" Expand"}});s.appendChild(c);var p=(0,m.az)("div",{className:er});s.appendChild(p);var h=this.swimlaneData[t.keyField].length;if(this.parent.swimlaneSettings.template){var u=(0,m.l7)({},t,{count:h},!0);(0,m.cn)([l],$);var g=this.parent.element.id+"_swimlaneTemplate",f=this.parent.templateParser(this.parent.swimlaneSettings.template)(u,this.parent,"swimlaneTemplate",g,!1);(0,m.R3)(f,p)}else p.appendChild((0,m.az)("div",{className:"e-swimlane-text",innerHTML:t.textField,attrs:{"data-role":t.textField}}));this.parent.swimlaneSettings.showItemCount&&s.appendChild((0,m.az)("div",{className:eS,innerHTML:"- "+h.toString()+" "+this.parent.localeObj.getConstant("items")})),r.appendChild(l);var y=[{keyField:t.keyField,textField:t.textField,count:t.count}];this.parent.trigger(x,{data:y,element:r,cancel:!1,requestType:"swimlaneRow"},function(t){t.cancel||(e.classList.contains("e-swimlane-row")?e.insertAdjacentElement("beforebegin",r):e.appendChild(r))})},t.prototype.renderCards=function(){var e=this,t=this.swimlaneRow,n=[].slice.call(this.parent.element.querySelectorAll(".e-content-row:not(.e-swimlane-row)")),i=[].slice.call(this.parent.element.querySelectorAll(".e-content-row.e-swimlane-row")),a=[],r=!1;n.forEach(function(n,o){for(var l=0,s=0,d=e.parent.columns;s<d.length;s++)!function(i){if(e.isColumnVisible(i)){var a=e.parent.swimlaneSettings.keyField?e.getColumnData(i.keyField,e.swimlaneData[t[o].keyField]):e.columnData[i.keyField];l+=a.length;var s=n.querySelector('[data-key="'+i.keyField+'"]'),d=(0,m.az)("div",{className:eC,attrs:{role:"listbox",tabindex:"0","aria-label":i.keyField.toString()}});if(i.transitionColumns.length>0&&(r=!0),!r&&(0,m.le)(e.parent.swimlaneSettings.keyField)){var c=(0,m.az)("div",{className:eJ});s.appendChild(c)}if(s.appendChild(d),a.length>0)for(var p=0;p<a.length;p++)!function(t){var n=t[e.parent.cardSettings.headerField],i=e.parent.actionModule.selectionArray.indexOf(n),a=e.renderCard(t);-1!==i&&(a.setAttribute("aria-selected","true"),(0,m.cn)([a],e9)),e.parent.trigger(k,{data:t,element:a,cancel:!1},function(e){e.cancel||d.appendChild(a)})}(a[p]);else d.appendChild(e.renderEmptyCard())}}(d[s]);0===l&&(a.push(n),i.length>0&&a.push(i[o]))}),this.parent.swimlaneSettings.showEmptyRow||0!==this.parent.kanbanData.length||this.parent.showEmptyColumn||a.forEach(function(e){return(0,m.Od)(e)})},t.prototype.renderCard=function(e){var t=(0,m.az)("div",{className:ek,attrs:{"data-id":e[this.parent.cardSettings.headerField],"data-key":e[this.parent.keyField],"aria-selected":"false",tabindex:"-1",role:"option"}});if("auto"!==this.parent.cardHeight&&(t.style.height=(0,m.Ac)(this.parent.cardHeight)),this.parent.cardSettings.template){(0,m.cn)([t],$);var n=this.parent.element.id+"_cardTemplate",i=this.parent.templateParser(this.parent.cardSettings.template)(e,this.parent,"cardTemplate",n,!1);(0,m.R3)(i,t)}else{var a=this.parent.enableTooltip?" "+e2:"";if(this.parent.cardSettings.showHeader){var r=(0,m.az)("div",{className:eD}),o=(0,m.az)("div",{className:eM}),l=(0,m.az)("div",{className:eF+a,innerHTML:e[this.parent.cardSettings.headerField]||""});r.appendChild(o),o.appendChild(l),t.appendChild(r)}var s=(0,m.az)("div",{className:eT+a,innerHTML:e[this.parent.cardSettings.contentField]||""});if(t.appendChild(s),this.parent.cardSettings.tagsField&&e[this.parent.cardSettings.tagsField]){for(var d=(0,m.az)("div",{className:ej}),c=e[this.parent.cardSettings.tagsField].toString().split(","),p=0;p<c.length;p++){var h=c[p];d.appendChild((0,m.az)("div",{className:eq+" "+eL,innerHTML:h}))}t.appendChild(d)}if(this.parent.cardSettings.grabberField&&e[this.parent.cardSettings.grabberField]&&((0,m.cn)([t],eR),t.style.borderLeftColor=e[this.parent.cardSettings.grabberField]),this.parent.cardSettings.footerCssField){for(var u=(0,m.az)("div",{className:eI}),g=e[this.parent.cardSettings.footerCssField].split(","),f=0;f<g.length;f++){var y=g[f];u.appendChild((0,m.az)("div",{className:y.trim()+" "+eP}))}t.appendChild(u)}}return t},t.prototype.renderEmptyCard=function(){return(0,m.az)("span",{className:ez,innerHTML:this.parent.localeObj.getConstant("noCard")})},t.prototype.renderColGroup=function(e){var t=this,n=(0,m.az)("colgroup");this.parent.columns.forEach(function(e){if(t.isColumnVisible(e)){var i=t.parent.actionModule.columnToggleArray.indexOf(e.keyField.toString()),a=e.allowToggle&&!e.isExpanded,r=-1===i?a?eB:"":eB,o=(0,m.az)("col",{className:r,attrs:{"data-key":e.keyField.toString()},styles:t.parent.isAdaptive?"width: "+(a?(0,m.Ac)(50):(0,m.Ac)(t.getWidth())):""});n.appendChild(o)}}),e.appendChild(n)},t.prototype.getRows=function(){var e=this,t=[];return this.parent.swimlaneSettings.keyField?(this.parent.kanbanData.map(function(n){if(!(!e.parent.swimlaneSettings.showEmptyRow&&((0,m.le)(n[e.parent.keyField])||""===n[e.parent.keyField]||n[e.parent.keyField]&&-1===e.columnKeys.indexOf(n[e.parent.keyField].toString())))){var i=n[e.parent.swimlaneSettings.textField]||n[e.parent.swimlaneSettings.keyField],a=n[e.parent.swimlaneSettings.keyField];if(!n[e.parent.swimlaneSettings.keyField]){if(!e.parent.swimlaneSettings.showUnassignedRow)return;i=e.parent.localeObj.getConstant("unassigned"),a=""}t.push({keyField:a,textField:i})}}),t=t.filter(function(e,t,n){return t===n.map(function(e){return e.keyField}).indexOf(e.keyField)}),(t=this.swimlaneSorting(t)).forEach(function(t){t.count=e.parent.kanbanData.filter(function(n){return e.columnKeys.indexOf(n[e.parent.keyField])>-1&&n[e.parent.swimlaneSettings.keyField]===t.keyField}).length}),0===t.length&&t.push({keyField:"",textField:""})):t.push({keyField:"",textField:""}),t},t.prototype.swimlaneSorting=function(e){return this.parent.swimlaneSettings.sortComparer?e=this.parent.swimlaneSettings.sortComparer.call(this.parent,e):(e.sort(function(e,t){return e.textField.localeCompare(t.textField,void 0,{numeric:!0})}),"Descending"===this.parent.swimlaneSettings.sortDirection&&e.reverse()),e},t.prototype.createStackedRow=function(e){var t=(0,m.az)("tr",{className:em+" "+ed}),n=[];this.parent.columns.forEach(function(t){for(var i="",a=0;a<e.length;a++){var r=e[a];-1!==r.keyFields.indexOf(t.keyField.toString())&&(i=r.text)}n.push(i)});for(var i=0;i<n.length;i++){for(var a=1,r=i+1;r<n.length;r++)if(""!==n[i]&&""!==n[r]&&n[i]===n[r])a++;else break;var o=(0,m.az)("div",{className:el,innerHTML:n[i]}),l=(0,m.az)("th",{className:ea+" "+ec,attrs:{colspan:a.toString(),scope:"row"}});t.appendChild(l).appendChild(o),i+=a-1}return t},t.prototype.scrollUiUpdate=function(){var e=this,t=this.parent.element.querySelector("."+en),n=this.parent.element.querySelector("."+eh),i=this.parent.element.offsetHeight-t.offsetHeight;if(this.parent.isAdaptive){i=window.innerHeight-(t.offsetHeight+25);var a=this.parent.element.querySelector("."+e7);a&&(i-=a.offsetHeight),[].slice.call(this.parent.element.querySelectorAll("."+ep)).forEach(function(t){var n=t.querySelector("."+eC);n.classList.contains(e0)||(n.style.height=(0,m.Ac)(i),m.bi.add(t,"touchmove",e.onAdaptiveScroll,e))})}"auto"!==this.parent.height&&"100%"!==this.parent.height&&(n.style.height=(0,m.Ac)(i)),[].slice.call(t.children).forEach(function(t){var i=0;n.offsetWidth-n.clientWidth>0&&(i=17,n.offsetHeight-n.clientHeight>0&&(t.style.width=(0,m.Ac)(n.clientWidth))),e.parent.enableRtl?t.style.paddingLeft=(0,m.Ac)(i):t.style.paddingRight=(0,m.Ac)(i)}),this.updateScrollPosition()},t.prototype.onContentScroll=function(e){var t=e.target,n=this.parent.element.querySelector("."+en);[].slice.call(n.children).forEach(function(e){e.scrollLeft=t.scrollLeft}),this.parent.scrollPosition.content={left:t.scrollLeft,top:t.scrollTop},!(0,m.le)(this.parent.swimlaneSettings.keyField)&&this.parent.swimlaneSettings.enableFrozenRows&&this.frozenRows(e)},t.prototype.addFrozenSwimlaneDataKey=function(e){var t=e.getAttribute("data-key");(0,m.le)(t)||this.frozenSwimlaneRow.setAttribute("data-key",t)},t.prototype.frozenRows=function(e){var t=this.parent.element.querySelector("."+ey),n=this.parent.element.querySelector("."+en),i=this.parent.element.querySelector("."+eh);if((0,m.le)(this.frozenSwimlaneRow)){this.frozenSwimlaneRow=(0,m.az)("div",{className:tp});var a=(0,m.az)("div",{className:th});this.frozenSwimlaneRow.appendChild(a),this.parent.element.insertBefore(this.frozenSwimlaneRow,this.parent.element.firstElementChild),a.appendChild(t.querySelector("."+e7).cloneNode(!0)),this.addFrozenSwimlaneDataKey(t),(0,m.V7)(this.frozenSwimlaneRow,{height:(0,m.Ac)(t.getBoundingClientRect().height),width:(0,m.Ac)(i.querySelector(".e-swimlane").getBoundingClientRect().width),top:(0,m.Ac)(n.getBoundingClientRect().height.toString())}),(0,m.V7)(n,{position:"relative",top:(0,m.Ac)(-this.frozenSwimlaneRow.getBoundingClientRect().height)}),(0,m.V7)(i,{position:"relative",top:(0,m.Ac)(-this.frozenSwimlaneRow.getBoundingClientRect().height)})}else{var r=[].slice.call(this.parent.element.querySelectorAll("."+ey)),o=r[this.frozenOrder],l=r[this.frozenOrder-1],s=r[this.frozenOrder+1],d=void 0,c=void 0,p=void 0;o&&(d=o.getBoundingClientRect().top+o.getBoundingClientRect().height),l&&(c=l.getBoundingClientRect().top+l.getBoundingClientRect().height),s&&(p=s.getBoundingClientRect().top+s.getBoundingClientRect().height);var h=i.getBoundingClientRect().top+this.frozenSwimlaneRow.getBoundingClientRect().height,u=this.frozenSwimlaneRow.querySelector("."+th);p&&h>=p&&this.frozenOrder<r.length-1?(u&&((0,m.Od)(u.querySelector("."+e7)),u.appendChild(s.querySelector("."+e7).cloneNode(!0)),this.addFrozenSwimlaneDataKey(s)),++this.frozenOrder):c&&h<d&&h>c&&this.frozenOrder>0&&(u&&((0,m.Od)(u.querySelector("."+e7)),u.appendChild(l.querySelector("."+e7).cloneNode(!0)),this.addFrozenSwimlaneDataKey(l)),--this.frozenOrder)}e&&0===e.target.scrollTop&&this.removeFrozenRows()},t.prototype.removeFrozenRows=function(){(0,m.Od)(this.frozenSwimlaneRow),this.frozenSwimlaneRow=null;var e=this.parent.element.querySelector("."+en),t=this.parent.element.querySelector("."+eh);(0,m.V7)(e,{position:"",top:""}),(0,m.V7)(t,{position:"",top:""}),this.parent.scrollPosition.content={left:this.parent.scrollPosition.content.left,top:0},t.scrollTop=0,this.frozenOrder=0},t.prototype.onColumnScroll=function(e){var t=e.target;if(t.offsetParent){var n=t.offsetParent.getAttribute("data-key");this.parent.scrollPosition.column[""+n]={left:t.scrollLeft,top:t.scrollTop}}},t.prototype.onAdaptiveScroll=function(e){this.parent.touchModule.tabHold&&!this.parent.touchModule.mobilePopup&&e.preventDefault()},t.prototype.isColumnVisible=function(e){var t=this,n=!1;return"number"==typeof e.keyField?n=-1===this.parent.actionModule.hideColumnKeys.indexOf(e.keyField.toString()):e.keyField.split(",").forEach(function(e){n=-1===t.parent.actionModule.hideColumnKeys.indexOf(e)}),n},t.prototype.renderLimits=function(e,t){var n=(0,m.az)("div",{className:tt});e.minCount&&n.appendChild((0,m.az)("div",{className:ti,innerHTML:this.parent.localeObj.getConstant("min")+": "+e.minCount.toString()})),e.maxCount&&n.appendChild((0,m.az)("div",{className:tn,innerHTML:this.parent.localeObj.getConstant("max")+": "+e.maxCount.toString()})),n.childElementCount>0&&(t.querySelector("."+eC)?t.insertBefore(n,t.firstElementChild):t.appendChild(n))},t.prototype.renderValidation=function(){var e=this;this.parent.columns.forEach(function(t){if(t.minCount||t.maxCount){var n=e.columnData[t.keyField],i='[data-key="'+t.keyField+'"]',a=e.parent.element.querySelector("."+(ea+i)),r=[].slice.call(e.parent.element.querySelectorAll("."+(ep+i)));if("Swimlane"===e.parent.constraintType&&e.parent.swimlaneSettings.keyField)e.swimlaneRow.forEach(function(i,a){e.renderLimits(t,r[a]);var o=n.filter(function(t){return t[e.parent.swimlaneSettings.keyField]===i.keyField}),l=e.getValidationClass(t,o.length);l&&(0,m.cn)([r[a]],l)});else{e.renderLimits(t,a);var o=e.getValidationClass(t,n.length);o&&(0,m.cn)(r.concat(a),o)}}})},t.prototype.getValidationClass=function(e,t){var n;return e.maxCount&&t>e.maxCount?n=ta:e.minCount&&t<e.minCount&&(n=tr),n},t.prototype.refreshValidation=function(){[].slice.call(this.parent.element.querySelectorAll("."+tt)).forEach(function(e){(0,m.Od)(e)});var e=[].slice.call(this.parent.element.querySelectorAll("."+tr));(0,m.IV)(e,tr);var t=[].slice.call(this.parent.element.querySelectorAll("."+ta));(0,m.IV)(t,ta),this.renderValidation()},t.prototype.getColumnData=function(e,t){var n=this;void 0===t&&(t=this.parent.kanbanData);var i=[];if("number"==typeof e){var a=t.filter(function(t){return t[n.parent.keyField]===e});i=i.concat(a)}else for(var r=e.split(","),o=function(e){var a=t.filter(function(t){return t[n.parent.keyField]===e.trim()});i=i.concat(a)},l=0;l<r.length;l++)o(r[l]);return this.sortCategory(i),i},t.prototype.sortCategory=function(e){var t=this.parent.cardSettings.headerField,n=this.parent.sortSettings.direction;switch(this.parent.sortSettings.sortBy){case"DataSourceOrder":this.sortOrder(t,n,e);break;case"Custom":case"Index":this.parent.sortSettings.field&&(t=this.parent.sortSettings.field),this.sortOrder(t,n,e)}return e},t.prototype.sortOrder=function(e,t,n){var i,a,r=!0;return this.parent.kanbanData.length>0&&(r="number"==typeof this.parent.kanbanData[0][""+e]),(r||"Index"!==this.parent.sortSettings.sortBy)&&(n=n.sort(function(t,n){return r?(i=t[""+e],a=n[""+e]):(i=t[""+e].toLowerCase(),a=n[""+e].toLowerCase()),i>a?1:a>i?-1:0}),"Descending"===t&&n.reverse()),n},t.prototype.documentClick=function(e){if(e.target.classList.contains(e6)&&this.parent.element.querySelector("."+te).classList.contains("e-popup-open")&&(this.treePopup.hide(),(0,m.IV)([this.popupOverlay],"e-enable")),!(0,m.oq)(e.target,"."+Q)){var t=[].slice.call(this.parent.element.querySelectorAll("."+ek+"."+e9));(0,m.IV)(t,e9),this.disableAttributeSelection(t)}},t.prototype.disableAttributeSelection=function(e){e instanceof Element?e.setAttribute("aria-selected","false"):e.forEach(function(e){e.setAttribute("aria-selected","false")})},t.prototype.getColumnCards=function(e){var t=this,n={};return this.columnKeys=[],this.parent.columns.forEach(function(i){"number"==typeof i.keyField?t.columnKeys=t.columnKeys.concat(i.keyField.toString()):t.columnKeys=t.columnKeys.concat(i.keyField.split(",").map(function(e){return e.trim()}));var a=t.getColumnData(i.keyField,e);n[i.keyField]=a}),n},t.prototype.getSwimlaneCards=function(){var e=this,t={};return this.parent.swimlaneSettings.keyField&&this.kanbanRows.forEach(function(n){return t[n.keyField]=e.parent.kanbanData.filter(function(t){return!(0,m.le)(t[e.parent.keyField])&&e.columnKeys.indexOf(t[e.parent.keyField].toString())>-1&&(!t[e.parent.swimlaneSettings.keyField]&&e.parent.swimlaneSettings.showUnassignedRow?"":t[e.parent.swimlaneSettings.keyField])===n.keyField})}),t},t.prototype.refreshHeaders=function(){var e=this.parent.element.querySelector("."+en);[].slice.call(e.children).forEach(function(e){return(0,m.Od)(e)}),this.renderHeader(e)},t.prototype.refreshCards=function(){this.parent.resetTemplates(["cardTemplate"]),[].slice.call(this.parent.element.querySelectorAll("."+eC)).forEach(function(e){return(0,m.Od)(e)}),this.renderCards(),this.wireDragEvent(),this.parent.renderTemplates()},t.prototype.refresh=function(){var e=this,t=!1;this.parent.columns.forEach(function(n){if(n.showItemCount){n&&n.template&&!t&&(e.refreshHeaders(),t=!0);var i="."+ea+'[data-key="'+n.keyField+'"] .'+eS,a=e.parent.element.querySelector(i);if(a){var r="number"==typeof n.keyField,o=0;if(r)o=[].slice.call(e.parent.element.querySelectorAll("."+ek+'[data-key="'+n.keyField+'"]')).length;else for(var l=n.keyField.split(","),s=0;s<l.length;s++){var d=l[s];o=[].slice.call(e.parent.element.querySelectorAll("."+ek+'[data-key="'+d.trim()+'"]')).length+o}a.innerHTML="-\xa0"+o+"\xa0"+e.parent.localeObj.getConstant("items")}}}),this.parent.swimlaneSettings.keyField&&[].slice.call(this.parent.element.querySelectorAll("."+ey)).forEach(function(t){var n=t.getAttribute("data-key"),i=t.querySelector("."+eS);if(i&&n){var a=[].slice.call(t.nextElementSibling.querySelectorAll("."+ek));i.innerHTML="-\xa0"+a.length+"\xa0"+e.parent.localeObj.getConstant("items")}}),this.refreshValidation()},t.prototype.updateScrollPosition=function(){var e=this,t=this.parent.element.querySelector("."+eh);t&&(m.AR.isIE?(t.scrollTop=this.parent.scrollPosition.content.top,t.scrollLeft=this.parent.scrollPosition.content.left):t.scrollTo(this.parent.scrollPosition.content.left,this.parent.scrollPosition.content.top)),[].slice.call(this.parent.element.querySelectorAll("."+eC)).forEach(function(t){if(t.offsetParent){var n=e.parent.scrollPosition.column[t.offsetParent.getAttribute("data-key")];n&&(m.AR.isIE?(t.scrollTop=n.top,t.scrollLeft=n.left):t.scrollTo(n.left,n.top))}})},t.prototype.renderCardBasedOnIndex=function(e,t){var n=this,i=e[this.parent.keyField],a=this.parent.element.querySelector(".e-content-row:not(.e-swimlane-row)");if(this.parent.swimlaneSettings.keyField&&!this.parent.isAdaptive){var r='.e-content-row.e-swimlane-row[data-key="'+e[this.parent.swimlaneSettings.keyField]+'"]';if(this.parent.element.querySelector(r))a=this.parent.element.querySelector(r).nextElementSibling;else{if(-1!==this.columnKeys.indexOf(i)&&-1===this.parent.actionModule.hideColumnKeys.indexOf(i)){var o=this.kanbanRows.findIndex(function(t){return t.keyField===e[n.parent.swimlaneSettings.keyField]}),l=[].slice.call(this.parent.element.querySelectorAll(".e-swimlane-row")),s=this.parent.element.querySelector("."+eu+" tbody");l[o]&&(s=l[o]),this.renderSwimlaneRow(s,this.kanbanRows[o],!1),this.renderSingleContent(s,this.kanbanRows[o],!1)}a=this.parent.element.querySelector(r).nextElementSibling,[].slice.call(a.children).forEach(function(e){var t=(0,m.az)("div",{className:eC});e.appendChild(t),t.appendChild(n.renderEmptyCard())})}}if("Index"!==this.parent.sortSettings.sortBy){var d=this.parent.cardSettings.headerField;if("Custom"===this.parent.sortSettings.sortBy&&(d=this.parent.sortSettings.field),(0,m.le)(this.parent.swimlaneSettings.keyField))t=this.getColumnData(i,this.parent.kanbanData).findIndex(function(t){return t[""+d]===e[""+d]});else{var c=this.parent.getSwimlaneData(e[this.parent.swimlaneSettings.keyField]);t=this.getColumnData(i,c).findIndex(function(t){return t[""+d]===e[""+d]})}}else"Index"===this.parent.sortSettings.sortBy&&this.parent.sortSettings.field&&"Ascending"===this.parent.sortSettings.direction&&(t=e[this.parent.sortSettings.field]-1);if(a){var p=[].slice.call(a.children).filter(function(e){return -1!==e.getAttribute("data-key").replace(/\s/g,"").split(",").indexOf(i.toString().replace(/\s/g,""))})[0],h=p.querySelector("."+eC),u=h.querySelector("."+ez);u&&(0,m.Od)(u);var g=this.renderCard(e);this.parent.allowDragAndDrop&&p.classList.contains(eE)&&(this.parent.dragAndDropModule.wireDragEvents(g),(0,m.cn)([g],ex)),this.parent.trigger(k,{data:e,element:g,cancel:!1},function(e){e.cancel||((0,m.le)(t)||0===h.children.length?h.appendChild(g):h.insertBefore(g,h.childNodes[t]))})}},t.prototype.removeCard=function(e){var t=e[this.parent.cardSettings.headerField],n=this.parent.element.querySelector("."+ek+'[data-id="'+t+'"]');this.isSelectedCard=!!n.classList.contains(e9);var i=n.parentElement;n&&(0,m.Od)(n),0===i.querySelectorAll("."+ek+":not(."+eY+")").length&&i.appendChild(this.renderEmptyCard())},t.prototype.wireEvents=function(){var e=this;m.bi.add(this.parent.element,"click",this.parent.actionModule.clickHandler,this.parent.actionModule),m.bi.add(this.parent.element,"dblclick",this.parent.actionModule.doubleClickHandler,this.parent.actionModule),m.bi.add(document,m.AR.touchStartEvent,this.documentClick,this);var t=this.parent.element.querySelector("."+eh);m.bi.add(t,"scroll",this.onContentScroll,this),[].slice.call(this.parent.element.querySelectorAll("."+eC)).forEach(function(t){e.parent.isInitialRender&&t.offsetParent&&(e.parent.scrollPosition.column[t.offsetParent.getAttribute("data-key")]={left:0,top:0}),m.bi.add(t,"scroll",e.onColumnScroll,e)}),this.parent.isAdaptive&&(this.parent.touchModule.wireTouchEvents(),t.scrollLeft=this.scrollLeft),this.wireDragEvent()},t.prototype.unWireEvents=function(){var e=this;m.bi.remove(this.parent.element,"click",this.parent.actionModule.clickHandler),m.bi.remove(this.parent.element,"dblclick",this.parent.actionModule.doubleClickHandler),m.bi.remove(document,m.AR.touchStartEvent,this.documentClick);var t=this.parent.element.querySelector("."+eh);t&&(m.bi.remove(t,"scroll",this.onContentScroll),this.parent.allowDragAndDrop&&this.unWireDragEvent());var n=[].slice.call(this.parent.element.querySelectorAll("."+eC));n.length>0&&n.forEach(function(t){m.bi.remove(t,"scroll",e.onColumnScroll)}),this.parent.isAdaptive&&this.parent.touchModule.unWireTouchEvents()},t.prototype.wireDragEvent=function(){var e=this;if(this.parent.allowDragAndDrop){var t=[].slice.call(this.parent.element.querySelectorAll("."+ep+"."+eE+" ."+ek));(0,m.cn)(t,ex),t.forEach(function(t){return e.parent.dragAndDropModule.wireDragEvents(t)})}},t.prototype.unWireDragEvent=function(){var e=this,t=[].slice.call(this.parent.element.querySelectorAll("."+ep+"."+eE+" ."+ek));(0,m.IV)(t,ex),t.forEach(function(t){return e.parent.dragAndDropModule.unWireDragEvents(t)})},t.prototype.destroy=function(){this.parent.resetTemplates(),this.parent.off(D,this.initRender),this.parent.off(O,this.scrollUiUpdate),this.unWireEvents();var e=this.parent.element.querySelector("."+en);e&&(0,m.Od)(e);var t=this.parent.element.querySelector("."+eh);t&&(0,m.Od)(t),this.treeViewObj&&(this.treeViewObj.destroy(),this.treeViewObj=null),this.treePopup&&(this.treePopup.destroy(),this.treePopup=null);var n=this.parent.element.querySelector("."+e7);n&&(0,m.Od)(n);var i=this.parent.element.querySelector("."+e4);i&&(0,m.Od)(i)},t}(tR),tz=(p=function(e,t){return(p=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}p(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),tP=function(e){function t(t){var n=e.call(this,t)||this;return n.parent=t,n.kanbanRows=[],n.scrollStatus={},n.offsets={},n.tempOffsets={},n.offsetKeys=[],n.columnKeys=[],n.scrollLeft=0,n.frozenOrder=0,n.parent.enableVirtualization&&(n.parent.on(D,n.initRender,n),n.parent.on(O,n.scrollUiUpdate,n)),n}return tz(t,e),t.prototype.initRender=function(){if(this.isSwimlane=!(0,m.le)(this.parent.swimlaneSettings.keyField)&&this.parent.swimlaneSettings.keyField.trim().length>1,this.query=this.parent.query instanceof v.A?this.parent.query:new v.A,0!==this.parent.columns.length){if(this.cardHeight=this.cardHeightCalculate(),this.columnData=this.getColumnCards(),this.kanbanRows=this.getRows(),this.parent.isAdaptive){var e=this.parent.element.querySelector("."+eh);e&&(this.scrollLeft=e.scrollLeft)}this.destroy(),this.parent.on(D,this.initRender,this),this.parent.on(O,this.scrollUiUpdate,this);var t=(0,m.az)("div",{className:en});this.parent.element.appendChild(t),this.renderHeader(t),this.isSwimlane||(this.renderContent(),this.renderCards()),this.renderValidation(),this.parent.renderTemplates(),this.parent.notify(O,{}),this.wireEvents(),this.parent.isInitialRender&&(this.parent.isInitialRender=!1)}},t.prototype.cardHeightCalculate=function(){return"auto"===this.parent.cardHeight?108:parseInt((0,m.Ac)(this.parent.cardHeight).split("px")[0],10)+8},t.prototype.renderHeader=function(e){var t=(0,m.az)("div",{className:this.parent.swimlaneSettings.keyField?ee:""});e.appendChild(t);var n=(0,m.az)("table",{className:et+" "+ei,attrs:{role:"presentation"}});t.appendChild(n),this.renderColGroup(n);var i=(0,m.az)("thead");n.appendChild(i),this.parent.stackedHeaders.length>0&&i.appendChild(this.createStackedRow(this.parent.stackedHeaders));var a=(0,m.az)("tr",{className:em});i.appendChild(a);for(var r=this,o=0,l=this.parent.columns;o<l.length;o++)!function(e){if(r.isColumnVisible(e)){var t=r.parent.actionModule.columnToggleArray.indexOf(e.keyField.toString()),n=(0,m.az)("th",{className:-1===t?ea:ea+" "+eB,attrs:{"data-role":"kanban-column","data-key":e.keyField.toString()}}),i=[];e.allowToggle&&(i.push(eg),e.isExpanded||i.push(eB)),(0,m.cn)([n],i);var o=(0,m.az)("div",{className:er});n.appendChild(o);var l=r.parent.dataModule.isRemote()?r.parent.columnDataCount[e.keyField]:r.columnData[e.keyField].length,s=(0,m.az)("div",{className:eo});if(o.appendChild(s),e.template){var d={keyField:e.keyField,headerText:e.headerText,minCount:e.minCount,maxCount:e.maxCount,allowToggle:e.allowToggle,isExpanded:e.isExpanded,showItemCount:e.showItemCount,count:l};(0,m.cn)([n],$);var c=r.parent.element.id+"_columnTemplate",p=r.parent.templateParser(e.template)(d,r.parent,"columnTemplate",c,!1);(0,m.R3)(p,s)}else{var h=(0,m.az)("div",{className:el,innerHTML:e.headerText});if(s.appendChild(h),e.showItemCount){var u=(0,m.az)("div",{className:eS,innerHTML:"- "+l.toString()+" "+r.parent.localeObj.getConstant("items")});s.appendChild(u)}}if(e.allowToggle){var g=!!e.isExpanded&&-1===t,f=g?eH:eV,y=(0,m.az)("div",{className:es+" "+J+" "+f,attrs:{tabindex:"0"}});y.setAttribute("aria-label",g?e.keyField+" Expand":e.keyField+" Collapse"),n.setAttribute("aria-expanded",g.toString()),o.appendChild(y)}var v=[{keyField:e.keyField,textField:e.headerText,count:l}];r.parent.trigger(x,{data:v,element:a,cancel:!1,requestType:"headerRow"},function(e){e.cancel||a.appendChild(n)})}}(l[o])},t.prototype.renderContent=function(){var e=(0,m.az)("div",{className:eh});this.parent.element.appendChild(e);var t=(0,m.az)("div",{className:this.parent.swimlaneSettings.keyField?ee:""});e.appendChild(t);var n=(0,m.az)("table",{className:et+" "+eu,attrs:{role:"presentation"}});t.appendChild(n),this.renderColGroup(n);var i=(0,m.az)("tbody");n.appendChild(i);for(var a=!1,r=0,o=this.kanbanRows;r<o.length;r++){var l=o[r];this.parent.swimlaneSettings.keyField&&0!==this.parent.swimlaneToggleArray.length&&(a=-1!==this.parent.swimlaneToggleArray.indexOf(l.keyField)),this.renderSingleContent(i,l,a)}},t.prototype.renderSingleContent=function(e,t,n){for(var i=n?ef+" "+eB:ef,a=(0,m.az)("tr",{className:i,attrs:{"aria-expanded":"true"}}),r=0,o=this.parent.columns;r<o.length;r++){var l=o[r];if(this.isColumnVisible(l)){var s=this.parent.actionModule.columnToggleArray.indexOf(l.keyField.toString()),d=-1===s?ep:ep+" "+eB,c=(l.allowDrag?" "+eE:"")+(l.allowDrop?" "+eA+" "+ex:""),p=(0,m.az)("td",{className:d+c,attrs:{"data-role":"kanban-column","data-key":l.keyField.toString(),"aria-expanded":"true",tabindex:"0",role:"navigation"}});if(l.allowToggle&&!l.isExpanded||-1!==s){(0,m.cn)([p],eB);var h=(l.showItemCount?"["+(this.parent.dataModule.isRemote()?this.parent.columnDataCount[l.keyField]:this.getColumnData(l.keyField).length)+"] ":"")+l.headerText;p.appendChild((0,m.az)("div",{className:eN,innerHTML:h})),p.setAttribute("aria-expanded","false")}if(l.showAddButton){var u=(0,m.az)("div",{className:ts,attrs:{tabindex:"-1"}});u.appendChild((0,m.az)("div",{className:td+" "+J})),p.appendChild(u)}if(a.appendChild(p),this.parent.enableVirtualization){var g=this.parent.element.querySelector(".e-kanban-header").getBoundingClientRect().height;"auto"===this.parent.height?p.style.height=window.innerHeight-(g+this.parent.element.getBoundingClientRect().top+15)+"px":p.style.height=parseInt((0,m.Ac)(this.parent.height).split("px")[0],10)-(g+15)+"px"}}}var f=[{keyField:t.keyField,textField:t.textField,count:t.count}];this.parent.trigger(x,{data:f,element:a,cancel:!1,requestType:"contentRow"},function(t){t.cancel||(e.classList.contains("e-swimlane-row")?e.insertAdjacentElement("beforebegin",a):e.appendChild(a))})},t.prototype.windowResize=function(){for(var e=this.parent.element.querySelectorAll("."+ep),t=this.parent.element.querySelector(".e-kanban-header").getBoundingClientRect().height,n=0;n<e.length;n++)"auto"===this.parent.height?e[n].style.height=window.innerHeight-(t+this.parent.element.getBoundingClientRect().top+15)+"px":e[n].style.height=parseInt((0,m.Ac)(this.parent.height).split("px")[0],10)-(t+15)+"px"},t.prototype.refreshColumnData=function(e,t,n,i){var a=this,r=[].slice.call(this.parent.element.querySelectorAll(".e-content-row:not(.e-swimlane-row)")),o=("cardChanged"===n||"cardCreated"===n||"cardRemoved"===n)&&!(0,m.le)(i);r.forEach(function(n,i){for(var r=0,l=a.parent.columns;r<l.length;r++)!function(i){if(a.isColumnVisible(i)&&(i.keyField===e||i.keyField===t)||o){var r=0,l=[],s=a.getColumnCards()[i.keyField],d=a.parent.dataModule.isRemote()?a.parent.columnDataCount[i.keyField]:s.length,c=a.cardHeight*d;l=Array.apply(null,Array(d)).map(function(){return++r});var p=n.querySelector('[data-key="'+i.keyField+'"]'),h=Math.ceil(parseInt(p.style.height.split("px")[0],10)/a.cardHeight);a.offsets[1]=h*a.cardHeight;for(var u=1;u<l.length;u++)a.offsets[l[u]]=a.offsets[l[u-1]]+h*a.cardHeight,a.tempOffsets[l[u]]=0|a.offsets[l[u]-1];var g=p.querySelector("."+eC),m=d%2==0?d-2:d-1,f=a.getInfoFromView(a.scrollStatus[i.keyField]),y=a.getTranslateY(f),v=g.querySelector("."+ew);v.style.maxHeight=d*a.cardHeight+"px",a.setPadding(y,v,d),a.currentStatus={column:i.keyField,columnOverAllHeight:c,columnHeight:parseInt(p.style.height.split("px")[0],10),previousScrollTop:a.scrollStatus[i.keyField].currentScrollTop,currentScrollTop:g.scrollTop,scrollDirection:a.scrollStatus[i.keyField].scrollDirection,currentBlockIndex:a.scrollStatus[i.keyField].currentBlockIndex,oldBlockIndex:a.scrollStatus[i.keyField].oldBlockIndex,offsets:a.offsets,tempOffsets:a.tempOffsets,totalColumnData:d,singleIndexCardCount:h,maxBlock:m},a.scrollStatus[i.keyField]=a.currentStatus}}(l[r])})},t.prototype.renderCards=function(){var e=this;this.kanbanRows;var t=[].slice.call(this.parent.element.querySelectorAll(".e-content-row:not(.e-swimlane-row)")),n=[].slice.call(this.parent.element.querySelectorAll(".e-content-row.e-swimlane-row")),i=[],a=!1;t.forEach(function(t,r){for(var o=0,l=0,s=e.parent.columns;l<s.length;l++)!function(n){if(e.isColumnVisible(n)){var i=0,r=[];e.offsets={},e.tempOffsets={};var l=e.columnData[n.keyField],s=e.parent.dataModule.isRemote()?e.parent.columnDataCount[n.keyField]:l.length;o+=s;var d=e.cardHeight*s+7,c=t.querySelector('[data-key="'+n.keyField+'"]'),p=Math.ceil(parseFloat(c.style.height.split("px")[0])/e.cardHeight),h=p>s?s:Math.floor(s/p);r=Array.apply(null,Array(s)).map(function(){return++i}),e.offsets[1]=p*e.cardHeight+7;for(var u=1;u<r.length;u++)e.offsets[r[u]]=e.offsets[r[u-1]]+p*e.cardHeight,e.tempOffsets[r[u]]=0|e.offsets[r[u]-1];var g=(0,m.az)("div",{className:eC,attrs:{role:"listbox"}}),f=(0,m.az)("div",{className:ew,attrs:{role:"listbox"}});if(g.appendChild(f),e.currentStatus={column:n.keyField,columnOverAllHeight:d,columnHeight:parseInt(c.style.height.split("px")[0],10),previousScrollTop:null,currentScrollTop:g.scrollTop,scrollDirection:null,currentBlockIndex:[1,2],oldBlockIndex:[1,2],offsets:e.offsets,tempOffsets:e.tempOffsets,totalColumnData:s,singleIndexCardCount:p,maxBlock:h%2==0?h:h+1},e.scrollStatus[n.keyField]=e.currentStatus,n.transitionColumns.length>0&&(a=!0),!a&&(0,m.le)(e.parent.swimlaneSettings.keyField)){var y=(0,m.az)("div",{className:eJ});c.appendChild(y)}if(c.appendChild(g),s>0){for(var u=0;u<2*p&&u<l.length;u++)!function(t){var n=l[t][e.parent.cardSettings.headerField],i=e.parent.actionModule.selectionArray.indexOf(n),a=e.renderCard(l[t]);-1!==i&&(a.setAttribute("aria-selected","true"),(0,m.cn)([a],e9));var r={data:l[t],element:a,cancel:!1};e.parent.trigger(k,r,function(e){e.cancel||f.appendChild(a)})}(u);f.style.maxHeight=e.cardHeight*s+"px"}else f.appendChild(e.renderEmptyCard());e.setPadding(0,f,s)}}(s[l]);0===o&&(i.push(t),n.length>0&&i.push(n[r]))}),this.parent.swimlaneSettings.showEmptyRow||0!==this.parent.kanbanData.length||this.parent.showEmptyColumn||i.forEach(function(e){return(0,m.Od)(e)})},t.prototype.renderCard=function(e){var t=(0,m.az)("div",{className:ek,attrs:{"data-id":e[this.parent.cardSettings.headerField],"data-key":e[this.parent.keyField],"aria-selected":"false",tabindex:"-1",role:"option"}});if(t.style.height=this.cardHeight-8+"px",this.parent.cardSettings.template){(0,m.cn)([t],$);var n=this.parent.element.id+"_cardTemplate",i=this.parent.templateParser(this.parent.cardSettings.template)(e,this.parent,"cardTemplate",n,!1);(0,m.R3)(i,t)}else{var a=this.parent.enableTooltip?" "+e2:"";if(this.parent.cardSettings.showHeader){var r=(0,m.az)("div",{className:eD}),o=(0,m.az)("div",{className:eM}),l=(0,m.az)("div",{className:eF+a,innerHTML:e[this.parent.cardSettings.headerField]||""});r.appendChild(o),o.appendChild(l),t.appendChild(r)}var s=(0,m.az)("div",{className:eT+a,innerHTML:e[this.parent.cardSettings.contentField]||""});if(t.appendChild(s),this.parent.cardSettings.tagsField&&e[this.parent.cardSettings.tagsField]){for(var d=(0,m.az)("div",{className:ej}),c=e[this.parent.cardSettings.tagsField].toString().split(","),p=0;p<c.length;p++){var h=c[p];d.appendChild((0,m.az)("div",{className:eq+" "+eL,innerHTML:h}))}t.appendChild(d)}if(this.parent.cardSettings.grabberField&&e[this.parent.cardSettings.grabberField]&&((0,m.cn)([t],eR),t.style.borderLeftColor=e[this.parent.cardSettings.grabberField]),this.parent.cardSettings.footerCssField){for(var u=(0,m.az)("div",{className:eI}),g=e[this.parent.cardSettings.footerCssField].split(","),f=0;f<g.length;f++){var y=g[f];u.appendChild((0,m.az)("div",{className:y.trim()+" "+eP}))}t.appendChild(u)}}return t},t.prototype.renderEmptyCard=function(){return(0,m.az)("span",{className:ez,innerHTML:this.parent.localeObj.getConstant("noCard")})},t.prototype.renderColGroup=function(e){var t=this,n=(0,m.az)("colgroup");this.parent.columns.forEach(function(e){if(t.isColumnVisible(e)){var i=t.parent.actionModule.columnToggleArray.indexOf(e.keyField.toString()),a=e.allowToggle&&!e.isExpanded,r=-1===i?a?eB:"":eB,o=(0,m.az)("col",{className:r,attrs:{"data-key":e.keyField.toString()},styles:t.parent.isAdaptive?"width: "+(a?(0,m.Ac)(50):(0,m.Ac)(t.getWidth())):""});n.appendChild(o)}}),e.appendChild(n)},t.prototype.getRows=function(){var e=[];return e.push({keyField:"",textField:""}),e},t.prototype.createStackedRow=function(e){var t=(0,m.az)("tr",{className:em+" "+ed}),n=[];this.parent.columns.forEach(function(t){for(var i="",a=0;a<e.length;a++){var r=e[a];-1!==r.keyFields.indexOf(t.keyField.toString())&&(i=r.text)}n.push(i)});for(var i=0;i<n.length;i++){for(var a=1,r=i+1;r<n.length;r++)if(""!==n[i]&&""!==n[r]&&n[i]===n[r])a++;else break;var o=(0,m.az)("div",{className:el,innerHTML:n[i]}),l=(0,m.az)("th",{className:ea+" "+ec,attrs:{colspan:a.toString()}});t.appendChild(l).appendChild(o),i+=a-1}return t},t.prototype.scrollUiUpdate=function(){var e=this,t=this.parent.element.querySelector("."+en),n=this.parent.element.querySelector("."+eh),i=this.parent.element.offsetHeight-t.offsetHeight;if(this.parent.isAdaptive){i=window.innerHeight-(t.offsetHeight+25);var a=this.parent.element.querySelector("."+e7);a&&(i-=a.offsetHeight),[].slice.call(this.parent.element.querySelectorAll("."+ep)).forEach(function(t){var n=t.querySelector("."+eC);n.classList.contains(e0)||(n.style.height=(0,m.Ac)(i),m.bi.add(t,"touchmove",e.onAdaptiveScroll,e))})}"auto"!==this.parent.height&&"100%"!==this.parent.height&&(n.style.height=(0,m.Ac)(i)),[].slice.call(t.children).forEach(function(t){var i=0;n.offsetWidth-n.clientWidth>0&&(i=17,n.offsetHeight-n.clientHeight>0&&(t.style.width=(0,m.Ac)(n.clientWidth))),e.parent.enableRtl?t.style.paddingLeft=(0,m.Ac)(i):t.style.paddingRight=(0,m.Ac)(i)}),this.updateScrollPosition()},t.prototype.onContentScroll=function(e){var t=e.target,n=this.parent.element.querySelector("."+en);[].slice.call(n.children).forEach(function(e){e.scrollLeft=t.scrollLeft}),this.parent.scrollPosition.content={left:t.scrollLeft,top:t.scrollTop}},t.prototype.getOffset=function(e,t){return Math.min(0|t.offsets[e],0|t.offsets[t.maxBlock])},t.prototype.getTranslateY=function(e){var t=(e.newBlockIndex[0]||1)-1,n=this.getOffset(t,e),i=this.getOffset(e.newBlockIndex[e.newBlockIndex.length-1],e);return n>e.currentScrollTop?this.getOffset(t-1,e):i<e.currentScrollTop+e.columnHeight?this.getOffset(t+1,e):n},t.prototype.setPadding=function(e,t,n,i,a){i&&"down"===a?(t.style.paddingTop=e+"px",t.style.paddingBottom="0px"):(t.style.paddingTop=e+"px",t.style.paddingBottom=this.cardHeight*n-e+"px")},t.prototype.getData=function(e,t,n,i){var a=this.query.clone(),r=new v.$(e,"equal",t,!0);return(a.where(r),a.take(n),a.skip(i),a.addParams("KanbanVirtualScroll","KanbanVirtualScroll"),this.parent.dataSource&&"result"in this.parent.dataSource)?this.eventPromise({requestType:""},a).promise:this.parent.dataModule.dataManager.executeQuery(a)},t.prototype.eventPromise=function(e,t){var n=this.getStateEventArgument(t),i=new y.B;return n.updateData=i.resolve,n.action=e,i},t.prototype.getStateEventArgument=function(e){var t=new b.lM,n=new y.h({url:"",adaptor:new b.lM}),i=t.processQuery(n,e),a=JSON.parse(i.data);return(0,m.l7)(a,i.pvtData)},t.prototype.dataManagerSuccess=function(e,t,n,i){var a,r=this;return t?a=(0,m.l7)([],(0,m.le)(e.result.result)?e.result:e.result.result,null,!0):this.parent.trigger(E,e,function(e){a=(0,m.l7)([],(0,m.le)(e.result.result)?e.result:e.result.result,null,!0),r.parent.trigger(A,null,function(){return r.parent.hideSpinner()})}),a},t.prototype.dataManagerFailure=function(e){var t=this;this.parent.isDestroyed||this.parent.trigger(w,{error:e},function(){return t.parent.hideSpinner()})},t.prototype.onColScrollShowSkeleton=function(e){var t=e.target;if(!(this.parent.element.querySelectorAll(".e-card-skeleton-wrapper").length>0)){var n=t.parentElement.getAttribute("data-key"),i=this.scrollStatus[n].previousScrollTop,a=t.parentElement.clientHeight;(t.scrollTop-i>a||i-t.scrollTop>a)&&this.showSkeleton(t,this.scrollStatus[n].singleIndexCardCount)}},t.prototype.showSkeleton=function(e,t){var n=(0,m.az)("div",{className:"e-card-virtual-skeleton-wrapper",attrs:{role:"listbox"}});e.parentElement.insertBefore(n,e),n.style.position="absolute",n.style.zIndex="10";for(var i=0;i<t;i++){var a=(0,m.az)("div",{className:"e-card-skeleton-wrapper"}),r=(0,m.az)("span",{className:"e-skeleton e-skeleton-text e-shimmer-wave"});r.style.height=this.cardHeight+"px",(0,m.le)(e.querySelector(".e-card"))||(r.style.width=e.querySelector(".e-card").getBoundingClientRect().width+"px"),a.appendChild(r),n.appendChild(a)}},t.prototype.hideSkeleton=function(e){setTimeout(function(){for(var t=e.querySelectorAll(".e-card-virtual-skeleton-wrapper"),n=0;n<t.length;n++)(0,m.og)(t[n])},50)},t.prototype.onColumnScroll=function(e){var t,n=this,i=e.target,a=i.scrollTop;if(i.offsetParent&&(t=i.offsetParent.getAttribute("data-key"),this.parent.scrollPosition.column[t]={left:i.scrollLeft,top:i.scrollTop}),this.parent.enableVirtualization){var r=0,o=this.getColumnCards()[t],l=this.parent.dataModule.isRemote()?this.parent.columnDataCount[t]:o.length;r+=l;var s=this.cardHeight*r,d=[],c=[];if(this.checkScrollDirection(t,a),"fast"===this.findScrollSpeed(i,t)&&a>s){this.hideSkeleton(i.parentElement);return}var p=this.scrollStatus[t].maxBlock,h=this.scrollStatus[t].currentBlockIndex.indexOf(p)>-1,u=e.timeStamp-this.scrollStatus[t].previousTimeStamps<300;if(h&&!(0,m.le)(this.scrollStatus[t].previousTimeStamps)&&u){this.hideSkeleton(i.parentElement);return}this.scrollStatus[t].previousTimeStamps=e.timeStamp;var g=this.getInfoFromView(this.scrollStatus[t]);d=g.currentBlockIndex.filter(function(e){return -1===g.newBlockIndex.indexOf(e)}),c=g.newBlockIndex.filter(function(e){return -1===g.currentBlockIndex.indexOf(e)});var f=a+i.clientHeight>=s,y=f?s-i.querySelector("."+ew).childElementCount*this.cardHeight:this.getTranslateY(g),v=i.querySelector("."+ew);if(d.length>0){var b=void 0,S=void 0;1===d[0]?(b=0,S=d.length*this.scrollStatus[t].singleIndexCardCount-1):S=(b=(d[0]-1)*this.scrollStatus[t].singleIndexCardCount)+d.length*this.scrollStatus[t].singleIndexCardCount,this.removeCardsOnScroll(v,"down"===this.scrollStatus[t].scrollDirection,b,S)}if(c.length>0){if(this.parent.dataModule.isRemote()){var C=(c[0]-1)*this.scrollStatus[t].singleIndexCardCount,w=[];this.getData(this.parent.keyField,t,this.scrollStatus[t].singleIndexCardCount*c.length,C).then(function(e){w=n.dataManagerSuccess(e),n.scrollCardInsert(t,v,i,a,i,"down"===n.scrollStatus[t].scrollDirection?0:w.length-1,!0,w,null)}).catch(function(e){return n.dataManagerFailure(e)})}else{var C="down"===this.scrollStatus[t].scrollDirection?(c[0]-1)*this.scrollStatus[t].singleIndexCardCount:(c[0]-1)*this.scrollStatus[t].singleIndexCardCount+this.scrollStatus[t].singleIndexCardCount*c.length-1,k="down"===this.scrollStatus[t].scrollDirection?C+this.scrollStatus[t].singleIndexCardCount*c.length:(c[0]-1)*this.scrollStatus[t].singleIndexCardCount;this.scrollCardInsert(t,v,i,a,i,C,!1,o,k)}}this.scrollStatus[t].currentBlockIndex=this.scrollStatus[t].newBlockIndex,this.setPadding(y,v,l,f,this.scrollStatus[t].scrollDirection),g.currentBlockIndex=g.newBlockIndex,this.parent.renderTemplates(),this.hideSkeleton(i.parentElement)}},t.prototype.checkScrollDirection=function(e,t){this.scrollStatus[e].previousScrollTop=this.scrollStatus[e].currentScrollTop,this.scrollStatus[e].currentScrollTop=t,t>this.scrollStatus[e].previousScrollTop?this.scrollStatus[e].scrollDirection="down":this.scrollStatus[e].scrollDirection="up"},t.prototype.findScrollSpeed=function(e,t){return"down"===this.scrollStatus[t].scrollDirection&&e.scrollTop-this.scrollStatus[t].previousScrollTop>e.clientHeight?"fast":"up"===this.scrollStatus[t].scrollDirection&&this.scrollStatus[t].previousScrollTop-e.scrollTop>e.clientHeight?"fast":"slow"},t.prototype.removeCardsOnScroll=function(e,t,n,i){for(var a=n;a<i;a++){for(var r=t?e.firstChild:e.lastChild;!(0,m.le)(r)&&(r.classList.contains(eQ)||r.classList.contains(eU)||r.classList.contains(eX)||r.classList.contains(eY));)r=t?r.nextSibling:r.previousSibling;(0,m.le)(r)||(0,m.og)(r)}},t.prototype.scrollCardInsert=function(e,t,n,i,a,r,o,l,s){var d=this,c=o?l.length:s,p=o?0:s;if(l.length>0){for(var h=this,u=r;"down"===this.scrollStatus[e].scrollDirection?u<c:u>=p;"down"===this.scrollStatus[e].scrollDirection?u++:u--)!function(n){if(!(0,m.le)(l[n])){var i=l[n][h.parent.cardSettings.headerField],a=h.parent.actionModule.selectionArray.indexOf(i),r=h.renderCard(l[n]);-1!==a&&(r.setAttribute("aria-selected","true"),(0,m.cn)([r],e9));var o={data:l[n],element:r,cancel:!1};h.parent.trigger(k,o,function(n){n.cancel||("down"===d.scrollStatus[e].scrollDirection?t.appendChild(r):t.insertBefore(r,t.firstChild),d.parent.dragAndDropModule.wireDragEvents(r),(0,m.cn)([r],ex))})}}(u);n.scrollTop=i}else a.appendChild(this.renderEmptyCard())},t.prototype.ensureColumnNotEmpty=function(e){var t=this.scrollStatus[e].singleIndexCardCount,n=this.columnData[e],i=this.parent.element.querySelector('.e-content-row:not(.e-swimlane-row) [data-key="'+e+'"]').querySelector("."+ew),a=i.querySelectorAll("."+ek);if(a.length>0){var r=a[a.length-1].getAttribute("data-id"),o=a[0].getAttribute("data-id"),l=void 0,s=void 0;if(a.length<2*t){for(var d=0;d<n.length;d++)r===n[d][this.parent.cardSettings.headerField].toString()&&(l=d),o===n[d][this.parent.cardSettings.headerField].toString()&&(s=d);for(var c=a.length,d=c;d<2*t;d++){var p=l===n.length-1,h=l<n.length?l+1:s-1;if(h<=n.length){var u=n[h];if(!(0,m.le)(u)){var g=this.renderCard(u);this.triggerCardRendering(g,h,n,i,p),p?s=h:l=h}}}}}},t.prototype.triggerCardRendering=function(e,t,n,i,a){var r=this,o=n[t][this.parent.cardSettings.headerField];-1!==this.parent.actionModule.selectionArray.indexOf(o)&&(e.setAttribute("aria-selected","true"),(0,m.cn)([e],e9));var l={data:n[t],element:e,cancel:!1};this.parent.trigger(k,l,function(t){t.cancel||(a?i.insertBefore(e,i.querySelectorAll("."+ek)[0]):i.appendChild(e),r.parent.dragAndDropModule.wireDragEvents(e),(0,m.cn)([e],ex))})},t.prototype.ensureBlocks=function(e){var t=e.newBlockIndex[e.block],n=Math.ceil(e.totalColumnData/e.singleIndexCardCount),i=Math.max;return("down"===e.scrollDirection?t>=n?[i(t,1),--t,--t].reverse():t+1>=n?[i(t-1,1),t,++t]:[i(t,1),++t,++t]:t===n?[i(t-2,1),i(t-1,1),t]:[i(t-1,1),t,t+1]).filter(function(e){return e>0})},t.prototype.getInfoFromView=function(e){var t=!1;e.page=this.getPageFromTop(e),e.newBlockIndex=this.getBlockIndexes(e.page);var n=this.ensureBlocks(e);if(e.newBlockIndex.toString()!==n.toString()){var i=n[n.length-1];-1===e.newBlockIndex.indexOf(i)&&(t=!0)}return e.newBlockIndex=t?n:e.newBlockIndex,e},t.prototype.getBlockIndexes=function(e){return[e+(e-1),2*e]},t.prototype.getPageFromTop=function(e){var t=this,n=e.totalColumnData,i=0;return this.offsetKeys=Object.keys(e.offsets),this.offsetKeys.some(function(a){var r=Number(a),o=e.currentScrollTop<=e.offsets[parseInt(a,10)]||r===n&&e.currentScrollTop>e.offsets[parseInt(a,10)];if(o){var l=Math.ceil(n/e.singleIndexCardCount);t.offsetKeys.length%2!=0&&r.toString()===t.offsetKeys[t.offsetKeys.length-2]&&e.currentScrollTop<=e.offsets[t.offsetKeys.length-1]&&(r=r+1>l?l:r+1),r=r>l?l:r,e.block=r%2==0?1:0,i=Math.max(1,Math.min(t.getPage(r,l),l))}return o}),i},t.prototype.getPage=function(e,t){return e+1>t?e%2==0?e/2:(e-1)/2:e%2==0?e/2:(e+1)/2},t.prototype.onAdaptiveScroll=function(e){this.parent.touchModule.tabHold&&!this.parent.touchModule.mobilePopup&&e.preventDefault()},t.prototype.isColumnVisible=function(e){var t=this,n=!1;return"number"==typeof e.keyField?n=-1===this.parent.actionModule.hideColumnKeys.indexOf(e.keyField.toString()):e.keyField.split(",").forEach(function(e){n=-1===t.parent.actionModule.hideColumnKeys.indexOf(e)}),n},t.prototype.renderLimits=function(e,t){var n=(0,m.az)("div",{className:tt});e.minCount&&n.appendChild((0,m.az)("div",{className:ti,innerHTML:this.parent.localeObj.getConstant("min")+": "+e.minCount.toString()})),e.maxCount&&n.appendChild((0,m.az)("div",{className:tn,innerHTML:this.parent.localeObj.getConstant("max")+": "+e.maxCount.toString()})),n.childElementCount>0&&(t.querySelector("."+eC)?t.insertBefore(n,t.firstElementChild):t.appendChild(n))},t.prototype.renderValidation=function(){var e=this;this.parent.columns.forEach(function(t){if(t.minCount||t.maxCount){var n=e.columnData[t.keyField],i='[data-key="'+t.keyField+'"]',a=e.parent.element.querySelector("."+(ea+i)),r=[].slice.call(e.parent.element.querySelectorAll("."+(ep+i)));e.renderLimits(t,a);var o=e.getValidationClass(t,n.length);o&&(0,m.cn)(r.concat(a),o)}})},t.prototype.getValidationClass=function(e,t){var n;return e.maxCount&&t>e.maxCount?n=ta:e.minCount&&t<e.minCount&&(n=tr),n},t.prototype.refreshValidation=function(){[].slice.call(this.parent.element.querySelectorAll("."+tt)).forEach(function(e){(0,m.Od)(e)});var e=[].slice.call(this.parent.element.querySelectorAll("."+tr));(0,m.IV)(e,tr);var t=[].slice.call(this.parent.element.querySelectorAll("."+ta));(0,m.IV)(t,ta),this.renderValidation()},t.prototype.getColumnData=function(e,t){var n=this;void 0===t&&(t=this.parent.kanbanData);var i=[];if("number"==typeof e){var a=t.filter(function(t){return t[n.parent.keyField]===e});i=i.concat(a)}else for(var r=e.split(","),o=function(e){var a=t.filter(function(t){return t[n.parent.keyField]===e.trim()});i=i.concat(a)},l=0;l<r.length;l++)o(r[l]);return this.sortCategory(i),i},t.prototype.sortCategory=function(e){var t=this.parent.cardSettings.headerField,n=this.parent.sortSettings.direction;switch(this.parent.sortSettings.sortBy){case"DataSourceOrder":this.sortOrder(t,n,e);break;case"Custom":case"Index":this.parent.sortSettings.field&&(t=this.parent.sortSettings.field),this.sortOrder(t,n,e)}return e},t.prototype.sortOrder=function(e,t,n){var i,a,r=!0;return this.parent.kanbanData.length>0&&(r="number"==typeof this.parent.kanbanData[0][e]),(r||"Index"!==this.parent.sortSettings.sortBy)&&(n=n.sort(function(t,n){return r?(i=t[e],a=n[e]):(i=t[e].toLowerCase(),a=n[e].toLowerCase()),i>a?1:a>i?-1:0}),"Descending"===t&&n.reverse()),n},t.prototype.documentClick=function(e){if(e.target.classList.contains(e6)&&this.parent.element.querySelector("."+te).classList.contains("e-popup-open")&&(this.treePopup.hide(),(0,m.IV)([this.popupOverlay],"e-enable")),!(0,m.oq)(e.target,"."+Q)){var t=[].slice.call(this.parent.element.querySelectorAll("."+ek+"."+e9));(0,m.IV)(t,e9),this.disableAttributeSelection(t)}},t.prototype.disableAttributeSelection=function(e){e instanceof Element?e.setAttribute("aria-selected","false"):e.forEach(function(e){e.setAttribute("aria-selected","false")})},t.prototype.getColumnCards=function(e){var t=this,n={};return this.columnKeys=[],this.parent.columns.forEach(function(i){"number"==typeof i.keyField?t.columnKeys=t.columnKeys.concat(i.keyField.toString()):t.columnKeys=t.columnKeys.concat(i.keyField.split(",").map(function(e){return e.trim()}));var a=t.getColumnData(i.keyField,e);n[i.keyField]=a}),n},t.prototype.refreshHeaders=function(){var e=this.parent.element.querySelector("."+en);[].slice.call(e.children).forEach(function(e){return(0,m.Od)(e)}),this.renderHeader(e)},t.prototype.refreshCards=function(){this.parent.resetTemplates(["cardTemplate"]),[].slice.call(this.parent.element.querySelectorAll("."+ew)).forEach(function(e){return(0,m.Od)(e)}),this.renderCards(),this.wireDragEvent(),this.parent.renderTemplates()},t.prototype.refresh=function(){var e=this,t=!1;this.parent.columns.forEach(function(n){if(n.showItemCount){n&&n.template&&!t&&(e.refreshHeaders(),t=!0);var i="."+ea+'[data-key="'+n.keyField+'"] .'+eS,a=e.parent.element.querySelector(i);if(a){var r=e.parent.dataModule.isRemote()?e.parent.columnDataCount[n.keyField]:e.columnData[n.keyField].length,o="number"==typeof n.keyField,l=0;if(o)l=[].slice.call(e.parent.element.querySelectorAll("."+ek+"[data-key="+n.keyField+"]")).length;else for(var s=n.keyField.split(","),d=0;d<s.length;d++){var c=s[d];l=[].slice.call(e.parent.element.querySelectorAll("."+ek+"[data-key="+c.trim()+"]")).length+l}a.innerHTML="- "+r+" "+e.parent.localeObj.getConstant("items")}}}),this.refreshValidation()},t.prototype.updateScrollPosition=function(){var e=this,t=this.parent.element.querySelector("."+eh);t&&(m.AR.isIE?(t.scrollTop=this.parent.scrollPosition.content.top,t.scrollLeft=this.parent.scrollPosition.content.left):t.scrollTo(this.parent.scrollPosition.content.left,this.parent.scrollPosition.content.top)),[].slice.call(this.parent.element.querySelectorAll("."+eC)).forEach(function(t){if(t.offsetParent){var n=e.parent.scrollPosition.column[t.offsetParent.getAttribute("data-key")];n&&(m.AR.isIE?(t.scrollTop=n.top,t.scrollLeft=n.left):t.scrollTo(n.left,n.top))}})},t.prototype.renderCardBasedOnIndex=function(e,t,n,i){var a=this,r=e[this.parent.keyField],o=this.parent.element.querySelector(".e-content-row:not(.e-swimlane-row)");if("Index"!==this.parent.sortSettings.sortBy){var l=this.parent.cardSettings.headerField;if("Custom"===this.parent.sortSettings.sortBy&&(l=this.parent.sortSettings.field),(0,m.le)(this.parent.swimlaneSettings.keyField))t=this.getColumnData(r,this.parent.kanbanData).findIndex(function(t){return t[l]===e[l]});else{var s=this.parent.getSwimlaneData(e[this.parent.swimlaneSettings.keyField]);t=this.getColumnData(r,s).findIndex(function(t){return t[l]===e[l]})}}else"Index"===this.parent.sortSettings.sortBy&&this.parent.sortSettings.field&&"Ascending"===this.parent.sortSettings.direction&&(t=e[this.parent.sortSettings.field]-1);if(o){var d=[].slice.call(o.children).filter(function(e){return -1!==e.getAttribute("data-key").replace(/\s/g,"").split(",").indexOf(r.toString().replace(/\s/g,""))})[0],c=d.querySelector("."+ew),p=c.querySelector("."+ez);p&&(0,m.Od)(p);var h=this.renderCard(e);this.parent.allowDragAndDrop&&d.classList.contains(eE)&&(this.parent.dragAndDropModule.wireDragEvents(h),(0,m.cn)([h],ex)),this.parent.trigger(k,{data:e,element:h,cancel:!1},function(e){var o=!!n||c.childNodes.length<a.scrollStatus[r].singleIndexCardCount;(e.cancel||!o)&&(0,m.le)(i)||((0,m.le)(t)||0===c.children.length?c.appendChild(h):c.insertBefore(h,c.childNodes[t]))})}},t.prototype.removeCard=function(e){var t=e[this.parent.cardSettings.headerField],n=this.parent.element.querySelector("."+ek+'[data-id="'+t+'"]');this.isSelectedCard=!!n.classList.contains(e9);var i=n.parentElement;n&&(0,m.Od)(n),0===i.querySelectorAll("."+ek+":not(."+eY+")").length&&i.appendChild(this.renderEmptyCard())},t.prototype.wireEvents=function(){var e=this;m.bi.add(this.parent.element,"click",this.parent.actionModule.clickHandler,this.parent.actionModule),m.bi.add(this.parent.element,"dblclick",this.parent.actionModule.doubleClickHandler,this.parent.actionModule),m.bi.add(document,m.AR.touchStartEvent,this.documentClick,this),window.addEventListener("resize",this.windowResize.bind(this));var t=this.parent.element.querySelector("."+eh);m.bi.add(t,"scroll",this.onContentScroll,this),[].slice.call(this.parent.element.querySelectorAll("."+eC)).forEach(function(t){e.parent.isInitialRender&&t.offsetParent&&(e.parent.scrollPosition.column[t.offsetParent.getAttribute("data-key")]={left:0,top:0}),m.bi.add(t,"scroll",e.onColScrollShowSkeleton,e),m.bi.add(t,"scroll",(0,m.Ds)(e.onColumnScroll,200),e)}),this.parent.isAdaptive&&(this.parent.touchModule.wireTouchEvents(),t.scrollLeft=this.scrollLeft),this.wireDragEvent()},t.prototype.unWireEvents=function(){var e=this;m.bi.remove(this.parent.element,"click",this.parent.actionModule.clickHandler),m.bi.remove(this.parent.element,"dblclick",this.parent.actionModule.doubleClickHandler),m.bi.remove(document,m.AR.touchStartEvent,this.documentClick),window.removeEventListener("resize",this.windowResize.bind(this));var t=this.parent.element.querySelector("."+eh);t&&(m.bi.remove(t,"scroll",this.onContentScroll),m.bi.remove(t,"scroll",this.onColScrollShowSkeleton),this.parent.allowDragAndDrop&&this.unWireDragEvent());var n=[].slice.call(this.parent.element.querySelectorAll("."+eC));n.length>0&&n.forEach(function(t){m.bi.remove(t,"scroll",(0,m.Ds)(e.onColumnScroll,200))}),this.parent.isAdaptive&&this.parent.touchModule.unWireTouchEvents()},t.prototype.wireDragEvent=function(){var e=this;if(this.parent.allowDragAndDrop){var t=[].slice.call(this.parent.element.querySelectorAll("."+ep+"."+eE+" ."+ek));(0,m.cn)(t,ex),t.length>0&&t.forEach(function(t){return e.parent.dragAndDropModule.wireDragEvents(t)})}},t.prototype.unWireDragEvent=function(){var e=this,t=[].slice.call(this.parent.element.querySelectorAll("."+ep+"."+eE+" ."+ek));(0,m.IV)(t,ex),t.length>0&&t.forEach(function(t){return e.parent.dragAndDropModule.unWireDragEvents(t)})},t.prototype.destroy=function(){this.parent.resetTemplates(),this.parent.off(D,this.initRender),this.parent.off(O,this.scrollUiUpdate),this.unWireEvents();var e=this.parent.element.querySelector("."+en);e&&(0,m.Od)(e);var t=this.parent.element.querySelector("."+eh);t&&(0,m.Od)(t),this.treeViewObj&&(this.treeViewObj.destroy(),this.treeViewObj=null),this.treePopup&&(this.treePopup.destroy(),this.treePopup=null);var n=this.parent.element.querySelector("."+e7);n&&(0,m.Od)(n);var i=this.parent.element.querySelector("."+e4);i&&(0,m.Od)(i)},t}(tR),tH=(h=function(e,t){return(h=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}h(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),tV=function(e,t,n,i){var a,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(o=(r<3?a(o):r>3?a(t,n,o):a(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},tN=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.columnDataCount={},i.needsID=!0,i}return tH(t,e),t.prototype.preRender=function(){this.isAdaptive=m.AR.isDevice,this.kanbanData=[],this.enablePersistence&&this.swimlaneToggleArray||(this.swimlaneToggleArray=[]),this.activeCardData={data:null,element:null},this.localeObj=new m.E7(this.getModuleName(),{items:"items",min:"Min",max:"Max",cardsSelected:"Cards Selected",addTitle:"Add New Card",editTitle:"Edit Card Details",deleteTitle:"Delete Card",deleteContent:"Are you sure you want to delete this card?",save:"Save",delete:"Delete",cancel:"Cancel",yes:"Yes",no:"No",close:"Close",noCard:"No cards to display",unassigned:"Unassigned"},this.locale),this.scrollPosition={content:{left:0,top:0},column:{}},this.isInitialRender=!0},t.prototype.requiredModules=function(){return[]},t.prototype.getPersistData=function(){return this.dataSource.length>0?this.addOnPersist(["columns","dataSource","swimlaneToggleArray"]):this.addOnPersist(["columns","kanbanData","swimlaneToggleArray"])},t.prototype.getModuleName=function(){return"kanban"},t.prototype.render=function(){var e=[Q],t=[];this.enableRtl?e.push(X):t.push(X),this.isAdaptive?e.push(G):t.push(G),this.cssClass&&e.push(this.cssClass),this.element.setAttribute("role","presentation"),(0,m.s1)(this.element,e,t),this.element.style.width=(0,m.Ac)(this.width),this.element.style.height=(0,m.Ac)(this.height),(0,f.rj)({target:this.element}),this.showSpinner(),this.initializeModules()},t.prototype.onPropertyChanged=function(e,t){for(var n=0,i=Object.keys(e);n<i.length;n++)switch(i[n]){case"cssClass":t.cssClass&&(0,m.IV)([this.element],t.cssClass),e.cssClass&&(0,m.cn)([this.element],e.cssClass);break;case"enableRtl":case"locale":this.refresh();break;case"width":this.element.style.width=(0,m.Ac)(e.width),this.element.querySelector("."+en).firstElementChild.style.width="auto",this.notify(O,{});break;case"height":this.element.style.height=(0,m.Ac)(e.height),this.element.querySelector("."+eh).style.height="auto",this.notify(O,{});break;case"dataSource":case"query":this.dataModule&&this.dataModule.setState({isDataChanged:!1}),this.dataModule=new M(this);break;case"columns":case"constraintType":case"sortSettings":this.notify(D,{processedData:this.kanbanData});break;case"swimlaneSettings":this.onSwimlaneSettingsPropertyChanged(e.swimlaneSettings,t.swimlaneSettings);break;case"cardSettings":this.onCardSettingsPropertyChanged(e.cardSettings,t.cardSettings);break;case"allowDragAndDrop":e.allowDragAndDrop?this.enableVirtualization?this.virtualLayoutModule.wireDragEvent():this.layoutModule.wireDragEvent():this.enableVirtualization?this.virtualLayoutModule.unWireDragEvent():this.layoutModule.unWireDragEvent();break;case"enableTooltip":this.tooltipModule&&(this.tooltipModule.destroy(),this.tooltipModule=null),e.enableTooltip&&(this.tooltipModule=new tT(this),this.enableVirtualization?this.virtualLayoutModule.refreshCards():this.layoutModule.refreshCards());break;case"dialogSettings":e.dialogSettings&&(this.dialogModule=new tA(this));break;case"allowKeyboard":this.keyboardModule&&(this.keyboardModule.destroy(),this.keyboardModule=null),e.allowKeyboard&&(this.keyboardModule=new tO(this));break;case"stackedHeaders":this.enableVirtualization?this.virtualLayoutModule.refreshHeaders():this.layoutModule.refreshHeaders()}},t.prototype.onSwimlaneSettingsPropertyChanged=function(e,t){for(var n=0,i=Object.keys(e);n<i.length;n++)switch(i[n]){case"keyField":case"textField":case"showEmptyRow":case"showItemCount":case"template":case"sortDirection":this.notify(D,{processedData:this.kanbanData});break;case"enableFrozenRows":this.layoutModule.frozenSwimlaneRow&&!this.swimlaneSettings.enableFrozenRows&&this.layoutModule.removeFrozenRows()}},t.prototype.onCardSettingsPropertyChanged=function(e,t){for(var n=[],i=0,a=Object.keys(e);i<a.length;i++)switch(a[i]){case"showHeader":case"headerField":case"contentField":case"template":case"tagsField":case"grabberField":case"footerCssField":this.enableVirtualization?this.virtualLayoutModule.refreshCards():this.layoutModule.refreshCards();break;case"selectionType":(n=this.getSelectedCards()).length>0&&((0,m.IV)(n,e9),this.enableVirtualization?this.virtualLayoutModule.disableAttributeSelection(n):this.layoutModule.disableAttributeSelection(n))}},t.prototype.initializeModules=function(){this.dataModule=new M(this),this.enableVirtualization?this.virtualLayoutModule=new tP(this):this.layoutModule=new tI(this),this.allowKeyboard&&(this.keyboardModule=new tO(this)),this.actionModule=new tu(this),this.crudModule=new tg(this),this.dragAndDropModule=new tm(this),this.dialogModule=new tA(this),this.enableTooltip&&(this.tooltipModule=new tT(this)),(m.AR.isDevice||m.AR.isTouch)&&(this.touchModule=new tj(this))},t.prototype.renderTemplates=function(){this.isReact&&this.renderReactTemplates()},t.prototype.resetTemplates=function(e){this.isReact&&this.clearTemplate(e)},t.prototype.destroyModules=function(){this.layoutModule&&(this.layoutModule.destroy(),this.layoutModule=null),this.keyboardModule&&(this.keyboardModule.destroy(),this.keyboardModule=null),this.touchModule&&(this.touchModule.destroy(),this.touchModule=null),this.tooltipModule&&(this.tooltipModule.destroy(),this.tooltipModule=null),this.virtualLayoutModule&&(this.virtualLayoutModule.destroy(),this.virtualLayoutModule=null),this.dialogModule=null,this.actionModule=null,this.crudModule=null,this.dataModule=null,this.dragAndDropModule=null},t.prototype.templateParser=function(e){if(e)try{if("function"==typeof e)return(0,m.MY)(e);if(document.querySelectorAll(e).length)return(0,m.MY)(document.querySelector(e).innerHTML.trim());return(0,m.MY)(e)}catch(t){return(0,m.MY)(e)}},t.prototype.getCardDetails=function(e){var t=this,n="number"==typeof this.kanbanData[0][this.cardSettings.headerField]?parseInt(e.getAttribute("data-id"),10):e.getAttribute("data-id");return this.kanbanData.filter(function(e){return e[t.cardSettings.headerField]===n})[0]},t.prototype.getColumnData=function(e,t){return this.enableVirtualization?this.virtualLayoutModule.getColumnCards(t)[""+e]||[]:this.layoutModule.getColumnCards(t)[""+e]||[]},t.prototype.getSwimlaneData=function(e){return this.layoutModule.getSwimlaneCards()[""+e]||[]},t.prototype.getSelectedCards=function(){return[].slice.call(this.element.querySelectorAll("."+ek+"."+e9))},t.prototype.showSpinner=function(){(0,f.yh)(this.element)},t.prototype.hideSpinner=function(){(0,f.v3)(this.element)},t.prototype.openDialog=function(e,t){this.dialogModule.openDialog(e,t)},t.prototype.closeDialog=function(){this.dialogModule.closeDialog()},t.prototype.addCard=function(e,t){this.crudModule.addCard(e,t)},t.prototype.updateCard=function(e,t){this.crudModule.updateCard(e,t)},t.prototype.deleteCard=function(e){this.crudModule.deleteCard(e)},t.prototype.addColumn=function(e,t){this.actionModule.addColumn(e,t)},t.prototype.deleteColumn=function(e){this.actionModule.deleteColumn(e)},t.prototype.showColumn=function(e){this.actionModule.showColumn(e)},t.prototype.hideColumn=function(e){this.actionModule.hideColumn(e)},t.prototype.refreshUI=function(e,t){t=t||0,this.dataModule.refreshUI(e,t)},t.prototype.refreshHeader=function(){this.resetTemplates(["columnTemplate"]),this.enableVirtualization?this.virtualLayoutModule.refreshHeaders():this.layoutModule.refreshHeaders(),this.renderTemplates()},t.prototype.destroy=function(){this.destroyModules(),[].slice.call(this.element.childNodes).forEach(function(e){(0,m.og)(e)});var t=[Q];this.cssClass&&(t=t.concat(this.cssClass.split(" "))),(0,m.IV)([this.element],t),e.prototype.destroy.call(this)},tV([(0,m.Z9)()],t.prototype,"cssClass",void 0),tV([(0,m.Z9)("auto")],t.prototype,"width",void 0),tV([(0,m.Z9)("auto")],t.prototype,"height",void 0),tV([(0,m.Z9)("auto")],t.prototype,"cardHeight",void 0),tV([(0,m.Z9)()],t.prototype,"enableVirtualization",void 0),tV([(0,m.Z9)([])],t.prototype,"dataSource",void 0),tV([(0,m.Z9)()],t.prototype,"query",void 0),tV([(0,m.Z9)()],t.prototype,"keyField",void 0),tV([(0,m.Z9)("Column")],t.prototype,"constraintType",void 0),tV([(0,m.Z9)([])],t.prototype,"externalDropId",void 0),tV([(0,m.FE)([],B)],t.prototype,"columns",void 0),tV([(0,m.Z9)(!0)],t.prototype,"allowKeyboard",void 0),tV([(0,m.Z9)(!0)],t.prototype,"enableHtmlSanitizer",void 0),tV([(0,m.FE)([],Z)],t.prototype,"stackedHeaders",void 0),tV([(0,m.Zz)({},q)],t.prototype,"swimlaneSettings",void 0),tV([(0,m.Zz)({},I)],t.prototype,"cardSettings",void 0),tV([(0,m.Zz)({},Y)],t.prototype,"sortSettings",void 0),tV([(0,m.Zz)({},H)],t.prototype,"dialogSettings",void 0),tV([(0,m.Z9)(!0)],t.prototype,"allowDragAndDrop",void 0),tV([(0,m.Z9)(!1)],t.prototype,"enableTooltip",void 0),tV([(0,m.Z9)(!1)],t.prototype,"showEmptyColumn",void 0),tV([(0,m.Z9)(!1)],t.prototype,"enablePersistence",void 0),tV([(0,m.Z9)()],t.prototype,"tooltipTemplate",void 0),tV([(0,m.ju)()],t.prototype,"actionBegin",void 0),tV([(0,m.ju)()],t.prototype,"actionComplete",void 0),tV([(0,m.ju)()],t.prototype,"actionFailure",void 0),tV([(0,m.ju)()],t.prototype,"created",void 0),tV([(0,m.ju)()],t.prototype,"dataBinding",void 0),tV([(0,m.ju)()],t.prototype,"dataBound",void 0),tV([(0,m.ju)()],t.prototype,"cardClick",void 0),tV([(0,m.ju)()],t.prototype,"cardDoubleClick",void 0),tV([(0,m.ju)()],t.prototype,"queryCellInfo",void 0),tV([(0,m.ju)()],t.prototype,"cardRendered",void 0),tV([(0,m.ju)()],t.prototype,"dragStart",void 0),tV([(0,m.ju)()],t.prototype,"drag",void 0),tV([(0,m.ju)()],t.prototype,"dragStop",void 0),tV([(0,m.ju)()],t.prototype,"dialogOpen",void 0),tV([(0,m.ju)()],t.prototype,"dialogClose",void 0),tV([(0,m.ju)()],t.prototype,"dataStateChange",void 0),tV([(0,m.ju)()],t.prototype,"dataSourceChanged",void 0),t=tV([m.Zl],t)}(m.wA),tB=n(75747),t_=(u=function(e,t){return(u=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}u(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),tW=function(e){function t(t){var n=e.call(this,t)||this;return n.initRenderCalled=!1,n.checkInjectedModules=!0,n.directivekeys={columns:"column",stackedHeaders:"stackedHeader"},n.statelessTemplateProps=null,n.templateProps=null,n.immediateRender=!1,n.portals=[],n}return t_(t,e),t.prototype.render=function(){if((!this.element||this.initRenderCalled)&&!this.refreshing||this.isReactForeceUpdate)return g.createElement("div",this.getDefaultAttributes(),[].concat(this.props.children,this.portals));e.prototype.render.call(this),this.initRenderCalled=!0},t}(tN);(0,tB.ef)(tW,[tB.VZ,g.Component])},86943:function(){},19118:function(){}}]);