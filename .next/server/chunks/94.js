exports.id=94,exports.ids=[94],exports.modules={79177:function(e,t,i){var n,r,a,s,o,l,h,p,c,d,u,m,f,v,g,y,b,D,w,C,T,E,S,O,k,x,M,V,I,A,N,P,H,R,F,U,L,B,j,W,q,z,Y,_,G,K,X,Z,Q,J,$,ee,et,ei,en,er,ea,es,eo,el,eh,ep,ec,ed,eu,em,ef,ev,eg,ey,eb,eD,ew,eC,eT,eE,eS,eO,ek,ex,eM,eV,eI,eA,eN,eP,eH,eR,eF,eU,eL,eB,ej,eW,eq,ez,eY,e_,eG,eK,eX,eZ,eQ,eJ,e$,e0,e1,e2,e3,e6,e4,e5,e8;/*!
*  filename: ej2-calendars.umd.min.js
*  version : 23.1.36
*  Copyright Syncfusion Inc. 2001 - 2020. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/n=i(38295),r=i(9456),a=i(88451),s=i(52684),o=i(41019),l=function(e,t){return(l=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},u=function(e,t){function i(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},m=function(e,t,i,n){var r,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(s=(a<3?r(s):a>3?r(t,i,s):r(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},f="e-other-month",v="e-other-year",g="e-calendar",y="e-year",b="e-month",D="e-disabled",w="e-overlay",C="e-week-number",T="e-selected",E="e-focused-date",S="e-month-hide",O="e-zoomin",k="e-calendar-day-header-lg",M=function(e){function t(t,i){return e.call(this,t,i)||this}return u(t,e),t.prototype.render=function(){if("Islamic"===this.calendarMode&&void 0===this.islamicModule&&n.throwError("Requires the injectable Islamic modules to render Calendar in Islamic mode"),this.isMultiSelection&&"object"==typeof this.values&&!n.isNullOrUndefined(this.values)&&this.values.length>0){for(var t=[],i=[],r=0;r<this.values.length;r++)-1===t.indexOf(+this.values[r])&&(t.push(+this.values[r]),i.push(this.values[r]));this.setProperties({values:i},!0);for(var a=0;a<this.values.length;a++)if(!this.checkDateValue(this.values[a])){if("string"==typeof this.values[a]&&this.checkDateValue(new Date(this.checkValue(this.values[a])))){var s=new Date(this.checkValue(this.values[a]));this.values.splice(a,1),this.values.splice(a,0,s)}else this.values.splice(a,1)}this.setProperties({value:this.values[this.values.length-1]},!0),this.previousValues=this.values.length}if(this.validateDate(),this.minMaxUpdate(),"calendar"===this.getModuleName()&&(this.setEnable(this.enabled),this.setClass(this.cssClass)),e.prototype.render.call(this),"calendar"===this.getModuleName()){var o=n.closest(this.element,"form");o&&n.EventHandler.add(o,"reset",this.formResetHandler.bind(this)),this.setTimeZone(this.serverTimezoneOffset)}this.renderComplete()},t.prototype.setEnable=function(e){e?n.removeClass([this.element],D):n.addClass([this.element],D)},t.prototype.setClass=function(e,t){n.isNullOrUndefined(t)||(t=t.replace(/\s+/g," ").trim()),n.isNullOrUndefined(e)||(e=e.replace(/\s+/g," ").trim()),n.isNullOrUndefined(t)||""===t||n.removeClass([this.element],t.split(" ")),n.isNullOrUndefined(e)||n.addClass([this.element],e.split(" "))},t.prototype.isDayLightSaving=function(){var e=new Date(this.value.getFullYear(),6,1).getTimezoneOffset(),t=new Date(this.value.getFullYear(),0,1).getTimezoneOffset();return this.value.getTimezoneOffset()<Math.max(t,e)},t.prototype.setTimeZone=function(e){if(!n.isNullOrUndefined(this.serverTimezoneOffset)&&this.value){var t=e+(new Date).getTimezoneOffset()/60;t=this.isDayLightSaving()?t--:t,this.value=new Date(this.value.getTime()+60*t*6e4)}},t.prototype.formResetHandler=function(){this.setProperties({value:null},!0)},t.prototype.validateDate=function(){"string"==typeof this.value&&this.setProperties({value:this.checkDateValue(new Date(this.checkValue(this.value)))},!0),e.prototype.validateDate.call(this,this.value),!n.isNullOrUndefined(this.value)&&this.min<=this.max&&this.value>=this.min&&this.value<=this.max&&(this.currentDate=new Date(this.checkValue(this.value))),isNaN(+this.value)&&this.setProperties({value:null},!0)},t.prototype.minMaxUpdate=function(){"calendar"===this.getModuleName()&&(!n.isNullOrUndefined(this.value)&&this.value<=this.min&&this.min<=this.max?(this.setProperties({value:this.min},!0),this.changedArgs={value:this.value}):!n.isNullOrUndefined(this.value)&&this.value>=this.max&&this.min<=this.max&&(this.setProperties({value:this.max},!0),this.changedArgs={value:this.value})),"calendar"===this.getModuleName()||n.isNullOrUndefined(this.value)?e.prototype.minMaxUpdate.call(this,this.value):!n.isNullOrUndefined(this.value)&&this.value<this.min&&this.min<=this.max?e.prototype.minMaxUpdate.call(this,this.min):!n.isNullOrUndefined(this.value)&&this.value>this.max&&this.min<=this.max&&e.prototype.minMaxUpdate.call(this,this.max)},t.prototype.generateTodayVal=function(t){var i=new Date;return n.isNullOrUndefined(this.timezone)||(i=e.prototype.getDate.call(this,i,this.timezone)),t&&n.isNullOrUndefined(this.timezone)?(i.setHours(t.getHours()),i.setMinutes(t.getMinutes()),i.setSeconds(t.getSeconds()),i.setMilliseconds(t.getMilliseconds())):i=new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0,0),i},t.prototype.todayButtonClick=function(t){if(this.showTodayButton){var i=this.generateTodayVal(this.value);if(this.setProperties({value:i},!0),this.isTodayClicked=!0,this.todayButtonEvent=t,this.isMultiSelection){var n=this.copyValues(this.values);e.prototype.checkPresentDate.call(this,i,this.values)||(n.push(i),this.setProperties({values:n}))}e.prototype.todayButtonClick.call(this,t,new Date(+this.value))}},t.prototype.keyActionHandle=function(t){e.prototype.keyActionHandle.call(this,t,this.value,this.isMultiSelection)},t.prototype.preRender=function(){var t=this;this.changeHandler=function(e){t.triggerChange(e)},this.checkView(),e.prototype.preRender.call(this,this.value)},t.prototype.createContent=function(){this.previousDate=this.value,this.previousDateTime=this.value,e.prototype.createContent.call(this)},t.prototype.minMaxDate=function(t){return e.prototype.minMaxDate.call(this,t)},t.prototype.renderMonths=function(t,i,n){e.prototype.renderMonths.call(this,t,this.value,n)},t.prototype.renderDays=function(t,i,n,r,a,s){var o=e.prototype.renderDays.call(this,t,this.value,this.isMultiSelection,this.values,a,s);return this.isMultiSelection&&e.prototype.validateValues.call(this,this.isMultiSelection,this.values),o},t.prototype.renderYears=function(t){"Gregorian"===this.calendarMode?e.prototype.renderYears.call(this,t,this.value):this.islamicModule.islamicRenderYears(t,this.value)},t.prototype.renderDecades=function(t){"Gregorian"===this.calendarMode?e.prototype.renderDecades.call(this,t,this.value):this.islamicModule.islamicRenderDecade(t,this.value)},t.prototype.renderTemplate=function(t,i,n,r){"Gregorian"===this.calendarMode?e.prototype.renderTemplate.call(this,t,i,n,r,this.value):this.islamicModule.islamicRenderTemplate(t,i,n,r,this.value),this.changedArgs={value:this.value,values:this.values},this.changeHandler()},t.prototype.clickHandler=function(t){var i=t.currentTarget;if(this.isPopupClicked=!0,i.classList.contains(f)){if(this.isMultiSelection){var r=this.copyValues(this.values);-1===r.toString().indexOf(this.getIdValue(t,null).toString())?(r.push(this.getIdValue(t,null)),this.setProperties({values:r},!0),this.setProperties({value:this.values[this.values.length-1]},!0)):this.previousDates=!0}else this.setProperties({value:this.getIdValue(t,null)},!0)}var a=this.currentView();e.prototype.clickHandler.call(this,t,this.value),this.isMultiSelection&&this.currentDate!==this.value&&!n.isNullOrUndefined(this.tableBodyElement.querySelectorAll("."+E)[0])&&"Year"===a&&this.tableBodyElement.querySelectorAll("."+E)[0].classList.remove(E)},t.prototype.switchView=function(t,i,n,r){e.prototype.switchView.call(this,t,i,this.isMultiSelection,r)},t.prototype.getModuleName=function(){return e.prototype.getModuleName.call(this),"calendar"},t.prototype.getPersistData=function(){return e.prototype.getPersistData.call(this),this.addOnPersist(["value","values"])},t.prototype.onPropertyChanged=function(t,i){this.effect="",this.rangeValidation(this.min,this.max);for(var n=0,r=Object.keys(t);n<r.length;n++)switch(r[n]){case"value":this.isDateSelected&&("string"==typeof t.value?this.setProperties({value:new Date(this.checkValue(t.value))},!0):t.value=new Date(this.checkValue(t.value)),isNaN(+this.value)&&this.setProperties({value:i.value},!0),this.update());break;case"values":if(this.isDateSelected){if("string"==typeof t.values||"number"==typeof t.values)this.setProperties({values:null},!0);else{for(var a=this.copyValues(this.values),s=0;s<a.length;s++){var o=a[s];this.checkDateValue(o)&&!e.prototype.checkPresentDate.call(this,o,a)&&a.push(o)}this.setProperties({values:a},!0),this.values.length>0&&this.setProperties({value:t.values[t.values.length-1]},!0)}this.validateValues(this.isMultiSelection,this.values),this.update()}break;case"isMultiSelection":this.isDateSelected&&(this.setProperties({isMultiSelection:t.isMultiSelection},!0),this.update());break;case"enabled":this.setEnable(this.enabled);break;case"cssClass":"calendar"===this.getModuleName()&&this.setClass(t.cssClass,i.cssClass);break;default:e.prototype.onPropertyChanged.call(this,t,i,this.isMultiSelection,this.values)}this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange},t.prototype.destroy=function(){if(e.prototype.destroy.call(this),"calendar"===this.getModuleName()){this.changedArgs=null;var t=n.closest(this.element,"form");t&&n.EventHandler.remove(t,"reset",this.formResetHandler.bind(this))}},t.prototype.navigateTo=function(t,i,n){this.minMaxUpdate(),e.prototype.navigateTo.call(this,t,i,n)},t.prototype.currentView=function(){return e.prototype.currentView.call(this)},t.prototype.addDate=function(t){if("string"!=typeof t&&"number"!=typeof t){var i=this.copyValues(this.values);if("object"==typeof t&&t.length>0)for(var r=0;r<t.length;r++)this.checkDateValue(t[r])&&!e.prototype.checkPresentDate.call(this,t[r],i)&&(!n.isNullOrUndefined(i)&&i.length>0?i.push(t[r]):i=[new Date(+t[r])]);else this.checkDateValue(t)&&!e.prototype.checkPresentDate.call(this,t,i)&&(!n.isNullOrUndefined(i)&&i.length>0?i.push(t):i=[new Date(+t)]);this.setProperties({values:i},!0),this.isMultiSelection&&this.setProperties({value:this.values[this.values.length-1]},!0),this.validateValues(this.isMultiSelection,i),this.update(),this.changedArgs={value:this.value,values:this.values},this.changeHandler()}},t.prototype.removeDate=function(e){if("string"!=typeof e&&"number"!=typeof e&&!n.isNullOrUndefined(this.values)&&this.values.length>0){var t=this.copyValues(this.values);if("object"==typeof e&&e.length>0)for(var i=0;i<e.length;i++)for(var r=0;r<t.length;r++)+t[r]==+e[i]&&t.splice(r,1);else for(r=0;r<t.length;r++)+t[r]==+e&&t.splice(r,1);this.setProperties({values:t},!1),this.update(),this.isMultiSelection&&this.setProperties({value:this.values[this.values.length-1]},!0),this.changedArgs={value:this.value,values:this.values},this.changeHandler()}},t.prototype.setTodayDate=function(t){var i=new Date(+t);this.setProperties({value:i},!0),e.prototype.todayButtonClick.call(this,null,i,!0)},t.prototype.update=function(){this.validateDate(),this.minMaxUpdate(),e.prototype.setValueUpdate.call(this)},t.prototype.selectDate=function(t,i,r){e.prototype.selectDate.call(this,t,i,r,this.isMultiSelection,this.values),this.isMultiSelection&&!n.isNullOrUndefined(this.values)&&this.values.length>0&&this.setProperties({value:this.values[this.values.length-1]},!0),this.changedArgs={value:this.value,values:this.values},this.changeHandler(t)},t.prototype.changeEvent=function(e){((this.value&&this.value.valueOf())!==(this.previousDate&&+this.previousDate.valueOf())||this.isMultiSelection)&&(this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",this.changedArgs),this.previousDate=new Date(+this.value))},t.prototype.triggerChange=function(e){!n.isNullOrUndefined(this.todayButtonEvent)&&this.isTodayClicked&&(e=this.todayButtonEvent,this.isTodayClicked=!1),this.changedArgs.event=e||null,this.changedArgs.isInteracted=!n.isNullOrUndefined(e),n.isNullOrUndefined(this.value)||this.setProperties({value:this.value},!0),this.isMultiSelection||+this.value===Number.NaN||(n.isNullOrUndefined(this.value)||n.isNullOrUndefined(this.previousDate))&&(null!==this.previousDate||isNaN(+this.value))?n.isNullOrUndefined(this.values)||this.previousValues===this.values.length||(this.changeEvent(e),this.previousValues=this.values.length):this.changeEvent(e)},m([n.Property(null)],t.prototype,"value",void 0),m([n.Property(null)],t.prototype,"values",void 0),m([n.Property(!1)],t.prototype,"isMultiSelection",void 0),m([n.Event()],t.prototype,"change",void 0),t=m([n.NotifyPropertyChanges],t)}(x=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.effect="",n.isPopupClicked=!1,n.isDateSelected=!0,n.isTodayClicked=!1,n.preventChange=!1,n.isAngular=!1,n.previousDates=!1,n}return u(t,e),t.prototype.render=function(){this.rangeValidation(this.min,this.max),this.calendarEleCopy=this.element.cloneNode(!0),"Islamic"===this.calendarMode&&(+this.min.setSeconds(0)==+new Date(1900,0,1,0,0,0)&&(this.min=new Date(1944,2,18)),+this.max==+new Date(2099,11,31)&&(this.max=new Date(2069,10,16))),this.globalize=new n.Internationalization(this.locale),(n.isNullOrUndefined(this.firstDayOfWeek)||this.firstDayOfWeek>6||this.firstDayOfWeek<0)&&this.setProperties({firstDayOfWeek:this.globalize.getFirstDayOfWeek()},!0),this.todayDisabled=!1,this.todayDate=new Date((new Date).setHours(0,0,0,0)),"calendar"===this.getModuleName()?(this.element.classList.add(g),this.enableRtl&&this.element.classList.add("e-rtl"),n.Browser.isDevice&&this.element.classList.add("e-device"),n.attributes(this.element,{"data-role":"calendar"}),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.setAttribute("tabindex",this.tabIndex)):(this.calendarElement=this.createElement("div"),this.calendarElement.classList.add(g),this.enableRtl&&this.calendarElement.classList.add("e-rtl"),n.Browser.isDevice&&this.calendarElement.classList.add("e-device"),n.attributes(this.calendarElement,{"data-role":"calendar"})),!n.isNullOrUndefined(n.closest(this.element,"fieldset"))&&n.closest(this.element,"fieldset").disabled&&(this.enabled=!1),this.createHeader(),this.createContent(),this.wireEvents()},t.prototype.rangeValidation=function(e,t){n.isNullOrUndefined(e)&&this.setProperties({min:new Date(1900,0,1)},!0),n.isNullOrUndefined(t)&&this.setProperties({max:new Date(2099,11,31)},!0)},t.prototype.getDefaultKeyConfig=function(){return this.defaultKeyConfigs={controlUp:"ctrl+38",controlDown:"ctrl+40",moveDown:"downarrow",moveUp:"uparrow",moveLeft:"leftarrow",moveRight:"rightarrow",select:"enter",home:"home",end:"end",pageUp:"pageup",pageDown:"pagedown",shiftPageUp:"shift+pageup",shiftPageDown:"shift+pagedown",controlHome:"ctrl+home",controlEnd:"ctrl+end",altUpArrow:"alt+uparrow",spacebar:"space",altRightArrow:"alt+rightarrow",altLeftArrow:"alt+leftarrow"},this.defaultKeyConfigs},t.prototype.validateDate=function(e){this.setProperties({min:this.checkDateValue(new Date(this.checkValue(this.min)))},!0),this.setProperties({max:this.checkDateValue(new Date(this.checkValue(this.max)))},!0),this.currentDate=this.currentDate?this.currentDate:new Date((new Date).setHours(0,0,0,0)),!n.isNullOrUndefined(e)&&this.min<=this.max&&e>=this.min&&e<=this.max&&(this.currentDate=new Date(this.checkValue(e)))},t.prototype.setOverlayIndex=function(e,t,i,r){if(r&&!n.isNullOrUndefined(t)&&!n.isNullOrUndefined(i)&&!n.isNullOrUndefined(e)){var a=parseInt(t.style.zIndex,10)?parseInt(t.style.zIndex,10):1e3;i.style.zIndex=(a-1).toString(),e.style.zIndex=a.toString()}},t.prototype.minMaxUpdate=function(e){+this.min<=+this.max?n.removeClass([this.element],w):(this.setProperties({min:this.min},!0),n.addClass([this.element],w)),this.min=n.isNullOrUndefined(this.min)||!+this.min?this.min=new Date(1900,0,1):this.min,this.max=n.isNullOrUndefined(this.max)||!+this.max?this.max=new Date(2099,11,31):this.max,+this.min<=+this.max&&e&&+e<=+this.max&&+e>=+this.min?this.currentDate=new Date(this.checkValue(e)):+this.min<=+this.max&&!e&&+this.currentDate>+this.max?this.currentDate=new Date(this.checkValue(this.max)):+this.currentDate<+this.min&&(this.currentDate=new Date(this.checkValue(this.min)))},t.prototype.createHeader=function(){this.headerElement=this.createElement("div",{className:"e-header"});var e=this.createElement("div",{className:"e-icon-container"});this.previousIcon=this.createElement("button",{className:"e-prev",attrs:{type:"button"}}),n.rippleEffect(this.previousIcon,{duration:400,selector:".e-prev",isCenterRipple:!0}),n.attributes(this.previousIcon,{"aria-disabled":"false","aria-label":"previous month"}),this.nextIcon=this.createElement("button",{className:"e-next",attrs:{type:"button"}}),n.rippleEffect(this.nextIcon,{selector:".e-next",duration:400,isCenterRipple:!0}),"daterangepicker"===this.getModuleName()&&(n.attributes(this.previousIcon,{tabIndex:"-1"}),n.attributes(this.nextIcon,{tabIndex:"-1"})),n.attributes(this.nextIcon,{"aria-disabled":"false","aria-label":"next month"}),this.headerTitleElement=this.createElement("div",{className:"e-day e-title"}),n.attributes(this.headerTitleElement,{"aria-atomic":"true","aria-live":"assertive","aria-label":"title"}),this.headerElement.appendChild(this.headerTitleElement),this.previousIcon.appendChild(this.createElement("span",{className:"e-date-icon-prev e-icons"})),this.nextIcon.appendChild(this.createElement("span",{className:"e-date-icon-next  e-icons"})),e.appendChild(this.previousIcon),e.appendChild(this.nextIcon),this.headerElement.appendChild(e),"calendar"===this.getModuleName()?this.element.appendChild(this.headerElement):this.calendarElement.appendChild(this.headerElement),this.adjustLongHeaderSize()},t.prototype.createContent=function(){this.contentElement=this.createElement("div",{className:"e-content"}),this.table=this.createElement("table",{attrs:{tabIndex:"0",role:"grid","aria-activedescendant":"","aria-labelledby":this.element.id}}),"calendar"===this.getModuleName()?this.element.appendChild(this.contentElement):this.calendarElement.appendChild(this.contentElement),this.contentElement.appendChild(this.table),this.createContentHeader(),this.createContentBody(),this.showTodayButton&&this.createContentFooter()},t.prototype.getCultureValues=function(){var e,t=[],i="days.stand-alone."+this.dayHeaderFormat.toLowerCase();if(e="en"===this.locale||"en-US"===this.locale?n.getValue(i,n.getDefaultDateObject()):this.getCultureObjects(n.cldrData,""+this.locale),!n.isNullOrUndefined(e))for(var r=0,a=Object.keys(e);r<a.length;r++){var s=a[r];t.push(n.getValue(s,e))}return t},t.prototype.toCapitalize=function(e){return!n.isNullOrUndefined(e)&&e.length?e[0].toUpperCase()+e.slice(1):e},t.prototype.createContentHeader=function(){"calendar"===this.getModuleName()?n.isNullOrUndefined(this.element.querySelectorAll(".e-content .e-week-header")[0])||n.detach(this.element.querySelectorAll(".e-content .e-week-header")[0]):n.isNullOrUndefined(this.calendarElement.querySelectorAll(".e-content .e-week-header")[0])||n.detach(this.calendarElement.querySelectorAll(".e-content .e-week-header")[0]);var e="";(this.firstDayOfWeek>6||this.firstDayOfWeek<0)&&this.setProperties({firstDayOfWeek:0},!0),this.tableHeadElement=this.createElement("thead",{className:"e-week-header"}),this.weekNumber&&(e+='<th class="e-week-number"></th>',"calendar"===this.getModuleName()?n.addClass([this.element],""+C):n.addClass([this.calendarElement],""+C));var t=this.getCultureValues().length>0&&this.getCultureValues()?this.shiftArray(this.getCultureValues().length>0&&this.getCultureValues(),this.firstDayOfWeek):null;if(!n.isNullOrUndefined(t))for(var i=0;i<=6;i++)e+='<th  class="">'+this.toCapitalize(t[i])+"</th>";e="<tr>"+e+"</tr>",this.tableHeadElement.innerHTML=e,this.table.appendChild(this.tableHeadElement)},t.prototype.createContentBody=function(){switch("calendar"===this.getModuleName()?n.isNullOrUndefined(this.element.querySelectorAll(".e-content tbody")[0])||n.detach(this.element.querySelectorAll(".e-content tbody")[0]):n.isNullOrUndefined(this.calendarElement.querySelectorAll(".e-content tbody")[0])||n.detach(this.calendarElement.querySelectorAll(".e-content tbody")[0]),this.start){case"Year":this.renderYears();break;case"Decade":this.renderDecades();break;default:this.renderMonths()}},t.prototype.updateFooter=function(){this.todayElement.textContent=this.l10.getConstant("today"),this.todayElement.setAttribute("aria-label",this.l10.getConstant("today"))},t.prototype.createContentFooter=function(){if(this.showTodayButton){var e=new Date(+this.min),t=new Date(+this.max);this.globalize=new n.Internationalization(this.locale),this.l10=new n.L10n(this.getModuleName(),{today:"Today"},this.locale),this.todayElement=this.createElement("button",{attrs:{role:"button"}}),n.rippleEffect(this.todayElement),this.updateFooter(),n.addClass([this.todayElement],["e-btn","e-today","e-flat","e-primary","e-css"]),+new Date(e.setHours(0,0,0,0))<=+this.todayDate&&+this.todayDate<=+new Date(t.setHours(0,0,0,0))&&!this.todayDisabled||n.addClass([this.todayElement],D),this.footer=this.createElement("div",{className:"e-footer-container"}),this.footer.appendChild(this.todayElement),"calendar"===this.getModuleName()&&this.element.appendChild(this.footer),"datepicker"===this.getModuleName()&&this.calendarElement.appendChild(this.footer),"datetimepicker"===this.getModuleName()&&this.calendarElement.appendChild(this.footer),this.todayElement.classList.contains(D)||n.EventHandler.add(this.todayElement,"click",this.todayButtonClick,this)}},t.prototype.wireEvents=function(e,t,i,r){n.EventHandler.add(this.headerTitleElement,"click",this.navigateTitle,this),this.defaultKeyConfigs=n.extend(this.defaultKeyConfigs,this.keyConfigs),"calendar"===this.getModuleName()?this.keyboardModule=new n.KeyboardEvents(this.element,{eventName:"keydown",keyAction:this.keyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs}):this.keyboardModule=new n.KeyboardEvents(this.calendarElement,{eventName:"keydown",keyAction:this.keyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})},t.prototype.dateWireEvents=function(e,t,i,r){this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.defaultKeyConfigs=n.extend(this.defaultKeyConfigs,i),this.serverModuleName=r},t.prototype.todayButtonClick=function(e,t,i){this.showTodayButton&&(this.currentView()===this.depth?this.effect="":this.effect="e-zoomin",this.getViewNumber(this.start)>=this.getViewNumber(this.depth)?this.navigateTo(this.depth,new Date(this.checkValue(t)),i):this.navigateTo("Month",new Date(this.checkValue(t)),i))},t.prototype.resetCalendar=function(){this.calendarElement&&n.detach(this.calendarElement),this.tableBodyElement&&n.detach(this.tableBodyElement),this.table&&n.detach(this.table),this.tableHeadElement&&n.detach(this.tableHeadElement),this.nextIcon&&n.detach(this.nextIcon),this.previousIcon&&n.detach(this.previousIcon),this.footer&&n.detach(this.footer),this.todayElement=null,this.renderDayCellArgs=null,this.calendarElement=this.tableBodyElement=this.footer=this.tableHeadElement=this.nextIcon=this.previousIcon=this.table=null},t.prototype.keyActionHandle=function(e,t,i){var r,a=this.tableBodyElement.querySelector("tr td.e-focused-date");r=i?n.isNullOrUndefined(a)||+t!==parseInt(a.getAttribute("id").split("_")[0],10)?this.tableBodyElement.querySelector("tr td.e-selected"):a:this.tableBodyElement.querySelector("tr td.e-selected");var s=this.getViewNumber(this.currentView()),o=this.getViewNumber(this.depth),l=s===o&&this.getViewNumber(this.start)>=o;switch(this.effect="",e.action){case"moveLeft":this.keyboardNavigate(-1,s,e,this.max,this.min),e.preventDefault();break;case"moveRight":this.keyboardNavigate(1,s,e,this.max,this.min),e.preventDefault();break;case"moveUp":0===s?this.keyboardNavigate(-7,s,e,this.max,this.min):this.keyboardNavigate(-4,s,e,this.max,this.min),e.preventDefault();break;case"moveDown":0===s?this.keyboardNavigate(7,s,e,this.max,this.min):this.keyboardNavigate(4,s,e,this.max,this.min),e.preventDefault();break;case"select":if(e.target===this.todayElement)this.todayButtonClick(e,t);else{var h=n.isNullOrUndefined(a)?r:a;if(!n.isNullOrUndefined(h)&&!h.classList.contains(D)){if(l){var p=new Date(parseInt(""+h.id,0));this.selectDate(e,p,h)}else this.contentClick(null,--s,h,t)}}break;case"controlUp":this.title(),e.preventDefault();break;case"controlDown":(n.isNullOrUndefined(a)||l)&&(n.isNullOrUndefined(r)||l)||this.contentClick(null,--s,a||r,t),e.preventDefault();break;case"home":this.currentDate=this.firstDay(this.currentDate),n.detach(this.tableBodyElement),0===s?this.renderMonths(e):1===s?this.renderYears(e):this.renderDecades(e),e.preventDefault();break;case"end":this.currentDate=this.lastDay(this.currentDate,s),n.detach(this.tableBodyElement),0===s?this.renderMonths(e):1===s?this.renderYears(e):this.renderDecades(e),e.preventDefault();break;case"pageUp":this.addMonths(this.currentDate,-1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"pageDown":this.addMonths(this.currentDate,1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"shiftPageUp":this.addYears(this.currentDate,-1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"shiftPageDown":this.addYears(this.currentDate,1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"controlHome":this.navigateTo("Month",new Date(this.currentDate.getFullYear(),0,1)),e.preventDefault();break;case"controlEnd":this.navigateTo("Month",new Date(this.currentDate.getFullYear(),11,31)),e.preventDefault()}"calendar"===this.getModuleName()&&this.table.focus()},t.prototype.keyboardNavigate=function(e,t,i,r,a){var s=new Date(this.checkValue(this.currentDate));switch(t){case 2:this.addYears(this.currentDate,e),this.isMonthYearRange(this.currentDate)?(n.detach(this.tableBodyElement),this.renderDecades(i)):this.currentDate=s;break;case 1:this.addMonths(this.currentDate,e),this.calendarMode,this.isMonthYearRange(this.currentDate)?(n.detach(this.tableBodyElement),this.renderYears(i)):this.currentDate=s;break;case 0:this.addDay(this.currentDate,e,i,r,a),this.isMinMaxRange(this.currentDate)?(n.detach(this.tableBodyElement),this.renderMonths(i)):this.currentDate=s}},t.prototype.preRender=function(e){var t=this;this.navigatePreviousHandler=this.navigatePrevious.bind(this),this.navigateNextHandler=this.navigateNext.bind(this),this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.navigateHandler=function(e){t.triggerNavigate(e)}},t.prototype.minMaxDate=function(e){var t=new Date(new Date(+e).setHours(0,0,0,0)),i=new Date(new Date(+this.min).setHours(0,0,0,0)),n=new Date(new Date(+this.max).setHours(0,0,0,0));return+t!=+i&&+t!=+n||(+e<+this.min&&(e=new Date(+this.min)),+e>+this.max&&(e=new Date(+this.max))),e},t.prototype.renderMonths=function(e,t,i){var n,r=this.weekNumber?8:7;n="Gregorian"===this.calendarMode?this.renderDays(this.currentDate,t,null,null,i,e):this.islamicModule.islamicRenderDays(this.currentDate,t),this.createContentHeader(),"Gregorian"===this.calendarMode?this.renderTemplate(n,r,b,e,t):this.islamicModule.islamicRenderTemplate(n,r,b,e,t)},t.prototype.renderDays=function(e,t,i,r,a,s){var o,l=[],h=a?new Date(+e):this.getDate(new Date,this.timezone),p=new Date(this.checkValue(e)),c=p.getMonth();this.titleUpdate(e,"days");var d=p;for(p=new Date(d.getFullYear(),d.getMonth(),0,d.getHours(),d.getMinutes(),d.getSeconds(),d.getMilliseconds());p.getDay()!==this.firstDayOfWeek;)this.setStartDate(p,-864e5);for(var u=0;u<42;++u){var m=this.createElement("td",{className:"e-cell"}),v=this.createElement("span");if(u%7==0&&this.weekNumber){var g="FirstDay"===this.weekRule?6:"FirstFourDayWeek"===this.weekRule?3:0,y=new Date(p.getFullYear(),p.getMonth(),p.getDate()+g);v.textContent=""+this.getWeek(y),m.appendChild(v),n.addClass([m],""+C),l.push(m)}o=new Date(+p),p=this.minMaxDate(p);var b={type:"dateTime",skeleton:"full"},E=this.globalize.parseDate(this.globalize.formatDate(p,b),b),S=this.dayCell(p),O=this.globalize.formatDate(p,{type:"date",skeleton:"full"}),k=this.createElement("span");k.textContent=this.globalize.formatDate(p,{format:"d",type:"date",skeleton:"yMd"});var x=this.min>p||this.max<p;x?(n.addClass([S],D),n.addClass([S],w)):k.setAttribute("title",""+O),c!==p.getMonth()&&n.addClass([S],f),0!==p.getDay()&&6!==p.getDay()||n.addClass([S],"e-weekend"),S.appendChild(k),this.renderDayCellArgs={date:p,isDisabled:!1,element:S,isOutOfRange:x};var M=this.renderDayCellArgs;if(this.renderDayCellEvent(M),M.isDisabled){var V=new Date(this.checkValue(t)),I=new Date(this.checkValue(M.date));if(i){if(!n.isNullOrUndefined(r)&&r.length>0)for(var A=0;A<r.length;A++)+new Date(this.globalize.formatDate(M.date,{type:"date",skeleton:"yMd"}))==+new Date(this.globalize.formatDate(r[A],{type:"date",skeleton:"yMd"}))&&(r.splice(A,1),A=-1)}else V&&+V==+I&&this.setProperties({value:null},!0)}this.renderDayCellArgs.isDisabled&&!S.classList.contains(T)&&(n.addClass([S],D),n.addClass([S],w),+this.renderDayCellArgs.date==+this.todayDate&&(this.todayDisabled=!0));var N=S.classList.contains(f),P=S.classList.contains(D);P||n.EventHandler.add(S,"click",this.clickHandler,this);var H=void 0;if(n.isNullOrUndefined(s)||"click"!==s.type||(H=s.currentTarget),!i||n.isNullOrUndefined(r)||P)!P&&this.getDateVal(p,t)&&n.addClass([S],T);else{for(var R=0;R<r.length;R++){var F={format:null,type:"date",skeleton:"short",calendar:"Gregorian"===this.calendarMode?"gregorian":"islamic"};if((this.globalize.formatDate(p,F)===this.globalize.formatDate(r[R],F)&&this.getDateVal(p,r[R])||this.getDateVal(p,t))&&n.addClass([S],T),!n.isNullOrUndefined(H)&&H.innerText===S.innerText&&this.previousDates&&S.classList.contains(T)&&H.classList.contains(T)){n.removeClass([S],T),this.previousDates=!1;for(var U=this.copyValues(r),L=0;L<U.length;L++){var B={format:null,type:"date",skeleton:"short",calendar:"Gregorian"===this.calendarMode?"gregorian":"islamic"};this.globalize.formatDate(E,B)===this.globalize.formatDate(U[L],B)&&(A=U.indexOf(U[L]),U.splice(A,1),r.splice(A,1))}this.setProperties({values:U},!0)}else this.updateFocus(N,P,p,S,e)}r.length<=0&&this.updateFocus(N,P,p,S,e)}this.updateFocus(N,P,p,S,e),n.isNullOrUndefined(E)||E.getFullYear()!==h.getFullYear()||E.getMonth()!==h.getMonth()||E.getDate()!==h.getDate()||n.addClass([S],"e-today"),l.push(this.renderDayCellArgs.element),p=new Date(+o),this.addDay(p,1,null,this.max,this.min)}return l},t.prototype.updateFocus=function(e,t,i,r,a){a.getDate()!==i.getDate()||e||t?(!(a>=this.max)||parseInt(r.id,0)!==+this.max||e||t||n.addClass([r],E),!(a<=this.min)||parseInt(r.id,0)!==+this.min||e||t||n.addClass([r],E)):n.addClass([r],E)},t.prototype.renderYears=function(e,t){this.removeTableHeadElement();var i=[],r=n.isNullOrUndefined(t),a=new Date(this.checkValue(this.currentDate)),s=a.getMonth(),o=a.getFullYear(),l=a.getFullYear(),h=new Date(this.checkValue(this.min)).getFullYear(),p=new Date(this.checkValue(this.min)).getMonth(),c=new Date(this.checkValue(this.max)).getFullYear(),d=new Date(this.checkValue(this.max)).getMonth();a.setMonth(0),this.titleUpdate(this.currentDate,"months"),a.setDate(1);for(var u=0;u<12;++u){var m=this.dayCell(a),f=this.createElement("span"),v=t&&t.getMonth()===a.getMonth(),g=t&&t.getFullYear()===o&&v;f.textContent=this.toCapitalize(this.globalize.formatDate(a,{format:null,type:"dateTime",skeleton:"MMM"})),this.min&&(l<h||u<p&&l===h)||this.max&&(l>c||u>d&&l>=c)?n.addClass([m],D):!r&&g?n.addClass([m],T):a.getMonth()===s&&this.currentDate.getMonth()===s&&n.addClass([m],E),a.setDate(1),a.setMonth(a.getMonth()+1),m.classList.contains(D)||n.EventHandler.add(m,"click",this.clickHandler,this),m.appendChild(f),i.push(m)}this.renderTemplate(i,4,y,e,t)},t.prototype.renderDecades=function(e,t){this.removeTableHeadElement();var i=[],r=new Date(this.checkValue(this.currentDate));r.setMonth(0),r.setDate(1);var a=r.getFullYear(),s=new Date(r.setFullYear(a-a%10)),o=new Date(r.setFullYear(a-a%10+9)),l=s.getFullYear(),h=o.getFullYear(),p=this.globalize.formatDate(s,{format:null,type:"dateTime",skeleton:"y"}),c=this.globalize.formatDate(o,{format:null,type:"dateTime",skeleton:"y"});this.headerTitleElement.textContent=p+" - "+c;for(var d=new Date(a-a%10-1,0,1).getFullYear(),u=0;u<12;++u){var m=d+u;r.setFullYear(m);var f=this.dayCell(r),g=this.createElement("span");g.textContent=this.globalize.formatDate(r,{format:null,type:"dateTime",skeleton:"y"}),m<l||m>h?(n.addClass([f],v),n.isNullOrUndefined(t)||r.getFullYear()!==t.getFullYear()||n.addClass([f],T),(m<new Date(this.checkValue(this.min)).getFullYear()||m>new Date(this.checkValue(this.max)).getFullYear())&&n.addClass([f],D)):m<new Date(this.checkValue(this.min)).getFullYear()||m>new Date(this.checkValue(this.max)).getFullYear()?n.addClass([f],D):n.isNullOrUndefined(t)||r.getFullYear()!==t.getFullYear()?r.getFullYear()!==this.currentDate.getFullYear()||f.classList.contains(D)||n.addClass([f],E):n.addClass([f],T),f.classList.contains(D)||n.EventHandler.add(f,"click",this.clickHandler,this),f.appendChild(g),i.push(f)}this.renderTemplate(i,4,"e-decade",e,t)},t.prototype.dayCell=function(e){var t,i={skeleton:"full",type:"dateTime",calendar:"Gregorian"===this.calendarMode?"gregorian":"islamic"},r=this.globalize.parseDate(this.globalize.formatDate(e,i),i);n.isNullOrUndefined(r)||(t=r.valueOf());var a={className:"e-cell",attrs:{id:""+n.getUniqueID(""+t),"aria-selected":"false"}};return this.createElement("td",a)},t.prototype.firstDay=function(e){var t="Decade"!==this.currentView()?this.tableBodyElement.querySelectorAll("td:not(."+f):this.tableBodyElement.querySelectorAll("td:not(."+v);if(t.length){for(var i=0;i<t.length;i++)if(!t[i].classList.contains(D)){e=new Date(parseInt(t[i].id,0));break}}return e},t.prototype.lastDay=function(e,t){var i=new Date(e.getFullYear(),e.getMonth()+1,0);if(2!==t){var n=Math.abs(i.getTimezoneOffset()-this.firstDay(e).getTimezoneOffset());return n&&i.setHours(this.firstDay(e).getHours()+n/60),this.findLastDay(i)}return this.findLastDay(this.firstDay(i))},t.prototype.checkDateValue=function(e){return!n.isNullOrUndefined(e)&&e instanceof Date&&!isNaN(+e)?e:null},t.prototype.findLastDay=function(e){var t="Decade"===this.currentView()?this.tableBodyElement.querySelectorAll("td:not(."+v):this.tableBodyElement.querySelectorAll("td:not(."+f);if(t.length){for(var i=t.length-1;i>=0;i--)if(!t[i].classList.contains(D)){e=new Date(parseInt(t[i].id,0));break}}return e},t.prototype.removeTableHeadElement=function(){"calendar"===this.getModuleName()?n.isNullOrUndefined(this.element.querySelectorAll(".e-content table thead")[0])||n.detach(this.tableHeadElement):n.isNullOrUndefined(this.calendarElement.querySelectorAll(".e-content table thead")[0])||n.detach(this.tableHeadElement)},t.prototype.renderTemplate=function(e,t,i,r,a){var s,o=this.getViewNumber(this.currentView());this.tableBodyElement=this.createElement("tbody"),this.table.appendChild(this.tableBodyElement),n.removeClass([this.contentElement,this.headerElement],[b,"e-decade",y]),n.addClass([this.contentElement,this.headerElement],[i]);for(var l=t,h=0,p=0;p<e.length/t;++p){for(s=this.createElement("tr"),h=0+h;h<l;h++)e[h].classList.contains("e-week-number")||n.isNullOrUndefined(e[h].children[0])||(n.addClass([e[h].children[0]],["e-day"]),n.rippleEffect(e[h].children[0],{duration:600,isCenterRipple:!0})),s.appendChild(e[h]),this.weekNumber&&7===h&&e[7].classList.contains(f)&&n.addClass([s],S),!this.weekNumber&&6===h&&e[6].classList.contains(f)&&n.addClass([s],S),this.weekNumber?41===h&&e[41].classList.contains(f)&&n.addClass([s],S):35===h&&e[35].classList.contains(f)&&n.addClass([s],S);l+=t,h+=0,this.tableBodyElement.appendChild(s)}this.table.querySelector("tbody").className=this.effect,"Gregorian"===this.calendarMode?this.iconHandler():this.islamicModule.islamicIconHandler(),(o!==this.getViewNumber(this.currentView())||0===o&&o!==this.getViewNumber(this.currentView()))&&this.navigateHandler(r),this.setAriaActiveDescendant()},t.prototype.clickHandler=function(e,t){this.clickEventEmitter(e);var i=e.currentTarget,n=this.getViewNumber(this.currentView());i.classList.contains(f)?this.contentClick(e,0,null,t):n===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth)?this.contentClick(e,1,null,t):2===n?this.contentClick(e,1,null,t):i.classList.contains(f)||0!==n?this.contentClick(e,0,i,t):this.selectDate(e,this.getIdValue(e,null),null),"calendar"===this.getModuleName()&&this.table.focus()},t.prototype.clickEventEmitter=function(e){e.preventDefault()},t.prototype.contentClick=function(e,t,i,r){var a=this.getViewNumber(this.currentView()),s=this.getIdValue(e,i);switch(t){case 0:a===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth)?(n.detach(this.tableBodyElement),this.currentDate=s,this.effect=O):("Gregorian"===this.calendarMode?(this.currentDate.setMonth(s.getMonth()),s.getMonth()>0&&this.currentDate.getMonth()!==s.getMonth()&&this.currentDate.setDate(0),this.currentDate.setFullYear(s.getFullYear())):this.currentDate=s,this.effect=O,n.detach(this.tableBodyElement)),this.renderMonths(e);break;case 1:if(a===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth))this.selectDate(e,s,null);else{if("Gregorian"===this.calendarMode)this.currentDate.setFullYear(s.getFullYear());else{this.islamicPreviousHeader=this.headerElement.textContent;var o=this.islamicModule.getIslamicDate(s);this.currentDate=this.islamicModule.toGregorian(o.year,o.month,1)}this.effect=O,n.detach(this.tableBodyElement),this.renderYears(e)}}},t.prototype.switchView=function(e,t,i,r){switch(e){case 0:n.detach(this.tableBodyElement),this.renderMonths(t,null,r);break;case 1:n.detach(this.tableBodyElement),this.renderYears(t);break;case 2:n.detach(this.tableBodyElement),this.renderDecades(t)}},t.prototype.getModuleName=function(){return"calendar"},t.prototype.requiredModules=function(){var e=[];return this&&e.push({args:[this],member:"islamic"}),e},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.onPropertyChanged=function(e,t,i,r){this.effect="";for(var a=0,s=Object.keys(e);a<s.length;a++){var o=s[a];switch(o){case"enableRtl":e.enableRtl?"calendar"===this.getModuleName()?this.element.classList.add("e-rtl"):this.calendarElement.classList.add("e-rtl"):"calendar"===this.getModuleName()?this.element.classList.remove("e-rtl"):this.calendarElement.classList.remove("e-rtl");break;case"dayHeaderFormat":this.getCultureValues(),"datepicker"!==this.getModuleName()?this.createContentHeader():this.calendarElement&&this.createContentHeader(),this.adjustLongHeaderSize();break;case"min":case"max":this.rangeValidation(this.min,this.max),"min"===o?this.setProperties({min:this.checkDateValue(new Date(this.checkValue(e.min)))},!0):this.setProperties({max:this.checkDateValue(new Date(this.checkValue(e.max)))},!0),this.setProperties({start:this.currentView()},!0),this.tableBodyElement&&n.detach(this.tableBodyElement),this.minMaxUpdate(),i&&this.validateValues(i,r),"datepicker"!==this.getModuleName()?this.createContentBody():this.calendarElement&&this.createContentBody(),(this.todayDate<this.min||this.max<this.todayDate)&&this.footer&&this.todayElement?(n.detach(this.todayElement),n.detach(this.footer),this.todayElement=this.footer=null,this.createContentFooter()):this.footer&&this.todayElement&&this.todayElement.classList.contains("e-disabled")&&(n.removeClass([this.todayElement],D),n.detach(this.todayElement),n.detach(this.footer),this.todayElement=this.footer=null,this.createContentFooter());break;case"start":case"depth":case"weekNumber":case"firstDayOfWeek":case"weekRule":this.checkView(),"datepicker"!==this.getModuleName()?(this.createContentHeader(),this.createContentBody()):this.calendarElement&&(this.createContentHeader(),this.createContentBody());break;case"locale":this.globalize=new n.Internationalization(this.locale),"datepicker"!==this.getModuleName()?(this.createContentHeader(),this.createContentBody()):this.calendarElement&&(this.createContentHeader(),this.createContentBody()),this.l10.setLocale(this.locale),this.updateFooter();break;case"showTodayButton":e.showTodayButton?this.createContentFooter():n.isNullOrUndefined(this.todayElement)||n.isNullOrUndefined(this.footer)||(n.detach(this.todayElement),n.detach(this.footer),this.todayElement=this.footer=void 0),this.setProperties({showTodayButton:e.showTodayButton},!0)}}},t.prototype.validateValues=function(e,t){if(e&&!n.isNullOrUndefined(t)&&t.length>0){for(var i=this.copyValues(t),r=0;r<i.length;r++){var a=i[r],s="Gregorian"===this.calendarMode?"gregorian":"islamic",o=void 0;o="Gregorian"===this.calendarMode?this.globalize.formatDate(a,{type:"date",skeleton:"yMd"}):this.globalize.formatDate(a,{type:"dateTime",skeleton:"full",calendar:"islamic"});var l={type:"date",skeleton:"yMd",calendar:s},h=this.globalize.formatDate(this.min,l),p={type:"date",skeleton:"yMd",calendar:s},c=this.globalize.formatDate(this.max,p);(+new Date(o)<+new Date(h)||+new Date(o)>+new Date(c))&&(i.splice(r,1),r=-1)}this.setProperties({values:i},!0)}},t.prototype.setValueUpdate=function(){n.isNullOrUndefined(this.tableBodyElement)||(n.detach(this.tableBodyElement),this.setProperties({start:this.currentView()},!0),this.createContentBody())},t.prototype.copyValues=function(e){var t=[];if(!n.isNullOrUndefined(e)&&e.length>0)for(var i=0;i<e.length;i++)t.push(new Date(+e[i]));return t},t.prototype.titleUpdate=function(e,t){var i,r,a=new n.Internationalization(this.locale),s="Gregorian"===this.calendarMode?"gregorian":"islamic";switch("Gregorian"===this.calendarMode?(i=a.formatDate(e,{type:"dateTime",skeleton:"yMMMM",calendar:s}),r=a.formatDate(e,{format:null,type:"dateTime",skeleton:"y",calendar:s})):(i=a.formatDate(e,{type:"dateTime",format:"MMMM y",calendar:s}),r=a.formatDate(e,{type:"dateTime",format:"y",calendar:s})),t){case"days":this.headerTitleElement.textContent=this.toCapitalize(i);break;case"months":this.headerTitleElement.textContent=r}},t.prototype.setActiveDescendant=function(){var e,t,i=this.tableBodyElement.querySelector("tr td.e-focused-date"),r=this.tableBodyElement.querySelector("tr td.e-selected"),a="Gregorian"===this.calendarMode?"gregorian":"islamic",s=this.currentView();return t="Month"===s?this.globalize.formatDate(this.currentDate,{type:"date",skeleton:"full",calendar:a}):"Year"===s?"islamic"!==a?this.globalize.formatDate(this.currentDate,{type:"date",skeleton:"yMMMM",calendar:a}):this.globalize.formatDate(this.currentDate,{type:"date",skeleton:"GyMMM",calendar:a}):this.globalize.formatDate(this.currentDate,{format:null,type:"date",skeleton:"y",calendar:a}),(r||i)&&(n.isNullOrUndefined(r)||r.setAttribute("aria-selected","true"),(i||r).setAttribute("aria-label",t),e=(i||r).getAttribute("id")),e},t.prototype.iconHandler=function(){switch(new Date(this.checkValue(this.currentDate)).setDate(1),this.currentView()){case"Month":this.previousIconHandler(1>this.compareMonth(new Date(this.checkValue(this.currentDate)),this.min)),this.nextIconHandler(this.compareMonth(new Date(this.checkValue(this.currentDate)),this.max)>-1);break;case"Year":this.previousIconHandler(1>this.compareYear(new Date(this.checkValue(this.currentDate)),this.min)),this.nextIconHandler(this.compareYear(new Date(this.checkValue(this.currentDate)),this.max)>-1);break;case"Decade":this.previousIconHandler(1>this.compareDecade(new Date(this.checkValue(this.currentDate)),this.min)),this.nextIconHandler(this.compareDecade(new Date(this.checkValue(this.currentDate)),this.max)>-1)}},t.prototype.destroy=function(){"calendar"===this.getModuleName()&&this.element?n.removeClass([this.element],[g]):this.calendarElement&&this.element&&n.removeClass([this.element],[g]),"calendar"===this.getModuleName()&&this.element&&(n.isNullOrUndefined(this.headerTitleElement)||n.EventHandler.remove(this.headerTitleElement,"click",this.navigateTitle),this.todayElement&&n.EventHandler.remove(this.todayElement,"click",this.todayButtonClick),this.previousIconHandler(!0),this.nextIconHandler(!0),this.keyboardModule.destroy(),this.element.removeAttribute("data-role"),n.isNullOrUndefined(this.calendarEleCopy.getAttribute("tabindex"))?this.element.removeAttribute("tabindex"):this.element.setAttribute("tabindex",this.tabIndex)),this.element&&(this.element.innerHTML=""),this.todayElement=null,this.tableBodyElement=null,this.todayButtonEvent=null,this.renderDayCellArgs=null,this.headerElement=null,this.nextIcon=null,this.table=null,this.tableHeadElement=null,this.previousIcon=null,this.headerTitleElement=null,this.footer=null,this.contentElement=null,e.prototype.destroy.call(this)},t.prototype.title=function(e){var t=this.getViewNumber(this.currentView());this.effect=O,this.switchView(++t,e)},t.prototype.getViewNumber=function(e){return"Month"===e?0:"Year"===e?1:2},t.prototype.navigateTitle=function(e){e.preventDefault(),this.title(e),"calendar"===this.getModuleName()&&this.table.focus()},t.prototype.previous=function(){this.effect="";var e=this.getViewNumber(this.currentView());switch(this.currentView()){case"Month":this.addMonths(this.currentDate,-1),this.switchView(e);break;case"Year":this.addYears(this.currentDate,-1),this.switchView(e);break;case"Decade":this.addYears(this.currentDate,-10),this.switchView(e)}},t.prototype.navigatePrevious=function(e){n.Browser.isDevice||e.preventDefault(),"Gregorian"===this.calendarMode?this.previous():this.islamicModule.islamicPrevious(),this.triggerNavigate(e),"calendar"===this.getModuleName()&&this.table.focus()},t.prototype.next=function(){this.effect="";var e=this.getViewNumber(this.currentView());switch(this.currentView()){case"Month":this.addMonths(this.currentDate,1),this.switchView(e);break;case"Year":this.addYears(this.currentDate,1),this.switchView(e);break;case"Decade":this.addYears(this.currentDate,10),this.switchView(e)}},t.prototype.navigateNext=function(e){n.Browser.isDevice||e.preventDefault(),"Gregorian"===this.calendarMode?this.next():this.islamicModule.islamicNext(),this.triggerNavigate(e),"calendar"===this.getModuleName()&&this.table.focus()},t.prototype.navigateTo=function(e,t,i){+t>=+this.min&&+t<=+this.max&&(this.currentDate=t),+t<=+this.min&&(this.currentDate=new Date(this.checkValue(this.min))),+t>=+this.max&&(this.currentDate=new Date(this.checkValue(this.max))),this.getViewNumber(this.depth)>=this.getViewNumber(e)&&(this.getViewNumber(this.depth)<=this.getViewNumber(this.start)||this.getViewNumber(this.depth)===this.getViewNumber(e))&&(e=this.depth),this.switchView(this.getViewNumber(e),null,null,i)},t.prototype.currentView=function(){return!n.isNullOrUndefined(this.contentElement)&&this.contentElement.classList.contains(y)?"Year":!n.isNullOrUndefined(this.contentElement)&&this.contentElement.classList.contains("e-decade")?"Decade":"Month"},t.prototype.getDateVal=function(e,t){return!n.isNullOrUndefined(t)&&e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()},t.prototype.getCultureObjects=function(e,t){var i=".dates.calendars.gregorian.days.format."+this.dayHeaderFormat.toLowerCase(),r=".dates.calendars.islamic.days.format."+this.dayHeaderFormat.toLowerCase();return"Gregorian"===this.calendarMode?n.getValue("main."+this.locale+i,e):n.getValue("main."+this.locale+r,e)},t.prototype.getWeek=function(e){return Math.ceil((new Date(this.checkValue(e)).valueOf()-new Date(e.getFullYear(),0,1).valueOf()+864e5)/864e5/7)},t.prototype.setStartDate=function(e,t){var i=e.getTimezoneOffset(),n=new Date(e.getTime()+t),r=n.getTimezoneOffset()-i;e.setTime(n.getTime()+6e4*r)},t.prototype.addMonths=function(e,t){if("Gregorian"===this.calendarMode){var i=e.getDate();e.setDate(1),e.setMonth(e.getMonth()+t),e.setDate(Math.min(i,this.getMaxDays(e)))}else{var n=this.islamicModule.getIslamicDate(e);this.currentDate=this.islamicModule.toGregorian(n.year,n.month+t,1)}},t.prototype.addYears=function(e,t){if("Gregorian"===this.calendarMode){var i=e.getDate();e.setDate(1),e.setFullYear(e.getFullYear()+t),e.setDate(Math.min(i,this.getMaxDays(e)))}else{var n=this.islamicModule.getIslamicDate(e);this.currentDate=this.islamicModule.toGregorian(n.year+t,n.month,1)}},t.prototype.getIdValue=function(e,t){i=e?e.currentTarget:t;var i,n={type:"dateTime",skeleton:"full",calendar:"Gregorian"===this.calendarMode?"gregorian":"islamic"},r=this.globalize.formatDate(new Date(parseInt(""+i.getAttribute("id"),0)),n),a=this.globalize.parseDate(r,n),s=a.valueOf()-a.valueOf()%1e3;return new Date(s)},t.prototype.adjustLongHeaderSize=function(){n.removeClass([this.element],k),"Wide"===this.dayHeaderFormat&&n.addClass(["calendar"===this.getModuleName()?this.element:this.calendarElement],k)},t.prototype.selectDate=function(e,t,i,r,a){var s=i||e.currentTarget;if(this.isDateSelected=!1,"Decade"===this.currentView())this.setDateDecade(this.currentDate,t.getFullYear());else if("Year"===this.currentView())this.setDateYear(this.currentDate,t);else{if(r&&!this.checkPresentDate(t,a)){var o=this.copyValues(a);!n.isNullOrUndefined(a)&&o.length>0?(o.push(new Date(this.checkValue(t))),this.setProperties({values:o},!0),this.setProperties({value:a[a.length-1]},!0)):this.setProperties({values:[new Date(this.checkValue(t))]},!0)}else this.setProperties({value:new Date(this.checkValue(t))},!0);this.currentDate=new Date(this.checkValue(t))}var l=n.closest(s,"."+g);if(n.isNullOrUndefined(l)&&(l=this.tableBodyElement),r||n.isNullOrUndefined(l.querySelector("."+T))||n.removeClass([l.querySelector("."+T)],T),r||n.isNullOrUndefined(l.querySelector("."+E))||n.removeClass([l.querySelector("."+E)],E),r){o=this.copyValues(a);for(var h=Array.prototype.slice.call(this.tableBodyElement.querySelectorAll("td")),p=0;p<h.length;p++){var c=l.querySelectorAll("td."+E)[0],d=l.querySelectorAll("td."+T)[0];h[p]===c&&n.removeClass([h[p]],E),h[p]!==d||this.checkPresentDate(new Date(parseInt(d.getAttribute("id").split("_")[0],10)),a)||n.removeClass([h[p]],T)}if(s.classList.contains(T)){n.removeClass([s],T);for(var u=0;u<o.length;u++){var m={format:null,type:"date",skeleton:"short",calendar:"Gregorian"===this.calendarMode?"gregorian":"islamic"};this.globalize.formatDate(t,m)===this.globalize.formatDate(o[u],m)&&(p=o.indexOf(o[u]),o.splice(p,1),n.addClass([s],E))}this.setProperties({values:o},!0)}else n.addClass([s],T)}else n.addClass([s],T);this.isDateSelected=!0},t.prototype.checkPresentDate=function(e,t){var i=!1;if(!n.isNullOrUndefined(t))for(var r=0;r<t.length;r++){var a="Gregorian"===this.calendarMode?"gregorian":"islamic";this.globalize.formatDate(e,{format:null,type:"date",skeleton:"short",calendar:a})===this.globalize.formatDate(t[r],{format:null,type:"date",skeleton:"short",calendar:a})&&(i=!0)}return i},t.prototype.setAriaActiveDescendant=function(){n.attributes(this.table,{"aria-activedescendant":""+this.setActiveDescendant()})},t.prototype.previousIconHandler=function(e){e?n.isNullOrUndefined(this.previousIcon)||(n.EventHandler.remove(this.previousIcon,"click",this.navigatePreviousHandler),n.addClass([this.previousIcon],""+D),n.addClass([this.previousIcon],""+w),this.previousIcon.setAttribute("aria-disabled","true")):(n.EventHandler.add(this.previousIcon,"click",this.navigatePreviousHandler),n.removeClass([this.previousIcon],""+D),n.removeClass([this.previousIcon],""+w),this.previousIcon.setAttribute("aria-disabled","false"))},t.prototype.renderDayCellEvent=function(e){n.extend(this.renderDayCellArgs,{name:"renderDayCell"}),this.trigger("renderDayCell",e)},t.prototype.navigatedEvent=function(e){n.extend(this.navigatedArgs,{name:"navigated",event:e}),this.trigger("navigated",this.navigatedArgs)},t.prototype.triggerNavigate=function(e){this.navigatedArgs={view:this.currentView(),date:this.currentDate},this.navigatedEvent(e)},t.prototype.nextIconHandler=function(e){e?n.isNullOrUndefined(this.previousIcon)||(n.EventHandler.remove(this.nextIcon,"click",this.navigateNextHandler),n.addClass([this.nextIcon],D),n.addClass([this.nextIcon],w),this.nextIcon.setAttribute("aria-disabled","true")):(n.EventHandler.add(this.nextIcon,"click",this.navigateNextHandler),n.removeClass([this.nextIcon],D),n.removeClass([this.nextIcon],w),this.nextIcon.setAttribute("aria-disabled","false"))},t.prototype.compare=function(e,t,i){var n,r,a=t.getFullYear();return n=a,r=0,i&&(n=(a-=a%i)-a%i+i-1),e.getFullYear()>n?r=1:e.getFullYear()<a&&(r=-1),r},t.prototype.isMinMaxRange=function(e){return+e>=+this.min&&+e<=+this.max},t.prototype.isMonthYearRange=function(e){if("Gregorian"===this.calendarMode)return e.getMonth()>=this.min.getMonth()&&e.getFullYear()>=this.min.getFullYear()&&e.getMonth()<=this.max.getMonth()&&e.getFullYear()<=this.max.getFullYear();var t=this.islamicModule.getIslamicDate(e);return t.month>=this.islamicModule.getIslamicDate(new Date(1944,1,18)).month&&t.year>=this.islamicModule.getIslamicDate(new Date(1944,1,18)).year&&t.month<=this.islamicModule.getIslamicDate(new Date(2069,1,16)).month&&t.year<=this.islamicModule.getIslamicDate(new Date(2069,1,16)).year},t.prototype.compareYear=function(e,t){return this.compare(e,t,0)},t.prototype.compareDecade=function(e,t){return this.compare(e,t,10)},t.prototype.shiftArray=function(e,t){return e.slice(t).concat(e.slice(0,t))},t.prototype.addDay=function(e,t,i,r,a){var s=t,o=new Date(+e);if(!n.isNullOrUndefined(this.tableBodyElement)&&!n.isNullOrUndefined(i)){for(;this.findNextTD(new Date(+e),s,r,a);)s+=t;var l=new Date(o.setDate(o.getDate()+s));s=+l>+r||+l<+a?s===t?t-t:t:s}e.setDate(e.getDate()+s)},t.prototype.findNextTD=function(e,t,i,r){var a=new Date(e.setDate(e.getDate()+t)),s=[],o=!1;if(s=(!n.isNullOrUndefined(a)&&a.getMonth())===(!n.isNullOrUndefined(this.currentDate)&&this.currentDate.getMonth())?("Gregorian"===this.calendarMode?this.renderDays(a):this.islamicModule.islamicRenderDays(this.currentDate,a)).filter(function(e){return e.classList.contains(D)}):this.tableBodyElement.querySelectorAll("td."+D),+a<=+i&&+a>=+r&&s.length)for(var l=0;l<s.length&&!(o=+a==+new Date(parseInt(s[l].id,0)));l++);return o},t.prototype.getMaxDays=function(e){var t,i=new Date(this.checkValue(e));t=28;for(var n=i.getMonth();i.getMonth()===n;)++t,i.setDate(t);return t-1},t.prototype.setDateDecade=function(e,t){e.setFullYear(t),this.setProperties({value:new Date(this.checkValue(e))},!0)},t.prototype.setDateYear=function(e,t){e.setFullYear(t.getFullYear(),t.getMonth(),e.getDate()),t.getMonth()!==e.getMonth()&&(e.setDate(0),this.currentDate=new Date(this.checkValue(t))),this.setProperties({value:new Date(this.checkValue(e))},!0)},t.prototype.compareMonth=function(e,t){return e.getFullYear()>t.getFullYear()?1:e.getFullYear()<t.getFullYear()?-1:e.getMonth()===t.getMonth()?0:e.getMonth()>t.getMonth()?1:-1},t.prototype.checkValue=function(e){return e instanceof Date?e.toUTCString():""+e},t.prototype.checkView=function(){"Decade"!==this.start&&"Year"!==this.start&&this.setProperties({start:"Month"},!0),"Decade"!==this.depth&&"Year"!==this.depth&&this.setProperties({depth:"Month"},!0),this.getViewNumber(this.depth)>this.getViewNumber(this.start)&&this.setProperties({depth:"Month"},!0)},t.prototype.getDate=function(e,t){return t&&(e=new Date(e.toLocaleString("en-US",{timeZone:t}))),e},m([n.Property(new Date(1900,0,1))],t.prototype,"min",void 0),m([n.Property(!0)],t.prototype,"enabled",void 0),m([n.Property(null)],t.prototype,"cssClass",void 0),m([n.Property(new Date(2099,11,31))],t.prototype,"max",void 0),m([n.Property(null)],t.prototype,"firstDayOfWeek",void 0),m([n.Property("Gregorian")],t.prototype,"calendarMode",void 0),m([n.Property("Month")],t.prototype,"start",void 0),m([n.Property("Month")],t.prototype,"depth",void 0),m([n.Property(!1)],t.prototype,"weekNumber",void 0),m([n.Property("FirstDay")],t.prototype,"weekRule",void 0),m([n.Property(!0)],t.prototype,"showTodayButton",void 0),m([n.Property("Short")],t.prototype,"dayHeaderFormat",void 0),m([n.Property(!1)],t.prototype,"enablePersistence",void 0),m([n.Property(null)],t.prototype,"keyConfigs",void 0),m([n.Property(null)],t.prototype,"serverTimezoneOffset",void 0),m([n.Event()],t.prototype,"created",void 0),m([n.Event()],t.prototype,"destroyed",void 0),m([n.Event()],t.prototype,"navigated",void 0),m([n.Event()],t.prototype,"renderDayCell",void 0),t=m([n.NotifyPropertyChanges],t)}(n.Component)),V="e-other-month",I="e-disabled",A="e-selected",N="e-focused-date",P="e-month-hide",H=function(){function e(e){this.calendarInstance=e}return e.prototype.getModuleName=function(){return"islamic"},e.prototype.islamicTitleUpdate=function(e,t){var i=new n.Internationalization(this.calendarInstance.locale);switch(t){case"days":this.calendarInstance.headerTitleElement.textContent=i.formatDate(e,{type:"dateTime",format:"MMMMyyyy",calendar:"islamic"});break;case"months":this.calendarInstance.headerTitleElement.textContent=i.formatDate(e,{type:"dateTime",format:"yyyy",calendar:"islamic"})}},e.prototype.islamicRenderDays=function(e,t,i,r){var a,s=[],o=new Date(this.islamicInValue(e));this.islamicTitleUpdate(e,"days");var l=this.getIslamicDate(o),h=this.toGregorian(l.year,l.month,1),p=l.month;for(o=h;o.getDay()!==this.calendarInstance.firstDayOfWeek;)this.calendarInstance.setStartDate(o,-864e5);for(var c=0;c<42;++c){var d=this.calendarInstance.createElement("td",{className:"e-cell"}),u=this.calendarInstance.createElement("span");c%7==0&&this.calendarInstance.weekNumber&&(u.textContent=""+this.calendarInstance.getWeek(o),d.appendChild(u),n.addClass([d],"e-week-number"),s.push(d)),a=new Date(+o),o=this.calendarInstance.minMaxDate(o);var m={type:"dateTime",skeleton:"full",calendar:"islamic"},f=this.calendarInstance.globalize.parseDate(this.calendarInstance.globalize.formatDate(o,m),m),v=this.islamicDayCell(o),g=this.calendarInstance.globalize.formatDate(o,{type:"date",skeleton:"full",calendar:"islamic"}),y=this.calendarInstance.createElement("span");y.textContent=this.calendarInstance.globalize.formatDate(o,{type:"date",skeleton:"d",calendar:"islamic"});var b=this.calendarInstance.min>o||this.calendarInstance.max<o;b?(n.addClass([v],I),n.addClass([v],"e-overlay")):y.setAttribute("title",""+g),p!==this.getIslamicDate(o).month&&n.addClass([v],V),0!==o.getDay()&&6!==o.getDay()||n.addClass([v],"e-weekend"),v.appendChild(y),this.calendarInstance.renderDayCellArgs={date:o,isDisabled:!1,element:v,isOutOfRange:b};var D=this.calendarInstance.renderDayCellArgs;if(this.calendarInstance.renderDayCellEvent(D),D.isDisabled){if(this.calendarInstance.isMultiSelection){if(!n.isNullOrUndefined(this.calendarInstance.values)&&this.calendarInstance.values.length>0)for(var w=0;w<r.length;w++)+new Date(this.calendarInstance.globalize.formatDate(D.date,{type:"date",skeleton:"yMd",calendar:"islamic"}))==+new Date(this.calendarInstance.globalize.formatDate(this.calendarInstance.values[w],{type:"date",skeleton:"yMd",calendar:"islamic"}))&&(this.calendarInstance.values.splice(w,1),w=-1)}else t&&+t==+D.date&&this.calendarInstance.setProperties({value:null},!0)}this.calendarInstance.renderDayCellArgs.isDisabled&&!v.classList.contains(A)&&(n.addClass([v],I),n.addClass([v],"e-overlay"),+this.calendarInstance.renderDayCellArgs.date==+this.calendarInstance.todayDate&&(this.calendarInstance.todayDisabled=!0));var C=v.classList.contains(V),T=v.classList.contains(I);if(T||n.EventHandler.add(v,"click",this.calendarInstance.clickHandler,this.calendarInstance),!this.calendarInstance.isMultiSelection||n.isNullOrUndefined(this.calendarInstance.values)||C||T)C||T||!this.calendarInstance.getDateVal(o,t)?this.calendarInstance.updateFocus(C,T,o,v,e):n.addClass([v],A);else{for(var E=0;E<this.calendarInstance.values.length;E++)this.calendarInstance.globalize.formatDate(o,{type:"date",skeleton:"short",calendar:"islamic"})===this.calendarInstance.globalize.formatDate(this.calendarInstance.values[E],{type:"date",skeleton:"short",calendar:"islamic"})&&this.calendarInstance.getDateVal(o,this.calendarInstance.values[E])?n.addClass([v],A):this.calendarInstance.updateFocus(C,T,o,v,e);this.calendarInstance.values.length<=0&&this.calendarInstance.updateFocus(C,T,o,v,e)}f.getDate()===(new Date).getDate()&&f.getMonth()===(new Date).getMonth()&&f.getFullYear()===(new Date).getFullYear()&&n.addClass([v],"e-today"),o=new Date(+a),s.push(this.calendarInstance.renderDayCellArgs.element),this.calendarInstance.addDay(o,1,null,this.calendarInstance.max,this.calendarInstance.min)}return s},e.prototype.islamicIconHandler=function(){new Date(this.islamicInValue(this.calendarInstance.currentDate)).setDate(1);var e=new Date(this.islamicInValue(this.calendarInstance.currentDate));switch(this.calendarInstance.currentView()){case"Month":var t=1>this.islamicCompareMonth(e,this.calendarInstance.min),i=this.islamicCompareMonth(e,this.calendarInstance.max)>-1;this.calendarInstance.previousIconHandler(t),this.calendarInstance.nextIconHandler(i);break;case"Year":var r=1>this.hijriCompareYear(e,this.calendarInstance.min),a=this.hijriCompareYear(e,this.calendarInstance.max)>-1;this.calendarInstance.previousIconHandler(r),this.calendarInstance.nextIconHandler(a);break;case"Decade":var s=n.HijriParser.toGregorian(1361,1,1),o=1>this.hijriCompareDecade(e,this.calendarInstance.min),l=this.hijriCompareDecade(e,this.calendarInstance.max)>-1;o=n.HijriParser.toGregorian(this.calendarInstance.headerTitleElement.textContent.split("-")[0].trim(),1,1).getFullYear()===s.getFullYear()||o,this.calendarInstance.previousIconHandler(o),this.calendarInstance.nextIconHandler(l)}},e.prototype.islamicNext=function(){this.calendarInstance.effect="";var e=this.calendarInstance.getViewNumber(this.calendarInstance.currentView()),t=this.getIslamicDate(this.calendarInstance.currentDate);switch(this.calendarInstance.currentView()){case"Year":this.calendarInstance.currentDate=this.toGregorian(t.year+1,t.month,1),this.calendarInstance.switchView(e);break;case"Month":this.calendarInstance.currentDate=this.toGregorian(t.year,t.month+1,1),this.calendarInstance.switchView(e);break;case"Decade":this.calendarInstance.nextIconClicked=!0,t.year-this.calendarInstance.headerElement.textContent.split("-")[0].trim()==1&&(t.year=t.year-this.calendarInstance.headerElement.textContent.split("-")[0].trim()==1?t.year+1:t.year),this.calendarInstance.currentDate=this.toGregorian(t.year+10,t.month,1),this.calendarInstance.switchView(e)}},e.prototype.islamicPrevious=function(){var e=this.calendarInstance.getViewNumber(this.calendarInstance.currentView());this.calendarInstance.effect="";var t=this.getIslamicDate(this.calendarInstance.currentDate);switch(this.calendarInstance.currentView()){case"Month":this.calendarInstance.currentDate=this.toGregorian(t.year,t.month-1,1),this.calendarInstance.switchView(e);break;case"Year":this.calendarInstance.currentDate=this.toGregorian(t.year-1,t.month,1),this.calendarInstance.switchView(e);break;case"Decade":this.calendarInstance.previousIconClicked=!0,this.calendarInstance.currentDate=this.toGregorian(t.year-10,t.month-1,1),this.calendarInstance.switchView(e)}},e.prototype.islamicRenderYears=function(e,t){this.calendarInstance.removeTableHeadElement();var i=[],r=n.isNullOrUndefined(t),a=new Date(this.islamicInValue(this.calendarInstance.currentDate)),s=this.getIslamicDate(a);a=n.HijriParser.toGregorian(s.year,1,1);var o=s.month,l=s.year,h=s.year,p=this.getIslamicDate(this.calendarInstance.min).year,c=this.getIslamicDate(this.calendarInstance.min).month,d=this.getIslamicDate(this.calendarInstance.max).year,u=this.getIslamicDate(this.calendarInstance.max).month;this.islamicTitleUpdate(this.calendarInstance.currentDate,"months");for(var m=1;m<=12;++m){var f=this.getIslamicDate(a);a=n.HijriParser.toGregorian(f.year,m,1);var v=this.islamicDayCell(a),g=this.calendarInstance.createElement("span"),y=t&&this.getIslamicDate(t).month===this.getIslamicDate(a).month,b=t&&this.getIslamicDate(t).year===l&&y;g.textContent=this.calendarInstance.globalize.formatDate(a,{type:"dateTime",format:"MMM",calendar:"islamic"}),this.calendarInstance.min&&(h<p||m<c&&h===p)||this.calendarInstance.max&&(h>d||m>u&&h>=d)?n.addClass([v],I):!r&&b?n.addClass([v],A):this.getIslamicDate(a).month===o&&this.getIslamicDate(this.calendarInstance.currentDate).month===o&&n.addClass([v],N),v.classList.contains(I)||n.EventHandler.add(v,"click",this.calendarInstance.clickHandler,this.calendarInstance),v.appendChild(g),i.push(v)}this.islamicRenderTemplate(i,4,"e-year",e,t)},e.prototype.islamicRenderDecade=function(e,t){this.calendarInstance.removeTableHeadElement();var i=[],r=new Date(this.islamicInValue(this.calendarInstance.currentDate)),a=this.getIslamicDate(r),s=(r=n.HijriParser.toGregorian(a.year,1,1)).getFullYear(),o=new Date(this.islamicInValue(s-s%10)),l=new Date(this.islamicInValue(s-s%10+9)),h=o.getFullYear(),p=l.getFullYear(),c=this.calendarInstance.globalize.formatDate(o,{type:"dateTime",format:"y",calendar:"islamic"}),d=this.calendarInstance.globalize.formatDate(l,{type:"dateTime",format:"y",calendar:"islamic"});"ar"===this.calendarInstance.locale&&(c=Number(c.replace(/[٠١٢٣٤٥٦٧٨٩]/g,function(e){return String.fromCharCode(e.charCodeAt(0)-1632+48)})),d=Number(d.replace(/[٠١٢٣٤٥٦٧٨٩]/g,function(e){return String.fromCharCode(e.charCodeAt(0)-1632+48)})));var u=this.calendarInstance.headerElement.textContent.split("-");if((n.isNullOrUndefined(e)||u[0]===c||"home"!==e.action)&&(n.isNullOrUndefined(e)||"keydown"!==e.type||"end"!==e.action)||(c=this.calendarInstance.headerElement.textContent.split("-")[0].trim(),d=this.calendarInstance.headerElement.textContent.split("-")[1].trim()),this.calendarInstance.islamicPreviousHeader&&(c=this.calendarInstance.islamicPreviousHeader.split("-")[0].trim(),d=this.calendarInstance.islamicPreviousHeader.split("-")[1].trim(),this.calendarInstance.islamicPreviousHeader=null),this.calendarInstance.previousIconClicked){for(var m=0;m<=u.length;m++)(d=d-u[m]==2||u[m]-d==2?(parseInt(d,10)+1).toString():d-u[m]==3||u[m]-d==3?(parseInt(d,10)+2).toString():d-u[m]==4||u[m]-d==4?(parseInt(d,10)+3).toString():d-u[m]==5||u[m]-d==5?(parseInt(d,10)+4).toString():d)-u[m]!=0&&u[m]-d!=0||(d=(parseInt(d,10)-1).toString());d-u[m]!=8&&u[m]-d!=8||(c=(parseInt(d=(parseInt(d,10)-9).toString(),10)-9).toString()),d-u[m]!=7&&u[m]-d!=7||(c=(parseInt(d=(parseInt(d,10)-8).toString(),10)-9).toString()),d-(c=d-c==10?(parseInt(c,10)+1).toString():d-c==11?(parseInt(c,10)+2).toString():d-c==12?(parseInt(c,10)+3).toString():c)==8&&(c=(parseInt(c,10)-1).toString())}if(this.calendarInstance.nextIconClicked){for(var f=0;f<=u.length;f++)c-u[f]!=0&&u[f]-c!=0||(c=(parseInt(c,10)+1).toString()),c-u[f]==2&&c>u[f].trim()&&(c=(parseInt(c,10)-1).toString()),u[f]-c==1&&c<u[f].trim()&&(c=(parseInt(c,10)+2).toString());c-this.calendarInstance.headerTitleElement.textContent.split("-")[1].trim()>1&&(d=(parseInt(c=(parseInt(this.calendarInstance.headerTitleElement.textContent.split("-")[1].trim(),10)+1).toString(),10)+9).toString()),d=(d=d-c==10?(parseInt(d,10)-1).toString():d)-c==7?(parseInt(d,10)+2).toString():d-c==8?(parseInt(d,10)+1).toString():d}if("ar"===this.calendarInstance.locale){var v=this.calendarInstance.globalize.formatDate(o,{type:"dateTime",format:"y",calendar:"islamic"}),g=this.calendarInstance.globalize.formatDate(l,{type:"dateTime",format:"y",calendar:"islamic"});this.calendarInstance.headerTitleElement.textContent=v+" - "+g}else this.calendarInstance.headerTitleElement.textContent=c+" - "+d;this.calendarInstance.nextIconClicked=this.calendarInstance.previousIconClicked=!1;var y=(parseInt(c,10)-2).toString();h=Math.round(.97*parseInt(c,10)+622),p=Math.round(.97*parseInt(d,10)+622);for(var b=Math.round(.97*parseInt(y,10)+622),D=1;D<=12;++D){var w=b+D;if(r.setFullYear(w),r.setDate(1),r.setMonth(0),this.getIslamicDate(r).year-a.year>1&&(r.setMonth(1),D-=1,r.setFullYear(r.getFullYear()-1)),a=this.getIslamicDate(r),r=n.HijriParser.toGregorian(a.year,1,1),a.year===parseInt(c,10)-1||a.year>=c&&a.year<=p||a.year===parseInt(d,10)+1){var C=this.islamicDayCell(r);n.attributes(C,{role:"gridcell"});var T=this.calendarInstance.createElement("span");T.textContent=this.calendarInstance.globalize.formatDate(r,{type:"dateTime",format:"y",calendar:"islamic"}),a.year===parseInt(c,10)-1||w<h||w>p&&a.year!==parseInt(d,10)?n.addClass([C],V):w<new Date(this.islamicInValue(this.calendarInstance.min)).getFullYear()||w>new Date(this.islamicInValue(this.calendarInstance.max)).getFullYear()?n.addClass([C],I):n.isNullOrUndefined(t)||this.getIslamicDate(r).year!==this.getIslamicDate(t).year?r.getFullYear()!==this.calendarInstance.currentDate.getFullYear()||C.classList.contains(I)||n.addClass([C],N):n.addClass([C],A),C.classList.contains(I)||n.EventHandler.add(C,"click",this.calendarInstance.clickHandler,this.calendarInstance),C.appendChild(T),(n.isNullOrUndefined(e)||"home"!==e.action||a.year.toString()!==c)&&(n.isNullOrUndefined(e)||"end"!==e.action||a.year.toString()!==d)||n.addClass([C],N),i.push(C)}}this.islamicRenderTemplate(i,4,"e-decade",e,t)},e.prototype.islamicDayCell=function(e){var t={skeleton:"full",type:"dateTime",calendar:"islamic"},i=this.calendarInstance.globalize.formatDate(e,t),r=this.calendarInstance.globalize.parseDate(i,t).valueOf(),a={className:"e-cell",attrs:{id:""+n.getUniqueID(""+r),"aria-selected":"false",role:"gridcell"}};return this.calendarInstance.createElement("td",a)},e.prototype.islamicRenderTemplate=function(e,t,i,r,a){var s,o=this.calendarInstance.getViewNumber(this.calendarInstance.currentView());this.calendarInstance.tableBodyElement=this.calendarInstance.createElement("tbody"),this.calendarInstance.table.appendChild(this.calendarInstance.tableBodyElement),n.removeClass([this.calendarInstance.contentElement,this.calendarInstance.headerElement],["e-month","e-decade","e-year"]),n.addClass([this.calendarInstance.contentElement,this.calendarInstance.headerElement],[i]);for(var l=t,h=0,p=0;p<Math.round(e.length/t);++p){for(s=this.calendarInstance.createElement("tr",{attrs:{role:"row"}}),h=0+h;h<l;h++)e[h].classList.contains("e-week-number")||n.isNullOrUndefined(e[h].children[0])||(n.addClass([e[h].children[0]],["e-day"]),n.rippleEffect(e[h].children[0],{duration:600,isCenterRipple:!0})),s.appendChild(e[h]),this.calendarInstance.weekNumber&&7===h&&e[7].classList.contains(V)&&n.addClass([s],P),!this.calendarInstance.weekNumber&&6===h&&e[6].classList.contains(V)&&n.addClass([s],P),this.calendarInstance.weekNumber?41===h&&e[41].classList.contains(V)&&n.addClass([s],P):35===h&&e[35].classList.contains(V)&&n.addClass([s],P);l+=t,h+=0,this.calendarInstance.tableBodyElement.appendChild(s)}this.calendarInstance.table.querySelector("tbody").className=this.calendarInstance.effect,this.islamicIconHandler(),(o!==this.calendarInstance.getViewNumber(this.calendarInstance.currentView())||0===o&&o!==this.calendarInstance.getViewNumber(this.calendarInstance.currentView()))&&this.calendarInstance.navigateHandler(r),this.calendarInstance.setAriaActiveDescendant(),this.calendarInstance.changedArgs={value:this.calendarInstance.value,values:this.calendarInstance.values},this.calendarInstance.changeHandler()},e.prototype.islamicCompareMonth=function(e,t){var i=this.getIslamicDate(e),n=this.getIslamicDate(t);return i.year>n.year?1:i.year<n.year?-1:i.month===n.month?0:i.month>n.month?1:-1},e.prototype.islamicCompare=function(e,t,i){var n,r,a=this.getIslamicDate(e),s=this.getIslamicDate(t).year;return n=s,r=0,i&&(n=(s-=s%i)-s%i+i-1),a.year>n?r=1:"Decade"===this.calendarInstance.currentView()&&a.year<s&&!(e.getFullYear()>=2060&&2069>=e.getFullYear())?r=-1:a.year<s&&"Year"===this.calendarInstance.currentView()&&(r=-1),r},e.prototype.getIslamicDate=function(e){return n.HijriParser.getHijriDate(e)},e.prototype.toGregorian=function(e,t,i){return n.HijriParser.toGregorian(e,t,i)},e.prototype.hijriCompareYear=function(e,t){return this.islamicCompare(e,t,0)},e.prototype.hijriCompareDecade=function(e,t){return this.islamicCompare(e,t,10)},e.prototype.destroy=function(){this.calendarInstance=null},e.prototype.islamicInValue=function(e){return e instanceof Date?e.toUTCString():""+e},e}(),h=function(e,t){return(h=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},R=function(e,t){function i(){this.constructor=e}h(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},F=function(e,t,i,n){var r,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(s=(a<3?r(s):a>3?r(t,i,s):r(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},U="e-datepicker",L="e-popup-wrapper",B="e-input-focus",j="e-active",W="e-date-overflow",q="e-selected",z="e-non-edit",Y=["title","class","style"],_=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.isDateIconClicked=!1,n.isAltKeyPressed=!1,n.isInteracted=!0,n.invalidValueString=null,n.checkPreviousValue=null,n.maskedDateValue="",n.isAngular=!1,n.preventChange=!1,n.isIconClicked=!1,n.isDynamicValueChanged=!1,n.moduleName=n.getModuleName(),n.isFocused=!1,n.isBlur=!1,n.isKeyAction=!1,n.datepickerOptions=t,n}return R(t,e),t.prototype.render=function(){this.initialize(),this.bindEvents(),"Auto"===this.floatLabelType&&a.Input.calculateWidth(this.inputElement,this.inputWrapper.container),n.isNullOrUndefined(this.inputWrapper.buttons[0])||n.isNullOrUndefined(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])||"Never"===this.floatLabelType||this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon"),!n.isNullOrUndefined(n.closest(this.element,"fieldset"))&&n.closest(this.element,"fieldset").disabled&&(this.enabled=!1),this.renderComplete(),this.setTimeZone(this.serverTimezoneOffset)},t.prototype.setTimeZone=function(e){if(!n.isNullOrUndefined(this.serverTimezoneOffset)&&this.value){var t=e+(new Date).getTimezoneOffset()/60;t=this.isDayLightSaving()?t--:t,this.value=new Date(this.value.getTime()+60*t*6e4),this.updateInput()}},t.prototype.isDayLightSaving=function(){var e=new Date(this.value.getFullYear(),0,1).getTimezoneOffset(),t=new Date(this.value.getFullYear(),6,1).getTimezoneOffset();return this.value.getTimezoneOffset()<Math.max(e,t)},t.prototype.setAllowEdit=function(){this.allowEdit?this.readonly||this.inputElement.removeAttribute("readonly"):n.attributes(this.inputElement,{readonly:""}),this.updateIconState()},t.prototype.updateIconState=function(){this.allowEdit||!this.inputWrapper||this.readonly?this.inputWrapper&&n.removeClass([this.inputWrapper.container],[z]):""===this.inputElement.value?n.removeClass([this.inputWrapper.container],[z]):n.addClass([this.inputWrapper.container],[z])},t.prototype.initialize=function(){this.checkInvalidValue(this.value),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"}),this.createInput(),this.updateHtmlAttributeToWrapper(),this.setAllowEdit(),!this.enableMask||this.value||!this.maskedDateValue||"Always"!==this.floatLabelType&&this.floatLabelType&&this.placeholder?this.enableMask||this.updateInput(!0):(this.updateInput(!0),this.updateInputValue(this.maskedDateValue)),this.previousElementValue=this.inputElement.value,this.previousDate=n.isNullOrUndefined(this.value)?null:new Date(+this.value),this.inputElement.setAttribute("value",this.inputElement.value),this.inputValueCopy=this.value},t.prototype.createInput=function(){if("datepicker"===this.getModuleName()){var e={placeholder:this.placeholder};this.globalize=new n.Internationalization(this.locale),this.l10n=new n.L10n("datepicker",e,this.locale),this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0)}this.fullScreenMode&&n.Browser.isDevice&&(this.cssClass+=" e-popup-expand");var t=this.cssClass;n.isNullOrUndefined(this.cssClass)||""===this.cssClass||(t=this.cssClass.replace(/\s+/g," ").trim());var i=!this.enableMask;this.inputWrapper=a.Input.createInput({element:this.inputElement,floatLabelType:this.floatLabelType,bindClearAction:i,properties:{readonly:this.readonly,placeholder:this.placeholder,cssClass:t,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton},buttons:["e-input-group-icon e-date-icon e-icons"]},this.createElement),this.setWidth(this.width),""!==this.inputElement.name?this.inputElement.setAttribute("name",""+this.inputElement.getAttribute("name")):this.inputElement.setAttribute("name",""+this.element.id),n.attributes(this.inputElement,{"aria-atomic":"true","aria-expanded":"false",role:"combobox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-invalid":"false"}),this.enabled?(this.inputElement.setAttribute("aria-disabled","false"),this.inputElement.setAttribute("tabindex",this.tabIndex)):(this.inputElement.setAttribute("aria-disabled","true"),this.inputElement.tabIndex=-1),a.Input.addAttributes({"aria-label":"select"},this.inputWrapper.buttons[0]),n.addClass([this.inputWrapper.container],"e-date-wrapper")},t.prototype.updateInput=function(t,i){if(void 0===t&&(t=!1),void 0===i&&(i=!1),this.value&&!this.isCalendar()&&this.disabledDates(t,i),isNaN(+new Date(this.checkValue(this.value)))&&this.setProperties({value:null},!0),this.strictMode&&(e.prototype.validateDate.call(this),this.minMaxUpdates(),e.prototype.minMaxUpdate.call(this)),!n.isNullOrUndefined(this.value)){var r,a=this.value,s=void 0,o=n.isNullOrUndefined(this.formatString)?this.dateTimeFormat:this.formatString;if("datetimepicker"===this.getModuleName()?s="Gregorian"===this.calendarMode?this.globalize.formatDate(this.value,{format:o,type:"dateTime",skeleton:"yMd"}):this.globalize.formatDate(this.value,{format:o,type:"dateTime",skeleton:"yMd",calendar:"islamic"}):(r="Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"},s=this.globalize.formatDate(this.value,r)),+a<=+this.max&&+a>=+this.min)this.updateInputValue(s);else{var l=+a>=+this.max||!+this.value||!+this.value||+a<=+this.min;!this.strictMode&&l&&this.updateInputValue(s)}}n.isNullOrUndefined(this.value)&&this.strictMode&&(this.enableMask?(this.updateInputValue(this.maskedDateValue),this.notify("createMask",{module:"MaskedDateTime"})):this.updateInputValue("")),!this.strictMode&&n.isNullOrUndefined(this.value)&&this.invalidValueString&&this.updateInputValue(this.invalidValueString),this.changedArgs={value:this.value},this.errorClass(),this.updateIconState()},t.prototype.minMaxUpdates=function(){!n.isNullOrUndefined(this.value)&&this.value<this.min&&this.min<=this.max&&this.strictMode?(this.setProperties({value:this.min},!0),this.changedArgs={value:this.value}):!n.isNullOrUndefined(this.value)&&this.value>this.max&&this.min<=this.max&&this.strictMode&&(this.setProperties({value:this.max},!0),this.changedArgs={value:this.value})},t.prototype.checkStringValue=function(e){var t=null,i=null,r=null;if("datetimepicker"===this.getModuleName()){var a=new n.Internationalization(this.locale);"Gregorian"===this.calendarMode?(i={format:this.dateTimeFormat,type:"dateTime",skeleton:"yMd"},r={format:a.getDatePattern({skeleton:"yMd"}),type:"dateTime"}):(i={format:this.dateTimeFormat,type:"dateTime",skeleton:"yMd",calendar:"islamic"},r={format:a.getDatePattern({skeleton:"yMd"}),type:"dateTime",calendar:"islamic"})}else i="Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"};return t=this.checkDateValue(this.globalize.parseDate(e,i)),n.isNullOrUndefined(t)&&"datetimepicker"===this.getModuleName()&&(t=this.checkDateValue(this.globalize.parseDate(e,r))),t},t.prototype.checkInvalidValue=function(e){if(!(e instanceof Date||n.isNullOrUndefined(e))){var t=null,i=e;if("number"==typeof e&&(i=e.toString()),"datetimepicker"===this.getModuleName()){var r=new n.Internationalization(this.locale);this.calendarMode,this.dateTimeFormat,r.getDatePattern({skeleton:"yMd"})}else this.calendarMode,this.formatString;var a=!1;if("string"!=typeof i)i=null,a=!0;else if("string"==typeof i&&(i=i.trim()),!(t=this.checkStringValue(i))){var s=null;s=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,!/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/.test(i)&&!s.test(i)||/^[a-zA-Z0-9- ]*$/.test(i)||isNaN(+new Date(this.checkValue(i)))?a=!0:t=new Date(i)}a?(this.strictMode||(this.invalidValueString=i),this.setProperties({value:null},!0)):this.setProperties({value:t},!0)}},t.prototype.bindInputEvent=function(){n.isNullOrUndefined(this.formatString)&&!this.enableMask||(this.enableMask||-1===this.formatString.indexOf("y")?n.EventHandler.add(this.inputElement,"input",this.inputHandler,this):n.EventHandler.remove(this.inputElement,"input",this.inputHandler))},t.prototype.bindEvents=function(){n.EventHandler.add(this.inputWrapper.buttons[0],"mousedown touchstart",this.dateIconHandler,this),n.EventHandler.add(this.inputElement,"mouseup",this.mouseUpHandler,this),n.EventHandler.add(this.inputElement,"focus",this.inputFocusHandler,this),n.EventHandler.add(this.inputElement,"blur",this.inputBlurHandler,this),n.EventHandler.add(this.inputElement,"keyup",this.keyupHandler,this),this.enableMask&&n.EventHandler.add(this.inputElement,"keydown",this.keydownHandler,this),this.bindInputEvent(),n.EventHandler.add(this.inputElement,"change",this.inputChangeHandler,this),this.showClearButton&&this.inputWrapper.clearButton&&n.EventHandler.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this),this.formElement&&n.EventHandler.add(this.formElement,"reset",this.resetFormHandler,this),this.defaultKeyConfigs=n.extend(this.defaultKeyConfigs,this.keyConfigs),this.keyboardModules=new n.KeyboardEvents(this.inputElement,{eventName:"keydown",keyAction:this.inputKeyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})},t.prototype.keydownHandler=function(e){switch(e.code){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":case"Home":case"End":case"Delete":!this.enableMask||this.popupObj||this.readonly||("Delete"!==e.code&&e.preventDefault(),this.notify("keyDownHandler",{module:"MaskedDateTime",e:e}))}},t.prototype.unBindEvents=function(){n.isNullOrUndefined(this.inputWrapper)||n.EventHandler.remove(this.inputWrapper.buttons[0],"mousedown touchstart",this.dateIconHandler),n.EventHandler.remove(this.inputElement,"mouseup",this.mouseUpHandler),n.EventHandler.remove(this.inputElement,"focus",this.inputFocusHandler),n.EventHandler.remove(this.inputElement,"blur",this.inputBlurHandler),n.EventHandler.remove(this.inputElement,"change",this.inputChangeHandler),n.EventHandler.remove(this.inputElement,"keyup",this.keyupHandler),this.enableMask&&n.EventHandler.remove(this.inputElement,"keydown",this.keydownHandler),this.showClearButton&&this.inputWrapper.clearButton&&n.EventHandler.remove(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler),this.formElement&&n.EventHandler.remove(this.formElement,"reset",this.resetFormHandler)},t.prototype.resetFormHandler=function(){if(this.enabled&&!this.inputElement.disabled){var e=this.inputElement.getAttribute("value");"EJS-DATEPICKER"!==this.element.tagName&&"EJS-DATETIMEPICKER"!==this.element.tagName||(e="",this.inputValueCopy=null,this.inputElement.setAttribute("value","")),this.setProperties({value:this.inputValueCopy},!0),this.restoreValue(),this.inputElement&&(this.updateInputValue(e),this.errorClass())}},t.prototype.restoreValue=function(){this.currentDate=this.value?this.value:new Date,this.previousDate=this.value,this.previousElementValue=n.isNullOrUndefined(this.inputValueCopy)?"":this.globalize.formatDate(this.inputValueCopy,{format:this.formatString,type:"dateTime",skeleton:"yMd"})},t.prototype.inputChangeHandler=function(e){this.enabled&&e.stopPropagation()},t.prototype.bindClearEvent=function(){this.showClearButton&&this.inputWrapper.clearButton&&n.EventHandler.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this)},t.prototype.resetHandler=function(e){this.enabled&&(e.preventDefault(),this.clear(e))},t.prototype.mouseUpHandler=function(e){this.enableMask&&(e.preventDefault(),this.notify("setMaskSelection",{module:"MaskedDateTime"}))},t.prototype.clear=function(e){if(this.setProperties({value:null},!0),this.enableMask||this.updateInputValue(""),this.trigger("cleared",{event:e}),this.invalidValueString="",this.updateInput(),this.popupUpdate(),this.changeEvent(e),this.enableMask&&this.notify("clearHandler",{module:"MaskedDateTime"}),n.closest(this.element,"form")){var t=this.element,i=document.createEvent("KeyboardEvent");i.initEvent("keyup",!1,!0),t.dispatchEvent(i)}},t.prototype.preventEventBubbling=function(e){e.preventDefault(),this.interopAdaptor.invokeMethodAsync("OnDateIconClick")},t.prototype.updateInputValue=function(e){a.Input.setValue(e,this.inputElement,this.floatLabelType,this.showClearButton)},t.prototype.dateIconHandler=function(e){this.enabled&&(this.isIconClicked=!0,n.Browser.isDevice&&(this.inputElement.setAttribute("readonly",""),this.inputElement.blur()),e.preventDefault(),this.readonly||(this.isCalendar()?this.hide(e):(this.isDateIconClicked=!0,this.show(null,e),"datetimepicker"===this.getModuleName()&&this.inputElement.focus(),this.inputElement.focus(),n.addClass([this.inputWrapper.container],[B]),n.addClass(this.inputWrapper.buttons,j))),this.isIconClicked=!1)},t.prototype.updateHtmlAttributeToWrapper=function(){if(!n.isNullOrUndefined(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];if(!n.isNullOrUndefined(this.htmlAttributes[""+i])&&Y.indexOf(i)>-1){if("class"===i){var r=this.htmlAttributes[""+i].replace(/\s+/g," ").trim();""!==r&&n.addClass([this.inputWrapper.container],r.split(" "))}else if("style"===i){var a=this.inputWrapper.container.getAttribute(i);n.isNullOrUndefined(a)?a=this.htmlAttributes[""+i]:";"===a.charAt(a.length-1)?a+=this.htmlAttributes[""+i]:a=a+";"+this.htmlAttributes[""+i],this.inputWrapper.container.setAttribute(i,a)}else this.inputWrapper.container.setAttribute(i,this.htmlAttributes[""+i])}}},t.prototype.updateHtmlAttributeToElement=function(){if(!n.isNullOrUndefined(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];0>Y.indexOf(i)&&this.inputElement.setAttribute(i,this.htmlAttributes[""+i])}},t.prototype.updateCssClass=function(e,t){n.isNullOrUndefined(t)||(t=t.replace(/\s+/g," ").trim()),n.isNullOrUndefined(e)||(e=e.replace(/\s+/g," ").trim()),a.Input.setCssClass(e,[this.inputWrapper.container],t),this.popupWrapper&&a.Input.setCssClass(e,[this.popupWrapper],t)},t.prototype.calendarKeyActionHandle=function(e){switch(e.action){case"escape":this.isCalendar()?this.hide(e):this.inputWrapper.container.children[this.index].blur();break;case"enter":this.isCalendar()?+this.value==+this.currentDate||this.isCalendar()||this.inputWrapper.container.children[this.index].focus():this.show(null,e),"datetimepicker"===this.getModuleName()&&this.inputElement.focus();break;case"tab":this.hide(e)}},t.prototype.inputFocusHandler=function(){this.isFocused=!0,this.enabled&&(this.enableMask&&!this.inputElement.value&&this.placeholder&&this.maskedDateValue&&!this.value&&("Auto"===this.floatLabelType||"Never"===this.floatLabelType||this.placeholder)&&(this.updateInputValue(this.maskedDateValue),this.inputElement.selectionStart=0,this.inputElement.selectionEnd=this.inputElement.value.length),this.isDateIconClicked=!1,this.trigger("focus",{model:this}),this.updateIconState(),this.openOnFocus&&!this.isIconClicked&&this.show())},t.prototype.inputHandler=function(){this.isPopupClicked=!1,this.enableMask&&this.notify("inputHandler",{module:"MaskedDateTime"})},t.prototype.inputBlurHandler=function(e){this.enabled&&(this.strictModeUpdate(),""===this.inputElement.value&&n.isNullOrUndefined(this.value)&&(this.invalidValueString=null,this.updateInputValue("")),this.isBlur=!0,this.updateInput(!1,!0),this.isBlur=!1,this.popupUpdate(),this.changeTrigger(e),this.enableMask&&this.maskedDateValue&&this.placeholder&&"Always"!==this.floatLabelType&&(this.inputElement.value!==this.maskedDateValue||this.value||"Auto"!==this.floatLabelType&&"Never"!==this.floatLabelType&&!this.placeholder||this.updateInputValue("")),this.errorClass(),this.isCalendar()&&document.activeElement===this.inputElement&&this.hide(e),"datepicker"===this.getModuleName()&&this.trigger("blur",{model:this}),this.isCalendar()&&(this.defaultKeyConfigs=n.extend(this.defaultKeyConfigs,this.keyConfigs),this.calendarKeyboardModules=new n.KeyboardEvents(this.calendarElement.children[1].firstElementChild,{eventName:"keydown",keyAction:this.calendarKeyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})),this.isPopupClicked=!1)},t.prototype.documentHandler=function(t){n.isNullOrUndefined(this.popupObj)||n.isNullOrUndefined(this.inputWrapper)||!(this.inputWrapper.container.contains(t.target)&&"mousedown"!==t.type||this.popupObj.element&&this.popupObj.element.contains(t.target))||"touchstart"===t.type||t.preventDefault();var i=t.target;n.closest(i,".e-datepicker.e-popup-wrapper")||n.isNullOrUndefined(this.inputWrapper)||n.closest(i,".e-input-group")===this.inputWrapper.container||i.classList.contains("e-day")?n.closest(i,".e-datepicker.e-popup-wrapper")&&(i.classList.contains("e-day")&&!n.isNullOrUndefined(t.target.parentElement)&&t.target.parentElement.classList.contains("e-selected")&&n.closest(i,".e-content")&&n.closest(i,".e-content").classList.contains("e-"+this.depth.toLowerCase())?this.hide(t):n.closest(i,".e-footer-container")&&i.classList.contains("e-today")&&i.classList.contains("e-btn")&&+new Date(+this.value)==+e.prototype.generateTodayVal.call(this,this.value)&&this.hide(t)):(this.hide(t),this.focusOut())},t.prototype.inputKeyActionHandle=function(e){var t=this.currentView();switch(e.action){case"altUpArrow":this.isAltKeyPressed=!1,this.hide(e),this.inputElement.focus();break;case"altDownArrow":this.isAltKeyPressed=!0,this.strictModeUpdate(),this.updateInput(),this.changeTrigger(e),"datepicker"===this.getModuleName()&&this.show(null,e);break;case"escape":this.hide(e);break;case"enter":this.strictModeUpdate(),this.updateInput(),this.popupUpdate(),this.changeTrigger(e),this.errorClass(),this.isCalendar()||document.activeElement!==this.inputElement||this.hide(e),this.isCalendar()&&(e.preventDefault(),e.stopPropagation());break;case"tab":case"shiftTab":var i=this.inputElement.selectionStart,n=this.inputElement.selectionEnd;if(this.enableMask&&!this.popupObj&&!this.readonly){var r=this.inputElement.value.length;(0===i&&n===r||n!==r&&"tab"===e.action||0!==i&&"shiftTab"===e.action)&&e.preventDefault(),this.notify("keyDownHandler",{module:"MaskedDateTime",e:e}),i=this.inputElement.selectionStart,n=this.inputElement.selectionEnd}this.strictModeUpdate(),this.updateInput(),this.popupUpdate(),this.changeTrigger(e),this.errorClass(),this.enableMask&&(this.inputElement.selectionStart=i,this.inputElement.selectionEnd=n),this.hide(e);break;default:this.defaultAction(e),"select"===e.action&&t===this.depth&&this.hide(e)}},t.prototype.defaultAction=function(t){this.previousDate=!n.isNullOrUndefined(this.value)&&new Date(+this.value)||null,this.isCalendar()&&(e.prototype.keyActionHandle.call(this,t),this.isCalendar()&&n.attributes(this.inputElement,{"aria-activedescendant":""+this.setActiveDescendant()}))},t.prototype.popupUpdate=function(){if((n.isNullOrUndefined(this.value)&&!n.isNullOrUndefined(this.previousDate)||+this.value!=+this.previousDate)&&(this.popupObj&&this.popupObj.element.querySelectorAll("."+q).length>0&&n.removeClass(this.popupObj.element.querySelectorAll("."+q),[q]),!n.isNullOrUndefined(this.value)&&+this.value>=+this.min&&+this.value<=+this.max)){var t=new Date(this.checkValue(this.value));e.prototype.navigateTo.call(this,"Month",t)}},t.prototype.strictModeUpdate=function(){var e,t,i,r;("datetimepicker"===this.getModuleName()?e=n.isNullOrUndefined(this.formatString)?this.dateTimeFormat:this.formatString:/^y/.test(this.formatString)&&!/[^a-zA-Z]/.test(this.formatString)||(e=n.isNullOrUndefined(this.formatString)?this.formatString:this.formatString.replace("dd","d")),n.isNullOrUndefined(e))?e=this.formatString:e.split("M").length-1<3&&(e=e.replace("MM","M")),i="datetimepicker"===this.getModuleName()?"Gregorian"===this.calendarMode?{format:n.isNullOrUndefined(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:n.isNullOrUndefined(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}:t="Gregorian"===this.calendarMode?{format:e,type:"dateTime",skeleton:"yMd"}:{format:e,type:"dateTime",skeleton:"yMd",calendar:"islamic"},"string"==typeof this.inputElement.value&&(this.inputElement.value=this.inputElement.value.trim()),"datetimepicker"===this.getModuleName()?this.checkDateValue(this.globalize.parseDate(this.inputElement.value,i))?r=this.globalize.parseDate(this.inputElement.value.toLocaleUpperCase(),i):(t="Gregorian"===this.calendarMode?{type:"dateTime",skeleton:"yMd"}:{type:"dateTime",skeleton:"yMd",calendar:"islamic"},r=this.globalize.parseDate(this.inputElement.value,t)):(r=this.globalize.parseDate(this.inputElement.value,i),r=!n.isNullOrUndefined(r)&&isNaN(+r)?null:r,!n.isNullOrUndefined(this.formatString)&&""!==this.inputElement.value&&this.strictMode&&(this.isPopupClicked||!this.isPopupClicked&&this.inputElement.value===this.previousElementValue)&&-1===this.formatString.indexOf("y")&&r.setFullYear(this.value.getFullYear())),"datepicker"===this.getModuleName()&&this.value&&!isNaN(+this.value)&&r&&r.setHours(this.value.getHours(),this.value.getMinutes(),this.value.getSeconds(),this.value.getMilliseconds()),this.strictMode&&r?(this.updateInputValue(this.globalize.formatDate(r,i)),this.inputElement.value!==this.previousElementValue&&this.setProperties({value:r},!0)):this.strictMode||this.inputElement.value!==this.previousElementValue&&this.setProperties({value:r},!0),this.strictMode&&!r&&this.inputElement.value===(this.enableMask?this.maskedDateValue:"")&&this.setProperties({value:null},!0),isNaN(+this.value)&&this.setProperties({value:null},!0),n.isNullOrUndefined(this.value)&&(this.currentDate=new Date((new Date).setHours(0,0,0,0)))},t.prototype.createCalendar=function(){var e=this;this.popupWrapper=this.createElement("div",{className:U+" "+L}),n.isNullOrUndefined(this.cssClass)||(this.popupWrapper.className+=" "+this.cssClass),n.Browser.isDevice&&(this.modelHeader(),this.modal=this.createElement("div"),this.modal.className=U+" e-date-modal",document.body.className+=" "+W,this.modal.style.display="block",document.body.appendChild(this.modal)),this.calendarElement.querySelector("table tbody").className="",this.popupObj=new r.Popup(this.popupWrapper,{content:this.calendarElement,relateTo:n.Browser.isDevice?document.body:this.inputWrapper.container,position:n.Browser.isDevice?{X:"center",Y:"center"}:this.enableRtl?{X:"right",Y:"bottom"}:{X:"left",Y:"bottom"},offsetY:4,targetType:"container",enableRtl:this.enableRtl,zIndex:this.zIndex,collision:n.Browser.isDevice?{X:"fit",Y:"fit"}:{X:"flip",Y:"flip"},open:function(){n.Browser.isDevice&&e.fullScreenMode&&(e.iconRight=parseInt(window.getComputedStyle(e.calendarElement.querySelector(".e-header.e-month .e-prev")).marginRight,10)>16,e.touchModule=new n.Touch(e.calendarElement.querySelector(".e-content.e-month"),{swipe:e.CalendarSwipeHandler.bind(e)}),n.EventHandler.add(e.calendarElement.querySelector(".e-content.e-month"),"touchstart",e.TouchStartHandler,e)),"datetimepicker"!==e.getModuleName()&&document.activeElement!==e.inputElement&&(e.defaultKeyConfigs=n.extend(e.defaultKeyConfigs,e.keyConfigs),e.calendarElement.children[1].firstElementChild.focus(),e.calendarKeyboardModules=new n.KeyboardEvents(e.calendarElement.children[1].firstElementChild,{eventName:"keydown",keyAction:e.calendarKeyActionHandle.bind(e),keyConfigs:e.defaultKeyConfigs}),e.calendarKeyboardModules=new n.KeyboardEvents(e.inputWrapper.container.children[e.index],{eventName:"keydown",keyAction:e.calendarKeyActionHandle.bind(e),keyConfigs:e.defaultKeyConfigs}))},close:function(){e.isDateIconClicked&&e.inputWrapper.container.children[e.index].focus(),e.value&&e.disabledDates(),e.popupObj&&e.popupObj.destroy(),e.resetCalendar(),n.detach(e.popupWrapper),e.popupObj=e.popupWrapper=null,e.preventArgs=null,e.calendarKeyboardModules=null,e.setAriaAttributes()},targetExitViewport:function(){n.Browser.isDevice||e.hide()}}),this.popupObj.element.className+=" "+this.cssClass,this.setAriaAttributes()},t.prototype.CalendarSwipeHandler=function(e){var t=0;if(this.iconRight)switch(e.swipeDirection){case"Left":t=1;break;case"Right":t=-1}else switch(e.swipeDirection){case"Up":t=1;break;case"Down":t=-1}this.touchStart&&(1===t?this.navigateNext(e):-1===t&&this.navigatePrevious(e),this.touchStart=!1)},t.prototype.TouchStartHandler=function(e){this.touchStart=!0},t.prototype.setAriaDisabled=function(){this.enabled?(this.inputElement.setAttribute("aria-disabled","false"),this.inputElement.setAttribute("tabindex",this.tabIndex)):(this.inputElement.setAttribute("aria-disabled","true"),this.inputElement.tabIndex=-1)},t.prototype.modelHeader=function(){var e,t=this.createElement("div",{className:"e-model-header"}),i=this.createElement("h1",{className:"e-model-year"}),r=this.createElement("div"),a=this.createElement("span",{className:"e-model-day"}),s=this.createElement("span",{className:"e-model-month"});if(e="Gregorian"===this.calendarMode?{format:"y",skeleton:"dateTime"}:{format:"y",skeleton:"dateTime",calendar:"islamic"},i.textContent=""+this.globalize.formatDate(this.value||new Date,e),e="Gregorian"===this.calendarMode?{format:"E",skeleton:"dateTime"}:{format:"E",skeleton:"dateTime",calendar:"islamic"},a.textContent=this.globalize.formatDate(this.value||new Date,e)+", ",e="Gregorian"===this.calendarMode?{format:"MMM d",skeleton:"dateTime"}:{format:"MMM d",skeleton:"dateTime",calendar:"islamic"},s.textContent=""+this.globalize.formatDate(this.value||new Date,e),this.fullScreenMode){var o=this.createElement("span",{className:"e-popup-close"});n.EventHandler.add(o,"mousedown touchstart",this.modelCloseHandler,this);var l=this.calendarElement.querySelector("button.e-today");r.classList.add("e-day-wrapper"),l.classList.add("e-outline"),t.appendChild(o),t.appendChild(l)}this.fullScreenMode||t.appendChild(i),r.appendChild(a),r.appendChild(s),t.appendChild(r),this.calendarElement.insertBefore(t,this.calendarElement.firstElementChild)},t.prototype.modelCloseHandler=function(e){this.hide()},t.prototype.changeTrigger=function(e){this.inputElement.value!==this.previousElementValue&&(this.previousDate&&this.previousDate.valueOf())!==(this.value&&this.value.valueOf())&&(this.isDynamicValueChanged&&this.isCalendar()&&this.popupUpdate(),this.changedArgs.value=this.value,this.changedArgs.event=e||null,this.changedArgs.element=this.element,this.changedArgs.isInteracted=!n.isNullOrUndefined(e),this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",this.changedArgs),this.previousElementValue=this.inputElement.value,this.previousDate=isNaN(+new Date(this.checkValue(this.value)))?null:new Date(this.checkValue(this.value)),this.isInteracted=!0),this.isKeyAction=!1},t.prototype.navigatedEvent=function(){this.trigger("navigated",this.navigatedArgs)},t.prototype.keyupHandler=function(e){this.isKeyAction=this.inputElement.value!==this.previousElementValue},t.prototype.changeEvent=function(e){this.isIconClicked||this.isBlur||this.isKeyAction||this.selectCalendar(e),(this.previousDate&&this.previousDate.valueOf())!==(this.value&&this.value.valueOf())?(this.changedArgs.event=e||null,this.changedArgs.element=this.element,this.changedArgs.isInteracted=this.isInteracted,this.isDynamicValueChanged||this.trigger("change",this.changedArgs),this.previousDate=this.value&&new Date(+this.value),this.isDynamicValueChanged||this.hide(e),this.previousElementValue=this.inputElement.value,this.errorClass()):e&&this.hide(e),this.isKeyAction=!1},t.prototype.requiredModules=function(){var e=[];return this&&e.push({args:[this],member:"islamic"}),this.enableMask&&e.push({args:[this],member:"MaskedDateTime"}),e},t.prototype.selectCalendar=function(e){var t,i,r;i="datetimepicker"===this.getModuleName()&&n.isNullOrUndefined(this.formatString)?this.dateTimeFormat:this.formatString,this.value&&(r="datetimepicker"===this.getModuleName()?"Gregorian"===this.calendarMode?{format:i,type:"dateTime",skeleton:"yMd"}:{format:i,type:"dateTime",skeleton:"yMd",calendar:"islamic"}:"Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"},t=this.globalize.formatDate(this.changedArgs.value,r),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"})),n.isNullOrUndefined(t)||(this.updateInputValue(t),this.enableMask&&this.notify("setMaskSelection",{module:"MaskedDateTime"}))},t.prototype.isCalendar=function(){return!(!this.popupWrapper||!this.popupWrapper.classList.contains(""+L))},t.prototype.setWidth=function(e){this.inputWrapper.container.style.width="number"==typeof e?n.formatUnit(this.width):"string"==typeof e?e.match(/px|%|em/)?this.width:n.formatUnit(this.width):"100%"},t.prototype.show=function(t,i){var r=this;if(!(this.enabled&&this.readonly||!this.enabled||this.popupObj)){var a=!0,s=void 0;n.isNullOrUndefined(this.value)||+this.value>=+new Date(this.checkValue(this.min))&&+this.value<=+new Date(this.checkValue(this.max))?s=this.value||null:(s=new Date(this.checkValue(this.value)),this.setProperties({value:null},!0)),this.isCalendar()||(e.prototype.render.call(this),this.setProperties({value:s||null},!0),this.previousDate=s,this.createCalendar()),n.Browser.isDevice&&(this.mobilePopupWrapper=this.createElement("div",{className:"e-datepick-mob-popup-wrap"}),document.body.appendChild(this.mobilePopupWrapper)),this.preventArgs={preventDefault:function(){a=!1},popup:this.popupObj,event:i||null,cancel:!1,appendTo:n.Browser.isDevice?this.mobilePopupWrapper:document.body};var o=this.preventArgs;this.trigger("open",o,function(t){if(r.preventArgs=t,a&&!r.preventArgs.cancel){n.addClass(r.inputWrapper.buttons,j),r.preventArgs.appendTo.appendChild(r.popupWrapper),r.popupObj.refreshPosition(r.inputElement);var i={name:"FadeIn",duration:n.Browser.isDevice?0:300};1e3===r.zIndex?r.popupObj.show(new n.Animation(i),r.element):r.popupObj.show(new n.Animation(i),null),e.prototype.setOverlayIndex.call(r,r.mobilePopupWrapper,r.popupObj.element,r.modal,n.Browser.isDevice),r.setAriaAttributes()}else r.popupObj.destroy(),r.popupWrapper=r.popupObj=null;n.isNullOrUndefined(r.inputElement)||""!==r.inputElement.value||!n.isNullOrUndefined(r.tableBodyElement)&&r.tableBodyElement.querySelectorAll("td.e-selected").length>0&&(n.addClass([r.tableBodyElement.querySelector("td.e-selected")],"e-focused-date"),n.removeClass(r.tableBodyElement.querySelectorAll("td.e-selected"),q)),n.EventHandler.add(document,"mousedown touchstart",r.documentHandler,r)})}},t.prototype.hide=function(e){var t=this;if(n.isNullOrUndefined(this.popupWrapper))n.Browser.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit();else{var i=!0;this.preventArgs={preventDefault:function(){i=!1},popup:this.popupObj,event:e||null,cancel:!1},n.removeClass(this.inputWrapper.buttons,j),n.removeClass([document.body],W);var r=this.preventArgs;this.isCalendar()?this.trigger("close",r,function(e){t.closeEventCallback(i,e)}):this.closeEventCallback(i,r)}},t.prototype.closeEventCallback=function(e,t){this.preventArgs=t,this.isCalendar()&&e&&!this.preventArgs.cancel&&(this.popupObj.hide(),this.isAltKeyPressed=!1,this.keyboardModule.destroy(),n.removeClass(this.inputWrapper.buttons,j)),this.setAriaAttributes(),n.Browser.isDevice&&this.modal&&(this.modal.style.display="none",this.modal.outerHTML="",this.modal=null),n.Browser.isDevice&&(n.isNullOrUndefined(this.mobilePopupWrapper)||!e||!n.isNullOrUndefined(this.preventArgs)&&this.preventArgs.cancel||(this.mobilePopupWrapper.remove(),this.mobilePopupWrapper=null)),n.EventHandler.remove(document,"mousedown touchstart",this.documentHandler),n.Browser.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit()},t.prototype.focusIn=function(e){document.activeElement!==this.inputElement&&this.enabled&&(this.inputElement.focus(),n.addClass([this.inputWrapper.container],[B]))},t.prototype.focusOut=function(){document.activeElement===this.inputElement&&(n.removeClass([this.inputWrapper.container],[B]),this.inputElement.blur())},t.prototype.currentView=function(){var t;return this.calendarElement&&(t=e.prototype.currentView.call(this)),t},t.prototype.navigateTo=function(t,i){this.calendarElement&&e.prototype.navigateTo.call(this,t,i)},t.prototype.destroy=function(){this.unBindEvents(),e.prototype.destroy.call(this),n.isNullOrUndefined(this.keyboardModules)||this.keyboardModules.destroy(),this.popupObj&&this.popupObj.element.classList.contains("e-popup")&&e.prototype.destroy.call(this),this.inputElement&&(a.Input.removeAttributes({"aria-atomic":"true","aria-disabled":"true","aria-expanded":"false",role:"combobox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"},this.inputElement),n.isNullOrUndefined(this.inputElementCopy.getAttribute("tabindex"))?this.inputElement.removeAttribute("tabindex"):this.inputElement.setAttribute("tabindex",this.tabIndex),n.EventHandler.remove(this.inputElement,"blur",this.inputBlurHandler),n.EventHandler.remove(this.inputElement,"focus",this.inputFocusHandler),this.ensureInputAttribute()),this.isCalendar()&&(this.popupWrapper&&n.detach(this.popupWrapper),this.popupObj=this.popupWrapper=null,this.keyboardModule.destroy()),null===this.ngTag&&(this.inputElement&&(n.isNullOrUndefined(this.inputWrapper)||this.inputWrapper.container.insertAdjacentElement("afterend",this.inputElement),n.removeClass([this.inputElement],["e-input"])),n.removeClass([this.element],[U]),n.isNullOrUndefined(this.inputWrapper)||n.detach(this.inputWrapper.container)),this.formElement&&n.EventHandler.remove(this.formElement,"reset",this.resetFormHandler),this.inputWrapper=null,this.keyboardModules=null},t.prototype.ensureInputAttribute=function(){for(var e=[],t=0;t<this.inputElement.attributes.length;t++)e[t]=this.inputElement.attributes[t].name;for(t=0;t<e.length;t++)n.isNullOrUndefined(this.inputElementCopy.getAttribute(e[t]))?("value"===e[t].toLowerCase()&&(this.inputElement.value=""),this.inputElement.removeAttribute(e[t])):("value"===e[t].toLowerCase()&&(this.inputElement.value=this.inputElementCopy.getAttribute(e[t])),this.inputElement.setAttribute(e[t],this.inputElementCopy.getAttribute(e[t])))},t.prototype.preRender=function(){this.inputElementCopy=this.element.cloneNode(!0),n.removeClass([this.inputElementCopy],[U,"e-control","e-lib"]),this.inputElement=this.element,this.formElement=n.closest(this.inputElement,"form"),this.index=this.showClearButton?2:1,this.ngTag=null,"EJS-DATEPICKER"!==this.element.tagName&&"EJS-DATETIMEPICKER"!==this.element.tagName||(this.ngTag=this.element.tagName,this.inputElement=this.createElement("input"),this.element.appendChild(this.inputElement)),this.element.getAttribute("id")?null!==this.ngTag&&(this.inputElement.id=this.element.getAttribute("id")+"_input"):("datetimepicker"===this.getModuleName()?this.element.id=n.getUniqueID("ej2-datetimepicker"):this.element.id=n.getUniqueID("ej2-datepicker"),null!==this.ngTag&&n.attributes(this.inputElement,{id:this.element.id+"_input"})),null!==this.ngTag&&this.validationAttribute(this.element,this.inputElement),this.updateHtmlAttributeToElement(),this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.checkHtmlAttributes(!1),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex"),e.prototype.preRender.call(this)},t.prototype.getDefaultKeyConfig=function(){return this.defaultKeyConfigs={altUpArrow:"alt+uparrow",altDownArrow:"alt+downarrow",escape:"escape",enter:"enter",controlUp:"ctrl+38",controlDown:"ctrl+40",moveDown:"downarrow",moveUp:"uparrow",moveLeft:"leftarrow",moveRight:"rightarrow",select:"enter",home:"home",end:"end",pageUp:"pageup",pageDown:"pagedown",shiftPageUp:"shift+pageup",shiftPageDown:"shift+pagedown",controlHome:"ctrl+home",controlEnd:"ctrl+end",shiftTab:"shift+tab",tab:"tab"},this.defaultKeyConfigs},t.prototype.validationAttribute=function(e,t){var i=e.getAttribute("name")?e.getAttribute("name"):e.getAttribute("id");t.setAttribute("name",i),e.removeAttribute("name");for(var r=["required","aria-required","form"],a=0;a<r.length;a++)if(!n.isNullOrUndefined(e.getAttribute(r[a]))){var s=e.getAttribute(r[a]);t.setAttribute(r[a],s),e.removeAttribute(r[a])}},t.prototype.checkFormat=function(){var e=new n.Internationalization(this.locale);if(this.format){if("string"==typeof this.format)this.formatString=this.format;else if(""===this.format.skeleton||n.isNullOrUndefined(this.format.skeleton))"datetimepicker"===this.getModuleName()?this.formatString=this.dateTimeFormat:this.formatString=null;else{var t=this.format.skeleton;"datetimepicker"===this.getModuleName()?this.formatString=e.getDatePattern({skeleton:t,type:"dateTime"}):this.formatString=e.getDatePattern({skeleton:t,type:"date"})}}else this.formatString=null},t.prototype.checkHtmlAttributes=function(e){this.globalize=new n.Internationalization(this.locale),this.checkFormat(),this.checkView();var t,i=e?n.isNullOrUndefined(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["value","min","max","disabled","readonly","style","name","placeholder","type"];t="datetimepicker"===this.getModuleName()?"Gregorian"===this.calendarMode?{format:n.isNullOrUndefined(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:n.isNullOrUndefined(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}:"Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"};for(var r=0;r<i.length;r++){var a=i[r];if(!n.isNullOrUndefined(this.inputElement.getAttribute(a)))switch(a){case"disabled":if(n.isNullOrUndefined(this.datepickerOptions)||void 0===this.datepickerOptions.enabled||e){var s="disabled"!==this.inputElement.getAttribute(a)&&""!==this.inputElement.getAttribute(a)&&"true"!==this.inputElement.getAttribute(a);this.setProperties({enabled:s},!e)}break;case"readonly":if(n.isNullOrUndefined(this.datepickerOptions)||void 0===this.datepickerOptions.readonly||e){var o="readonly"===this.inputElement.getAttribute(a)||""===this.inputElement.getAttribute(a)||"true"===this.inputElement.getAttribute(a);this.setProperties({readonly:o},!e)}break;case"placeholder":(n.isNullOrUndefined(this.datepickerOptions)||void 0===this.datepickerOptions.placeholder||e)&&this.setProperties({placeholder:this.inputElement.getAttribute(a)},!e);break;case"style":this.inputElement.setAttribute("style",""+this.inputElement.getAttribute(a));break;case"name":this.inputElement.setAttribute("name",""+this.inputElement.getAttribute(a));break;case"value":if(n.isNullOrUndefined(this.datepickerOptions)||void 0===this.datepickerOptions.value||e){var l=this.inputElement.getAttribute(a);this.setProperties(n.setValue(a,this.globalize.parseDate(l,t),{}),!e)}break;case"min":if(+this.min==+new Date(1900,0,1)||e){var h=this.inputElement.getAttribute(a);this.setProperties(n.setValue(a,this.globalize.parseDate(h),{}),!e)}break;case"max":if(+this.max==+new Date(2099,11,31)||e){var p=this.inputElement.getAttribute(a);this.setProperties(n.setValue(a,this.globalize.parseDate(p),{}),!e)}break;case"type":"text"!==this.inputElement.getAttribute(a)&&this.inputElement.setAttribute("type","text")}}},t.prototype.getModuleName=function(){return"datepicker"},t.prototype.disabledDates=function(t,i){void 0===t&&(t=!1),void 0===i&&(i=!1);var r,a,s=new Date(this.checkDateValue(this.value)?+this.value:this.checkValue(this.value)),o=this.previousDate;this.minMaxUpdates(),t&&(!t||n.isNullOrUndefined(this.renderDayCell))||e.prototype.render.call(this),this.previousDate=o;var l='*[id^="/id"]'.replace("/id",""+(s&&+s));this.strictMode||("string"==typeof this.value||"object"==typeof this.value&&+this.value!=+s)&&this.setProperties({value:s},!0),n.isNullOrUndefined(this.calendarElement)||n.isNullOrUndefined(this.calendarElement.querySelectorAll(l)[0])||this.calendarElement.querySelectorAll(l)[0].classList.contains("e-disabled")&&(this.strictMode||(this.currentDate=new Date((new Date).setHours(0,0,0,0)))),"datetimepicker"===this.getModuleName()?r="Gregorian"===this.calendarMode?this.globalize.formatDate(s,{format:n.isNullOrUndefined(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd"}):this.globalize.formatDate(s,{format:n.isNullOrUndefined(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}):(a="Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"},r=this.globalize.formatDate(s,a)),this.popupObj||(this.updateInputValue(r),this.enableMask&&(this.updateInputValue(this.maskedDateValue),this.notify("createMask",{module:"MaskedDateTime",isBlur:i})))},t.prototype.setAriaAttributes=function(){this.isCalendar()?(a.Input.addAttributes({"aria-expanded":"true"},this.inputElement),n.attributes(this.inputElement,{"aria-owns":this.inputElement.id+"_options"}),this.value&&n.attributes(this.inputElement,{"aria-activedescendant":""+this.setActiveDescendant()})):(a.Input.addAttributes({"aria-expanded":"false"},this.inputElement),this.inputElement.removeAttribute("aria-owns"),this.inputElement.removeAttribute("aria-activedescendant"))},t.prototype.errorClass=function(){var e='*[id^="/id"]'.replace("/id",""+ +this.value),t=this.calendarElement&&this.calendarElement.querySelectorAll(e)[0]&&this.calendarElement.querySelectorAll(e)[0].classList.contains("e-disabled");!(n.isNullOrUndefined(this.value)||n.isNullOrUndefined(this.min)||n.isNullOrUndefined(this.max)||new Date(this.value).setMilliseconds(0)>=new Date(this.min).setMilliseconds(0)&&new Date(this.value).setMilliseconds(0)<=new Date(this.max).setMilliseconds(0))||!this.strictMode&&""!==this.inputElement.value&&this.inputElement.value!==this.maskedDateValue&&n.isNullOrUndefined(this.value)||t?(n.addClass([this.inputWrapper.container],"e-error"),n.attributes(this.inputElement,{"aria-invalid":"true"})):n.isNullOrUndefined(this.inputWrapper)||(n.removeClass([this.inputWrapper.container],"e-error"),n.attributes(this.inputElement,{"aria-invalid":"false"}))},t.prototype.onPropertyChanged=function(t,i){for(var r=0,s=Object.keys(t);r<s.length;r++){switch(s[r]){case"value":this.isDynamicValueChanged=!0,this.isInteracted=!1,this.invalidValueString=null,this.checkInvalidValue(t.value),t.value=this.value,this.previousElementValue=this.inputElement.value,n.isNullOrUndefined(this.value)&&(this.enableMask?this.updateInputValue(this.maskedDateValue):this.updateInputValue(""),this.currentDate=new Date((new Date).setHours(0,0,0,0))),this.updateInput(!0),+this.previousDate!=+this.value&&this.changeTrigger(null),this.isInteracted=!0,this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange,this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"});break;case"format":this.checkFormat(),this.bindInputEvent(),this.updateInput(),this.enableMask&&(this.notify("createMask",{module:"MaskedDateTime"}),this.value||this.updateInputValue(this.maskedDateValue));break;case"allowEdit":this.setAllowEdit();break;case"placeholder":a.Input.setPlaceholder(this.placeholder,this.inputElement);break;case"readonly":a.Input.setReadonly(this.readonly,this.inputElement);break;case"enabled":a.Input.setEnabled(this.enabled,this.inputElement),this.setAriaDisabled();break;case"htmlAttributes":this.updateHtmlAttributeToElement(),this.updateHtmlAttributeToWrapper(),this.checkHtmlAttributes(!0);break;case"locale":this.globalize=new n.Internationalization(this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),a.Input.setPlaceholder(this.placeholder,this.inputElement),this.updateInput(),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"});break;case"enableRtl":a.Input.setEnableRtl(this.enableRtl,[this.inputWrapper.container]);break;case"start":case"depth":this.checkView(),this.calendarElement&&e.prototype.onPropertyChanged.call(this,t,i);break;case"zIndex":this.setProperties({zIndex:t.zIndex},!0);break;case"cssClass":this.updateCssClass(t.cssClass,i.cssClass);break;case"showClearButton":a.Input.setClearButton(this.showClearButton,this.inputElement,this.inputWrapper),this.bindClearEvent(),this.index=this.showClearButton?2:1;break;case"strictMode":this.invalidValueString=null,this.updateInput();break;case"width":this.setWidth(t.width),a.Input.calculateWidth(this.inputElement,this.inputWrapper.container),n.isNullOrUndefined(this.inputWrapper.buttons[0])||n.isNullOrUndefined(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])||"Never"===this.floatLabelType||this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");break;case"floatLabelType":this.floatLabelType=t.floatLabelType,a.Input.removeFloating(this.inputWrapper),a.Input.addFloating(this.inputElement,this.floatLabelType,this.placeholder),n.isNullOrUndefined(this.inputWrapper.buttons[0])||n.isNullOrUndefined(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])||"Never"===this.floatLabelType||this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");break;case"enableMask":this.enableMask?(this.notify("createMask",{module:"MaskedDateTime"}),this.updateInputValue(this.maskedDateValue),this.bindInputEvent()):this.inputElement.value===this.maskedDateValue&&this.updateInputValue("");break;default:this.calendarElement&&this.isCalendar()&&e.prototype.onPropertyChanged.call(this,t,i)}this.isDynamicValueChanged||this.hide(null),this.isDynamicValueChanged=!1}},F([n.Property(null)],t.prototype,"width",void 0),F([n.Property(null)],t.prototype,"value",void 0),F([n.Property(null)],t.prototype,"cssClass",void 0),F([n.Property(!1)],t.prototype,"strictMode",void 0),F([n.Property(null)],t.prototype,"format",void 0),F([n.Property(!0)],t.prototype,"enabled",void 0),F([n.Property(!1)],t.prototype,"fullScreenMode",void 0),F([n.Property({})],t.prototype,"htmlAttributes",void 0),F([n.Property(null)],t.prototype,"values",void 0),F([n.Property(!1)],t.prototype,"isMultiSelection",void 0),F([n.Property(!0)],t.prototype,"showClearButton",void 0),F([n.Property(!0)],t.prototype,"allowEdit",void 0),F([n.Property(null)],t.prototype,"keyConfigs",void 0),F([n.Property(!1)],t.prototype,"enablePersistence",void 0),F([n.Property(1e3)],t.prototype,"zIndex",void 0),F([n.Property(!1)],t.prototype,"readonly",void 0),F([n.Property(null)],t.prototype,"placeholder",void 0),F([n.Property("Never")],t.prototype,"floatLabelType",void 0),F([n.Property(null)],t.prototype,"serverTimezoneOffset",void 0),F([n.Property(!1)],t.prototype,"openOnFocus",void 0),F([n.Property(!1)],t.prototype,"enableMask",void 0),F([n.Property({day:"day",month:"month",year:"year",hour:"hour",minute:"minute",second:"second",dayOfTheWeek:"day of the week"})],t.prototype,"maskPlaceholder",void 0),F([n.Event()],t.prototype,"open",void 0),F([n.Event()],t.prototype,"cleared",void 0),F([n.Event()],t.prototype,"close",void 0),F([n.Event()],t.prototype,"blur",void 0),F([n.Event()],t.prototype,"focus",void 0),F([n.Event()],t.prototype,"created",void 0),F([n.Event()],t.prototype,"destroyed",void 0),t=F([n.NotifyPropertyChanges],t)}(M),p=function(e,t){return(p=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},G=function(e,t){function i(){this.constructor=e}p(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},K=function(e,t,i,n){var r,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(s=(a<3?r(s):a>3?r(t,i,s):r(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},X="e-left-calendar",Z="e-right-calendar",Q="e-daterangepicker",J="e-active",$="e-start-date",ee="e-end-date",et="e-input-focus",ei="e-range-hover",en="e-other-month",er="e-start-label",ea="e-end-label",es="e-disabled",eo="e-selected",el="e-calendar",eh="e-header",ep="e-title",ec="e-icon-container",ed="e-date-range-container",eu="e-presets",em="e-focused-date",ef="e-content",ev="e-day-span",eg="e-week-number",ey="e-date-disabled",eb="e-icon-disabled",eD="e-overlay",ew="e-list-item",eC="e-hover",eT="e-range-overflow",eE="e-non-edit",eS="e-daterange-hidden",eO=["title","class","style"],ek=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return G(t,e),K([n.Property()],t.prototype,"label",void 0),K([n.Property()],t.prototype,"start",void 0),K([n.Property()],t.prototype,"end",void 0),t}(n.ChildProperty),ex=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.isCustomRange=!1,n.isCustomWindow=!1,n.presetsItem=[],n.liCollections=[],n.previousEleValue="",n.isKeyPopup=!1,n.dateDisabled=!1,n.isRangeIconClicked=!1,n.isMaxDaysClicked=!1,n.disabledDays=[],n.preventBlur=!1,n.preventFocus=!1,n.invalidValueString=null,n.isAngular=!1,n.preventChange=!1,n.isKeyPressed=!1,n.dateRangeOptions=t,n}return G(t,e),t.prototype.render=function(){this.initialize(),this.setProperties({startDate:this.startValue},!0),this.setProperties({endDate:this.endValue},!0),this.setModelValue(),this.setDataAttribute(!1),this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false"),"Auto"===this.floatLabelType&&a.Input.calculateWidth(this.inputElement,this.inputWrapper.container),n.isNullOrUndefined(this.inputWrapper.buttons[0])||n.isNullOrUndefined(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])||"Never"===this.floatLabelType||this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon"),!n.isNullOrUndefined(n.closest(this.element,"fieldset"))&&n.closest(this.element,"fieldset").disabled&&(this.enabled=!1),this.renderComplete()},t.prototype.preRender=function(){if(this.keyInputConfigs={altDownArrow:"alt+downarrow",escape:"escape",enter:"enter",tab:"tab",altRightArrow:"alt+rightarrow",altLeftArrow:"alt+leftarrow",moveUp:"uparrow",moveDown:"downarrow",spacebar:"space"},this.defaultConstant={placeholder:this.placeholder,startLabel:"Start Date",endLabel:"End Date",customRange:"Custom Range",applyText:"Apply",cancelText:"Cancel",selectedDays:"Selected Days",days:"days"},this.isMobile=!!n.Browser.isDevice||window.matchMedia("(max-width:550px)").matches,this.inputElement=this.element,this.angularTag=null,"EJS-DATERANGEPICKER"===this.element.tagName&&(this.angularTag=this.element.tagName,this.inputElement=this.createElement("input"),this.element.appendChild(this.inputElement)),this.cloneElement=this.element.cloneNode(!0),n.removeClass([this.cloneElement],[Q,"e-control","e-lib"]),this.updateHtmlAttributeToElement(),this.element.getAttribute("id")?null!==this.angularTag&&(this.inputElement.id=this.element.getAttribute("id")+"_input"):(this.element.id=n.getUniqueID("ej2-datetimepicker"),null!==this.angularTag&&n.attributes(this.inputElement,{id:this.element.id+"_input"})),this.checkInvalidRange(this.value),!this.invalidValueString&&"string"==typeof this.value){var t=this.value.split(" "+this.separator+" ");this.value=[new Date(t[0]),new Date(t[1])]}this.initProperty(),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex"),e.prototype.preRender.call(this),this.navNextFunction=this.navNextMonth.bind(this),this.navPrevFunction=this.navPrevMonth.bind(this),this.deviceNavNextFunction=this.deviceNavNext.bind(this),this.deviceNavPrevFunction=this.deviceNavPrevious.bind(this),this.initStartDate=this.checkDateValue(this.startValue),this.initEndDate=this.checkDateValue(this.endValue),this.formElement=n.closest(this.element,"form")},t.prototype.updateValue=function(){this.value&&this.value.length>0?(this.value[0]instanceof Date&&!isNaN(+this.value[0])?(this.setProperties({startDate:this.value[0]},!0),this.startValue=this.value[0]):"string"==typeof this.value[0]?0==+this.value[0]||isNaN(+new Date(this.checkValue(this.value[0])))?(this.startValue=null,this.setValue()):(this.setProperties({startDate:new Date(this.checkValue(this.value[0]))},!0),this.startValue=new Date(this.checkValue(this.value[0]))):(this.startValue=null,this.setValue()),this.value[1]instanceof Date&&!isNaN(+this.value[1])?(this.setProperties({endDate:this.value[1]},!0),this.endValue=this.value[1]):("string"==typeof this.value[1]?0==+this.value[0]||isNaN(+new Date(this.checkValue(this.value[0])))?(this.setProperties({endDate:null},!0),this.endValue=null):(this.setProperties({endDate:new Date(this.checkValue(this.value[1]))},!0),this.endValue=new Date(this.checkValue(this.value[1]))):(this.setProperties({endDate:null},!0),this.endValue=null),this.setValue())):this.value&&this.value.start?(this.value.start instanceof Date&&!isNaN(+this.value.start)?(this.setProperties({startDate:this.value.start},!0),this.startValue=this.value.start):"string"==typeof this.value.start?(this.setProperties({startDate:new Date(this.checkValue(this.value.start))},!0),this.startValue=new Date(this.checkValue(this.value.start))):(this.startValue=null,this.setValue()),this.value.end instanceof Date&&!isNaN(+this.value.end)?(this.setProperties({endDate:this.value.end},!0),this.endValue=this.value.end):("string"==typeof this.value.end?(this.setProperties({endDate:new Date(this.checkValue(this.value.end))},!0),this.endValue=new Date(this.checkValue(this.value.end))):(this.setProperties({endDate:null},!0),this.endValue=null),this.setValue())):n.isNullOrUndefined(this.value)&&(this.endValue=this.checkDateValue(new Date(this.checkValue(this.endDate))),this.startValue=this.checkDateValue(new Date(this.checkValue(this.startDate))),this.setValue())},t.prototype.initProperty=function(){this.globalize=new n.Internationalization(this.locale),this.checkFormat(),this.checkView(),(n.isNullOrUndefined(this.firstDayOfWeek)||this.firstDayOfWeek>6||this.firstDayOfWeek<0)&&this.setProperties({firstDayOfWeek:this.globalize.getFirstDayOfWeek()},!0),this.updateValue()},t.prototype.checkFormat=function(){if(this.format){if("string"==typeof this.format)this.formatString=this.format;else if(""===this.format.skeleton||n.isNullOrUndefined(this.format.skeleton))this.formatString=null;else{var e=this.format.skeleton;this.formatString=this.globalize.getDatePattern({skeleton:e,type:"date"})}}else this.formatString=null},t.prototype.initialize=function(){null!==this.angularTag&&this.validationAttribute(this.element,this.inputElement),this.checkHtmlAttributes(!1),n.merge(this.defaultKeyConfigs,{shiftTab:"shift+tab",tab:"tab"});var e=this.checkDateValue(new Date(this.checkValue(this.startValue)));this.setProperties({startDate:e},!0),this.setProperties({endValue:this.checkDateValue(new Date(this.checkValue(this.endValue)))},!0),this.setValue(),this.setProperties({min:this.checkDateValue(new Date(this.checkValue(this.min)))},!0),this.setProperties({max:this.checkDateValue(new Date(this.checkValue(this.max)))},!0),this.l10n=new n.L10n("daterangepicker",this.defaultConstant,this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),this.processPresets(),this.createInput(),this.updateHtmlAttributeToWrapper(),this.setRangeAllowEdit(),this.bindEvents()},t.prototype.setDataAttribute=function(e){var t={};if(e)t=this.htmlAttributes;else for(var i=0;i<this.element.attributes.length;i++)t[this.element.attributes[i].name]=this.element.getAttribute(this.element.attributes[i].name);for(var n=0,r=Object.keys(t);n<r.length;n++){var a=r[n];0===a.indexOf("data")&&(this.firstHiddenChild.setAttribute(a,t[""+a]),this.secondHiddenChild.setAttribute(a,t[""+a]))}},t.prototype.setRangeAllowEdit=function(){this.allowEdit?this.readonly||this.inputElement.removeAttribute("readonly"):n.attributes(this.inputElement,{readonly:""}),this.updateClearIconState()},t.prototype.updateClearIconState=function(){this.allowEdit||!this.inputWrapper||this.readonly?this.inputWrapper&&n.removeClass([this.inputWrapper.container],[eE]):""===this.inputElement.value?n.removeClass([this.inputWrapper.container],[eE]):n.addClass([this.inputWrapper.container],[eE])},t.prototype.validationAttribute=function(e,t){var i=e.getAttribute("name")?e.getAttribute("name"):e.getAttribute("id");t.setAttribute("name",i),e.removeAttribute("name");for(var r=["required","aria-required","form"],a=0;a<r.length;a++)if(!n.isNullOrUndefined(e.getAttribute(r[a]))){var s=e.getAttribute(r[a]);t.setAttribute(r[a],s),e.removeAttribute(r[a])}},t.prototype.updateHtmlAttributeToWrapper=function(){if(!n.isNullOrUndefined(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];if(eO.indexOf(i)>-1){if("class"===i){var r=this.htmlAttributes[""+i].replace(/\s+/g," ").trim();""!==r&&n.addClass([this.inputWrapper.container],r.split(" "))}else if("style"===i){var a=this.inputWrapper.container.getAttribute(i);a=n.isNullOrUndefined(a)?this.htmlAttributes[""+i]:a+this.htmlAttributes[""+i],this.inputWrapper.container.setAttribute(i,a)}else this.inputWrapper.container.setAttribute(i,this.htmlAttributes[""+i])}}},t.prototype.updateHtmlAttributeToElement=function(){if(!n.isNullOrUndefined(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];0>eO.indexOf(i)&&this.inputElement.setAttribute(i,this.htmlAttributes[""+i])}},t.prototype.updateCssClass=function(e,t){n.isNullOrUndefined(t)||(t=t.replace(/\s+/g," ").trim()),n.isNullOrUndefined(e)||(e=e.replace(/\s+/g," ").trim()),a.Input.setCssClass(e,[this.inputWrapper.container],t),this.popupWrapper&&a.Input.setCssClass(e,[this.popupWrapper],t)},t.prototype.processPresets=function(){this.presetsItem=[];var e=0;if(!n.isUndefined(this.presets[0].start&&this.presets[0].end&&this.presets[0].label)){for(var t=0,i=this.presets;t<i.length;t++){var r=i[t],a=r.label.replace(/\s+/g,"")+"_"+ ++e;"string"==typeof r.end?this.presetsItem.push({id:a,text:r.label,end:new Date(this.checkValue(r.end)),start:new Date(this.checkValue(r.start))}):this.presetsItem.push({id:a,text:r.label,start:r.start,end:r.end})}var s=n.isNullOrUndefined(this.startValue)?null:new Date(+this.startValue),o=n.isNullOrUndefined(this.endValue)?null:new Date(+this.endValue);this.presetsItem.push({id:"custom_range",text:this.l10n.getConstant("customRange"),start:s,end:o}),n.isNullOrUndefined(this.startValue)||n.isNullOrUndefined(this.endValue)||(this.isCustomRange=!0,this.activeIndex=this.presetsItem.length-1)}},t.prototype.bindEvents=function(){n.EventHandler.add(this.inputWrapper.buttons[0],"mousedown",this.rangeIconHandler,this),n.EventHandler.add(this.inputElement,"focus",this.inputFocusHandler,this),n.EventHandler.add(this.inputElement,"blur",this.inputBlurHandler,this),n.EventHandler.add(this.inputElement,"change",this.inputChangeHandler,this),n.EventHandler.add(this.inputElement,"keyup",this.keyupHandler,this),this.showClearButton&&this.inputWrapper.clearButton&&n.EventHandler.add(this.inputWrapper.clearButton,"mousedown",this.resetHandler,this),this.isMobile||(this.keyInputConfigs=n.extend(this.keyInputConfigs,this.keyConfigs),this.inputKeyboardModule=new n.KeyboardEvents(this.inputElement,{eventName:"keydown",keyAction:this.inputHandler.bind(this),keyConfigs:this.keyInputConfigs})),this.formElement&&n.EventHandler.add(this.formElement,"reset",this.formResetHandler,this),this.enabled?this.inputElement.setAttribute("tabindex",this.tabIndex):this.inputElement.tabIndex=-1},t.prototype.unBindEvents=function(){n.EventHandler.remove(this.inputWrapper.buttons[0],"mousedown",this.rangeIconHandler),n.EventHandler.remove(this.inputElement,"blur",this.inputBlurHandler),n.EventHandler.remove(this.inputElement,"focus",this.inputFocusHandler),n.EventHandler.remove(this.inputElement,"change",this.inputChangeHandler),n.EventHandler.remove(this.inputElement,"keyup",this.keyupHandler),this.showClearButton&&this.inputWrapper.clearButton&&n.EventHandler.remove(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler),this.isMobile||n.isNullOrUndefined(this.inputKeyboardModule)||this.inputKeyboardModule.destroy(),this.formElement&&n.EventHandler.remove(this.formElement,"reset",this.formResetHandler),this.inputElement.tabIndex=-1},t.prototype.updateHiddenInput=function(){if(this.firstHiddenChild&&this.secondHiddenChild){var e={format:this.formatString,type:"datetime",skeleton:"yMd"};"string"==typeof this.startDate&&(this.startDate=this.globalize.parseDate(this.startDate,e)),"string"==typeof this.endDate&&(this.endDate=this.globalize.parseDate(this.endDate,e)),this.firstHiddenChild.value=this.startDate&&this.globalize.formatDate(this.startDate,e)||this.inputElement.value,this.secondHiddenChild.value=this.endDate&&this.globalize.formatDate(this.endDate,e)||this.inputElement.value,this.dispatchEvent(this.firstHiddenChild,"focusout"),this.dispatchEvent(this.firstHiddenChild,"change")}},t.prototype.inputChangeHandler=function(e){this.enabled&&(e.stopPropagation(),this.updateHiddenInput())},t.prototype.bindClearEvent=function(){this.showClearButton&&this.inputWrapper.clearButton&&n.EventHandler.add(this.inputWrapper.clearButton,"mousedown",this.resetHandler,this)},t.prototype.resetHandler=function(e){if(this.enabled&&(this.valueType=this.value,e.preventDefault(),this.clear(),this.setProperties({endDate:this.checkDateValue(this.endValue)},!0),this.setProperties({startDate:this.checkDateValue(this.startValue)},!0),this.trigger("cleared",{event:e}),this.changeTrigger(e),this.clearRange(),this.hide(e),n.closest(this.element,"form"))){var t=this.firstHiddenChild,i=document.createEvent("KeyboardEvent");i.initEvent("keyup",!1,!0),t.dispatchEvent(i)}},t.prototype.restoreValue=function(){this.previousEleValue=this.inputElement.value,this.previousStartValue=this.startValue,this.previousEndValue=this.endValue,this.valueType=null,this.initStartDate=this.checkDateValue(this.startValue),this.initEndDate=this.checkDateValue(this.endValue),this.setValue(),this.setModelValue()},t.prototype.formResetHandler=function(e){if(this.enabled&&this.formElement&&e.target===this.formElement&&!this.inputElement.disabled){var t=this.inputElement.getAttribute("value");n.isNullOrUndefined(this.startCopy)?(this.setProperties({value:null,startDate:null,endDate:null},!0),this.startValue=this.endValue=null):(n.isNullOrUndefined(this.value)||n.isNullOrUndefined(this.value.start)?(this.setProperties({value:[this.startCopy,this.endCopy]},!0),this.startValue=this.value[0],this.endValue=this.value[1]):(this.setProperties({value:{start:this.startCopy,end:this.endCopy}},!0),this.startValue=this.value.start,this.endValue=this.value.end),this.setProperties({startDate:this.startValue,endDate:this.endValue},!0)),"EJS-DATERANGEPICKER"===this.element.tagName&&(this.setProperties({value:null,startDate:null,endDate:null},!0),t="",this.startValue=this.endValue=null,this.inputElement.setAttribute("value","")),this.restoreValue(),this.inputElement&&(a.Input.setValue(t,this.inputElement,this.floatLabelType,this.showClearButton),this.errorClass())}},t.prototype.clear=function(){null!==this.startValue&&(this.startValue=null),null!==this.endValue&&(this.endValue=null),this.value&&this.value.start&&this.setProperties({value:{start:null,end:null}},!0),null!==this.value&&this.value.length>0&&this.setProperties({value:null},!0),a.Input.setValue("",this.inputElement,this.floatLabelType,this.showClearButton),n.isNullOrUndefined(this.applyButton)||(this.applyButton.disabled=this.applyButton.element.disabled=!0),this.removeSelection()},t.prototype.rangeIconHandler=function(e){this.enabled&&(this.isMobile&&this.inputElement.setAttribute("readonly",""),e.preventDefault(),this.targetElement=null,this.isPopupOpen()&&document.body.contains(this.popupObj.element)?this.applyFunction(e):(this.isRangeIconClicked=!0,this.inputWrapper.container.children[0].focus(),this.show(null,e),this.isMobile||n.isNullOrUndefined(this.leftCalendar)||(this.isRangeIconClicked=!1,this.calendarFocus(),this.isRangeIconClicked=!0),n.addClass([this.inputWrapper.container],[et])))},t.prototype.checkHtmlAttributes=function(e){this.globalize=new n.Internationalization(this.locale);for(var t=e?n.isNullOrUndefined(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["startDate","endDate","minDays","maxDays","min","max","disabled","readonly","style","name","placeholder","type","value"],i={format:this.formatString,type:"date",skeleton:"yMd"},r=0;r<t.length;r++){var a=t[r];if(!n.isNullOrUndefined(this.inputElement.getAttribute(a)))switch(a){case"disabled":if(n.isNullOrUndefined(this.dateRangeOptions)||void 0===this.dateRangeOptions.enabled||e){var s="disabled"===this.inputElement.getAttribute(a)||""===this.inputElement.getAttribute(a)||"true"===this.inputElement.getAttribute(a);this.setProperties({enabled:!s},!e)}break;case"readonly":if(n.isNullOrUndefined(this.dateRangeOptions)||void 0===this.dateRangeOptions.readonly||e){var o="readonly"===this.inputElement.getAttribute(a)||"true"===this.inputElement.getAttribute(a)||""===this.inputElement.getAttribute(a);this.setProperties({readonly:o},!e)}break;case"placeholder":(n.isNullOrUndefined(this.dateRangeOptions)||void 0===this.dateRangeOptions.placeholder||e)&&this.setProperties({placeholder:this.inputElement.getAttribute(a)},!e);break;case"value":if(n.isNullOrUndefined(this.dateRangeOptions)||void 0===this.dateRangeOptions.value||e){var l=this.inputElement.getAttribute(a);this.setProperties(n.setValue(a,l,{}),!e)}break;case"style":this.inputElement.setAttribute("style",""+this.inputElement.getAttribute(a));break;case"min":if(n.isNullOrUndefined(this.min)||+this.min==+new Date(1900,0,1)||e){var h=this.globalize.parseDate(this.inputElement.getAttribute(a),i);this.setProperties(n.setValue(a,h,{}),!e)}break;case"name":this.inputElement.setAttribute("name",""+this.inputElement.getAttribute(a));break;case"max":(n.isNullOrUndefined(this.max)||+this.max==+new Date(2099,11,31)||e)&&(h=this.globalize.parseDate(this.inputElement.getAttribute(a),i),this.setProperties(n.setValue(a,h,{}),!e));break;case"startDate":n.isNullOrUndefined(this.startDate)&&(h=this.globalize.parseDate(this.inputElement.getAttribute(a),i),this.startValue=h,this.setValue());break;case"endDate":n.isNullOrUndefined(this.endDate)&&(h=this.globalize.parseDate(this.inputElement.getAttribute(a),i),this.endValue=h,this.setValue());break;case"minDays":n.isNullOrUndefined(this.minDays)&&this.setProperties(n.setValue(a,parseInt(this.inputElement.getAttribute(a),10),{}),!0);break;case"maxDays":n.isNullOrUndefined(this.maxDays)&&this.setProperties(n.setValue(a,parseInt(this.inputElement.getAttribute(a),10),{}),!0);break;case"type":"text"!==this.inputElement.getAttribute(a)&&this.inputElement.setAttribute("type","text")}}},t.prototype.createPopup=function(){for(var e=0;e<this.presetsItem.length;e++)e!==this.presetsItem.length-1&&"custom_range"===this.presetsItem[e].id&&this.presetsItem.splice(e,1);for(this.activeIndex=this.presetsItem.length-1,this.isCustomRange=!0,e=0;e<=this.presetsItem.length-2;e++){var t=this.presetsItem[e].start,i=this.presetsItem[e].end;this.startValue&&this.endValue&&+new Date(t.setHours(0,0,0,0))==+new Date(this.startValue.setHours(0,0,0,0))&&+new Date(i.setHours(0,0,0,0))==+new Date(this.endValue.setHours(0,0,0,0))&&(this.activeIndex=e,this.isCustomRange=!1)}this.popupWrapper=n.createElement("div",{id:this.element.id+"_popup",className:Q+" e-popup"}),this.adjustLongHeaderWidth();var r=!this.isCustomRange||this.isMobile;!n.isUndefined(this.presets[0].start&&this.presets[0].end&&this.presets[0].label)&&r?(this.isCustomWindow=!1,this.createPresets(),this.listRippleEffect(),this.renderPopup()):(this.isCustomWindow=!0,this.renderControl())},t.prototype.renderControl=function(){this.createControl(),this.bindCalendarEvents(),this.updateRange(this.isMobile?[this.calendarElement]:[this.leftCalendar,this.rightCalendar]),n.isNullOrUndefined(this.endValue)||n.isNullOrUndefined(this.startValue)||n.isNullOrUndefined(this.renderDayCellArgs)||!this.renderDayCellArgs.isDisabled||this.disabledDateRender(),this.updateHeader()},t.prototype.clearCalendarEvents=function(){this.leftCalPrevIcon&&this.leftCalNextIcon&&this.rightCalPrevIcon&&this.rightCalNextIcon&&(n.EventHandler.clearEvents(this.leftCalPrevIcon),n.EventHandler.clearEvents(this.leftCalNextIcon),n.EventHandler.clearEvents(this.rightCalPrevIcon),n.EventHandler.clearEvents(this.rightCalNextIcon))},t.prototype.updateNavIcons=function(){e.prototype.iconHandler.call(this)},t.prototype.calendarIconEvent=function(){this.clearCalendarEvents(),this.leftCalPrevIcon&&!this.leftCalPrevIcon.classList.contains(es)&&n.EventHandler.add(this.leftCalPrevIcon,"mousedown",this.navPrevFunction),this.leftCalNextIcon&&!this.leftCalNextIcon.classList.contains(es)&&n.EventHandler.add(this.leftCalNextIcon,"mousedown",this.navNextFunction),this.rightCalPrevIcon&&!this.rightCalPrevIcon.classList.contains(es)&&n.EventHandler.add(this.rightCalPrevIcon,"mousedown",this.navPrevFunction),this.rightCalNextIcon&&!this.rightCalNextIcon.classList.contains(es)&&n.EventHandler.add(this.rightCalNextIcon,"mousedown",this.navNextFunction)},t.prototype.bindCalendarEvents=function(){this.isMobile?(this.deviceCalendarEvent(),n.EventHandler.add(this.startButton.element,"click",this.deviceHeaderClick,this),n.EventHandler.add(this.endButton.element,"click",this.deviceHeaderClick,this)):(this.updateNavIcons(),this.calendarIconEvent(),this.calendarIconRipple(),this.headerTitleElement=this.popupObj.element.querySelector("."+Z+" ."+eh+" ."+ep),this.headerTitleElement=this.popupObj.element.querySelector("."+X+" ."+eh+" ."+ep),this.defaultKeyConfigs=n.extend(this.defaultKeyConfigs,this.keyConfigs),this.leftKeyboardModule=new n.KeyboardEvents(this.leftCalendar,{eventName:"keydown",keyAction:this.keyInputHandler.bind(this),keyConfigs:this.defaultKeyConfigs}),this.rightKeyboardModule=new n.KeyboardEvents(this.rightCalendar,{eventName:"keydown",keyAction:this.keyInputHandler.bind(this),keyConfigs:this.defaultKeyConfigs})),this.start===this.depth&&this.bindCalendarCellEvents(),this.removeFocusedDate()},t.prototype.calendarIconRipple=function(){n.rippleEffect(this.leftCalPrevIcon,{selector:".e-prev",duration:400,isCenterRipple:!0}),n.rippleEffect(this.leftCalNextIcon,{selector:".e-next",duration:400,isCenterRipple:!0}),n.rippleEffect(this.rightCalPrevIcon,{selector:".e-prev",duration:400,isCenterRipple:!0}),n.rippleEffect(this.rightCalNextIcon,{selector:".e-next",duration:400,isCenterRipple:!0})},t.prototype.deviceCalendarEvent=function(){n.EventHandler.clearEvents(this.nextIcon),n.EventHandler.clearEvents(this.previousIcon),n.rippleEffect(this.nextIcon,{selector:".e-prev",duration:400,isCenterRipple:!0}),n.rippleEffect(this.previousIcon,{selector:".e-next",duration:400,isCenterRipple:!0}),this.nextIcon&&!this.nextIcon.classList.contains(es)&&n.EventHandler.add(this.nextIcon,"mousedown",this.deviceNavNextFunction),this.previousIcon&&!this.previousIcon.classList.contains(es)&&n.EventHandler.add(this.previousIcon,"mousedown",this.deviceNavPrevFunction)},t.prototype.deviceNavNext=function(e){var t=n.closest(e.target,"."+el);this.updateDeviceCalendar(t),this.navigateNext(e),this.deviceNavigation()},t.prototype.deviceNavPrevious=function(e){var t=n.closest(e.target,"."+el);this.updateDeviceCalendar(t),this.navigatePrevious(e),this.deviceNavigation()},t.prototype.updateDeviceCalendar=function(e){e&&(this.previousIcon=e.querySelector(".e-prev"),this.nextIcon=e.querySelector(".e-next"),this.calendarElement=e,this.deviceCalendar=e,this.contentElement=e.querySelector("."+ef),this.tableBodyElement=n.select(".e-content tbody",e),this.table=e.querySelector("."+ef).getElementsByTagName("table")[0],this.headerTitleElement=e.querySelector(".e-header ."+ep),this.headerElement=e.querySelector("."+eh))},t.prototype.deviceHeaderClick=function(e){if(e.currentTarget.classList.contains("e-start-btn")&&!n.isNullOrUndefined(this.startValue)){this.endButton.element.classList.remove(J),this.startButton.element.classList.add(J);var t=this.popupObj.element.querySelector("."+el);this.updateDeviceCalendar(t),n.isNullOrUndefined(this.calendarElement.querySelector("."+$+":not(.e-other-month)"))&&(this.currentDate=new Date(+this.startValue),n.remove(this.tableBodyElement),this.createContentBody(),this.deviceNavigation()),this.removeClassDisabled()}else n.isNullOrUndefined(this.startValue)||n.isNullOrUndefined(this.endValue)||(this.startButton.element.classList.remove(J),this.endButton.element.classList.add(J),t=this.popupObj.element.querySelector("."+el),this.updateDeviceCalendar(t),n.isNullOrUndefined(this.calendarElement.querySelector("."+ee+":not(.e-other-month)"))&&(this.currentDate=new Date(+this.endValue),n.remove(this.tableBodyElement),this.createContentBody(),this.deviceNavigation()),this.updateMinMaxDays(this.popupObj.element.querySelector("."+el)),this.selectableDates())},t.prototype.inputFocusHandler=function(){this.enabled&&(this.preventBlur=!1,this.preventFocus||this.trigger("focus",{model:this}),this.updateClearIconState(),this.openOnFocus&&!this.preventFocus?(this.preventFocus=!0,this.show()):this.preventFocus=!0)},t.prototype.inputBlurHandler=function(e){if(this.enabled){if(!this.preventBlur){var t=this.inputElement.value;if(n.isNullOrUndefined(this.presetsItem)||this.presetsItem.length>0&&this.previousEleValue!==this.inputElement.value&&(this.activeIndex=this.presetsItem.length-1,this.isCustomRange=!0),!n.isNullOrUndefined(t)&&""!==t.trim()){var i=t.split(" "+this.separator+" ");if(i.length>1){this.invalidValueString=null;var r={format:this.formatString,type:"date",skeleton:"yMd"},s=new Date(i[0]),o=new Date(i[1]),l=this.getStartEndDate(s,!1,i,r),h=this.getStartEndDate(o,!0,i,r);if(!(n.isNullOrUndefined(l)||isNaN(+l)||n.isNullOrUndefined(h)||isNaN(+h))){var p=this.startValue;this.startValue=l;var c=this.endValue;if(this.endValue=h,this.setValue(),this.refreshControl(),t!==this.previousEleValue&&this.changeTrigger(e),!this.preventBlur&&document.activeElement!==this.inputElement){this.preventFocus=!1;var d={model:this};this.trigger("blur",d)}return this.updateHiddenInput(),void(this.isMobile&&this.isPopupOpen()&&(this.startValue=p,this.endValue=c))}this.strictMode||(this.startValue=null,this.endValue=null,this.setValue())}else this.strictMode||(this.startValue=null,this.endValue=null,this.setValue())}this.strictMode?(n.isNullOrUndefined(t)||""!==t.trim()||(this.startValue=null,this.endValue=null),a.Input.setValue("",this.inputElement,this.floatLabelType,this.showClearButton),this.updateInput()):(n.isNullOrUndefined(this.popupObj)&&(this.currentDate=null),this.previousStartValue=this.previousEndValue=null,this.startValue=null,this.endValue=null,this.setValue()),this.errorClass(),this.changeTrigger(e),this.preventBlur||document.activeElement===this.inputElement||(this.preventFocus=!1,d={model:this},this.trigger("blur",d))}this.updateHiddenInput()}},t.prototype.getStartEndDate=function(e,t,i,n){return"Month"===this.depth?this.globalize.parseDate(i[t?1:0].trim(),n):"Year"===this.depth?new Date(e.getFullYear(),e.getMonth()+(t?1:0),t?0:1):new Date(e.getFullYear(),t?11:0,t?31:1)},t.prototype.clearRange=function(){this.previousStartValue=this.previousEndValue=null,this.currentDate=null},t.prototype.errorClass=function(){var e=this.inputElement.value.trim();(n.isNullOrUndefined(this.endValue)&&n.isNullOrUndefined(this.startValue)&&""!==e||!n.isNullOrUndefined(this.startValue)&&+this.startValue<+this.min||!n.isNullOrUndefined(this.startValue)&&!n.isNullOrUndefined(this.endValue)&&+this.startValue>+this.endValue||!n.isNullOrUndefined(this.endValue)&&+this.endValue>+this.max||this.startValue&&this.isDateDisabled(this.startValue)||this.endValue&&this.isDateDisabled(this.endValue))&&""!==e?(n.addClass([this.inputWrapper.container],"e-error"),n.attributes(this.inputElement,{"aria-invalid":"true"})):this.inputWrapper&&(n.removeClass([this.inputWrapper.container],"e-error"),n.attributes(this.inputElement,{"aria-invalid":"false"}))},t.prototype.keyCalendarUpdate=function(e,t,i){return void 0===i&&(i=!0),i&&this.removeFocusedDate(),e?(this.leftCalCurrentDate=new Date(+this.currentDate),t=this.leftCalendar):(this.rightCalCurrentDate=new Date(+this.currentDate),t=this.rightCalendar),this.updateCalendarElement(t),this.table.focus(),t},t.prototype.navInCalendar=function(e,t,i,r,a){var s,o,l=this.getViewNumber(this.currentView()),h=this.min;switch(o=n.isNullOrUndefined(this.maxDays)||!this.isMaxDaysClicked||n.isNullOrUndefined(this.startValue)?this.max:new Date(new Date(+this.startValue).setDate(this.startValue.getDate()+(this.maxDays-1))),e.action){case"moveRight":s=new Date(+this.currentDate),this.addDay(s,1,e,o,h),t&&+s==+r&&(a=this.keyCalendarUpdate(!1,a)),this.keyboardNavigate(1,l,e,o,h),this.keyNavigation(a,e);break;case"moveLeft":s=new Date(+this.currentDate),this.addDay(s,-1,e,o,h),t||+s==+i&&(a=this.keyCalendarUpdate(!0,a)),this.keyboardNavigate(-1,l,e,o,h),this.keyNavigation(a,e);break;case"moveUp":0===l?(s=new Date(+this.currentDate),this.addDay(s,-7,e,o,h),+s<=+i&&!t&&(a=this.keyCalendarUpdate(!0,a)),this.keyboardNavigate(-7,l,e,o,h)):this.keyboardNavigate(-4,l,e,this.max,this.min),this.keyNavigation(a,e);break;case"moveDown":0===l?(s=new Date(+this.currentDate),this.addDay(s,7,e,o,h),t&&+s>=+r&&(a=this.keyCalendarUpdate(!1,a)),this.keyboardNavigate(7,l,e,o,h)):this.keyboardNavigate(4,l,e,this.max,this.min),this.keyNavigation(a,e);break;case"home":this.currentDate=this.firstDay(this.currentDate),n.remove(this.tableBodyElement),0===l?this.renderMonths(e):1===l?this.renderYears(e):this.renderDecades(e),this.keyNavigation(a,e);break;case"end":this.currentDate=this.lastDay(this.currentDate,l),n.remove(this.tableBodyElement),0===l?this.renderMonths(e):1===l?this.renderYears(e):this.renderDecades(e),this.keyNavigation(a,e);break;case"tab":this.tabKeyValidation(a,X)&&(a=this.keyCalendarUpdate(!1,a,!1),this.currentDate=this.firstCellToFocus(this.rightCalendar),l=this.getViewNumber(this.currentView()),this.keyboardNavigate(0,l,e,o,h),this.keyNavigation(a,e));break;case"shiftTab":this.tabKeyValidation(a,Z)&&(a=this.keyCalendarUpdate(!0,a,!1),this.currentDate=this.firstCellToFocus(this.leftCalendar),this.keyboardNavigate(0,l,e,o,h),this.keyNavigation(a,e))}},t.prototype.firstCellToFocus=function(e){var t=2===this.getViewNumber(this.currentView())?e.children[1].firstElementChild.querySelector("td.e-cell:not(.e-week-number):not(.e-disabled):not(.e-other-year)"):e.children[1].firstElementChild.querySelector("td.e-cell:not(.e-week-number):not(.e-disabled):not(.e-other-month)"),i=t&&t.id?t.id.split("_")[0]:null,n=new Date(this.currentDate.getFullYear(),this.currentDate.getMonth(),1);return i?new Date(+i):n},t.prototype.keyInputHandler=function(t,i){var r,a=this.getViewNumber(this.currentView()),s=new Date(this.rightCalCurrentDate.getFullYear(),this.rightCalCurrentDate.getMonth(),1),o=new Date(this.leftCalCurrentDate.getFullYear(),this.leftCalCurrentDate.getMonth()+1,0),l=n.closest(t.target,"."+Z),h=(l=n.isNullOrUndefined(l)?this.leftCalendar:l).classList.contains(X);this.updateCalendarElement(l);var p=this.tableBodyElement.querySelector("tr td.e-selected"),c=l.querySelector("tr td."+em),d=l.querySelector("tr td."+$),u=l.querySelector("tr td."+ee),m=this.getViewNumber(this.depth),f=a===m&&this.getViewNumber(this.start)>=m,v=n.closest(t.target,"."+X),g=n.closest(t.target,"."+Z),y=n.closest(t.target,"."+eu);switch(n.isNullOrUndefined(c)?n.isNullOrUndefined(u)||this.dateDisabled?n.isNullOrUndefined(d)||this.dateDisabled?this.dateDisabled||this.currentDate.setDate(1):this.currentDate=new Date(+this.startValue):this.currentDate=new Date(+this.endValue):this.currentDate=this.currentDate,this.effect="",t.action){case"altUpArrow":this.isPopupOpen()&&(this.hide(t),this.preventFocus=!0,this.inputElement.focus(),n.addClass([this.inputWrapper.container],[et]));break;case"select":if(f){var b=n.isNullOrUndefined(c)?d:c;n.isNullOrUndefined(b)||b.classList.contains(es)||this.selectRange(null,b)}else(n.isNullOrUndefined(p)||f)&&n.isNullOrUndefined(c)||(n.isNullOrUndefined(this.value)||(i=this.calendarElement.classList.contains(X)?this.startDate:this.endDate),this.controlDown=t,this.contentClick(null,--a,c||p,i));t.preventDefault();break;case"controlHome":var D=new Date(this.currentDate.getFullYear(),0,1);!h&&+D<+o&&(l=this.keyCalendarUpdate(!0,l)),e.prototype.navigateTo.call(this,"Month",new Date(this.currentDate.getFullYear(),0,1)),this.keyNavigation(l,t);break;case"altRightArrow":n.isNullOrUndefined(v)?n.isNullOrUndefined(g)?n.isNullOrUndefined(y)||this.cancelButton.element.focus():n.isNullOrUndefined(this.presetElement)?this.cancelButton.element.focus():(this.presetElement.focus(),this.removeFocusedDate()):this.rightCalendar.children[1].firstElementChild.focus(),t.preventDefault();break;case"altLeftArrow":n.isNullOrUndefined(v)?n.isNullOrUndefined(g)||this.leftCalendar.children[1].firstElementChild.focus():!0!==this.applyButton.element.disabled?this.applyButton.element.focus():this.cancelButton.element.focus(),t.preventDefault();break;case"controlUp":this.calendarElement.classList.contains(X),this.calendarNavigation(t,this.calendarElement),t.preventDefault();break;case"controlDown":n.isNullOrUndefined(p)&&n.isNullOrUndefined(c)||f||(n.isNullOrUndefined(this.value)||(i=this.calendarElement.classList.contains(X)?this.startDate:this.endDate),this.controlDown=t,this.contentClick(null,--a,p||c,i)),t.preventDefault();break;case"controlEnd":D=new Date(this.currentDate.getFullYear(),11,31),h&&+D>+s&&(l=this.keyCalendarUpdate(!1,l)),e.prototype.navigateTo.call(this,"Month",new Date(this.currentDate.getFullYear(),11,31)),this.keyNavigation(l,t);break;case"pageUp":r=new Date(+this.currentDate),this.addMonths(r,-1),!h&&+r<=+o&&(l=this.keyCalendarUpdate(!0,l)),this.addMonths(this.currentDate,-1),e.prototype.navigateTo.call(this,"Month",this.currentDate),this.keyNavigation(l,t);break;case"pageDown":r=new Date(+this.currentDate),this.addMonths(r,1),h&&+r>=+s&&(l=this.keyCalendarUpdate(!1,l)),this.addMonths(this.currentDate,1),e.prototype.navigateTo.call(this,"Month",this.currentDate),this.keyNavigation(l,t);break;case"shiftPageUp":r=new Date(+this.currentDate),this.addYears(r,-1),!h&&+r<=+o&&(l=this.keyCalendarUpdate(!0,l)),this.addYears(this.currentDate,-1),e.prototype.navigateTo.call(this,"Month",this.currentDate),this.keyNavigation(l,t);break;case"shiftPageDown":r=new Date(+this.currentDate),this.addYears(r,1),h&&+r>=+s&&(l=this.keyCalendarUpdate(!1,l)),this.addYears(this.currentDate,1),e.prototype.navigateTo.call(this,"Month",this.currentDate),this.keyNavigation(l,t);break;case"shiftTab":n.isNullOrUndefined(this.presetElement)||(this.presetElement.setAttribute("tabindex","0"),this.presetElement.focus(),this.removeFocusedDate()),h&&t.preventDefault(),this.tabKeyValidation(l,Z)&&(this.currentDate=new Date(+this.leftCalCurrentDate),this.navInCalendar(t,h,o,s,l));break;case"spacebar":this.applyButton&&!this.applyButton.disabled&&this.applyFunction(t);break;case"tab":this.tabKeyValidation(l,X)&&(this.currentDate=new Date(+this.rightCalCurrentDate),this.navInCalendar(t,h,o,s,l));break;default:this.navInCalendar(t,h,o,s,l),this.checkMinMaxDays()}this.presetHeight()},t.prototype.tabKeyValidation=function(e,t){var i=e.classList.contains(t),n=this.rightCalendar.querySelector(".e-header"),r=this.leftCalendar.querySelector(".e-header"),a=!!n&&n.classList.contains("e-month"),s=!!r&&r.classList.contains("e-month"),o=!!n&&n.classList.contains("e-year"),l=!!r&&r.classList.contains("e-year"),h=!!n&&n.classList.contains("e-decade"),p=!!r&&r.classList.contains("e-decade");return i&&(s||l||p)&&(a||o||h)&&!this.isMobile},t.prototype.keyNavigation=function(e,t){this.bindCalendarCellEvents(e),e.classList.contains(X)?this.leftCalCurrentDate=new Date(+this.currentDate):this.rightCalCurrentDate=new Date(+this.currentDate),this.updateNavIcons(),this.calendarIconEvent(),this.updateRange([e]),this.dateDisabled=this.isDateDisabled(this.currentDate),t.preventDefault()},t.prototype.inputHandler=function(e){switch(e.action){case"altDownArrow":this.isPopupOpen()||(""===this.inputElement.value&&(this.clear(),this.changeTrigger(e),this.clearRange()),this.show(null,e),this.isRangeIconClicked=!1,this.isMobile||n.isNullOrUndefined(this.leftCalendar)||this.calendarFocus(),this.isKeyPopup=!0);break;case"escape":this.isPopupOpen()&&this.hide(e);break;case"enter":document.activeElement===this.inputElement&&(this.inputBlurHandler(e),this.hide(e));break;case"tab":document.activeElement===this.inputElement&&this.isPopupOpen()&&(this.hide(e),e.preventDefault())}},t.prototype.bindCalendarCellEvents=function(e){for(var t=0,i=e?e.querySelectorAll("."+el+" td"):this.popupObj.element.querySelectorAll("."+el+" td");t<i.length;t++){var r=i[t];n.EventHandler.clearEvents(r),r.classList.contains(es)||r.classList.contains(ey)||r.classList.contains(eg)||(this.isMobile||n.EventHandler.add(r,"mouseover",this.hoverSelection,this),n.EventHandler.add(r,"mousedown",this.selectRange,this))}},t.prototype.removeFocusedDate=function(){for(var e=!n.isNullOrUndefined(this.startValue)||!n.isNullOrUndefined(this.endValue),t=0,i=this.popupObj.element.querySelectorAll("."+el+" ."+em);t<i.length;t++){var r=i[t],a=new Date,s=this.getIdValue(null,r);("Month"===this.depth&&"Month"===this.currentView()&&(!r.classList.contains("e-today")||r.classList.contains("e-today")&&e)||"Year"===this.depth&&"Year"===this.currentView()&&(!this.isSameMonth(a,s)&&!this.isSameYear(a,s)||e)||"Decade"===this.depth&&"Decade"===this.currentView()&&(!this.isSameYear(a,s)||e))&&(r.classList.remove(em),r.classList.contains($)||r.classList.contains(ee)||r.removeAttribute("aria-label"))}},t.prototype.hoverSelection=function(e,t){var i=t||e.currentTarget,r=this.getIdValue(null,i);if(!n.isNullOrUndefined(this.startValue)&&+this.startValue>=+this.min&&+this.startValue<=+this.max&&(!this.isDateDisabled(this.endValue)&&!this.isDateDisabled(this.startValue)&&n.isNullOrUndefined(this.endValue)&&n.isNullOrUndefined(this.startValue)||!n.isNullOrUndefined(this.startValue)&&n.isNullOrUndefined(this.endValue)))for(var a=0,s=this.popupObj.element.querySelectorAll("."+el+" td");a<s.length;a++){var o=s[a],l=!o.classList.contains(es)||o.classList.contains(ey);if(!o.classList.contains(eg)&&l){var h=this.getIdValue(null,o),p=new Date(+this.startValue);new Date(+h).setHours(0,0,0,0)>=p.setHours(0,0,0,0)&&+h<=+r?n.addClass([o],ei):n.removeClass([o],[ei])}}},t.prototype.isSameStartEnd=function(e,t){var i=!1;return"Month"===this.depth?e.setHours(0,0,0,0)===t.setHours(0,0,0,0)&&(i=!0):"Year"===this.depth?e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&(i=!0):"Decade"===this.depth&&e.getFullYear()===t.getFullYear()&&(i=!0),i},t.prototype.updateRange=function(e){if(!n.isNullOrUndefined(this.startValue))for(var t=0;t<e.length;t++)for(var i=0,r=e[t].querySelectorAll("."+el+" td");i<r.length;i++){var a=r[i];if(!a.classList.contains(eg)&&!a.classList.contains(es)){var s=this.getIdValue(null,a),o=this.getIdValue(null,a);if(n.isNullOrUndefined(this.endValue)?n.removeClass([a],[ei]):this.currentView()===this.depth&&+o.setHours(0,0,0,0)>=+new Date(+this.startValue).setHours(0,0,0,0)&&+o.setHours(0,0,0,0)<=+new Date(+this.endValue).setHours(0,0,0,0)&&!this.isSameStartEnd(new Date(+this.startValue),new Date(+this.endValue))&&+new Date(+this.startValue).setHours(0,0,0,0)>=+this.min&&+new Date(+this.endValue).setHours(0,0,0,0)<=+this.max&&!this.isDateDisabled(this.startValue)&&!this.isDateDisabled(this.endValue)&&n.addClass([a],ei),a.classList.contains(eo)&&a.classList.contains(ee)&&+o!=+this.endValue&&(n.removeClass([a],[eo]),n.removeClass([a],[ee])),a.classList.contains(ei)&&+o>+this.endValue&&n.removeClass([a],[ei]),!a.classList.contains(en)){var l=new Date(+this.startValue),h=new Date(+s);this.currentView()===this.depth&&+h.setHours(0,0,0,0)==+l.setHours(0,0,0,0)&&+h.setHours(0,0,0,0)>=+l.setHours(0,0,0,0)&&+this.startValue>=+this.min&&!this.inputWrapper.container.classList.contains("e-error")&&!this.isDateDisabled(this.startValue)&&!this.isDateDisabled(this.endValue)&&(n.addClass([a],[$,eo]),this.addSelectedAttributes(a,this.startValue,!0));var p=new Date(+this.endValue);"Year"===this.currentView()?h=new Date(h.getFullYear(),h.getMonth()+1,0):"Decade"===this.currentView()&&(h=new Date(h.getFullYear(),11,31)),this.currentView()===this.depth&&!n.isNullOrUndefined(this.endValue)&&+h.setHours(0,0,0,0)==+p.setHours(0,0,0,0)&&+h.setHours(0,0,0,0)<=+p.setHours(0,0,0,0)&&+this.startValue>=+this.min&&!this.inputWrapper.container.classList.contains("e-error")&&!this.isDateDisabled(this.startValue)&&!this.isDateDisabled(this.endValue)&&(n.addClass([a],[ee,eo]),this.addSelectedAttributes(a,this.startValue,!1)),+s!=+this.startValue||n.isNullOrUndefined(this.endValue)||+s!=+this.endValue||this.addSelectedAttributes(a,this.endValue,!1,!0)}}}},t.prototype.checkMinMaxDays=function(){(!n.isNullOrUndefined(this.minDays)&&this.minDays>0||!n.isNullOrUndefined(this.maxDays)&&this.maxDays>0)&&(this.isMobile?this.updateMinMaxDays(this.popupObj.element.querySelector("."+el)):(this.updateMinMaxDays(this.popupObj.element.querySelector("."+X)),this.updateMinMaxDays(this.popupObj.element.querySelector("."+Z))))},t.prototype.rangeArgs=function(e){var t,i,r=n.isNullOrUndefined(this.startValue)?null:this.globalize.formatDate(this.startValue,{format:this.formatString,type:"date",skeleton:"yMd"}),a=n.isNullOrUndefined(this.endValue)?null:this.globalize.formatDate(this.endValue,{format:this.formatString,type:"date",skeleton:"yMd"});return n.isNullOrUndefined(this.endValue)||n.isNullOrUndefined(this.startValue)?(t="",i=0):(t=r+" "+this.separator+" "+a,i=Math.round(Math.abs((this.removeTimeValueFromDate(this.startValue).getTime()-this.removeTimeValueFromDate(this.endValue).getTime())/864e5))+1),{value:this.value,startDate:this.startValue,endDate:this.endValue,daySpan:i,event:e||null,element:this.element,isInteracted:!n.isNullOrUndefined(e),text:t}},t.prototype.otherMonthSelect=function(e,t,i){var r=+this.getIdValue(null,e),a='*[id^="/id"]:not(.e-other-month)'.replace("/id",""+r),s=this.popupObj&&this.popupObj.element.querySelector(a);n.isNullOrUndefined(s)||(t?(n.addClass([s],[$,eo]),this.addSelectedAttributes(s,this.startValue,!0)):(n.addClass([s],[ee,eo]),this.addSelectedAttributes(s,this.endValue,!0)),i&&this.addSelectedAttributes(e,this.endValue,!1,!0))},t.prototype.selectRange=function(e,t){e&&e.preventDefault();var i,r,a=n.isNullOrUndefined(e)?this.getIdValue(null,t):this.getIdValue(e,null),s=a.getFullYear(),o=a.getMonth(),l=new Date(s,o,1),h=new Date(s,o+1,0),p=new Date(s,0,1),c=new Date(s,11,31);n.isNullOrUndefined(this.endValue)||n.isNullOrUndefined(this.startValue)?this.isMobile&&this.startButton.element.classList.contains(J)&&this.removeSelection():this.isMobile&&(!this.isMobile||this.endButton.element.classList.contains(J))||this.removeSelection();var d=t||e.currentTarget;if(n.isNullOrUndefined(this.startValue))n.isNullOrUndefined(this.previousStartValue)||(a.setHours(this.previousStartValue.getHours()),a.setMinutes(this.previousStartValue.getMinutes()),a.setSeconds(this.previousStartValue.getSeconds())),this.startValue="Month"===this.depth?new Date(this.checkValue(a)):"Year"===this.depth?l:p,this.endValue=null,this.setValue(),n.addClass([d],$),this.addSelectedAttributes(d,this.startValue,!0),d.classList.contains(en)&&this.otherMonthSelect(d,!0),this.checkMinMaxDays(),this.applyButton.disabled=!0,this.applyButton.element.disabled=!0,this.isMobile&&(this.endButton.element.classList.add(J),this.startButton.element.classList.remove(J),this.endButton.element.removeAttribute("disabled"),this.selectableDates()),this.trigger("select",this.rangeArgs(e));else if(+a==+this.startValue||+a>+this.startValue){if(+a==+this.startValue&&!n.isNullOrUndefined(this.minDays)&&this.minDays>1)return;this.endValue=null,this.setValue(),(this.isMobile||t)&&this.hoverSelection(e,t),n.isNullOrUndefined(this.previousEndValue)||(a.setHours(this.previousEndValue.getHours()),a.setMinutes(this.previousEndValue.getMinutes()),a.setSeconds(this.previousEndValue.getSeconds())),this.endValue="Month"===this.depth?new Date(this.checkValue(a)):"Year"===this.depth?h:c,this.setValue();var u=this.popupObj.element.querySelectorAll("."+ee);if(this.isMobile){this.startButton.element.classList.remove(J),this.endButton.element.classList.add(J);for(var m=0,f=u;m<f.length;m++){var v=f[m];v.removeAttribute("aria-label"),v.classList.contains($)?(this.addSelectedAttributes(v,this.startValue,!0),n.removeClass([v],[ee])):(v.setAttribute("aria-selected","false"),n.removeClass([v],[ee,eo]))}}n.addClass([d],ee),+this.endValue==+this.startValue?this.addSelectedAttributes(d,this.endValue,!1,!0):this.addSelectedAttributes(d,this.endValue,!1),d.classList.contains(en)&&(+this.endValue==+this.startValue?this.otherMonthSelect(d,!1,!0):this.otherMonthSelect(d,!1));for(var g=0,y=u=this.popupObj.element.querySelectorAll("."+ee);g<y.length;g++){var b=y[g];b.classList.contains($)&&n.removeClass([b],[ei])}this.applyButton.disabled=!1,this.applyButton.element.disabled=!1,this.isMobile||this.removeClassDisabled(),!n.isNullOrUndefined(this.renderDayCellArgs)&&this.renderDayCellArgs.isDisabled&&this.disabledDateRender(),this.trigger("select",this.rangeArgs(e))}else+a<+this.startValue&&(this.removeClassDisabled(),this.startValue="Month"===this.depth?new Date(this.checkValue(a)):"Year"===this.depth?l:p,this.setValue(),this.removeSelectedAttributes(),n.removeClass(this.popupObj.element.querySelectorAll("."+$),[$,eo]),n.addClass([d],$),this.addSelectedAttributes(d,this.startValue,!0),d.classList.contains(en)&&this.otherMonthSelect(d,!0),this.checkMinMaxDays());e&&(i=n.closest(e.target,"."+X)),n.isNullOrUndefined(i)?(e&&(r=e&&n.closest(e.target,"."+Z)),n.isNullOrUndefined(r)||this.rightCalendar.children[1].firstElementChild.focus()):this.leftCalendar.children[1].firstElementChild.focus(),n.addClass([d],eo),this.calendarIconEvent(),this.updateHeader(),this.removeFocusedDate()},t.prototype.selectableDates=function(){if(!n.isNullOrUndefined(this.startValue)){var e=this.calendarElement.querySelectorAll("."+el+" td"),t=!1;if(this.currentView()===this.depth){for(var i=0;i<e.length;i++){if(!(a=e[i]).classList.contains($)&&!a.classList.contains(eg)&&!a.classList.contains(es)){if(+this.getIdValue(null,a)<+this.startValue){n.addClass([a],[ey,es,eD]),n.EventHandler.clearEvents(a);continue}break}if(a.classList.contains($)&&!a.classList.contains(en)){t=!0;break}}t&&(this.previousIcon.classList.contains(es)||n.addClass([this.previousIcon],[eb,es,eD]))}else{for(var r=0;r<e.length;r++){var a=e[r],s=this.startValue.getMonth(),o=this.startValue.getFullYear(),l=this.getIdValue(null,a);if(this.startButton.element.classList.contains(J)||!("Year"===this.currentView()&&l.getMonth()<s&&l.getFullYear()<=o||"Decade"===this.currentView()&&l.getMonth()<=s&&l.getFullYear()<o))break;n.addClass([a],[es])}e[0].classList.contains(es)?this.previousIconHandler(!0):e[e.length-1].classList.contains(es)&&this.nextIconHandler(!0)}}},t.prototype.updateMinMaxDays=function(e){if(!n.isNullOrUndefined(this.startValue)&&n.isNullOrUndefined(this.endValue)||this.isMobile&&this.endButton.element.classList.contains(J)){if(!n.isNullOrUndefined(this.minDays)&&this.minDays>0||!n.isNullOrUndefined(this.maxDays)&&this.maxDays>0){var t=this.removeTimeValueFromDate(this.startValue),i=new Date(new Date(+t).setDate(t.getDate()+(this.minDays-1))),r=new Date(new Date(+t).setDate(t.getDate()+(this.maxDays-1)));i=!n.isNullOrUndefined(this.minDays)&&this.minDays>0?i:null,r=!n.isNullOrUndefined(this.maxDays)&&this.maxDays>0?r:null,"Year"===this.currentView()?(i=n.isNullOrUndefined(i)?null:new Date(i.getFullYear(),i.getMonth(),0),r=n.isNullOrUndefined(r)?null:new Date(r.getFullYear(),r.getMonth(),1)):"Decade"===this.currentView()&&(i=n.isNullOrUndefined(i)?null:new Date(i.getFullYear()-1,11,1),r=n.isNullOrUndefined(r)?null:new Date(r.getFullYear(),0,1));for(var a=void 0,s=0,o=e.querySelectorAll("."+el+" td");s<o.length;s++){var l=o[s];if(!l.classList.contains($)&&!l.classList.contains(eg)){var h=this.getIdValue(null,l);if(h=this.removeTimeValueFromDate(h),!n.isNullOrUndefined(i)&&+h==+i&&l.classList.contains(es)&&i.setDate(i.getDate()+1),!l.classList.contains(es)){if(+h<=+t)continue;!n.isNullOrUndefined(i)&&+h<+i&&(n.addClass([l],[ey,es,eD]),n.EventHandler.clearEvents(l)),!n.isNullOrUndefined(r)&&+h>+r&&(n.addClass([l],[ey,es,eD]),this.isMaxDaysClicked=!0,n.EventHandler.clearEvents(l),n.isNullOrUndefined(a)&&!l.classList.contains(en)&&(a=l))}}}if(!n.isNullOrUndefined(a)){if(this.isMobile)this.nextIcon.classList.contains(es)||n.addClass([this.nextIcon],[eb,es,eD]);else{var p=n.closest(a,"."+Z);(p=n.isNullOrUndefined(p)?this.leftCalendar:p).classList.contains(X)?(this.rightCalNextIcon.classList.contains(es)||n.addClass([this.rightCalNextIcon],[eb,es,eD]),this.leftCalNextIcon.classList.contains(es)||n.addClass([this.leftCalNextIcon],[eb,es,eD]),this.rightCalPrevIcon.classList.contains(es)||n.addClass([this.rightCalPrevIcon],[eb,es,eD])):this.rightCalNextIcon.classList.contains(es)||n.addClass([this.rightCalNextIcon],[eb,es,eD])}}}}else this.isMaxDaysClicked=!1},t.prototype.removeTimeValueFromDate=function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())},t.prototype.removeClassDisabled=function(){for(var e=0,t=this.popupObj.element.querySelectorAll("."+el+" td."+ey);e<t.length;e++){var i=t[e];i.classList.contains(ey)&&(n.removeClass([i],[ey,es,eD]),n.EventHandler.add(i,"click",this.selectRange,this),this.isMobile||n.EventHandler.add(i,"mouseover",this.hoverSelection,this))}this.isMobile?(this.nextIcon.classList.contains(eb)&&n.removeClass([this.nextIcon],[eb,es,eD]),this.previousIcon.classList.contains(eb)&&n.removeClass([this.previousIcon],[eb,es,eD])):(this.rightCalNextIcon.classList.contains(eb)&&n.removeClass([this.rightCalNextIcon],[eb,es,eD]),this.rightCalPrevIcon.classList.contains(eb)&&n.removeClass([this.rightCalPrevIcon],[eb,es,eD]),this.leftCalNextIcon.classList.contains(eb)&&n.removeClass([this.leftCalNextIcon],[eb,es,eD]))},t.prototype.updateHeader=function(){var e={type:"date",skeleton:"yMMMd"};if(n.isNullOrUndefined(this.endValue)||n.isNullOrUndefined(this.startValue))this.popupObj.element.querySelector("."+ev).textContent=this.l10n.getConstant("selectedDays");else{var t=Math.round(Math.abs((this.removeTimeValueFromDate(this.startValue).getTime()-this.removeTimeValueFromDate(this.endValue).getTime())/864e5))+1;n.isNullOrUndefined(this.disabledDayCnt)||(t-=this.disabledDayCnt,this.disabledDayCnt=null),this.popupObj.element.querySelector("."+ev).textContent=t.toString()+" "+this.l10n.getConstant("days")}this.isMobile?(n.isNullOrUndefined(this.startValue)?this.startButton.element.textContent=this.l10n.getConstant("startLabel"):this.startButton.element.textContent=this.globalize.formatDate(this.startValue,e),n.isNullOrUndefined(this.endValue)||n.isNullOrUndefined(this.startValue)?this.endButton.element.textContent=this.l10n.getConstant("endLabel"):this.endButton.element.textContent=this.globalize.formatDate(this.endValue,e)):(n.isNullOrUndefined(this.endValue)||n.isNullOrUndefined(this.startValue)?this.popupObj.element.querySelector("."+ea).textContent=this.l10n.getConstant("endLabel"):this.popupObj.element.querySelector("."+ea).textContent=this.globalize.formatDate(this.endValue,e),n.isNullOrUndefined(this.startValue)?this.popupObj.element.querySelector("."+er).textContent=this.l10n.getConstant("startLabel"):this.popupObj.element.querySelector("."+er).textContent=this.globalize.formatDate(this.startValue,e)),(this.isDateDisabled(this.startValue)||this.isDateDisabled(this.endValue)||!n.isNullOrUndefined(this.startValue)&&+this.startValue<+this.min||!n.isNullOrUndefined(this.endValue)&&+this.endValue>+this.max||!n.isNullOrUndefined(this.startValue)&&!n.isNullOrUndefined(this.endValue)&&+this.startValue>+this.endValue)&&(this.isMobile?(this.startButton.element.textContent=this.l10n.getConstant("startLabel"),this.endButton.element.textContent=this.l10n.getConstant("endLabel"),this.popupObj.element.querySelector("."+ev).textContent=this.l10n.getConstant("selectedDays")):(this.popupObj.element.querySelector("."+ev).textContent=this.l10n.getConstant("selectedDays"),this.popupObj.element.querySelector("."+er).textContent=this.l10n.getConstant("startLabel"),this.popupObj.element.querySelector("."+ea).textContent=this.l10n.getConstant("endLabel"))),this.popupObj.element.querySelector("#custom_range")&&(this.popupObj.element.querySelector("#custom_range").textContent=""!==this.l10n.getConstant("customRange")?this.l10n.getConstant("customRange"):"Custom Range")},t.prototype.removeSelection=function(){this.startValue=null,this.endValue=null,this.setValue(),this.removeSelectedAttributes(),this.popupObj&&(this.popupObj.element.querySelectorAll("."+eo).length>0&&n.removeClass(this.popupObj.element.querySelectorAll("."+eo),[$,ee,eo]),this.popupObj.element.querySelectorAll("."+em).length>0&&n.removeClass(this.popupObj.element.querySelectorAll("."+em),em),this.popupObj.element.querySelectorAll("."+ei).length>0&&n.removeClass(this.popupObj.element.querySelectorAll("."+ei),[ei]))},t.prototype.addSelectedAttributes=function(e,t,i,r){if(e){var a=this.globalize.formatDate(t,{type:"date",skeleton:"full"});!n.isNullOrUndefined(r)&&r?e.setAttribute("aria-label","The current start and end date is "+a):e.setAttribute("aria-label","The current "+(i?"start":"end")+" date is "+a),e.setAttribute("aria-selected","true")}},t.prototype.removeSelectedAttributes=function(){if(this.popupObj){for(var e,t=0,i=this.popupObj.element.querySelectorAll("."+$);t<i.length;t++)(e=i[t]).setAttribute("aria-selected","false"),e.removeAttribute("aria-label");for(var n=0,r=this.popupObj.element.querySelectorAll("."+ee);n<r.length;n++)(e=r[n]).setAttribute("aria-selected","false"),e.removeAttribute("aria-label")}},t.prototype.updateCalendarElement=function(e){e.classList.contains(X)?(this.calendarElement=this.leftCalendar,this.currentDate=this.leftCalCurrentDate,this.previousIcon=this.leftCalPrevIcon,this.nextIcon=this.leftCalNextIcon):(this.calendarElement=this.rightCalendar,this.currentDate=this.rightCalCurrentDate,this.previousIcon=this.rightCalPrevIcon,this.nextIcon=this.rightCalNextIcon),this.contentElement=e.querySelector("."+ef),this.tableBodyElement=n.select(".e-content tbody",e),this.table=e.querySelector("."+ef).getElementsByTagName("table")[0],this.headerTitleElement=e.querySelector(".e-header ."+ep),this.headerElement=e.querySelector("."+eh)},t.prototype.navPrevMonth=function(e){e.preventDefault();var t=n.closest(e.target,"."+X);t=n.isNullOrUndefined(t)?n.closest(e.target,"."+Z):t,this.updateCalendarElement(t),this.navigatePrevious(e),!n.isNullOrUndefined(this.startValue)&&n.isNullOrUndefined(this.endValue)&&this.updateMinMaxDays(t),this.updateControl(t)},t.prototype.deviceNavigation=function(e){this.deviceCalendarEvent(),this.updateRange([this.popupObj.element.querySelector("."+el)]),this.endButton.element.classList.contains(J)&&this.updateMinMaxDays(this.popupObj.element.querySelector("."+el)),this.endButton.element.classList.contains(J)&&this.selectableDates(),this.currentView()===this.depth&&this.bindCalendarCellEvents(),this.removeFocusedDate()},t.prototype.updateControl=function(e,t){void 0===t&&(t=null),e.classList.contains(Z)?this.rightCalCurrentDate=new Date(+(t||this.currentDate)):this.leftCalCurrentDate=new Date(+this.currentDate),this.calendarIconEvent(),("Month"===this.depth&&this.leftCalendar.querySelector(".e-content").classList.contains("e-month")&&this.rightCalendar.querySelector(".e-content").classList.contains("e-month")||"Year"===this.depth&&this.leftCalendar.querySelector(".e-content").classList.contains("e-year")&&this.rightCalendar.querySelector(".e-content").classList.contains("e-year")||"Decade"===this.depth&&this.leftCalendar.querySelector(".e-content").classList.contains("e-decade")&&this.rightCalendar.querySelector(".e-content").classList.contains("e-decade")||this.isMobile)&&this.bindCalendarCellEvents(),this.removeFocusedDate(),this.updateRange([e])},t.prototype.navNextMonth=function(e){e.preventDefault();var t=n.closest(e.target,"."+X);t=n.isNullOrUndefined(t)?n.closest(e.target,"."+Z):t,this.updateCalendarElement(t),this.navigateNext(e),!n.isNullOrUndefined(this.startValue)&&n.isNullOrUndefined(this.endValue)&&this.updateMinMaxDays(t),this.updateControl(t)},t.prototype.isPopupOpen=function(){return!(n.isNullOrUndefined(this.popupObj)||!this.popupObj.element.classList.contains("e-popup"))},t.prototype.createRangeHeader=function(){var e=this.createElement("div",{className:"e-start-end"});if(this.isMobile){var t=this.createElement("button",{className:"e-end-btn"}),i=this.createElement("button",{className:"e-start-btn"});this.startButton=new s.Button({content:this.l10n.getConstant("startLabel")},i),this.endButton=new s.Button({content:this.l10n.getConstant("endLabel")},t),e.appendChild(i),e.appendChild(t)}else{var r=this.createElement("a",{className:er}),a=this.createElement("a",{className:ea}),o=this.createElement("span",{className:"e-change-icon e-icons"});n.attributes(r,{"aria-atomic":"true","aria-live":"assertive","aria-label":"Start Date",role:"button"}),n.attributes(a,{"aria-atomic":"true","aria-live":"assertive","aria-label":"End Date",role:"button"}),e.appendChild(r),e.appendChild(o),e.appendChild(a),r.textContent=this.l10n.getConstant("startLabel"),a.textContent=this.l10n.getConstant("endLabel")}return e},t.prototype.disableInput=function(){this.strictMode?n.isNullOrUndefined(this.previousStartValue)||n.isNullOrUndefined(this.previousEndValue)||(this.startValue=this.previousStartValue,this.endValue=this.previousEndValue,this.setValue(),this.updateInput()):(this.updateInput(),this.clearRange(),this.setProperties({startDate:null},!0),this.setProperties({endDate:null},!0),this.startValue=null,this.endValue=null,this.setValue(),this.errorClass()),this.setProperties({enabled:!1},!0),a.Input.setEnabled(this.enabled,this.inputElement),this.bindEvents()},t.prototype.validateMinMax=function(){this.min=n.isNullOrUndefined(this.min)||!+this.min?this.min=new Date(1900,0,1):this.min,this.max=n.isNullOrUndefined(this.max)||!+this.max?this.max=new Date(2099,11,31):this.max,this.min<=this.max?(n.isNullOrUndefined(this.minDays)||n.isNullOrUndefined(this.maxDays)||this.maxDays>0&&this.minDays>0&&this.minDays>this.maxDays&&(this.maxDays=null),!n.isNullOrUndefined(this.minDays)&&this.minDays<0&&(this.minDays=null),!n.isNullOrUndefined(this.maxDays)&&this.maxDays<0&&(this.maxDays=null)):this.disableInput()},t.prototype.validateRangeStrict=function(){n.isNullOrUndefined(this.startValue)||(+this.startValue<=+this.min?(this.startValue=this.min,this.setValue()):+this.startValue>=+this.min&&+this.startValue>=+this.max&&(this.startValue=this.max)),n.isNullOrUndefined(this.endValue)||(+this.endValue>+this.max?(this.endValue=this.max,this.setValue()):+this.endValue<+this.min&&(this.endValue=this.min,this.setValue())),this.validateMinMaxDays()},t.prototype.validateRange=function(){this.validateMinMaxDays()},t.prototype.validateMinMaxDays=function(){if(!n.isNullOrUndefined(this.startValue)&&!n.isNullOrUndefined(this.endValue)){var e=Math.round(Math.abs((this.removeTimeValueFromDate(this.startValue).getTime()-this.removeTimeValueFromDate(this.endValue).getTime())/864e5))+1;if(!n.isNullOrUndefined(this.minDays)&&this.minDays>0&&!(e>=this.minDays)){if(this.strictMode){var t=new Date(+this.startValue);t.setDate(t.getDate()+(this.minDays-1)),+t>+this.max?this.endValue=this.max:this.endValue=t,this.setValue()}else this.startValue=null,this.endValue=null,this.setValue()}n.isNullOrUndefined(this.maxDays)||!(this.maxDays>0)||e<=this.maxDays||(this.strictMode?(this.endValue=new Date(+this.startValue),this.endValue.setDate(this.endValue.getDate()+(this.maxDays-1))):(this.startValue=null,this.endValue=null),this.setValue())}},t.prototype.renderCalendar=function(){this.calendarElement=this.createElement("div"),this.calendarElement.classList.add(el),this.enableRtl&&this.calendarElement.classList.add("e-rtl"),n.attributes(this.calendarElement,{"data-role":"calendar"}),e.prototype.createHeader.call(this),e.prototype.createContent.call(this)},t.prototype.isSameMonth=function(e,t){return e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()},t.prototype.isSameYear=function(e,t){return e.getFullYear()===t.getFullYear()},t.prototype.isSameDecade=function(e,t){var i=e.getFullYear(),n=t.getFullYear();return i-i%10==n-n%10},t.prototype.startMonthCurrentDate=function(){this.isSameMonth(this.min,this.max)||+this.currentDate>+this.max||this.isSameMonth(this.currentDate,this.max)?(this.currentDate=new Date(+this.max),this.currentDate.setDate(1),this.currentDate.setMonth(this.currentDate.getMonth()-1)):this.currentDate<this.min&&(this.currentDate=new Date(this.checkValue(this.min)))},t.prototype.selectNextMonth=function(){if(n.isNullOrUndefined(this.endValue)||n.isNullOrUndefined(this.startValue)||this.isSameMonth(this.endValue,this.currentDate)||this.isDateDisabled(this.endValue)||this.isDateDisabled(this.startValue))return this.currentDate.setDate(1),void this.currentDate.setMonth(this.currentDate.getMonth()+1);if(this.currentDate=new Date(+this.endValue),!n.isNullOrUndefined(this.startValue)&&+this.startValue<+this.min||!n.isNullOrUndefined(this.endValue)&&+this.endValue>+this.max||!n.isNullOrUndefined(this.startValue)&&!n.isNullOrUndefined(this.endValue)&&+this.startValue>+this.endValue){this.currentDate=new Date((new Date).setHours(0,0,0,0)),this.currentDate.setDate(1);var e=this.currentDate.getMonth()+1;this.currentDate.setMonth(e)}},t.prototype.selectNextYear=function(){if(n.isNullOrUndefined(this.endValue)||n.isNullOrUndefined(this.startValue)||this.isSameYear(this.endValue,this.currentDate)||this.isDateDisabled(this.endValue)||this.isDateDisabled(this.startValue)){this.currentDate.setMonth(0);var e=this.currentDate.getFullYear()+1;this.currentDate.setFullYear(e)}else this.currentDate=new Date(+this.endValue),(!n.isNullOrUndefined(this.endValue)&&+this.endValue>+this.max||!n.isNullOrUndefined(this.startValue)&&!n.isNullOrUndefined(this.endValue)&&+this.startValue>+this.endValue||!n.isNullOrUndefined(this.startValue)&&+this.startValue<+this.min)&&(this.currentDate=new Date((new Date).setHours(0,0,0,0)),this.currentDate.setMonth(0),this.currentDate.setFullYear(this.currentDate.getFullYear()+1))},t.prototype.selectNextDecade=function(){if(n.isNullOrUndefined(this.endValue)||n.isNullOrUndefined(this.startValue)||this.isSameDecade(this.endValue,this.currentDate)||this.isDateDisabled(this.endValue)||this.isDateDisabled(this.startValue)){var e=this.currentDate.getFullYear()+10;this.currentDate.setFullYear(e)}else this.currentDate=new Date(+this.endValue),(!n.isNullOrUndefined(this.startValue)&&!n.isNullOrUndefined(this.endValue)&&+this.startValue>+this.endValue||!n.isNullOrUndefined(this.endValue)&&+this.endValue>+this.max||!n.isNullOrUndefined(this.startValue)&&+this.startValue<+this.min)&&(this.currentDate=new Date((new Date).setHours(0,0,0,0)),this.currentDate.setFullYear(this.currentDate.getFullYear()+10))},t.prototype.selectStartMonth=function(){n.isNullOrUndefined(this.startValue)?(this.currentDate=new Date((new Date).setHours(0,0,0,0)),this.startMonthCurrentDate()):!n.isNullOrUndefined(this.max)&&this.isSameMonth(this.startValue,this.max)?(this.currentDate=new Date(+this.max),this.currentDate.setDate(1),this.currentDate.setMonth(this.currentDate.getMonth()-1)):this.startValue>=this.min&&this.startValue<=this.max&&!this.isDateDisabled(this.startValue)?this.currentDate=new Date(+this.startValue):this.currentDate=new Date((new Date).setHours(0,0,0,0)),(!n.isNullOrUndefined(this.endValue)&&+this.endValue>+this.max||!n.isNullOrUndefined(this.startValue)&&+this.startValue<+this.min||!n.isNullOrUndefined(this.startValue)&&!n.isNullOrUndefined(this.endValue)&&+this.startValue>+this.endValue)&&(this.currentDate=new Date((new Date).setHours(0,0,0,0))),this.startMonthCurrentDate()},t.prototype.createCalendar=function(){var t=this.createElement("div",{className:"e-calendar-container"});if(this.isMobile){n.isNullOrUndefined(this.startValue)||(this.currentDate=new Date(+this.startValue)),e.prototype.validateDate.call(this),e.prototype.minMaxUpdate.call(this),e.prototype.render.call(this);var i=this.calendarElement.querySelector("."+el+" .e-prev"),r=this.calendarElement.querySelector("."+el+" .e-next");n.remove(this.calendarElement.querySelector("."+el+" ."+ec)),this.calendarElement.querySelector("."+el+" ."+eh).appendChild(r),this.calendarElement.querySelector("."+el+" ."+eh).appendChild(i),n.prepend([i],this.calendarElement.querySelector("."+el+" ."+eh)),this.deviceCalendar=this.calendarElement,t.appendChild(this.calendarElement),this.headerTitleElement=this.calendarElement.querySelector(".e-calendar .e-header ."+ep)}else{this.selectStartMonth(),this.renderCalendar(),this.leftCalCurrentDate=new Date(+this.currentDate),this.calendarElement.classList.add(X),this.leftCalPrevIcon=this.calendarElement.querySelector("."+X+" .e-prev"),this.leftCalNextIcon=this.calendarElement.querySelector("."+X+" .e-next"),this.leftTitle=this.calendarElement.querySelector("."+X+" ."+ep),n.remove(this.calendarElement.querySelector("."+X+" ."+ec)),this.calendarElement.querySelector("."+X+" ."+eh).appendChild(this.leftCalNextIcon),this.calendarElement.querySelector("."+X+" ."+eh).appendChild(this.leftCalPrevIcon),n.prepend([this.leftCalPrevIcon],this.calendarElement.querySelector("."+X+" ."+eh)),this.leftCalendar=this.calendarElement;var a=this.createElement("div",{className:"e-left-container"}),s=this.createElement("div",{className:"e-right-container"});a.appendChild(this.leftCalendar),t.appendChild(a),this.isMobile||n.EventHandler.add(this.leftTitle,"click",this.leftNavTitle,this),"Month"===this.start&&this.selectNextMonth(),"Year"===this.start&&this.selectNextYear(),"Decade"===this.start&&this.selectNextDecade(),this.renderCalendar(),this.rightCalCurrentDate=new Date(+this.currentDate),n.addClass([this.calendarElement],Z),this.rightCalendar=this.calendarElement,n.removeClass([this.leftCalendar&&this.leftCalendar.querySelector(".e-content tbody")],"e-zoomin"),n.removeClass([this.rightCalendar&&this.rightCalendar.querySelector(".e-content tbody")],"e-zoomin"),this.rightCalPrevIcon=this.calendarElement.querySelector("."+Z+" .e-prev"),this.rightCalNextIcon=this.calendarElement.querySelector("."+Z+" .e-next"),this.rightTitle=this.calendarElement.querySelector("."+Z+" ."+ep),n.remove(this.calendarElement.querySelector("."+Z+" ."+ec)),this.calendarElement.querySelector("table").setAttribute("tabindex","0"),this.calendarElement.querySelector("."+Z+" ."+eh).appendChild(this.rightCalNextIcon),this.calendarElement.querySelector("."+Z+" ."+eh).appendChild(this.rightCalPrevIcon),n.prepend([this.rightCalPrevIcon],this.calendarElement.querySelector("."+Z+" ."+eh)),s.appendChild(this.rightCalendar),t.appendChild(s),this.isMobile||n.EventHandler.add(this.rightTitle,"click",this.rightNavTitle,this)}return t},t.prototype.leftNavTitle=function(e){this.isPopupOpen()&&(this.calendarElement=this.leftCalendar,this.calendarNavigation(e,this.calendarElement))},t.prototype.calendarNavigation=function(t,i){this.table=i.querySelector("table"),this.headerTitleElement=i.querySelector(".e-title"),this.tableBodyElement=i.querySelector("tbody"),this.tableHeadElement=i.querySelector("thead"),this.contentElement=i.querySelector(".e-content"),this.updateCalendarElement(i),e.prototype.navigateTitle.call(this,t),this.updateNavIcons()},t.prototype.rightNavTitle=function(e){this.isPopupOpen()&&(this.calendarElement=this.rightCalendar,this.calendarNavigation(e,this.calendarElement))},t.prototype.clickEventEmitter=function(e){this.isMobile||(n.closest(e.target,".e-calendar.e-left-calendar")?(this.calendarElement=this.leftCalendar,this.updateCalendarElement(this.leftCalendar)):(this.calendarElement=this.rightCalendar,this.updateCalendarElement(this.rightCalendar)))},t.prototype.currentView=function(){return e.prototype.currentView.call(this)},t.prototype.getCalendarView=function(e){return"Year"===e?"Year":"Decade"===e?"Decade":"Month"},t.prototype.navigatedEvent=function(t){if(this.trigger("navigated",this.navigatedArgs),!n.isNullOrUndefined(this.popupObj)){var i=this.getCalendarView(this.currentView());if(this.isMobile)i===this.depth?(this.bindCalendarCellEvents(),this.deviceNavigation(),this.removeFocusedDate(),this.checkMinMaxDays()):this.selectableDates();else if(this.isMobile||i!==this.depth)this.updateNavIcons(),this.calendarIconEvent();else{if((this.calendarElement.classList.contains("e-left-calendar")?this.leftCalendar:this.rightCalendar)!==this.leftCalendar||(!t||t.currentTarget.children[0].classList.contains("e-icons"))&&n.isNullOrUndefined(this.controlDown))(!t||t.currentTarget.children[0].classList.contains("e-icons"))&&n.isNullOrUndefined(this.controlDown)||(this.rightCalCurrentDate=new Date(+this.currentDate),this.effect="",this.currentDate=this.rightCalCurrentDate,this.updateCalendarElement(this.rightCalendar),this.updateControl(this.rightCalendar),this.updateCalendarElement(this.leftCalendar),this.startValue&&n.isNullOrUndefined(this.endValue)?"Month"===i&&this.startValue.getMonth()<this.rightCalCurrentDate.getMonth()&&this.startValue.getFullYear()<=this.rightCalCurrentDate.getFullYear()?e.prototype.navigateTo.call(this,i,new Date(+this.startValue)):"Year"===i&&this.startValue.getFullYear()<this.rightCalCurrentDate.getFullYear()?e.prototype.navigateTo.call(this,i,new Date(+this.startValue)):e.prototype.navigateTo.call(this,i,this.leftCalCurrentDate):e.prototype.navigateTo.call(this,i,this.leftCalCurrentDate),this.updateControl(this.leftCalendar),this.updateNavIcons(),this.calendarIconEvent(),this.calendarIconRipple(),this.controlDown=null);else{this.leftCalCurrentDate=new Date(+this.currentDate),this.effect="",this.currentDate=this.leftCalCurrentDate,this.updateCalendarElement(this.leftCalendar),this.updateControl(this.leftCalendar),this.updateCalendarElement(this.rightCalendar),e.prototype.navigateTo.call(this,i,this.rightCalCurrentDate);var r=this.rightCalCurrentDate?this.rightCalCurrentDate:this.currentDate;this.updateControl(this.rightCalendar,r),this.updateNavIcons(),this.calendarIconEvent(),this.calendarIconRipple(),this.controlDown=null}this.checkMinMaxDays()}}},t.prototype.createControl=function(){var e=this.createElement("div",{className:ed}),t=this.createElement("div",{className:"e-range-header"});if(this.isMobile&&this.fullScreenMode){var i=this.createElement("div",{className:"e-model-header-wrapper"}),r=this.createElement("span",{className:"e-popup-close"});n.EventHandler.add(r,"mousedown touchstart",this.modelRangeCloseHandler,this);var a=this.createElement("span",{className:"e-apply"});n.EventHandler.add(a,"mousedown touchstart",this.applyFunction,this),i.appendChild(r),i.appendChild(a),t.appendChild(i)}var o=this.createRangeHeader();t.appendChild(o);var l=this.createElement("div",{className:ev});n.attributes(l,{"aria-label":"Selected Days"}),l.textContent=this.l10n.getConstant("selectedDays"),t.appendChild(l);var h=this.createElement("div",{className:"e-separator"}),p=this.createCalendar();e.appendChild(t),e.appendChild(h),e.appendChild(p);var c=this.createElement("div",{className:"e-footer"}),d=this.createElement("button",{className:"e-cancel e-flat e-css"}),u=this.createElement("button");n.addClass([u],["e-apply","e-flat","e-primary","e-css"]),c.appendChild(u),c.appendChild(d);var m=!n.isNullOrUndefined(this.startValue)&&!n.isNullOrUndefined(this.endValue);this.cancelButton=new s.Button({content:this.l10n.getConstant("cancelText")},d),this.applyButton=new s.Button({content:this.l10n.getConstant("applyText"),disabled:!m},u),n.EventHandler.add(u,"click",this.applyFunction,this),n.EventHandler.add(d,"click",this.cancelFunction,this),this.popupWrapper.appendChild(e),this.isMobile||n.isUndefined(this.presets[0].start&&this.presets[0].end&&this.presets[0].label)||(this.createPresets(),this.listRippleEffect(),n.addClass([e],"e-range-border"),n.addClass([this.popupWrapper],"e-preset-wrapper"),this.popupWrapper.querySelector("."+eu).style.height=this.popupWrapper.querySelector("."+ed).getBoundingClientRect().height+"px"),this.popupWrapper.appendChild(c),this.isMobile&&this.deviceHeaderUpdate(),this.renderPopup()},t.prototype.modelRangeCloseHandler=function(e){this.hide()},t.prototype.cancelFunction=function(e){document.activeElement!==this.inputElement&&(this.preventFocus=!0,this.inputElement.focus(),n.addClass([this.inputWrapper.container],[et])),e.preventDefault(),this.isKeyPopup&&(this.inputElement.focus(),this.isKeyPopup=!1),this.startValue=null,this.endValue=null,this.removeSelection(),this.hide(e)},t.prototype.deviceHeaderUpdate=function(){n.isNullOrUndefined(this.startValue)&&n.isNullOrUndefined(this.endValue)?(this.endButton.element.setAttribute("disabled",""),this.startButton.element.classList.add(J)):n.isNullOrUndefined(this.startValue)||this.startButton.element.classList.add(J)},t.prototype.keyupHandler=function(e){this.isKeyPressed=this.inputElement.value!==this.previousEleValue},t.prototype.applyFunction=function(e){var t=!1;"touchstart"!==e.type&&e.preventDefault(),this.closeEventArgs&&this.closeEventArgs.cancel&&(this.startValue=this.popupWrapper.querySelector(".e-start-date")&&this.getIdValue(null,this.popupWrapper.querySelector(".e-start-date")),this.endValue=this.popupWrapper.querySelector(".e-end-date")&&this.getIdValue(null,this.popupWrapper.querySelector(".e-end-date")),this.setValue()),document.activeElement!==this.inputElement&&(this.preventFocus=!0,this.inputElement.focus(),n.addClass([this.inputWrapper.container],[et])),"touchstart"!==e.type&&this.closeEventArgs&&!this.closeEventArgs.cancel&&e.preventDefault(),n.isNullOrUndefined(this.startValue)||n.isNullOrUndefined(this.endValue)?this.hide(e||null):(this.previousStartValue=new Date(+this.startValue),this.previousEndValue=new Date(+this.endValue),this.previousEleValue=this.inputElement.value,this.isKeyPressed||a.Input.setValue(this.rangeArgs(e).text,this.inputElement,this.floatLabelType,this.showClearButton),this.isKeyPressed=!1,+this.initStartDate==+this.startValue&&+this.initEndDate==+this.endValue||(t=!0),this.changeTrigger(e),this.hide(e||null),this.errorClass(),t=!0),n.closest(e.target,".e-input-group")||t||this.focusOut(),this.isMobile||(this.isKeyPopup=!1,this.isRangeIconClicked&&(this.inputWrapper.container.children[1].focus(),this.keyInputConfigs=n.extend(this.keyInputConfigs,this.keyConfigs),this.popupKeyboardModule=new n.KeyboardEvents(this.inputWrapper.container.children[1],{eventName:"keydown",keyConfigs:this.keyInputConfigs,keyAction:this.popupKeyActionHandle.bind(this)})))},t.prototype.onMouseClick=function(e,t){if("touchstart"!==e.type){var i=t||e.target,r=n.closest(i,"."+ew),a=r&&r.classList.contains(J);r&&r.classList.contains(ew)&&this.setListSelection(r,e),this.preventFocus=!0,this.inputElement.focus(),this.isMobile||(this.preventFocus=!0,r&&r.classList.contains(ew)&&"custom_range"===r.getAttribute("id")?this.leftCalendar.children[1].firstElementChild.focus():a||"keydown"!==e.type||this.inputElement.focus())}},t.prototype.onMouseOver=function(e){var t=n.closest(e.target,"."+ew);t&&t.classList.contains(ew)&&!t.classList.contains(eC)&&n.addClass([t],eC)},t.prototype.onMouseLeave=function(e){var t=n.closest(e.target,"."+eC);n.isNullOrUndefined(t)||n.removeClass([t],eC)},t.prototype.setListSelection=function(e,t){if(e&&(!e.classList.contains(J)||this.isMobile&&e.classList.contains(J))){if(this.isMobile&&e.classList.contains(J))return(this.activeIndex=Array.prototype.slice.call(this.liCollections).indexOf(e),"custom_range"===this.presetsItem[this.activeIndex].id)?void this.renderCustomPopup():void 0;this.removeListSelection(),this.activeIndex=Array.prototype.slice.call(this.liCollections).indexOf(e),n.addClass([e],J),e.setAttribute("aria-selected","true");var i=this.presetsItem[this.activeIndex];"custom_range"===i.id?this.renderCustomPopup():this.applyPresetRange(i,t)}},t.prototype.removeListSelection=function(){var e=this.presetElement.querySelector("."+J);n.isNullOrUndefined(e)||(n.removeClass([e],J),e.removeAttribute("aria-selected"))},t.prototype.setValue=function(){this.modelValue=[this.startValue,this.endValue]},t.prototype.applyPresetRange=function(e,t){this.hide(null),this.presetsItem[this.presetsItem.length-1].start=null,this.presetsItem[this.presetsItem.length-1].end=null,this.startValue=e.start,this.endValue=e.end,this.setValue(),this.refreshControl(),this.trigger("select",this.rangeArgs(t)),this.changeTrigger(t),this.previousEleValue=this.inputElement.value,this.isCustomRange=!1,this.leftCalendar=this.rightCalendar=null,this.isKeyPopup&&(this.isRangeIconClicked=!1,this.inputElement.focus())},t.prototype.showPopup=function(e,t){this.presetHeight(),1e3===this.zIndex?this.popupObj.show(null,this.element):this.popupObj.show(null,null),this.isMobile&&this.popupObj.refreshPosition()},t.prototype.renderCustomPopup=function(){this.isCustomWindow=!0,this.popupObj.hide(),this.popupWrapper=this.createElement("div",{id:this.element.id+"_popup",className:Q+" e-popup"}),this.renderControl(),this.openEventArgs.appendTo.appendChild(this.popupWrapper),this.showPopup(),this.isCustomRange=!0,this.isMobile||this.calendarFocus()},t.prototype.listRippleEffect=function(){for(var e=0,t=this.liCollections;e<t.length;e++){var i=t[e];n.rippleEffect(i)}},t.prototype.createPresets=function(){if(!n.isUndefined(this.presets[0].start&&this.presets[0].end&&this.presets[0].label)){this.presetElement=this.createElement("div",{className:eu,attrs:{tabindex:"0"}});var e=o.ListBase.createList(this.createElement,this.presetsItem,null,!0);n.attributes(e,{role:"listbox","aria-hidden":"false",id:this.element.id+"_options",tabindex:"0"}),this.presetElement.appendChild(e),this.popupWrapper.appendChild(this.presetElement);var t=this.presetElement.querySelector("#custom_range");if(n.isNullOrUndefined(t)||(t.textContent=""!==this.l10n.getConstant("customRange")?this.l10n.getConstant("customRange"):"Custom Range"),this.liCollections=this.presetElement.querySelectorAll("."+ew),this.wireListEvents(),this.isMobile){if(this.fullScreenMode){var i=n.createElement("div",{className:"e-range-mob-popup-wrap"}),r=this.createElement("div",{className:"e-model-header"}),a=this.createElement("span",{className:"e-model-title"});a.textContent="Select Preset";var s=this.createElement("span",{className:"e-popup-close"});n.EventHandler.add(s,"mousedown touchstart",this.modelRangeCloseHandler,this);var l=this.presetElement;r.appendChild(s),r.appendChild(a),i.appendChild(r),i.appendChild(l),this.popupWrapper.insertBefore(i,this.popupWrapper.firstElementChild),this.presetElement.style.width="100%"}else this.presetElement.style.width=this.inputWrapper.container.getBoundingClientRect().width+"px"}!n.isNullOrUndefined(this.activeIndex)&&this.activeIndex>-1&&n.addClass([this.liCollections[this.activeIndex]],J)}},t.prototype.wireListEvents=function(){n.EventHandler.add(this.presetElement,"click",this.onMouseClick,this),this.isMobile||(n.EventHandler.add(this.presetElement,"mouseover",this.onMouseOver,this),n.EventHandler.add(this.presetElement,"mouseout",this.onMouseLeave,this))},t.prototype.unWireListEvents=function(){n.isNullOrUndefined(this.presetElement)||(n.EventHandler.remove(this.presetElement,"click touchstart",this.onMouseClick),this.isMobile||(n.EventHandler.remove(this.presetElement,"mouseover",this.onMouseOver),n.EventHandler.remove(this.presetElement,"mouseout",this.onMouseLeave)))},t.prototype.renderPopup=function(){var e=this;this.popupWrapper.classList.add("e-control");var t=this.popupWrapper.getBoundingClientRect().width;n.isNullOrUndefined(this.cssClass)||""===this.cssClass.trim()||(this.popupWrapper.className+=" "+this.cssClass),this.isMobile&&this.isCustomWindow&&(this.modal=this.createElement("div"),document.body.appendChild(this.modal)),this.popupObj=new r.Popup(this.popupWrapper,{relateTo:this.isMobile&&this.isCustomWindow?document.body:n.isNullOrUndefined(this.targetElement)?this.inputWrapper.container:this.targetElement,position:this.isMobile?n.isUndefined(this.presets[0].start&&this.presets[0].end&&this.presets[0].label)||this.isCustomWindow?{X:"center",Y:"center"}:{X:"left",Y:"bottom"}:this.enableRtl?{X:"left",Y:"bottom"}:{X:"right",Y:"bottom"},offsetX:this.isMobile||this.enableRtl?0:-t,offsetY:4,collision:this.isMobile?n.isUndefined(this.presets[0].start&&this.presets[0].end&&this.presets[0].label)||this.isCustomWindow?{X:"fit",Y:"fit"}:{X:"fit"}:{X:"fit",Y:"flip"},targetType:this.isMobile&&this.isCustomWindow?"container":"relative",enableRtl:this.enableRtl,zIndex:this.zIndex,open:function(){e.isMobile&&e.fullScreenMode&&(e.iconRangeRight=e.calendarElement&&window.getComputedStyle(e.calendarElement.querySelector(".e-header.e-month .e-prev")).cssFloat,e.iconRangeRight&&(e.touchRangeModule=new n.Touch(e.calendarElement.querySelector(".e-content.e-month"),{swipe:e.dateRangeSwipeHandler.bind(e)}),n.EventHandler.add(e.calendarElement.querySelector(".e-content.e-month"),"touchstart",e.touchStartRangeHandler,e))),n.attributes(e.inputElement,{"aria-expanded":"true","aria-owns":e.inputElement.id+"_options"}),e.value?n.attributes(e.inputElement,{"aria-activedescendant":e.inputElement.id}):e.inputElement.removeAttribute("aria-activedescendant"),n.addClass([e.inputWrapper.buttons[0]],J),e.isMobile||(e.cancelButton&&(e.btnKeyboardModule=new n.KeyboardEvents(e.cancelButton.element,{eventName:"keydown",keyAction:e.popupKeyActionHandle.bind(e),keyConfigs:{tab:"tab",altRightArrow:"alt+rightarrow",altLeftArrow:"alt+leftarrow"}}),e.btnKeyboardModule=new n.KeyboardEvents(e.applyButton.element,{eventName:"keydown",keyAction:e.popupKeyActionHandle.bind(e),keyConfigs:{altRightArrow:"alt+rightarrow",altLeftArrow:"alt+leftarrow"}})),n.isNullOrUndefined(e.leftCalendar)||e.isRangeIconClicked||e.calendarFocus(),n.isNullOrUndefined(e.presetElement)||(e.keyInputConfigs=n.extend(e.keyInputConfigs,e.keyConfigs),e.presetKeyboardModule=new n.KeyboardEvents(e.presetElement,{eventName:"keydown",keyAction:e.presetKeyActionHandler.bind(e),keyConfigs:e.keyInputConfigs}),e.presetKeyboardModule=new n.KeyboardEvents(e.presetElement,{eventName:"keydown",keyAction:e.popupKeyActionHandle.bind(e),keyConfigs:{altRightArrow:"alt+rightarrow",altLeftArrow:"alt+leftarrow"}}),n.isNullOrUndefined(e.leftCalendar)?(e.preventBlur=!0,e.presetElement.focus()):e.presetElement.setAttribute("tabindex","-1")),e.popupKeyBoardHandler()),e.isMobile&&!n.Browser.isDevice&&n.EventHandler.add(document,"keydown",e.popupCloseHandler,e)},close:function(){n.attributes(e.inputElement,{"aria-expanded":"false"}),e.inputElement.removeAttribute("aria-owns"),e.inputElement.removeAttribute("aria-activedescendant"),n.removeClass([e.inputWrapper.buttons[0]],J),e.isRangeIconClicked&&e.inputWrapper.container.children[1].focus(),n.isUndefined(e.presets[0].start&&e.presets[0].end&&e.presets[0].label)||e.unWireListEvents(),n.isNullOrUndefined(e.popupObj)||(n.isNullOrUndefined(e.popupObj.element.parentElement)||n.detach(e.popupObj.element),e.popupObj.destroy(),e.popupObj=null),e.isMobile&&!n.Browser.isDevice&&n.EventHandler.remove(document,"keydown",e.popupCloseHandler)},targetExitViewport:function(){var t=e.popupObj&&e.popupObj.element;!n.Browser.isDevice&&t&&t.getBoundingClientRect().height<t.parentElement.getBoundingClientRect().height&&e.hide()}}),this.isMobile&&(this.popupObj.element.classList.add("e-device"),this.isMobile||this.popupObj.element.classList.add("e-bigger")),this.isMobile&&this.isCustomWindow&&(n.addClass([this.modal],["e-device",Q,"e-range-modal"]),document.body.className+=" "+eT,this.modal.style.display="block"),n.EventHandler.add(document,"mousedown touchstart",this.documentHandler,this)},t.prototype.dateRangeSwipeHandler=function(e){var t=0;if("left"==this.iconRangeRight)switch(e.swipeDirection){case"Left":t=1;break;case"Right":t=-1}else switch(e.swipeDirection){case"Up":t=1;break;case"Down":t=-1}this.touchRangeStart&&(1===t?this.navigateNext(e):-1===t&&this.navigatePrevious(e),this.touchRangeStart=!1)},t.prototype.touchStartRangeHandler=function(e){this.touchRangeStart=!0},t.prototype.popupCloseHandler=function(e){27===e.keyCode&&this.hide(e)},t.prototype.calendarFocus=function(){var e=this.popupObj&&this.popupObj.element.querySelector("."+$);if(e){var t=n.closest(e,"."+Z);t=n.isNullOrUndefined(t)?this.leftCalendar:t,this.isRangeIconClicked?this.inputWrapper.container.focus():(this.preventBlur=!0,t.children[1].firstElementChild.focus()),n.addClass([e],em)}else this.isRangeIconClicked?this.inputWrapper.container.focus():(this.preventBlur=!0,this.leftCalendar.children[1].firstElementChild.focus())},t.prototype.presetHeight=function(){var e=this.popupObj&&this.popupObj.element.querySelector("."+eu),t=this.popupObj&&this.popupObj.element.querySelector("."+ed);n.isNullOrUndefined(e)||n.isNullOrUndefined(t)||(e.style.height=t.getBoundingClientRect().height+"px")},t.prototype.presetKeyActionHandler=function(e){switch(e.action){case"moveDown":this.listMoveDown(e),this.setScrollPosition(),e.preventDefault();break;case"moveUp":this.listMoveUp(e),this.setScrollPosition(),e.preventDefault();break;case"enter":var t=this.getHoverLI(),i=this.getActiveLI();if(!n.isNullOrUndefined(this.leftCalendar)&&!n.isNullOrUndefined(i)&&(n.isNullOrUndefined(t)||!n.isNullOrUndefined(i)&&i===t)&&(this.activeIndex=Array.prototype.slice.call(this.liCollections).indexOf(i),"custom_range"===this.presetsItem[this.activeIndex].id))return this.calendarFocus(),i.classList.remove(eC),void e.preventDefault();n.isNullOrUndefined(t)&&n.isNullOrUndefined(i)||this.onMouseClick(e,t||i),e.preventDefault();break;case"tab":if(this.leftCalendar){var r=this.getHoverLI();n.isNullOrUndefined(r)||r.classList.remove(eC)}else this.hide(e),e.preventDefault()}},t.prototype.listMoveDown=function(e){var t=this.getHoverLI(),i=this.getActiveLI();if(n.isNullOrUndefined(t))n.isNullOrUndefined(i)?n.addClass([this.liCollections[0]],eC):(r=i.nextElementSibling,!n.isNullOrUndefined(r)&&r.classList.contains(ew)&&n.addClass([r],eC));else{var r=t.nextElementSibling;!n.isNullOrUndefined(r)&&r.classList.contains(ew)&&(n.removeClass([t],eC),n.addClass([r],eC))}},t.prototype.listMoveUp=function(e){var t=this.getHoverLI(),i=this.getActiveLI();if(n.isNullOrUndefined(t))!n.isNullOrUndefined(i)&&(r=i.previousElementSibling,!n.isNullOrUndefined(r)&&r.classList.contains(ew)&&n.addClass([r],eC));else{var r=t.previousElementSibling;!n.isNullOrUndefined(r)&&r.classList.contains(ew)&&(n.removeClass([t],eC),n.addClass([r],eC))}},t.prototype.getHoverLI=function(){return this.presetElement.querySelector("."+eC)},t.prototype.getActiveLI=function(){return this.presetElement.querySelector("."+J)},t.prototype.popupKeyBoardHandler=function(){this.popupKeyboardModule=new n.KeyboardEvents(this.popupWrapper,{eventName:"keydown",keyAction:this.popupKeyActionHandle.bind(this),keyConfigs:{escape:"escape"}}),this.keyInputConfigs=n.extend(this.keyInputConfigs,this.keyConfigs),this.popupKeyboardModule=new n.KeyboardEvents(this.inputWrapper.container.children[1],{eventName:"keydown",keyAction:this.popupKeyActionHandle.bind(this),keyConfigs:this.keyInputConfigs})},t.prototype.setScrollPosition=function(){var e=this.presetElement.getBoundingClientRect().height,t=this.presetElement.querySelector("."+eC),i=this.presetElement.querySelector("."+J),r=n.isNullOrUndefined(t)?i:t;if(!n.isNullOrUndefined(r)){var a=r.nextElementSibling,s=a?a.offsetTop:r.offsetTop,o=r.getBoundingClientRect().height;s+r.offsetTop>e?this.presetElement.scrollTop=a?s-(e/2+o/2):s:this.presetElement.scrollTop=0}},t.prototype.popupKeyActionHandle=function(e){var t=n.closest(e.target,"."+eu);switch(e.action){case"escape":this.isPopupOpen()?(this.isKeyPopup&&(this.inputElement.focus(),this.isKeyPopup=!1),this.hide(e)):this.inputWrapper.container.children[1].blur();break;case"enter":this.isPopupOpen()?this.inputWrapper.container.children[1].focus():this.show(null,e);break;case"tab":this.hide(e);break;case"altRightArrow":n.isNullOrUndefined(t)?document.activeElement===this.cancelButton.element&&!0!==this.applyButton.element.disabled?this.applyButton.element.focus():this.leftCalendar.children[1].firstElementChild.focus():this.cancelButton.element.focus(),e.preventDefault();break;case"altLeftArrow":n.isNullOrUndefined(t)?document.activeElement===this.applyButton.element&&!0!==this.applyButton.element.disabled?this.cancelButton.element.focus():n.isNullOrUndefined(this.presetElement)||document.activeElement!==this.cancelButton.element?this.rightCalendar.children[1].firstElementChild.focus():this.presetElement.focus():this.rightCalendar.children[1].firstElementChild.focus(),e.preventDefault()}},t.prototype.documentHandler=function(e){if(!n.isNullOrUndefined(this.popupObj)){var t=e.target;this.inputWrapper.container.contains(t)&&(n.isNullOrUndefined(this.popupObj)||n.closest(t,'[id="'+this.popupWrapper.id+'"]')||"mousedown"===e.type)||"touchstart"!==e.type&&("mousedown"===e.type||this.closeEventArgs&&!this.closeEventArgs.cancel)&&e.preventDefault(),!n.isNullOrUndefined(this.targetElement)&&(n.isNullOrUndefined(this.targetElement)||t===this.targetElement)||n.closest(t,'[id="'+this.popupWrapper.id+'"]')||n.closest(t,".e-input-group")===this.inputWrapper.container||n.closest(t,".e-daterangepicker.e-popup")&&!t.classList.contains("e-day")||(this.preventBlur=!1,this.isPopupOpen()&&document.body.contains(this.popupObj.element)&&(this.applyFunction(e),this.isMobile||(this.isRangeIconClicked=!1)))}},t.prototype.createInput=function(){this.fullScreenMode&&this.isMobile&&(this.cssClass+=" e-popup-expand");var e=this.cssClass;n.isNullOrUndefined(this.cssClass)||""===this.cssClass||(e=this.cssClass.replace(/\s+/g," ").trim()),this.inputWrapper=a.Input.createInput({floatLabelType:this.floatLabelType,element:this.inputElement,properties:{readonly:this.readonly,placeholder:this.placeholder,cssClass:e,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton},buttons:["e-input-group-icon e-range-icon e-icons"]},this.createElement),n.attributes(this.inputElement,{tabindex:"0","aria-expanded":"false",role:"combobox",autocomplete:"off","aria-disabled":this.enabled?"false":"true",autocorrect:"off",autocapitalize:"off",spellcheck:"false"}),a.Input.addAttributes({"aria-label":"select"},this.inputWrapper.buttons[0]),n.isNullOrUndefined(this.placeholder)||""===this.placeholder.trim()||a.Input.addAttributes({"aria-placeholder":this.placeholder},this.inputElement),this.setEleWidth(this.width),n.addClass([this.inputWrapper.container],"e-date-range-wrapper"),n.isNullOrUndefined(this.inputElement.getAttribute("name"))&&n.attributes(this.inputElement,{name:this.element.id}),"hidden"===this.inputElement.type&&(this.inputWrapper.container.style.display="none"),this.refreshControl(),this.previousEleValue=this.inputElement.value,this.inputElement.setAttribute("value",this.inputElement.value),this.startCopy=this.startDate,this.endCopy=this.endDate},t.prototype.setEleWidth=function(e){this.inputWrapper.container.style.width="string"==typeof e?this.width:"number"==typeof e?n.formatUnit(this.width):"100%"},t.prototype.adjustLongHeaderWidth=function(){"Wide"===this.dayHeaderFormat&&n.addClass([this.popupWrapper],"e-daterange-day-header-lg")},t.prototype.refreshControl=function(){this.validateMinMax(),this.strictMode&&this.validateRangeStrict();var e=this.disabledDates();this.strictMode&&e&&(this.startValue=this.previousStartValue,this.setProperties({startDate:this.startValue},!0),this.endValue=this.previousEndValue,this.setProperties({endDate:this.endValue},!0),this.setValue()),this.updateInput(),this.strictMode||this.validateRange(),!this.strictMode&&e&&this.clearRange(),n.isNullOrUndefined(this.endValue)||n.isNullOrUndefined(this.startValue)||e||n.isNullOrUndefined(this.renderDayCellArgs)||!this.renderDayCellArgs.isDisabled||this.disabledDateRender(),this.errorClass(),this.previousStartValue=n.isNullOrUndefined(this.startValue)||isNaN(+this.startValue)?null:new Date(+this.startValue),this.previousEndValue=n.isNullOrUndefined(this.endValue)||isNaN(+this.endValue)?null:new Date(+this.endValue)},t.prototype.updateInput=function(){if(!n.isNullOrUndefined(this.endValue)&&!n.isNullOrUndefined(this.startValue)){var e={format:this.formatString,type:"date",skeleton:"yMd"},t=this.globalize.formatDate(this.startValue,e),i=this.globalize.formatDate(this.endValue,e);a.Input.setValue(t+" "+this.separator+" "+i,this.inputElement,this.floatLabelType,this.showClearButton),this.previousStartValue=new Date(+this.startValue),this.previousEndValue=new Date(+this.endValue)}!this.strictMode&&n.isNullOrUndefined(this.value)&&this.invalidValueString&&a.Input.setValue(this.invalidValueString,this.inputElement,this.floatLabelType,this.showClearButton)},t.prototype.checkInvalidRange=function(e){if(!n.isNullOrUndefined(e)){var t=!1,i=void 0,r=void 0,a=null,s=null,o=null,l=!1,h=!1,p=!1;if("string"==typeof e){var c=e.split(" "+this.separator+" ");2===c.length?(a=c[0],s=c[1]):(t=!0,o=e)}else e.length>0?(i=e[0],r=e[1]):(i=e.start,r=e.end),i instanceof Date||"object"==typeof i?i instanceof Date?l=!0:n.isNullOrUndefined(i)||(p=!0):a=this.getstringvalue(i),r instanceof Date||"object"==typeof r?r instanceof Date?h=!0:n.isNullOrUndefined(r)||(p=!0):s=this.getstringvalue(r);(n.isNullOrUndefined(a)&&!l&&!n.isNullOrUndefined(s)||!n.isNullOrUndefined(a)&&!h&&n.isNullOrUndefined(s))&&(t=!0),p&&(a=s=o=null,t=!0),a&&(t=t||this.checkInvalidValue(a)),s&&(t=t||this.checkInvalidValue(s)),t&&(l&&!p&&(a=i.toLocaleDateString()),h&&!p&&(s=r.toLocaleDateString()),n.isNullOrUndefined(a)||n.isNullOrUndefined(s)?n.isNullOrUndefined(a)?n.isNullOrUndefined(s)||(o=s):o=a:o=a+" "+this.separator+" "+s,this.invalidValueString=o,this.setProperties({value:null},!0),this.setProperties({startValue:null},!0),this.setProperties({endValue:null},!0),this.startDate=null,this.endDate=null)}},t.prototype.getstringvalue=function(e){var t=null;return n.isNullOrUndefined(e)||"number"!=typeof e?n.isNullOrUndefined(e)||"string"!=typeof e||(t=""+e):t=e.toString(),t},t.prototype.checkInvalidValue=function(e){var t=!1,i=null;if(i={format:this.formatString,type:"date",skeleton:"yMd"},"string"!=typeof e)t=!0;else{var r=new n.Internationalization(this.locale);if(!this.checkDateValue(r.parseDate(e,i))){var a=null;a=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,(!/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/.test(e)&&!a.test(e)||/^[a-zA-Z0-9- ]*$/.test(e)||isNaN(+new Date(this.checkValue(e))))&&(t=!0)}}return t},t.prototype.isDateDisabled=function(e){if(n.isNullOrUndefined(e))return!1;var t=new Date(+e);if(+t<+this.min||+t>+this.max)return!0;this.virtualRenderCellArgs={date:t,isDisabled:!1};var i=this.virtualRenderCellArgs;return this.virtualRenderCellEvent(i),!!i.isDisabled},t.prototype.disabledDateRender=function(){this.disabledDays=[],this.disabledDayCnt=null;for(var e=new Date(+this.startValue),t=0;+e<=+this.endValue&&+this.endValue<=+this.max;){this.virtualRenderCellArgs={date:e,isDisabled:!1};var i=this.virtualRenderCellArgs;this.virtualRenderCellEvent(i),i.isDisabled&&(this.disabledDays.push(new Date(+i.date)),+e>+this.startValue&&+e<+this.endValue&&t++),this.addDay(e,1,null,this.max,this.min)}this.disabledDayCnt=t},t.prototype.virtualRenderCellEvent=function(e){n.extend(this.virtualRenderCellArgs,{name:"renderDayCell"}),this.trigger("renderDayCell",e)},t.prototype.disabledDates=function(){var e=!1,t=!1;return n.isNullOrUndefined(this.endValue)||n.isNullOrUndefined(this.startValue)||(e=this.isDateDisabled(this.startValue),t=this.isDateDisabled(this.endValue),this.isPopupOpen()||(this.currentDate=null),this.setValue()),e||t},t.prototype.setModelValue=function(){this.value||null!==this.startDate||null!==this.endDate?null===this.value||null===this.value.start?null===this.value?this.setProperties({value:[this.startDate,this.endDate]},!0):null===this.value.start&&this.setProperties({value:{start:this.startDate,end:this.endDate}},!0):this.value&&this.value.length>0||this.valueType&&this.valueType.length>0?(+this.startDate==+this.value[0]&&+this.endDate==+this.value[1]||this.setProperties({value:[this.startDate,this.endDate]},!0),this.value&&null==this.value[0]&&null==this.value[1]&&this.setProperties({value:null},!0)):this.value&&this.value.start&&this.setProperties({value:{start:this.startDate,end:this.endDate}},!0):this.setProperties({value:null},!0),this.createHiddenInput()},t.prototype.dispatchEvent=function(e,t){var i=document.createEvent("HTMLEvents");i.initEvent(t,!1,!0),e.dispatchEvent(i),this.firstHiddenChild.dispatchEvent(i)},t.prototype.changeTrigger=function(e){+this.initStartDate==+this.startValue&&+this.initEndDate==+this.endValue||(this.setProperties({endDate:this.checkDateValue(this.endValue)},!0),this.setProperties({startDate:this.checkDateValue(this.startValue)},!0),this.setModelValue(),this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",this.rangeArgs(e))),this.previousEleValue=this.inputElement.value,this.initStartDate=this.checkDateValue(this.startValue),this.initEndDate=this.checkDateValue(this.endValue)},t.prototype.navigateTo=function(t,i){if(this.isPopupOpen()){if("month"===t.toLowerCase())t="Month";else if("year"===t.toLowerCase())t="Year";else{if("decade"!==t.toLowerCase())return;t="Decade"}this.getViewNumber(t)<this.getViewNumber(this.depth)&&(t=this.depth),this.isMobile?e.prototype.navigateTo.call(this,t,i):(i<this.min?i=new Date(+this.min):i>=this.max&&(i=new Date(+this.max)),"Month"===t&&this.isSameMonth(i,this.max)?i=new Date(this.max.getFullYear(),this.max.getMonth()-1,this.min.getDate()):"Year"===t&&this.isSameYear(i,this.max)?i=new Date(this.max.getFullYear()-1,this.max.getMonth(),this.max.getDate()):"Decade"===t&&this.isSameDecade(i,this.max)&&(i=new Date(this.max.getFullYear()-10,this.max.getMonth(),this.max.getDate())),this.leftCalCurrentDate=i,this.navigate(this.leftCalendar,this.leftCalCurrentDate,t),i=new Date("Month"===t?this.currentDate.setMonth(this.currentDate.getMonth()+1):"Year"===t?this.currentDate.setFullYear(this.currentDate.getFullYear()+1):this.currentDate.setFullYear(this.currentDate.getFullYear()+10)),this.rightCalCurrentDate=i,this.navigate(this.rightCalendar,this.rightCalCurrentDate,t),this.leftKeyboardModule=this.rightKeyboardModule=null,this.updateNavIcons()),this.currentView()===this.depth&&this.bindCalendarCellEvents(),this.removeFocusedDate(),this.updateRange(this.isMobile?[this.calendarElement]:[this.leftCalendar,this.rightCalendar])}},t.prototype.navigate=function(t,i,n){this.calendarElement=t,this.table=t.querySelector("table"),this.tableBodyElement=t.querySelector("tbody"),this.headerTitleElement=t.querySelector(".e-title"),this.tableHeadElement=t.querySelector("thead"),this.contentElement=t.querySelector(".e-content"),this.previousIcon=t.querySelector(".e-prev"),this.nextIcon=t.querySelector(".e-next"),this.effect="e-zoomin",e.prototype.navigateTo.call(this,n,i)},t.prototype.focusIn=function(){document.activeElement!==this.inputElement&&this.enabled&&(n.addClass([this.inputWrapper.container],[et]),this.inputElement.focus())},t.prototype.focusOut=function(){var e=this.preventBlur;document.activeElement===this.inputElement&&(n.removeClass([this.inputWrapper.container],[et]),this.preventBlur=!1,this.inputElement.blur(),this.preventBlur=e)},t.prototype.destroy=function(){this.unBindEvents(),this.hide(null);var t={tabindex:"0","aria-expanded":"false",role:"combobox",autocomplete:"off","aria-disabled":this.enabled?"false":"true",autocorrect:"off",autocapitalize:"off","aria-invalid":"false",spellcheck:"false"};this.inputElement&&(n.removeClass([this.inputElement],[Q]),n.EventHandler.remove(this.inputElement,"blur",this.inputBlurHandler),a.Input.removeAttributes(t,this.inputElement),n.isNullOrUndefined(this.cloneElement.getAttribute("tabindex"))?this.inputElement.removeAttribute("tabindex"):this.inputElement.setAttribute("tabindex",this.tabIndex),this.ensureInputAttribute(),this.inputElement.classList.remove("e-input"),n.isNullOrUndefined(this.inputWrapper)||(n.EventHandler.remove(this.inputWrapper.buttons[0],"mousedown",this.rangeIconHandler),null===this.angularTag&&this.inputWrapper.container.parentElement.appendChild(this.inputElement),n.detach(this.inputWrapper.container))),n.isNullOrUndefined(this.inputKeyboardModule)||this.isMobile||this.inputKeyboardModule.destroy(),this.popupObj&&(this.isMobile||this.clearCalendarEvents()),e.prototype.destroy.call(this),this.inputWrapper=this.popupWrapper=this.popupObj=this.cloneElement=this.presetElement=null,this.formElement&&n.EventHandler.remove(this.formElement,"reset",this.formResetHandler),n.isNullOrUndefined(this.firstHiddenChild)||n.isNullOrUndefined(this.secondHiddenChild)||(n.detach(this.firstHiddenChild),n.detach(this.secondHiddenChild),this.firstHiddenChild=this.secondHiddenChild=null,this.inputElement.setAttribute("name",this.element.getAttribute("data-name")),this.inputElement.removeAttribute("data-name")),this.closeEventArgs=null,this.leftCalendar=null,this.rightTitle=null,this.leftTitle=null,this.openEventArgs=null,this.leftCalNextIcon=null,this.rightCalendar=null,this.closeEventArgs=null,this.rightCalPrevIcon=null,this.leftCalPrevIcon=null,this.popupKeyboardModule=null,this.cancelButton=null,this.applyButton=null,this.calendarElement=null,this.leftKeyboardModule=null,this.rightCalNextIcon=null,this.leftCalNextIcon=null,this.btnKeyboardModule=null,this.rightKeyboardModule=null,this.leftKeyboardModule=null,this.presetKeyboardModule=null,this.liCollections=null,this.popupObj=null,this.popupWrapper=null},t.prototype.ensureInputAttribute=function(){for(var e=[],t=0;t<this.inputElement.attributes.length;t++)e[t]=this.inputElement.attributes[t].name;for(t=0;t<e.length;t++)n.isNullOrUndefined(this.cloneElement.getAttribute(e[t]))?("value"===e[t].toLowerCase()&&(this.inputElement.value=""),this.inputElement.removeAttribute(e[t])):("value"===e[t].toLowerCase()&&(this.inputElement.value=this.cloneElement.getAttribute(e[t])),this.inputElement.setAttribute(e[t],this.cloneElement.getAttribute(e[t])))},t.prototype.getModuleName=function(){return"daterangepicker"},t.prototype.getPersistData=function(){return this.addOnPersist(["startDate","endDate","value"])},t.prototype.getSelectedRange=function(){var e;return n.isNullOrUndefined(this.startValue)||n.isNullOrUndefined(this.endValue)?e=0:(e=Math.round(Math.abs((this.removeTimeValueFromDate(this.startValue).getTime()-this.removeTimeValueFromDate(this.endValue).getTime())/864e5))+1,!n.isNullOrUndefined(this.renderDayCellArgs)&&this.renderDayCellArgs.isDisabled&&this.disabledDateRender(),n.isNullOrUndefined(this.disabledDayCnt)||(e-=this.disabledDayCnt,this.disabledDayCnt=null)),{startDate:this.startValue,endDate:this.endValue,daySpan:e}},t.prototype.show=function(t,i){var r=this;if(this.isMobile&&this.popupObj&&this.popupObj.refreshPosition(),!(this.enabled&&this.readonly||!this.enabled||this.popupObj||this.isPopupOpen())){t&&(this.targetElement=t),this.createPopup(),(this.isMobile||n.Browser.isDevice)&&(this.mobileRangePopupWrap=this.createElement("div",{className:"e-daterangepick-mob-popup-wrap"}),document.body.appendChild(this.mobileRangePopupWrap)),this.openEventArgs={popup:this.popupObj||null,cancel:!1,date:this.inputElement.value,model:this,event:i||null,appendTo:this.isMobile||n.Browser.isDevice?this.mobileRangePopupWrap:document.body};var a=this.openEventArgs;this.trigger("open",a,function(a){if(r.openEventArgs=a,!r.openEventArgs.cancel){r.openEventArgs.appendTo.appendChild(r.popupWrapper),r.showPopup(t,i);var s=!r.isCustomRange||r.isMobile&&r.isCustomRange;!n.isUndefined(r.presets[0].start&&r.presets[0].end&&r.presets[0].label)&&s&&r.setScrollPosition(),r.checkMinMaxDays(),r.isMobile&&!n.isNullOrUndefined(r.startDate)&&n.isNullOrUndefined(r.endDate)&&(r.endButton.element.classList.add(J),r.startButton.element.classList.remove(J),r.endButton.element.removeAttribute("disabled"),r.selectableDates()),e.prototype.setOverlayIndex.call(r,r.mobileRangePopupWrap,r.popupObj.element,r.modal,r.isMobile||n.Browser.isDevice)}})}},t.prototype.hide=function(e){var t=this;if(this.popupObj){if(n.isNullOrUndefined(this.previousEndValue)&&n.isNullOrUndefined(this.previousStartValue)?this.clearRange():(n.isNullOrUndefined(this.previousStartValue)?(this.startValue=null,this.setValue()):(this.startValue=new Date(this.checkValue(this.previousStartValue)),this.setValue(),this.currentDate=new Date(this.checkValue(this.startValue))),n.isNullOrUndefined(this.previousEndValue)?this.endValue=null:this.endValue=new Date(this.checkValue(this.previousEndValue)),this.setValue()),this.isPopupOpen()){this.closeEventArgs={cancel:!1,popup:this.popupObj,date:this.inputElement.value,model:this,event:e||null};var i=this.closeEventArgs;this.trigger("close",i,function(e){t.closeEventArgs=e,t.closeEventArgs.cancel?n.removeClass([t.inputWrapper.buttons[0]],J):(t.isMobile&&(n.isNullOrUndefined(t.startButton)||n.isNullOrUndefined(t.endButton)||(n.EventHandler.remove(t.startButton.element,"click touchstart",t.deviceHeaderClick),n.EventHandler.remove(t.endButton.element,"click touchstart",t.deviceHeaderClick))),t.popupObj&&(t.popupObj.hide(),t.preventBlur&&(t.inputElement.focus(),n.addClass([t.inputWrapper.container],[et]))),t.isMobile||(n.isNullOrUndefined(t.leftKeyboardModule)||n.isNullOrUndefined(t.rightKeyboardModule)||(t.leftKeyboardModule.destroy(),t.rightKeyboardModule.destroy()),n.isNullOrUndefined(t.presetElement)||t.presetKeyboardModule.destroy(),n.isNullOrUndefined(t.cancelButton)||t.btnKeyboardModule.destroy()),t.targetElement=null,n.removeClass([document.body],eT),n.EventHandler.remove(document,"mousedown touchstart",t.documentHandler),t.isMobile&&t.modal&&(t.modal.style.display="none",t.modal.outerHTML="",t.modal=null),(t.isMobile||n.Browser.isDevice)&&(n.isNullOrUndefined(t.mobileRangePopupWrap)||(t.mobileRangePopupWrap.remove(),t.mobileRangePopupWrap=null)),t.isKeyPopup=t.dateDisabled=!1),t.updateClearIconState(),t.updateHiddenInput(),t.isMobile&&t.allowEdit&&!t.readonly&&t.inputElement.removeAttribute("readonly")})}}else this.updateClearIconState(),this.updateHiddenInput(),this.isMobile&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly")},t.prototype.setLocale=function(){this.globalize=new n.Internationalization(this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),a.Input.setPlaceholder(this.placeholder,this.inputElement),this.updateInput(),this.updateHiddenInput(),this.changeTrigger()},t.prototype.refreshChange=function(){this.checkView(),this.refreshControl(),this.changeTrigger()},t.prototype.setDate=function(){a.Input.setValue("",this.inputElement,this.floatLabelType,this.showClearButton),this.refreshChange()},t.prototype.enableInput=function(){+this.min<=+this.max&&(this.setProperties({enabled:!0},!0),a.Input.setEnabled(this.enabled,this.inputElement),this.element.hasAttribute("disabled")&&this.bindEvents())},t.prototype.clearModelvalue=function(e,t){this.setProperties({startDate:null},!0),this.setProperties({endDate:null},!0),t.value&&t.value.length>0?this.setProperties({value:null},!0):t.value&&t.value.start?this.setProperties({value:{start:null,end:null}},!0):t.value&&!t.value.start&&this.setProperties({value:{start:null,end:null}},!0),this.updateValue(),this.setDate()},t.prototype.createHiddenInput=function(){n.isNullOrUndefined(this.firstHiddenChild)&&n.isNullOrUndefined(this.secondHiddenChild)&&(this.firstHiddenChild=this.createElement("input"),this.secondHiddenChild=this.createElement("input")),n.isNullOrUndefined(this.inputElement.getAttribute("name"))||(this.inputElement.setAttribute("data-name",this.inputElement.getAttribute("name")),this.inputElement.removeAttribute("name")),n.attributes(this.firstHiddenChild,{type:"text",name:this.inputElement.getAttribute("data-name"),class:eS}),n.attributes(this.secondHiddenChild,{type:"text",name:this.inputElement.getAttribute("data-name"),class:eS});var e={type:"datetime",skeleton:"yMd"};this.firstHiddenChild.value=this.startDate&&this.globalize.formatDate(this.startDate,e),this.secondHiddenChild.value=this.endDate&&this.globalize.formatDate(this.endDate,e),this.inputElement.parentElement.appendChild(this.firstHiddenChild),this.inputElement.parentElement.appendChild(this.secondHiddenChild)},t.prototype.setMinMaxDays=function(){this.isPopupOpen()&&(this.removeClassDisabled(),this.checkMinMaxDays(),this.isMobile&&this.selectableDates(),!this.strictMode&&n.isNullOrUndefined(this.startValue)&&n.isNullOrUndefined(this.endValue)?this.removeSelection():this.updateRange(this.isMobile?[this.calendarElement]:[this.leftCalendar,this.rightCalendar]),this.updateHeader())},t.prototype.getStartEndValue=function(e,t){return"Month"===this.depth?this.checkDateValue(new Date(this.checkValue(e))):"Year"===this.depth?new Date(e.getFullYear(),e.getMonth()+(t?1:0),t?0:1):new Date(e.getFullYear(),t?11:0,t?31:1)},t.prototype.onPropertyChanged=function(e,t){for(var i={format:this.formatString,type:"date",skeleton:"yMd"},r=0,s=Object.keys(e);r<s.length;r++){var o=s[r];switch(0>["maxDays","minDays","value"].indexOf(o)&&this.hide(null),o){case"width":this.setEleWidth(this.width),a.Input.calculateWidth(this.inputElement,this.inputWrapper.container),n.isNullOrUndefined(this.inputWrapper.buttons[0])||n.isNullOrUndefined(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])||"Never"===this.floatLabelType||this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");break;case"separator":this.previousEleValue=this.inputElement.value,this.setProperties({separator:e.separator},!0),this.updateInput(),this.changeTrigger();break;case"placeholder":a.Input.setPlaceholder(e.placeholder,this.inputElement),this.setProperties({placeholder:e.placeholder},!0);break;case"readonly":a.Input.setReadonly(this.readonly,this.inputElement),this.setRangeAllowEdit();break;case"cssClass":this.updateCssClass(e.cssClass,t.cssClass);break;case"enabled":this.setProperties({enabled:e.enabled},!0),a.Input.setEnabled(this.enabled,this.inputElement),this.enabled?this.inputElement.setAttribute("tabindex",this.tabIndex):this.inputElement.tabIndex=-1;break;case"allowEdit":this.setRangeAllowEdit();break;case"enableRtl":this.setProperties({enableRtl:e.enableRtl},!0),a.Input.setEnableRtl(this.enableRtl,[this.inputWrapper.container]);break;case"zIndex":this.setProperties({zIndex:e.zIndex},!0);break;case"format":this.setProperties({format:e.format},!0),this.checkFormat(),this.updateInput(),this.changeTrigger();break;case"locale":this.globalize=new n.Internationalization(this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),a.Input.setPlaceholder(this.placeholder,this.inputElement),this.setLocale();break;case"htmlAttributes":this.updateHtmlAttributeToElement(),this.updateHtmlAttributeToWrapper(),this.setDataAttribute(!0),this.checkHtmlAttributes(!0);break;case"showClearButton":a.Input.setClearButton(this.showClearButton,this.inputElement,this.inputWrapper),this.bindClearEvent();break;case"startDate":"string"==typeof e.startDate&&(e.startDate=this.globalize.parseDate(e.startDate,i)),+this.initStartDate!=+e.startDate&&(this.startValue=this.getStartEndValue(e.startDate,!1),this.setDate(),this.setValue());break;case"endDate":"string"==typeof e.endDate&&(e.endDate=this.globalize.parseDate(e.endDate,i)),+this.initEndDate!=+e.endDate&&(this.endValue=this.getStartEndValue(e.endDate,!0),this.setDate(),this.setValue());break;case"value":if(this.invalidValueString=null,this.checkInvalidRange(e.value),"string"==typeof e.value){if(this.invalidValueString)this.clearModelvalue(e,t);else{var l=e.value.split(" "+this.separator+" ");this.value=[new Date(l[0]),new Date(l[1])],this.updateValue(),this.setDate()}}else!n.isNullOrUndefined(e.value)&&e.value.length>0||!n.isNullOrUndefined(e.value)&&e.value.start?(this.valueType=e.value,null===e.value[0]||null===e.value.start?1===e.value.length||e.value.start?this.clearModelvalue(e,t):null!==e.value[1]&&null!==e.value.start||this.clearModelvalue(e,t):+this.initStartDate==+e.value[0]&&+this.initEndDate==+e.value[1]&&+this.initStartDate==+(e.value.start||+this.initEndDate!=+e.value.start)||(1===e.value.length?this.modelValue=e.value:e.value.start&&(this.modelValue=e.value),this.updateValue(),this.setDate())):(n.isNullOrUndefined(this.value)||null==e.value.start)&&(this.valueType=e.value,this.startValue=null,this.endValue=null,this.clearModelvalue(e,t));if(this.isPopupOpen()){if(n.isNullOrUndefined(this.startValue)&&n.isNullOrUndefined(this.endValue))return this.removeSelection(),void(this.isMobile&&this.deviceHeaderUpdate());this.isMobile?(this.navigate(this.deviceCalendar,this.startValue,this.currentView()),this.deviceHeaderUpdate()):(this.navigate(this.leftCalendar,this.startValue,this.currentView()),this.updateControl(this.leftCalendar),this.navigate(this.rightCalendar,this.endValue,this.currentView()),this.updateControl(this.rightCalendar)),this.updateRange(this.isMobile?[this.calendarElement]:[this.leftCalendar,this.rightCalendar]),this.updateHeader(),this.applyButton.disabled=this.applyButton.element.disabled=!1}this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange;break;case"minDays":this.setProperties({minDays:e.minDays},!0),this.refreshChange(),this.setMinMaxDays();break;case"maxDays":this.setProperties({maxDays:e.maxDays},!0),this.refreshChange(),this.setMinMaxDays();break;case"min":this.setProperties({min:this.checkDateValue(new Date(this.checkValue(e.min)))},!0),this.previousEleValue=this.inputElement.value,this.enableInput(),this.refreshChange();break;case"max":this.setProperties({max:this.checkDateValue(new Date(this.checkValue(e.max)))},!0),this.enableInput(),this.refreshChange();break;case"strictMode":this.invalidValueString=null,this.setProperties({strictMode:e.strictMode},!0),this.refreshChange();break;case"presets":this.setProperties({presets:e.presets},!0),this.processPresets();break;case"floatLabelType":this.floatLabelType=e.floatLabelType,a.Input.removeFloating(this.inputWrapper),a.Input.addFloating(this.inputElement,this.floatLabelType,this.placeholder),n.isNullOrUndefined(this.inputWrapper.buttons[0])||n.isNullOrUndefined(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])||"Never"===this.floatLabelType||this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");break;case"start":this.setProperties({start:e.start},!0),this.refreshChange();break;case"depth":this.setProperties({depth:e.depth},!0),this.refreshChange()}}},K([n.Property(null)],t.prototype,"value",void 0),K([n.Property(!1)],t.prototype,"enablePersistence",void 0),K([n.Property(new Date(1900,0,1))],t.prototype,"min",void 0),K([n.Property(new Date(2099,11,31))],t.prototype,"max",void 0),K([n.Property(null)],t.prototype,"locale",void 0),K([n.Property(null)],t.prototype,"firstDayOfWeek",void 0),K([n.Property(!1)],t.prototype,"weekNumber",void 0),K([n.Property("Gregorian")],t.prototype,"calendarMode",void 0),K([n.Property(!1)],t.prototype,"openOnFocus",void 0),K([n.Property(!1)],t.prototype,"fullScreenMode",void 0),K([n.Event()],t.prototype,"created",void 0),K([n.Event()],t.prototype,"destroyed",void 0),K([n.Event()],t.prototype,"change",void 0),K([n.Event()],t.prototype,"cleared",void 0),K([n.Event()],t.prototype,"navigated",void 0),K([n.Event()],t.prototype,"renderDayCell",void 0),K([n.Property(null)],t.prototype,"startDate",void 0),K([n.Property(null)],t.prototype,"endDate",void 0),K([n.Collection([{}],ek)],t.prototype,"presets",void 0),K([n.Property("")],t.prototype,"width",void 0),K([n.Property(1e3)],t.prototype,"zIndex",void 0),K([n.Property(!0)],t.prototype,"showClearButton",void 0),K([n.Property(!0)],t.prototype,"showTodayButton",void 0),K([n.Property("Month")],t.prototype,"start",void 0),K([n.Property("Month")],t.prototype,"depth",void 0),K([n.Property("")],t.prototype,"cssClass",void 0),K([n.Property("-")],t.prototype,"separator",void 0),K([n.Property(null)],t.prototype,"minDays",void 0),K([n.Property(null)],t.prototype,"maxDays",void 0),K([n.Property(!1)],t.prototype,"strictMode",void 0),K([n.Property(null)],t.prototype,"keyConfigs",void 0),K([n.Property(null)],t.prototype,"format",void 0),K([n.Property(!0)],t.prototype,"enabled",void 0),K([n.Property(!1)],t.prototype,"readonly",void 0),K([n.Property(!0)],t.prototype,"allowEdit",void 0),K([n.Property("Never")],t.prototype,"floatLabelType",void 0),K([n.Property(null)],t.prototype,"placeholder",void 0),K([n.Property({})],t.prototype,"htmlAttributes",void 0),K([n.Event()],t.prototype,"open",void 0),K([n.Event()],t.prototype,"close",void 0),K([n.Event()],t.prototype,"select",void 0),K([n.Event()],t.prototype,"focus",void 0),K([n.Event()],t.prototype,"blur",void 0),t=K([n.NotifyPropertyChanges],t)}(x),c=function(e,t){return(c=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},eM=function(e,t){function i(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},eV=function(e,t,i,n){var r,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(s=(a<3?r(s):a>3?r(t,i,s):r(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},eI=(new Date).getDate(),eA=(new Date).getMonth(),eN=(new Date).getFullYear(),eP="e-timepicker",eH="e-active",eR="e-navigation",eF="e-disabled",eU="e-input-focus",eL="e-list-item",eB="e-non-edit",ej=["title","class","style"],(t.TimePickerBase||(t.TimePickerBase={})).createListItems=function(e,t,i,n,r,a){this.calendarMode;var s,l=6e4*a,h=[],p=[];s=+t.setMilliseconds(0);for(var c=+i.setMilliseconds(0);c>=s;)p.push(s),h.push(n.formatDate(new Date(s),{format:r,type:"time"})),s+=l;return{collection:p,list:o.ListBase.createList(e,h,null,!0)}},eW=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return eM(t,e),eV([n.Property("day")],t.prototype,"day",void 0),eV([n.Property("month")],t.prototype,"month",void 0),eV([n.Property("year")],t.prototype,"year",void 0),eV([n.Property("day of the week")],t.prototype,"dayOfTheWeek",void 0),eV([n.Property("hour")],t.prototype,"hour",void 0),eV([n.Property("minute")],t.prototype,"minute",void 0),eV([n.Property("second")],t.prototype,"second",void 0),t}(n.ChildProperty),eq=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.liCollections=[],n.timeCollections=[],n.disableItemCollection=[],n.invalidValueString=null,n.isAngular=!1,n.preventChange=!1,n.maskedDateValue="",n.moduleName=n.getModuleName(),n.timeOptions=t,n}return eM(t,e),t.prototype.preRender=function(){this.keyConfigure={enter:"enter",escape:"escape",end:"end",tab:"tab",home:"home",down:"downarrow",up:"uparrow",left:"leftarrow",right:"rightarrow",open:"alt+downarrow",close:"alt+uparrow"},this.cloneElement=this.element.cloneNode(!0),n.removeClass([this.cloneElement],[eP,"e-control","e-lib"]),this.inputElement=this.element,this.angularTag=null,this.formElement=n.closest(this.element,"form"),"EJS-TIMEPICKER"===this.element.tagName&&(this.angularTag=this.element.tagName,this.inputElement=this.createElement("input"),this.element.appendChild(this.inputElement)),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex"),this.openPopupEventArgs={appendTo:document.body}},t.prototype.render=function(){this.initialize(),this.createInputElement(),this.updateHtmlAttributeToWrapper(),this.setTimeAllowEdit(),this.setEnable(),this.validateInterval(),this.bindEvents(),this.validateDisable(),this.setTimeZone(),this.setValue(this.getFormattedValue(this.value)),!this.enableMask||this.value||!this.maskedDateValue||"Always"!==this.floatLabelType&&this.floatLabelType&&this.placeholder||(this.updateInputValue(this.maskedDateValue),this.checkErrorState(this.maskedDateValue)),this.anchor=this.inputElement,this.inputElement.setAttribute("value",this.inputElement.value),this.inputEleValue=this.getDateObject(this.inputElement.value),n.isNullOrUndefined(this.inputWrapper.buttons[0])||n.isNullOrUndefined(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])||"Never"===this.floatLabelType||this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon"),!n.isNullOrUndefined(n.closest(this.element,"fieldset"))&&n.closest(this.element,"fieldset").disabled&&(this.enabled=!1),this.renderComplete()},t.prototype.setTimeZone=function(){if(!n.isNullOrUndefined(this.serverTimezoneOffset)&&this.value){var e=(new Date).getTimezoneOffset()/60,t=this.serverTimezoneOffset+e;t=this.isDayLightSaving()?t--:t,this.value=new Date(this.value.getTime()+60*t*6e4)}},t.prototype.isDayLightSaving=function(){var e=new Date(this.value.getFullYear(),0,1).getTimezoneOffset(),t=new Date(this.value.getFullYear(),6,1).getTimezoneOffset();return this.value.getTimezoneOffset()<Math.max(e,t)},t.prototype.setTimeAllowEdit=function(){this.allowEdit?this.readonly||this.inputElement.removeAttribute("readonly"):n.attributes(this.inputElement,{readonly:""}),this.clearIconState()},t.prototype.clearIconState=function(){this.allowEdit||!this.inputWrapper||this.readonly?this.inputWrapper&&n.removeClass([this.inputWrapper.container],[eB]):""===this.inputElement.value?n.removeClass([this.inputWrapper.container],[eB]):n.addClass([this.inputWrapper.container],[eB])},t.prototype.validateDisable=function(){this.setMinMax(this.initMin,this.initMax),n.isNullOrUndefined(this.value)||(this.popupCreation(),this.popupObj.destroy(),this.popupWrapper=this.popupObj=null),isNaN(+this.value)||null===this.value||this.valueIsDisable(this.value)||(this.strictMode&&this.resetState(),this.initValue=null,this.initMax=this.getDateObject(this.initMax),this.initMin=this.getDateObject(this.initMin),this.timeCollections=this.liCollections=[],this.setMinMax(this.initMin,this.initMax))},t.prototype.validationAttribute=function(e,t){var i=e.getAttribute("name")?e.getAttribute("name"):e.getAttribute("id");t.setAttribute("name",i),e.removeAttribute("name");for(var r=["required","aria-required","form"],a=0;a<r.length;a++)if(!n.isNullOrUndefined(e.getAttribute(r[a]))){var s=e.getAttribute(r[a]);t.setAttribute(r[a],s),e.removeAttribute(r[a])}},t.prototype.initialize=function(){this.globalize=new n.Internationalization(this.locale),this.defaultCulture=new n.Internationalization("en"),this.checkTimeFormat(),this.checkInvalidValue(this.value),this.setProperties({value:this.checkDateValue(new Date(this.checkInValue(this.value)))},!0),this.setProperties({min:this.checkDateValue(new Date(this.checkInValue(this.min)))},!0),this.setProperties({max:this.checkDateValue(new Date(this.checkInValue(this.max)))},!0),this.setProperties({scrollTo:this.checkDateValue(new Date(this.checkInValue(this.scrollTo)))},!0),null!==this.angularTag&&this.validationAttribute(this.element,this.inputElement),this.updateHtmlAttributeToElement(),this.checkAttributes(!1);var e={placeholder:this.placeholder};this.l10n=new n.L10n("timepicker",e,this.locale),this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),this.initValue=this.checkDateValue(this.value),this.initMin=this.checkDateValue(this.min),this.initMax=this.checkDateValue(this.max),this.isNavigate=this.isPreventBlur=this.isTextSelected=!1,this.activeIndex=this.valueWithMinutes=this.prevDate=null,n.isNullOrUndefined(this.element.getAttribute("id"))?(this.element.id=n.getUniqueID("ej2_timepicker"),null!==this.angularTag&&n.attributes(this.inputElement,{id:this.element.id+"_input"})):null!==this.angularTag&&(this.inputElement.id=this.element.getAttribute("id")+"_input"),n.isNullOrUndefined(this.inputElement.getAttribute("name"))&&n.attributes(this.inputElement,{name:this.element.id}),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"})},t.prototype.checkTimeFormat=function(){if(this.format){if("string"==typeof this.format)this.formatString=this.format;else if(n.isNullOrUndefined(this.format.skeleton)||""===this.format.skeleton)this.formatString=this.globalize.getDatePattern({type:"time",skeleton:"short"});else{var e=this.format.skeleton;this.formatString=this.globalize.getDatePattern({type:"time",skeleton:e})}}else this.formatString=null},t.prototype.checkDateValue=function(e){return!n.isNullOrUndefined(e)&&e instanceof Date&&!isNaN(+e)?e:null},t.prototype.createInputElement=function(){this.fullScreenMode&&n.Browser.isDevice&&(this.cssClass+=" e-popup-expand");var e=this.cssClass,t=!this.enableMask;n.isNullOrUndefined(this.cssClass)||""===this.cssClass||(e=this.cssClass.replace(/\s+/g," ").trim()),this.inputWrapper=a.Input.createInput({element:this.inputElement,bindClearAction:t,floatLabelType:this.floatLabelType,properties:{readonly:this.readonly,placeholder:this.placeholder,cssClass:e,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton},buttons:[" e-input-group-icon e-time-icon e-icons"]},this.createElement),this.inputWrapper.container.style.width=this.setWidth(this.width),n.attributes(this.inputElement,{"aria-autocomplete":"list",tabindex:"0","aria-expanded":"false",role:"combobox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-disabled":"false","aria-invalid":"false"}),this.isNullOrEmpty(this.inputStyle)||a.Input.addAttributes({style:this.inputStyle},this.inputElement),n.addClass([this.inputWrapper.container],"e-time-wrapper")},t.prototype.getCldrDateTimeFormat=function(){var e=new n.Internationalization(this.locale).getDatePattern({skeleton:"yMd"});return this.isNullOrEmpty(this.formatString)?e+" "+this.cldrFormat("time"):this.formatString},t.prototype.checkInvalidValue=function(e){var t=!1;if("object"!=typeof e&&!n.isNullOrUndefined(e)){var i=e;"string"==typeof i&&(i=i.trim());var r=null,a=null;if("number"==typeof e?i=e.toString():"string"==typeof e&&(/^[a-zA-Z0-9- ]*$/.test(e)||(r=this.setCurrentDate(this.getDateObject(e)),n.isNullOrUndefined(r)&&(r=this.checkDateValue(this.globalize.parseDate(i,{format:this.getCldrDateTimeFormat(),type:"datetime"})),n.isNullOrUndefined(r)&&(r=this.checkDateValue(this.globalize.parseDate(i,{format:this.formatString,type:"dateTime",skeleton:"yMd"})))))),a=this.globalize.parseDate(i,{format:this.getCldrDateTimeFormat(),type:"datetime"}),r=!n.isNullOrUndefined(a)&&a instanceof Date&&!isNaN(+a)?a:null,n.isNullOrUndefined(r)&&i.replace(/\s/g,"").length){var s=null;s=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,!/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/.test(i)&&!s.test(i)||/^[a-zA-Z0-9- ]*$/.test(e)||isNaN(+new Date(""+i))?t=!0:r=new Date(""+i)}t?(this.strictMode||(this.invalidValueString=i),this.setProperties({value:null},!0),this.initValue=null):(this.setProperties({value:r},!0),this.initValue=this.value)}},t.prototype.requiredModules=function(){var e=[];return this.enableMask&&e.push({args:[this],member:"MaskedDateTime"}),e},t.prototype.cldrFormat=function(e){return"en"===this.locale||"en-US"===this.locale?n.getValue("timeFormats.short",n.getDefaultDateObject()):this.getCultureTimeObject(n.cldrData,""+this.locale)},t.prototype.destroy=function(){this.hide(),this.unBindEvents(),this.inputElement&&(a.Input.removeAttributes({"aria-autocomplete":"list",tabindex:"0","aria-expanded":"false",role:"combobox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-disabled":"true","aria-invalid":"false"},this.inputElement),null===this.angularTag&&this.inputWrapper.container.parentElement.appendChild(this.inputElement),n.isNullOrUndefined(this.cloneElement.getAttribute("tabindex"))?this.inputElement.removeAttribute("tabindex"):this.inputElement.setAttribute("tabindex",this.tabIndex),this.ensureInputAttribute(),this.enableElement([this.inputElement]),this.inputElement.classList.remove("e-input"),n.isNullOrUndefined(this.cloneElement.getAttribute("disabled"))&&a.Input.setEnabled(!0,this.inputElement,this.floatLabelType)),this.inputWrapper.container&&n.detach(this.inputWrapper.container),this.inputWrapper=this.popupWrapper=this.cloneElement=void 0,this.liCollections=this.timeCollections=this.disableItemCollection=[],n.isNullOrUndefined(this.rippleFn)||this.rippleFn(),e.prototype.destroy.call(this),this.formElement&&n.EventHandler.remove(this.formElement,"reset",this.formResetHandler),this.rippleFn=null,this.openPopupEventArgs=null,this.selectedElement=null,this.listTag=null,this.liCollections=null},t.prototype.ensureInputAttribute=function(){for(var e=[],t=0;t<this.inputElement.attributes.length;t++)e[t]=this.inputElement.attributes[t].name;for(t=0;t<e.length;t++)n.isNullOrUndefined(this.cloneElement.getAttribute(e[t]))?(this.inputElement.removeAttribute(e[t]),"value"===e[t].toLowerCase()&&(this.inputElement.value="")):(this.inputElement.setAttribute(e[t],this.cloneElement.getAttribute(e[t])),"value"===e[t].toLowerCase()&&(this.inputElement.value=this.cloneElement.getAttribute(e[t])))},t.prototype.popupCreation=function(){this.popupWrapper=this.createElement("div",{className:eP+" e-popup",attrs:{id:this.element.id+"_popup",style:"visibility:hidden"}}),n.isNullOrUndefined(this.cssClass)||(this.popupWrapper.className+=" "+this.cssClass),!n.isNullOrUndefined(this.step)&&this.step>0&&(this.generateList(),n.append([this.listWrapper],this.popupWrapper)),this.addSelection(),this.renderPopup(),n.detach(this.popupWrapper)},t.prototype.getPopupHeight=function(){var e=parseInt("240px",10),t=this.popupWrapper.getBoundingClientRect().height;return t>e?e:t},t.prototype.generateList=function(){this.createListItems(),this.wireListEvents(),this.rippleFn=n.rippleEffect(this.listWrapper,{duration:300,selector:"."+eL}),this.liCollections=this.listWrapper.querySelectorAll("."+eL)},t.prototype.renderPopup=function(){var e=this;if(this.containerStyle=this.inputWrapper.container.getBoundingClientRect(),this.popupObj=new r.Popup(this.popupWrapper,{width:this.setPopupWidth(this.width),zIndex:this.zIndex,targetType:"relative",position:n.Browser.isDevice?{X:"center",Y:"center"}:{X:"left",Y:"bottom"},collision:n.Browser.isDevice?{X:"fit",Y:"fit"}:{X:"flip",Y:"flip"},enableRtl:this.enableRtl,relateTo:n.Browser.isDevice?document.body:this.inputWrapper.container,offsetY:4,open:function(){e.popupWrapper.style.visibility="visible",n.addClass([e.inputWrapper.buttons[0]],eH)},close:function(){n.removeClass([e.inputWrapper.buttons[0]],eH),e.unWireListEvents(),e.inputElement.removeAttribute("aria-activedescendant"),n.remove(e.popupObj.element),e.popupObj.destroy(),e.popupWrapper.innerHTML="",e.listWrapper=e.popupWrapper=e.listTag=void 0},targetExitViewport:function(){n.Browser.isDevice||e.hide()}}),n.Browser.isDevice||(this.popupObj.collision={X:"none",Y:"flip"}),n.Browser.isDevice&&this.fullScreenMode?(this.popupObj.element.style.maxHeight="100%",this.popupObj.element.style.width="100%"):this.popupObj.element.style.maxHeight="240px",n.Browser.isDevice&&this.fullScreenMode){var t=this.createElement("div",{className:"e-model-header"}),i=this.createElement("span",{className:"e-model-title"});i.textContent="Select time";var a=this.createElement("span",{className:"e-popup-close"});n.EventHandler.add(a,"mousedown touchstart",this.timePopupCloseHandler,this),t.appendChild(a),t.appendChild(i),this.popupWrapper.insertBefore(t,this.popupWrapper.firstElementChild)}},t.prototype.timePopupCloseHandler=function(e){this.hide()},t.prototype.getFormattedValue=function(e){return n.isNullOrUndefined(this.checkDateValue(e))?null:this.globalize.formatDate(e,{skeleton:"medium",type:"time"})},t.prototype.getDateObject=function(e){if(!this.isNullOrEmpty(e)){var t=this.createDateObj(e),i=!this.isNullOrEmpty(this.initValue);if(this.checkDateValue(t)){var n=i?this.initValue.getDate():eI,r=i?this.initValue.getMonth():eA,a=i?this.initValue.getFullYear():eN;return new Date(a,r,n,t.getHours(),t.getMinutes(),t.getSeconds())}}return null},t.prototype.updateHtmlAttributeToWrapper=function(){if(!n.isNullOrUndefined(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];if(ej.indexOf(i)>-1){if("class"===i){var r=this.htmlAttributes[""+i].replace(/\s+/g," ").trim();""!==r&&n.addClass([this.inputWrapper.container],r.split(" "))}else if("style"===i){var a=this.inputWrapper.container.getAttribute(i);a=n.isNullOrUndefined(a)?this.htmlAttributes[""+i]:a+this.htmlAttributes[""+i],this.inputWrapper.container.setAttribute(i,a)}else this.inputWrapper.container.setAttribute(i,this.htmlAttributes[""+i])}}},t.prototype.updateHtmlAttributeToElement=function(){if(!n.isNullOrUndefined(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];0>ej.indexOf(i)&&this.inputElement.setAttribute(i,this.htmlAttributes[""+i])}},t.prototype.updateCssClass=function(e,t){n.isNullOrUndefined(t)||(t=t.replace(/\s+/g," ").trim()),n.isNullOrUndefined(e)||(e=e.replace(/\s+/g," ").trim()),a.Input.setCssClass(e,[this.inputWrapper.container],t),this.popupWrapper&&a.Input.setCssClass(e,[this.popupWrapper],t)},t.prototype.removeErrorClass=function(){n.removeClass([this.inputWrapper.container],"e-error"),n.attributes(this.inputElement,{"aria-invalid":"false"})},t.prototype.checkErrorState=function(e){var t=this.getDateObject(e);this.validateState(t)&&!this.invalidValueString||this.enableMask&&this.inputElement.value===this.maskedDateValue?this.removeErrorClass():(n.addClass([this.inputWrapper.container],"e-error"),n.attributes(this.inputElement,{"aria-invalid":"true"}))},t.prototype.validateInterval=function(){!n.isNullOrUndefined(this.step)&&this.step>0?this.enableElement([this.inputWrapper.buttons[0]]):this.disableTimeIcon()},t.prototype.disableTimeIcon=function(){this.disableElement([this.inputWrapper.buttons[0]]),this.hide()},t.prototype.disableElement=function(e){n.addClass(e,eF)},t.prototype.enableElement=function(e){n.removeClass(e,eF)},t.prototype.selectInputText=function(){this.inputElement.setSelectionRange(0,this.inputElement.value.length)},t.prototype.setCursorToEnd=function(){this.inputElement.setSelectionRange(this.inputElement.value.length,this.inputElement.value.length)},t.prototype.getMeridianText=function(){return"en"===this.locale||"en-US"===this.locale?n.getValue("dayPeriods.format.wide",n.getDefaultDateObject()):n.getValue("main."+this.locale+".dates.calendars.gregorian.dayPeriods.format.abbreviated",n.cldrData)},t.prototype.getCursorSelection=function(){var e=this.inputElement,t=0,i=0;return isNaN(e.selectionStart)||(t=e.selectionStart,i=e.selectionEnd),{start:Math.abs(t),end:Math.abs(i)}},t.prototype.getActiveElement=function(){return n.isNullOrUndefined(this.popupWrapper)?null:this.popupWrapper.querySelectorAll("."+eH)},t.prototype.isNullOrEmpty=function(e){return!!(n.isNullOrUndefined(e)||"string"==typeof e&&""===e.trim())},t.prototype.setWidth=function(e){return e="number"==typeof e?n.formatUnit(e):"string"==typeof e?e.match(/px|%|em/)?e:n.formatUnit(e):"100%"},t.prototype.setPopupWidth=function(e){return(e=this.setWidth(e)).indexOf("%")>-1&&(e=(this.containerStyle.width*parseFloat(e)/100).toString()+"px"),e},t.prototype.setScrollPosition=function(){var e=this.selectedElement;n.isNullOrUndefined(e)?this.popupWrapper&&this.checkDateValue(this.scrollTo)&&this.setScrollTo():this.findScrollTop(e)},t.prototype.findScrollTop=function(e){var t=this.getPopupHeight(),i=e.nextElementSibling,n=i?i.offsetTop:e.offsetTop,r=e.getBoundingClientRect().height;n+e.offsetTop>t?this.popupWrapper.scrollTop=i?n-(t/2+r/2):n:this.popupWrapper.scrollTop=0},t.prototype.setScrollTo=function(){var e;if(n.isNullOrUndefined(this.popupWrapper))this.popupWrapper.scrollTop=0;else{var t=this.popupWrapper.querySelectorAll("."+eL);if(t.length){var i=this.timeCollections[0];e=t[Math.round((this.getDateObject(this.checkDateValue(this.scrollTo)).getTime()-i)/(6e4*this.step))]}}n.isNullOrUndefined(e)?this.popupWrapper.scrollTop=0:this.findScrollTop(e)},t.prototype.getText=function(){return n.isNullOrUndefined(this.checkDateValue(this.value))?"":this.getValue(this.value)},t.prototype.getValue=function(e){return n.isNullOrUndefined(this.checkDateValue(e))?null:this.globalize.formatDate(e,{format:this.cldrTimeFormat(),type:"time"})},t.prototype.cldrDateFormat=function(){return"en"===this.locale||"en-US"===this.locale?n.getValue("dateFormats.short",n.getDefaultDateObject()):this.getCultureDateObject(n.cldrData,""+this.locale)},t.prototype.cldrTimeFormat=function(){return this.isNullOrEmpty(this.formatString)?"en"===this.locale||"en-US"===this.locale?n.getValue("timeFormats.short",n.getDefaultDateObject()):this.getCultureTimeObject(n.cldrData,""+this.locale):this.formatString},t.prototype.dateToNumeric=function(){return"en"===this.locale||"en-US"===this.locale?n.getValue("timeFormats.medium",n.getDefaultDateObject()):n.getValue("main."+this.locale+".dates.calendars.gregorian.timeFormats.medium",n.cldrData)},t.prototype.getExactDateTime=function(e){return n.isNullOrUndefined(this.checkDateValue(e))?null:this.globalize.formatDate(e,{format:this.dateToNumeric(),type:"time"})},t.prototype.setValue=function(e){var t=this.checkValue(e);this.strictMode||this.validateState(t)?this.isNullOrEmpty(t)?(this.initValue=null,this.validateMinMax(this.value,this.min,this.max)):this.initValue=this.compareFormatChange(t):(null===this.checkDateValue(this.valueWithMinutes)&&(this.initValue=this.valueWithMinutes=null),this.validateMinMax(this.value,this.min,this.max)),this.updateInput(!0,this.initValue)},t.prototype.compareFormatChange=function(e){return n.isNullOrUndefined(e)?null:e!==this.getText()?this.getDateObject(e):this.getDateObject(this.value)},t.prototype.updatePlaceHolder=function(){a.Input.setPlaceholder(this.l10n.getConstant("placeholder"),this.inputElement)},t.prototype.updateInputValue=function(e){a.Input.setValue(e,this.inputElement,this.floatLabelType,this.showClearButton)},t.prototype.preventEventBubbling=function(e){e.preventDefault(),this.interopAdaptor.invokeMethodAsync("OnTimeIconClick")},t.prototype.popupHandler=function(e){this.enabled&&(n.Browser.isDevice&&this.inputElement.setAttribute("readonly",""),e.preventDefault(),this.isPopupOpen()?this.closePopup(0,e):(this.inputElement.focus(),this.show(e)))},t.prototype.mouseDownHandler=function(){this.enabled&&(this.readonly||(this.inputElement.setSelectionRange(0,0),n.EventHandler.add(this.inputElement,"mouseup",this.mouseUpHandler,this)))},t.prototype.mouseUpHandler=function(e){if(!this.readonly){if(e.preventDefault(),this.enableMask)return e.preventDefault(),void this.notify("setMaskSelection",{module:"MaskedDateTime"});n.EventHandler.remove(this.inputElement,"mouseup",this.mouseUpHandler);var t=this.getCursorSelection();0===t.start&&t.end===this.inputElement.value.length||(this.inputElement.value.length>0&&(this.cursorDetails=this.focusSelection()),this.inputElement.setSelectionRange(this.cursorDetails.start,this.cursorDetails.end))}},t.prototype.focusSelection=function(){var e=RegExp("^[a-zA-Z0-9]+$"),t=this.inputElement.value.split("");t.push(" ");var i=this.getCursorSelection(),n=0,r=0,a=!1;if(this.isTextSelected)n=i.start,r=i.end,this.isTextSelected=!1;else for(var s=0;s<t.length;s++)if(e.test(t[s])||(r=s,a=!0),a){if(i.start>=n&&i.end<=r){this.isTextSelected=!0;break}n=s+1,a=!1}return{start:n,end:r}},t.prototype.inputHandler=function(e){if(!this.readonly&&this.enabled)switch("right"!=e.action&&"left"!=e.action&&"tab"!=e.action&&("home"!=e.action&&"end"!=e.action&&"up"!=e.action&&"down"!=e.action||this.isPopupOpen()||this.enableMask)&&e.preventDefault(),e.action){case"home":case"end":case"up":case"down":this.isPopupOpen()||(this.popupCreation(),this.popupObj.destroy(),this.popupObj=this.popupWrapper=null),!this.enableMask||this.readonly||this.isPopupOpen()||(e.preventDefault(),this.notify("keyDownHandler",{module:"MaskedDateTime",e:e})),this.isPopupOpen()&&this.keyHandler(e);break;case"enter":this.isNavigate?(this.selectedElement=this.liCollections[this.activeIndex],this.valueWithMinutes=new Date(this.timeCollections[this.activeIndex]),this.updateValue(this.valueWithMinutes,e)):this.updateValue(this.inputElement.value,e),this.hide(),this.isNavigate=!1,this.isPopupOpen()&&e.stopPropagation();break;case"open":this.show(e);break;case"escape":this.updateInputValue(this.objToString(this.value)),this.enableMask&&(this.value||this.updateInputValue(this.maskedDateValue),this.createMask()),this.previousState(this.value),this.hide();break;case"close":this.hide();break;case"right":case"left":case"tab":case"shiftTab":this.isPopupOpen()||!this.enableMask||this.readonly||((0===this.inputElement.selectionStart&&this.inputElement.selectionEnd===this.inputElement.value.length||this.inputElement.selectionEnd!==this.inputElement.value.length&&"tab"===e.action||0!==this.inputElement.selectionStart&&"shiftTab"===e.action||"left"===e.action||"right"===e.action)&&e.preventDefault(),this.notify("keyDownHandler",{module:"MaskedDateTime",e:e}));break;default:this.isNavigate=!1}},t.prototype.onMouseClick=function(e){var t=e.target,i=this.selectedElement=n.closest(t,"."+eL);this.setSelection(i,e),i&&i.classList.contains(eL)&&this.hide()},t.prototype.closePopup=function(e,t){var i=this;if(this.isPopupOpen()&&this.popupWrapper){var r={popup:this.popupObj,event:t||null,cancel:!1,name:"open"};n.removeClass([document.body],"e-time-overflow"),this.trigger("close",r,function(t){t.cancel||(i.popupObj.hide(new n.Animation({name:"FadeOut",duration:50,delay:e||0})),n.removeClass([i.inputWrapper.container],["e-icon-anim"]),n.attributes(i.inputElement,{"aria-expanded":"false"}),i.inputElement.removeAttribute("aria-owns"),i.inputElement.removeAttribute("aria-activedescendant"),n.EventHandler.remove(document,"mousedown touchstart",i.documentClickHandler)),n.Browser.isDevice&&i.modal&&(i.modal.style.display="none",i.modal.outerHTML="",i.modal=null),n.Browser.isDevice&&(n.isNullOrUndefined(i.mobileTimePopupWrap)||(i.mobileTimePopupWrap.remove(),i.mobileTimePopupWrap=null)),n.Browser.isDevice&&i.allowEdit&&!i.readonly&&i.inputElement.removeAttribute("readonly")})}else n.Browser.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly")},t.prototype.disposeServerPopup=function(){this.popupWrapper&&(this.popupWrapper.style.visibility="hidden",this.popupWrapper.style.top="-9999px",this.popupWrapper.style.left="-9999px",this.popupWrapper.style.width="0px",this.popupWrapper.style.height="0px")},t.prototype.checkValueChange=function(e,t){if(this.strictMode||this.validateState(this.valueWithMinutes)){if(t){var i=this.getDateObject(new Date(this.timeCollections[this.activeIndex]));+this.prevDate!=+i&&this.valueProcess(e,i)}else(this.prevValue!==this.inputElement.value||n.isNullOrUndefined(this.checkDateValue(this.value)))&&this.valueProcess(e,this.compareFormatChange(this.inputElement.value))}else null===this.checkDateValue(this.valueWithMinutes)&&(this.initValue=this.valueWithMinutes=null),this.setProperties({value:this.compareFormatChange(this.inputElement.value)},!0),this.initValue=this.valueWithMinutes=this.compareFormatChange(this.inputElement.value),this.prevValue=this.inputElement.value,+this.prevDate!=+this.value&&this.changeEvent(e)},t.prototype.onMouseOver=function(e){var t=n.closest(e.target,"."+eL);this.setHover(t,"e-hover")},t.prototype.setHover=function(e,t){this.enabled&&this.isValidLI(e)&&!e.classList.contains(t)&&(this.removeHover(t),n.addClass([e],t),t===eR&&e.setAttribute("aria-selected","true"))},t.prototype.setSelection=function(e,t){this.isValidLI(e)&&(this.checkValue(e.getAttribute("data-value")),this.enableMask&&this.createMask(),this.selectedElement=e,this.activeIndex=Array.prototype.slice.call(this.liCollections).indexOf(e),this.valueWithMinutes=new Date(this.timeCollections[this.activeIndex]),n.addClass([this.selectedElement],eH),this.selectedElement.setAttribute("aria-selected","true"),this.checkValueChange(t,!0))},t.prototype.onMouseLeave=function(){this.removeHover("e-hover")},t.prototype.scrollHandler=function(){"timepicker"===this.getModuleName()&&n.Browser.isDevice||this.hide()},t.prototype.setMinMax=function(e,t){n.isNullOrUndefined(this.checkDateValue(e))&&(this.initMin=this.getDateObject("12:00:00 AM")),n.isNullOrUndefined(this.checkDateValue(t))&&(this.initMax=this.getDateObject("11:59:59 PM"))},t.prototype.validateMinMax=function(e,t,i){var r=e instanceof Date?e:this.getDateObject(e);return n.isNullOrUndefined(this.checkDateValue(r))?+this.createDateObj(this.getFormattedValue(this.initMin))>+this.createDateObj(this.getFormattedValue(this.initMax))&&this.disableTimeIcon():e=this.strictOperation(this.initMin,this.initMax,e,r),this.strictMode&&(e=this.valueIsDisable(e)?e:null),this.checkErrorState(e),e},t.prototype.valueIsDisable=function(e){if(this.disableItemCollection.length>0){if(this.disableItemCollection.length===this.timeCollections.length)return!1;for(var t=e instanceof Date?this.objToString(e):e,i=0;i<this.disableItemCollection.length;i++)if(t===this.disableItemCollection[i])return!1}return!0},t.prototype.validateState=function(e){if(!this.strictMode){if(!this.valueIsDisable(e))return!1;var t=this.setCurrentDate(this.getDateObject(e)),i=this.setCurrentDate(this.getDateObject(this.initMax)),r=this.setCurrentDate(this.getDateObject(this.initMin));if(n.isNullOrUndefined(this.checkDateValue(t))){if(+i<+r||""!==this.inputElement.value)return!1}else if(+t>+i||+t<+r)return!1}return!0},t.prototype.strictOperation=function(e,t,i,n){var r=this.createDateObj(this.getFormattedValue(t)),a=this.createDateObj(this.getFormattedValue(e)),s=this.createDateObj(this.getFormattedValue(n));if(this.strictMode){if(+a>+r)return this.disableTimeIcon(),this.initValue=this.getDateObject(r),this.updateInputValue(this.getValue(this.initValue)),this.enableMask&&this.createMask(),this.inputElement.value;if(+a>=+s)return this.getDateObject(a);if(+s>=+r||+a==+r)return this.getDateObject(r)}else+a>+r&&(this.disableTimeIcon(),isNaN(+this.createDateObj(i)));return i},t.prototype.bindEvents=function(){n.EventHandler.add(this.inputWrapper.buttons[0],"mousedown",this.popupHandler,this),n.EventHandler.add(this.inputElement,"blur",this.inputBlurHandler,this),n.EventHandler.add(this.inputElement,"focus",this.inputFocusHandler,this),n.EventHandler.add(this.inputElement,"change",this.inputChangeHandler,this),n.EventHandler.add(this.inputElement,"input",this.inputEventHandler,this),this.enableMask&&n.EventHandler.add(this.inputElement,"keydown",this.keydownHandler,this),this.showClearButton&&this.inputWrapper.clearButton&&n.EventHandler.add(this.inputWrapper.clearButton,"mousedown",this.clearHandler,this),this.formElement&&n.EventHandler.add(this.formElement,"reset",this.formResetHandler,this),n.Browser.isDevice||(this.keyConfigure=n.extend(this.keyConfigure,this.keyConfigs),this.inputEvent=new n.KeyboardEvents(this.inputWrapper.container,{keyAction:this.inputHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),this.showClearButton&&this.inputElement&&n.EventHandler.add(this.inputElement,"mousedown",this.mouseDownHandler,this))},t.prototype.keydownHandler=function(e){"Delete"===e.code&&(!this.enableMask||this.popupObj||this.readonly||this.notify("keyDownHandler",{module:"MaskedDateTime",e:e}))},t.prototype.formResetHandler=function(){if(this.enabled&&!this.inputElement.disabled){var e=this.inputElement.getAttribute("value"),t=this.checkDateValue(this.inputEleValue);"EJS-TIMEPICKER"===this.element.tagName&&(t=null,e="",this.inputElement.setAttribute("value","")),this.setProperties({value:t},!0),this.prevDate=this.value,this.valueWithMinutes=this.value,this.initValue=this.value,this.inputElement&&(this.updateInputValue(e),this.enableMask&&(e||this.updateInputValue(this.maskedDateValue),this.createMask()),this.checkErrorState(e),this.prevValue=this.inputElement.value)}},t.prototype.inputChangeHandler=function(e){this.enabled&&e.stopPropagation()},t.prototype.inputEventHandler=function(){this.enableMask&&this.notify("inputHandler",{module:"MaskedDateTime"})},t.prototype.unBindEvents=function(){this.inputWrapper&&n.EventHandler.remove(this.inputWrapper.buttons[0],"mousedown touchstart",this.popupHandler),n.EventHandler.remove(this.inputElement,"blur",this.inputBlurHandler),n.EventHandler.remove(this.inputElement,"focus",this.inputFocusHandler),n.EventHandler.remove(this.inputElement,"change",this.inputChangeHandler),n.EventHandler.remove(this.inputElement,"input",this.inputEventHandler),this.inputEvent&&this.inputEvent.destroy(),n.EventHandler.remove(this.inputElement,"mousedown touchstart",this.mouseDownHandler),!this.showClearButton||n.isNullOrUndefined(this.inputWrapper)||n.isNullOrUndefined(this.inputWrapper.clearButton)||n.EventHandler.remove(this.inputWrapper.clearButton,"mousedown touchstart",this.clearHandler),this.formElement&&n.EventHandler.remove(this.formElement,"reset",this.formResetHandler)},t.prototype.bindClearEvent=function(){this.showClearButton&&this.inputWrapper.clearButton&&n.EventHandler.add(this.inputWrapper.clearButton,"mousedown",this.clearHandler,this)},t.prototype.raiseClearedEvent=function(e){this.trigger("cleared",{event:e})},t.prototype.clearHandler=function(e){if(this.enabled&&(e.preventDefault(),n.isNullOrUndefined(this.value)?(this.resetState(),this.raiseClearedEvent(e)):this.clear(e),this.popupWrapper&&(this.popupWrapper.scrollTop=0),this.enableMask&&this.notify("clearHandler",{module:"MaskedDateTime"}),n.closest(this.element,"form"))){var t=this.element,i=document.createEvent("KeyboardEvent");i.initEvent("keyup",!1,!0),t.dispatchEvent(i)}},t.prototype.clear=function(e){this.setProperties({value:null},!0),this.initValue=null,this.resetState(),this.raiseClearedEvent(e),this.changeEvent(e)},t.prototype.setZIndex=function(){this.popupObj&&(this.popupObj.zIndex=this.zIndex,this.popupObj.dataBind())},t.prototype.checkAttributes=function(e){for(var t,i=0,r=e?n.isNullOrUndefined(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["step","disabled","readonly","style","name","value","min","max","placeholder"];i<r.length;i++){var a=r[i];if(!n.isNullOrUndefined(this.inputElement.getAttribute(a)))switch(a){case"disabled":if(n.isNullOrUndefined(this.timeOptions)||void 0===this.timeOptions.enabled||e){var s="disabled"!==this.inputElement.getAttribute(a)&&""!==this.inputElement.getAttribute(a)&&"true"!==this.inputElement.getAttribute(a);this.setProperties({enabled:s},!e)}break;case"style":this.inputStyle=this.inputElement.getAttribute(a);break;case"readonly":if(n.isNullOrUndefined(this.timeOptions)||void 0===this.timeOptions.readonly||e){var o="readonly"===this.inputElement.getAttribute(a)||""===this.inputElement.getAttribute(a)||"true"===this.inputElement.getAttribute(a);this.setProperties({readonly:o},!e)}break;case"name":this.inputElement.setAttribute("name",this.inputElement.getAttribute(a));break;case"step":this.step=parseInt(this.inputElement.getAttribute(a),10);break;case"placeholder":(n.isNullOrUndefined(this.timeOptions)||void 0===this.timeOptions.placeholder||e)&&this.setProperties({placeholder:this.inputElement.getAttribute(a)},!e);break;case"min":(n.isNullOrUndefined(this.timeOptions)||void 0===this.timeOptions.min||e)&&(t=new Date(this.inputElement.getAttribute(a)),n.isNullOrUndefined(this.checkDateValue(t))||this.setProperties({min:t},!e));break;case"max":(n.isNullOrUndefined(this.timeOptions)||void 0===this.timeOptions.max||e)&&(t=new Date(this.inputElement.getAttribute(a)),n.isNullOrUndefined(this.checkDateValue(t))||this.setProperties({max:t},!e));break;case"value":(n.isNullOrUndefined(this.timeOptions)||void 0===this.timeOptions.value||e)&&(t=new Date(this.inputElement.getAttribute(a)),n.isNullOrUndefined(this.checkDateValue(t))||(this.initValue=t,this.updateInput(!1,this.initValue),this.setProperties({value:t},!e)))}}},t.prototype.setCurrentDate=function(e){return n.isNullOrUndefined(this.checkDateValue(e))?null:new Date(eN,eA,eI,e.getHours(),e.getMinutes(),e.getSeconds())},t.prototype.getTextFormat=function(){var e=0;if("a"===this.cldrTimeFormat().split(" ")[0]||0===this.cldrTimeFormat().indexOf("a"))e=1;else if(0>this.cldrTimeFormat().indexOf("a")){for(var t=this.cldrTimeFormat().split(" "),i=0;i<t.length;i++)if(t[i].toLowerCase().indexOf("h")>=0){e=i;break}}return e},t.prototype.updateValue=function(e,t){var i;if(this.isNullOrEmpty(e))this.resetState();else if(i=this.checkValue(e),this.strictMode){var r=null===i&&e.trim().length>0?this.previousState(this.prevDate):this.inputElement.value;this.updateInputValue(r),this.enableMask&&(r||this.updateInputValue(this.maskedDateValue),n.isNullOrUndefined(i)&&e!==this.maskedDateValue&&this.createMask(),n.isNullOrUndefined(i)&&e===this.maskedDateValue&&this.updateInputValue(this.maskedDateValue))}this.checkValueChange(t,"string"!=typeof e)},t.prototype.previousState=function(e){for(var t=this.getDateObject(e),i=0;i<this.timeCollections.length;i++)if(+t===this.timeCollections[i]){this.activeIndex=i,this.selectedElement=this.liCollections[i],this.valueWithMinutes=new Date(this.timeCollections[i]);break}return this.prevValue},t.prototype.resetState=function(){this.removeSelection(),a.Input.setValue("",this.inputElement,this.floatLabelType,!1),this.valueWithMinutes=this.activeIndex=null,this.strictMode||this.checkErrorState(null)},t.prototype.objToString=function(e){return n.isNullOrUndefined(this.checkDateValue(e))?null:this.globalize.formatDate(e,{format:this.cldrTimeFormat(),type:"time"})},t.prototype.checkValue=function(e){if(!this.isNullOrEmpty(e)){var t=e instanceof Date?e:this.getDateObject(e);return this.validateValue(t,e)}return this.resetState(),this.valueWithMinutes=null},t.prototype.validateValue=function(e,t){var i,r=this.validateMinMax(t,this.min,this.max),a=this.createDateObj(r);if(this.getFormattedValue(a)!==this.getFormattedValue(this.value)?this.valueWithMinutes=n.isNullOrUndefined(a)?null:a:(this.strictMode&&(e=a),this.valueWithMinutes=this.checkDateValue(e)),i=this.objToString(this.valueWithMinutes),!this.strictMode&&n.isNullOrUndefined(i)){var s=r.trim().length>0?r:"";this.updateInputValue(s),this.enableMask&&(s||this.updateInputValue(this.maskedDateValue))}else this.updateInputValue(i),this.enableMask&&(""===i&&this.updateInputValue(this.maskedDateValue),n.isNullOrUndefined(i)&&t!==this.maskedDateValue&&this.createMask(),n.isNullOrUndefined(i)&&t===this.maskedDateValue&&this.updateInputValue(this.maskedDateValue));return i},t.prototype.createMask=function(){this.notify("createMask",{module:"MaskedDateTime"})},t.prototype.findNextElement=function(e){var t=this.inputElement.value,i=n.isNullOrUndefined(this.valueWithMinutes)?this.createDateObj(t):this.getDateObject(this.valueWithMinutes),r=null,a=this.liCollections.length,s=this.timeCollections;if(n.isNullOrUndefined(this.checkDateValue(i))&&n.isNullOrUndefined(this.activeIndex))this.selectNextItem(e);else{if("home"===e.action){var o=this.validLiElement(0);r=+this.createDateObj(new Date(this.timeCollections[o])),this.activeIndex=o}else if("end"===e.action)o=this.validLiElement(s.length-1,!0),r=+this.createDateObj(new Date(this.timeCollections[o])),this.activeIndex=o;else if("down"===e.action)for(var l=0;l<a;l++){if(+i<this.timeCollections[l]){o=this.validLiElement(l),r=+this.createDateObj(new Date(this.timeCollections[o])),this.activeIndex=o;break}if(l===a-1){o=this.validLiElement(0),r=+this.createDateObj(new Date(this.timeCollections[o])),this.activeIndex=o;break}}else for(l=a-1;l>=0;l--){if(+i>this.timeCollections[l]){o=this.validLiElement(l,!0),r=+this.createDateObj(new Date(this.timeCollections[o])),this.activeIndex=o;break}if(0===l){o=this.validLiElement(a-1),r=+this.createDateObj(new Date(this.timeCollections[o])),this.activeIndex=o;break}}this.selectedElement=this.liCollections[this.activeIndex],this.elementValue(n.isNullOrUndefined(r)?null:new Date(r))}},t.prototype.selectNextItem=function(e){var t=this.validLiElement(0,"down"!==e.action);this.activeIndex=t,this.selectedElement=this.liCollections[t],this.elementValue(new Date(this.timeCollections[t]))},t.prototype.elementValue=function(e){n.isNullOrUndefined(this.checkDateValue(e))||this.checkValue(e)},t.prototype.validLiElement=function(e,t){var i=null,r=n.isNullOrUndefined(this.popupWrapper)?this.liCollections:this.popupWrapper.querySelectorAll("."+eL),a=!0;if(r.length){if(t)for(var s=e;s>=0;s--){if(!r[s].classList.contains(eF)){i=s;break}0===s&&a&&(e=s=r.length,a=!1)}else for(s=e;s<=r.length-1;s++){if(!r[s].classList.contains(eF)){i=s;break}s===r.length-1&&a&&(e=s=-1,a=!1)}}return i},t.prototype.keyHandler=function(e){if(!(n.isNullOrUndefined(this.step)||this.step<=0||!n.isNullOrUndefined(this.inputWrapper)&&this.inputWrapper.buttons[0].classList.contains(eF))){var t=this.timeCollections.length;if(n.isNullOrUndefined(this.getActiveElement())||0===this.getActiveElement().length){if(this.liCollections.length>0){if(n.isNullOrUndefined(this.value)&&n.isNullOrUndefined(this.activeIndex)){var i=this.validLiElement(0,"down"!==e.action);this.activeIndex=i,this.selectedElement=this.liCollections[i],this.elementValue(new Date(this.timeCollections[i]))}else this.findNextElement(e)}else this.findNextElement(e)}else{var r=void 0;e.keyCode>=37&&e.keyCode<=40?(i=40===e.keyCode||39===e.keyCode?++this.activeIndex:--this.activeIndex,this.activeIndex=i=this.activeIndex===t?0:this.activeIndex,this.activeIndex=i=this.activeIndex<0?t-1:this.activeIndex,this.activeIndex=i=this.validLiElement(this.activeIndex,40!==e.keyCode&&39!==e.keyCode),r=n.isNullOrUndefined(this.timeCollections[i])?this.timeCollections[0]:this.timeCollections[i]):"home"===e.action?(i=this.validLiElement(0),this.activeIndex=i,r=this.timeCollections[i]):"end"===e.action&&(i=this.validLiElement(t-1,!0),this.activeIndex=i,r=this.timeCollections[i]),this.selectedElement=this.liCollections[this.activeIndex],this.elementValue(new Date(r))}this.isNavigate=!0,this.setHover(this.selectedElement,eR),this.setActiveDescendant(),this.enableMask&&this.selectInputText(),!this.isPopupOpen()||null===this.selectedElement||e&&"click"===e.type||this.setScrollPosition()}},t.prototype.getCultureTimeObject=function(e,t){return n.getValue("main."+t+".dates.calendars.gregorian.timeFormats.short",e)},t.prototype.getCultureDateObject=function(e,t){return n.getValue("main."+t+".dates.calendars.gregorian.dateFormats.short",e)},t.prototype.wireListEvents=function(){n.EventHandler.add(this.listWrapper,"click",this.onMouseClick,this),n.Browser.isDevice||(n.EventHandler.add(this.listWrapper,"mouseover",this.onMouseOver,this),n.EventHandler.add(this.listWrapper,"mouseout",this.onMouseLeave,this))},t.prototype.unWireListEvents=function(){this.listWrapper&&(n.EventHandler.remove(this.listWrapper,"click",this.onMouseClick),n.Browser.isDevice||(n.EventHandler.remove(this.listWrapper,"mouseover",this.onMouseOver),n.EventHandler.remove(this.listWrapper,"mouseout",this.onMouseLeave)))},t.prototype.valueProcess=function(e,t){var i=n.isNullOrUndefined(this.checkDateValue(t))?null:t;+this.prevDate!=+i&&(this.initValue=i,this.changeEvent(e))},t.prototype.changeEvent=function(e){this.addSelection(),this.updateInput(!0,this.initValue);var t={event:e||null,value:this.value,text:this.inputElement.value,isInteracted:!n.isNullOrUndefined(e),element:this.element};t.value=this.valueWithMinutes||this.getDateObject(this.inputElement.value),this.prevDate=this.valueWithMinutes||this.getDateObject(this.inputElement.value),this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",t),this.invalidValueString=null,this.checkErrorState(this.value)},t.prototype.updateInput=function(e,t){e&&(this.prevValue=this.getValue(t)),this.prevDate=this.valueWithMinutes=t,"number"==typeof t&&(this.value&&+new Date(+this.value).setMilliseconds(0))===+t||(this.setProperties({value:t},!0),this.enableMask&&this.value&&this.createMask()),!this.strictMode&&n.isNullOrUndefined(this.value)&&this.invalidValueString&&(this.checkErrorState(this.invalidValueString),this.updateInputValue(this.invalidValueString)),this.clearIconState()},t.prototype.setActiveDescendant=function(){!n.isNullOrUndefined(this.selectedElement)&&this.value?n.attributes(this.inputElement,{"aria-activedescendant":this.selectedElement.getAttribute("id")}):this.inputElement.removeAttribute("aria-activedescendant")},t.prototype.removeSelection=function(){if(this.removeHover("e-hover"),!n.isNullOrUndefined(this.popupWrapper)){var e=this.popupWrapper.querySelectorAll("."+eH);e.length&&(n.removeClass(e,eH),e[0].removeAttribute("aria-selected"))}},t.prototype.removeHover=function(e){var t=this.getHoverItem(e);t&&t.length&&(n.removeClass(t,e),e===eR&&t[0].removeAttribute("aria-selected"))},t.prototype.getHoverItem=function(e){var t;return n.isNullOrUndefined(this.popupWrapper)||(t=this.popupWrapper.querySelectorAll("."+e)),t},t.prototype.setActiveClass=function(){if(!n.isNullOrUndefined(this.popupWrapper)){var e=this.popupWrapper.querySelectorAll("."+eL);if(e.length){for(var t=0;t<e.length;t++)if(this.timeCollections[t]===+this.getDateObject(this.valueWithMinutes)){e[t].setAttribute("aria-selected","true"),this.selectedElement=e[t],this.activeIndex=t;break}}}},t.prototype.addSelection=function(){this.selectedElement=null,this.removeSelection(),this.setActiveClass(),n.isNullOrUndefined(this.selectedElement)||(n.addClass([this.selectedElement],eH),this.selectedElement.setAttribute("aria-selected","true"))},t.prototype.isValidLI=function(e){return e&&e.classList.contains(eL)&&!e.classList.contains(eF)},t.prototype.createDateObj=function(e){var t=this.globalize.formatDate(new Date,{format:null,skeleton:"short",type:"date"}),i=null;return"string"==typeof e?e.toUpperCase().indexOf("AM")>-1||e.toUpperCase().indexOf("PM")>-1?(t=this.defaultCulture.formatDate(new Date,{format:null,skeleton:"short",type:"date"}),i=isNaN(+new Date(t+" "+e))?null:new Date(new Date(t+" "+e).setMilliseconds(0)),n.isNullOrUndefined(i)&&(i=this.timeParse(t,e))):i=this.timeParse(t,e):e instanceof Date&&(i=e),i},t.prototype.timeParse=function(e,t){var i;return i=this.globalize.parseDate(e+" "+t,{format:this.cldrDateFormat()+" "+this.cldrTimeFormat(),type:"datetime"}),i=n.isNullOrUndefined(i)?this.globalize.parseDate(e+" "+t,{format:this.cldrDateFormat()+" "+this.dateToNumeric(),type:"datetime"}):i,i=n.isNullOrUndefined(i)?i:new Date(i.setMilliseconds(0))},t.prototype.createListItems=function(){var e=this;this.listWrapper=this.createElement("div",{className:"e-content",attrs:{tabindex:"-1"}});var t,i=6e4*this.step,r=[];this.timeCollections=[],this.disableItemCollection=[],t=+this.getDateObject(this.initMin).setMilliseconds(0);for(var a=+this.getDateObject(this.initMax).setMilliseconds(0);a>=t;)this.timeCollections.push(t),r.push(this.globalize.formatDate(new Date(t),{format:this.cldrTimeFormat(),type:"time"})),t+=i;this.listTag=o.ListBase.createList(this.createElement,r,{itemCreated:function(t){var i={element:t.item,text:t.text,value:e.getDateObject(t.text),isDisabled:!1};e.trigger("itemRender",i,function(t){t.isDisabled&&t.element.classList.add(eF),t.element.classList.contains(eF)&&e.disableItemCollection.push(t.element.getAttribute("data-value"))})}},!0),n.attributes(this.listTag,{role:"listbox","aria-hidden":"false",id:this.element.id+"_options",tabindex:"0"}),n.append([this.listTag],this.listWrapper)},t.prototype.documentClickHandler=function(e){var t=e.target;n.isNullOrUndefined(this.popupObj)||n.isNullOrUndefined(this.inputWrapper)||!(this.inputWrapper.container.contains(t)&&"mousedown"!==e.type||this.popupObj.element&&this.popupObj.element.contains(t))||"touchstart"===e.type||e.preventDefault(),n.closest(t,'[id="'+this.popupObj.element.id+'"]')||t===this.inputElement||t===(this.inputWrapper&&this.inputWrapper.buttons[0])||t===(this.inputWrapper&&this.inputWrapper.clearButton)||t===(this.inputWrapper&&this.inputWrapper.container)?t!==this.inputElement&&(n.Browser.isDevice||(this.isPreventBlur=(n.Browser.isIE||"edge"===n.Browser.info.name)&&document.activeElement===this.inputElement&&t===this.popupWrapper)):this.isPopupOpen()&&(this.hide(),this.focusOut())},t.prototype.setEnableRtl=function(){a.Input.setEnableRtl(this.enableRtl,[this.inputWrapper.container]),this.popupObj&&(this.popupObj.enableRtl=this.enableRtl,this.popupObj.dataBind())},t.prototype.setEnable=function(){a.Input.setEnabled(this.enabled,this.inputElement,this.floatLabelType),this.enabled?(n.removeClass([this.inputWrapper.container],eF),n.attributes(this.inputElement,{"aria-disabled":"false"}),this.inputElement.setAttribute("tabindex",this.tabIndex)):(this.hide(),n.addClass([this.inputWrapper.container],eF),n.attributes(this.inputElement,{"aria-disabled":"true"}),this.inputElement.tabIndex=-1)},t.prototype.getProperty=function(e,t){"min"===t?(this.initMin=this.checkDateValue(new Date(this.checkInValue(e.min))),this.setProperties({min:this.initMin},!0)):(this.initMax=this.checkDateValue(new Date(this.checkInValue(e.max))),this.setProperties({max:this.initMax},!0)),""===this.inputElement.value?this.validateMinMax(this.value,this.min,this.max):this.checkValue(this.inputElement.value),this.checkValueChange(null,!1)},t.prototype.inputBlurHandler=function(e){this.enabled&&(this.isPreventBlur&&this.isPopupOpen()?this.inputElement.focus():(this.closePopup(0,e),this.enableMask&&this.maskedDateValue&&this.placeholder&&"Always"!==this.floatLabelType&&(this.inputElement.value!==this.maskedDateValue||this.value||"Auto"!==this.floatLabelType&&"Never"!==this.floatLabelType&&!this.placeholder||this.updateInputValue("")),n.removeClass([this.inputWrapper.container],[eU]),this.trigger("blur",{model:this}),this.getText()!==this.inputElement.value?this.updateValue(this.inputElement.value,e):0===this.inputElement.value.trim().length&&this.resetState(),this.cursorDetails=null,this.isNavigate=!1,""===this.inputElement.value&&(this.invalidValueString=null)))},t.prototype.focusOut=function(){document.activeElement===this.inputElement&&(this.inputElement.blur(),n.removeClass([this.inputWrapper.container],[eU]),this.trigger("blur",{model:this}))},t.prototype.isPopupOpen=function(){return!(!this.popupWrapper||!this.popupWrapper.classList.contains(""+eP))},t.prototype.inputFocusHandler=function(){this.enabled&&(this.readonly||n.Browser.isDevice||this.enableMask||this.selectInputText(),this.enableMask&&!this.inputElement.value&&this.placeholder&&this.maskedDateValue&&!this.value&&("Auto"===this.floatLabelType||"Never"===this.floatLabelType||this.placeholder)&&(this.updateInputValue(this.maskedDateValue),this.inputElement.selectionStart=0,this.inputElement.selectionEnd=this.inputElement.value.length),this.trigger("focus",{model:this}),this.clearIconState(),this.openOnFocus&&this.show())},t.prototype.focusIn=function(){document.activeElement!==this.inputElement&&this.enabled&&this.inputElement.focus()},t.prototype.hide=function(){this.closePopup(100,null),this.clearIconState()},t.prototype.show=function(e){var t=this;if(!(this.enabled&&this.readonly||!this.enabled||this.popupWrapper)){this.popupCreation(),n.Browser.isDevice&&this.listWrapper&&(this.modal=this.createElement("div"),this.modal.className=eP+" e-time-modal",document.body.className+=" e-time-overflow",document.body.appendChild(this.modal)),n.Browser.isDevice&&(this.mobileTimePopupWrap=this.createElement("div",{className:"e-timepicker-mob-popup-wrap"}),document.body.appendChild(this.mobileTimePopupWrap)),this.openPopupEventArgs={popup:this.popupObj||null,cancel:!1,event:e||null,name:"open",appendTo:n.Browser.isDevice?this.mobileTimePopupWrap:document.body};var i=this.openPopupEventArgs;this.trigger("open",i,function(e){if(t.openPopupEventArgs=e,t.openPopupEventArgs.cancel||t.inputWrapper.buttons[0].classList.contains(eF))t.popupObj.destroy(),t.popupWrapper=t.listTag=void 0,t.liCollections=t.timeCollections=t.disableItemCollection=[],t.popupObj=null;else{t.openPopupEventArgs.appendTo.appendChild(t.popupWrapper),t.popupAlignment(t.openPopupEventArgs),t.setScrollPosition(),n.Browser.isDevice||t.inputElement.focus();var i={name:"FadeIn",duration:50};t.popupObj.refreshPosition(t.anchor),1e3===t.zIndex?t.popupObj.show(new n.Animation(i),t.element):t.popupObj.show(new n.Animation(i),null),t.setActiveDescendant(),n.attributes(t.inputElement,{"aria-expanded":"true"}),n.attributes(t.inputElement,{"aria-owns":t.inputElement.id+"_options"}),n.addClass([t.inputWrapper.container],eU),n.EventHandler.add(document,"mousedown touchstart",t.documentClickHandler,t),t.setOverlayIndex(t.mobileTimePopupWrap,t.popupObj.element,t.modal,n.Browser.isDevice)}})}},t.prototype.setOverlayIndex=function(e,t,i,r){if(r&&!n.isNullOrUndefined(t)&&!n.isNullOrUndefined(i)&&!n.isNullOrUndefined(e)){var a=parseInt(t.style.zIndex,10)?parseInt(t.style.zIndex,10):1e3;i.style.zIndex=(a-1).toString(),e.style.zIndex=a.toString()}},t.prototype.formatValues=function(e){var t;return"number"==typeof e?t=n.formatUnit(e):"string"==typeof e&&(t=e.match(/px|%|em/)?e:isNaN(parseInt(e,10))?e:n.formatUnit(e)),t},t.prototype.popupAlignment=function(e){if(e.popup.position.X=this.formatValues(e.popup.position.X),e.popup.position.Y=this.formatValues(e.popup.position.Y),isNaN(parseFloat(e.popup.position.X))&&isNaN(parseFloat(e.popup.position.Y))||(this.popupObj.relateTo=this.anchor=document.body,this.popupObj.targetType="container"),isNaN(parseFloat(e.popup.position.X))||(this.popupObj.offsetX=parseFloat(e.popup.position.X)),isNaN(parseFloat(e.popup.position.Y))||(this.popupObj.offsetY=parseFloat(e.popup.position.Y)),n.Browser.isDevice)"center"===e.popup.position.X&&"center"===e.popup.position.Y&&(this.popupObj.relateTo=this.anchor=document.body,this.popupObj.offsetY=0,this.popupObj.targetType="container",this.popupObj.collision={X:"fit",Y:"fit"});else{switch(e.popup.position.X){case"left":break;case"right":e.popup.offsetX=this.containerStyle.width;break;case"center":e.popup.offsetX=-this.containerStyle.width/2}switch(e.popup.position.Y){case"top":case"bottom":break;case"center":e.popup.offsetY=-this.containerStyle.height/2}"center"===e.popup.position.X&&"center"===e.popup.position.Y&&(this.popupObj.relateTo=this.inputWrapper.container,this.anchor=this.inputElement,this.popupObj.targetType="relative")}},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.getModuleName=function(){return"timepicker"},t.prototype.onPropertyChanged=function(e,t){for(var i=0,r=Object.keys(e);i<r.length;i++){var s=r[i];switch(s){case"placeholder":a.Input.setPlaceholder(e.placeholder,this.inputElement);break;case"readonly":a.Input.setReadonly(this.readonly,this.inputElement,this.floatLabelType),this.readonly&&this.hide(),this.setTimeAllowEdit();break;case"enabled":this.setProperties({enabled:e.enabled},!0),this.setEnable();break;case"allowEdit":this.setTimeAllowEdit();break;case"enableRtl":this.setProperties({enableRtl:e.enableRtl},!0),this.setEnableRtl();break;case"cssClass":this.updateCssClass(e.cssClass,t.cssClass);break;case"zIndex":this.setProperties({zIndex:e.zIndex},!0),this.setZIndex();break;case"htmlAttributes":this.updateHtmlAttributeToElement(),this.updateHtmlAttributeToWrapper(),this.checkAttributes(!0);break;case"min":case"max":this.getProperty(e,s);break;case"showClearButton":a.Input.setClearButton(this.showClearButton,this.inputElement,this.inputWrapper),this.bindClearEvent();break;case"locale":this.setProperties({locale:e.locale},!0),this.globalize=new n.Internationalization(this.locale),this.l10n.setLocale(this.locale),this.updatePlaceHolder(),this.setValue(this.value),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"});break;case"width":n.setStyleAttribute(this.inputWrapper.container,{width:this.setWidth(e.width)}),this.containerStyle=this.inputWrapper.container.getBoundingClientRect(),a.Input.calculateWidth(this.inputElement,this.inputWrapper.container),n.isNullOrUndefined(this.inputWrapper.buttons[0])||n.isNullOrUndefined(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])||"Never"===this.floatLabelType||this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");break;case"format":this.setProperties({format:e.format},!0),this.checkTimeFormat(),this.setValue(this.value),this.enableMask&&(this.createMask(),this.value||this.updateInputValue(this.maskedDateValue));break;case"value":this.invalidValueString=null,this.checkInvalidValue(e.value),e.value=this.value,this.invalidValueString?(this.updateInputValue(this.invalidValueString),this.checkErrorState(this.invalidValueString)):("string"==typeof e.value?(this.setProperties({value:this.checkDateValue(new Date(e.value))},!0),e.value=this.value):(e.value&&+new Date(+e.value).setMilliseconds(0))!==+this.value&&(e.value=this.checkDateValue(new Date(""+e.value))),this.initValue=e.value,e.value=this.compareFormatChange(this.checkValue(e.value))),this.enableMask&&n.isNullOrUndefined(e.value)&&(this.updateInputValue(this.maskedDateValue),this.checkErrorState(this.maskedDateValue)),this.checkValueChange(null,!1),this.isPopupOpen()&&this.setScrollPosition(),this.isAngular&&this.preventChange&&(this.preventChange=!1),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"});break;case"floatLabelType":this.floatLabelType=e.floatLabelType,a.Input.removeFloating(this.inputWrapper),a.Input.addFloating(this.inputElement,this.floatLabelType,this.placeholder),n.isNullOrUndefined(this.inputWrapper.buttons[0])||n.isNullOrUndefined(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])||"Never"===this.floatLabelType||this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");break;case"strictMode":this.invalidValueString=null,e.strictMode&&this.checkErrorState(null),this.setProperties({strictMode:e.strictMode},!0),this.checkValue(this.inputElement.value),this.checkValueChange(null,!1);break;case"scrollTo":this.checkDateValue(new Date(this.checkInValue(e.scrollTo)))?(this.popupWrapper&&this.setScrollTo(),this.setProperties({scrollTo:this.checkDateValue(new Date(this.checkInValue(e.scrollTo)))},!0)):this.setProperties({scrollTo:null},!0);break;case"enableMask":this.enableMask?(this.notify("createMask",{module:"MaskedDateTime"}),this.updateInputValue(this.maskedDateValue)):this.inputElement.value===this.maskedDateValue&&this.updateInputValue("")}}},t.prototype.checkInValue=function(e){return e instanceof Date?e.toUTCString():""+e},eV([n.Property(null)],t.prototype,"width",void 0),eV([n.Property(null)],t.prototype,"cssClass",void 0),eV([n.Property(!1)],t.prototype,"strictMode",void 0),eV([n.Property(null)],t.prototype,"keyConfigs",void 0),eV([n.Property(null)],t.prototype,"format",void 0),eV([n.Property(!0)],t.prototype,"enabled",void 0),eV([n.Property(!1)],t.prototype,"fullScreenMode",void 0),eV([n.Property(!1)],t.prototype,"readonly",void 0),eV([n.Property({})],t.prototype,"htmlAttributes",void 0),eV([n.Property("Never")],t.prototype,"floatLabelType",void 0),eV([n.Property(null)],t.prototype,"placeholder",void 0),eV([n.Property(1e3)],t.prototype,"zIndex",void 0),eV([n.Property(!1)],t.prototype,"enablePersistence",void 0),eV([n.Property(!0)],t.prototype,"showClearButton",void 0),eV([n.Property(30)],t.prototype,"step",void 0),eV([n.Property(null)],t.prototype,"scrollTo",void 0),eV([n.Property(null)],t.prototype,"value",void 0),eV([n.Property(null)],t.prototype,"min",void 0),eV([n.Property(null)],t.prototype,"max",void 0),eV([n.Property(!0)],t.prototype,"allowEdit",void 0),eV([n.Property(!1)],t.prototype,"openOnFocus",void 0),eV([n.Property(!1)],t.prototype,"enableMask",void 0),eV([n.Property({day:"day",month:"month",year:"year",hour:"hour",minute:"minute",second:"second",dayOfTheWeek:"day of the week"})],t.prototype,"maskPlaceholder",void 0),eV([n.Property(null)],t.prototype,"serverTimezoneOffset",void 0),eV([n.Event()],t.prototype,"change",void 0),eV([n.Event()],t.prototype,"created",void 0),eV([n.Event()],t.prototype,"destroyed",void 0),eV([n.Event()],t.prototype,"open",void 0),eV([n.Event()],t.prototype,"itemRender",void 0),eV([n.Event()],t.prototype,"close",void 0),eV([n.Event()],t.prototype,"cleared",void 0),eV([n.Event()],t.prototype,"blur",void 0),eV([n.Event()],t.prototype,"focus",void 0),t=eV([n.NotifyPropertyChanges],t)}(n.Component),d=function(e,t){return(d=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},ez=function(e,t){function i(){this.constructor=e}d(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},eY=function(e,t,i,n){var r,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(s=(a<3?r(s):a>3?r(t,i,s):r(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},e_=(new Date).getDate(),eG=(new Date).getMonth(),eK=(new Date).getFullYear(),eX=(new Date).getHours(),eZ=(new Date).getMinutes(),eQ=(new Date).getSeconds(),eJ=(new Date).getMilliseconds(),e$="e-datetimepicker",e0="e-datetimepopup-wrapper",e1="e-input-focus",e2="e-disabled",e3="e-active",e6="e-list-item",e4=function(e){function i(t,i){var n=e.call(this,t,i)||this;return n.valueWithMinutes=null,n.scrollInvoked=!1,n.moduleName=n.getModuleName(),n.dateTimeOptions=t,n}return ez(i,e),i.prototype.focusHandler=function(){this.enabled&&n.addClass([this.inputWrapper.container],e1)},i.prototype.focusIn=function(){e.prototype.focusIn.call(this)},i.prototype.focusOut=function(){document.activeElement===this.inputElement&&(this.inputElement.blur(),n.removeClass([this.inputWrapper.container],[e1]))},i.prototype.blurHandler=function(e){this.enabled&&(this.isTimePopupOpen()&&this.isPreventBlur?this.inputElement.focus():(n.removeClass([this.inputWrapper.container],e1),this.isTimePopupOpen()&&this.hide(e),this.trigger("blur",{model:this})))},i.prototype.destroy=function(){this.popupObject&&this.popupObject.element.classList.contains("e-popup")&&(this.popupObject.destroy(),n.detach(this.dateTimeWrapper),this.dateTimeWrapper=void 0,this.liCollections=this.timeCollections=[],n.isNullOrUndefined(this.rippleFn)||this.rippleFn()),this.inputElement&&a.Input.removeAttributes({"aria-live":"assertive","aria-atomic":"true","aria-invalid":"false",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-expanded":"false",role:"combobox",autocomplete:"off"},this.inputElement),this.isCalendar()&&(this.popupWrapper&&n.detach(this.popupWrapper),this.popupObject=this.popupWrapper=null,this.keyboardHandler.destroy()),this.unBindInputEvents(),this.liCollections=null,this.rippleFn=null,this.selectedElement=null,this.listTag=null,this.timeIcon=null,this.popupObject=null,this.preventArgs=null,this.keyboardModule=null,e.prototype.destroy.call(this)},i.prototype.render=function(){this.timekeyConfigure={enter:"enter",escape:"escape",end:"end",tab:"tab",home:"home",down:"downarrow",up:"uparrow",left:"leftarrow",right:"rightarrow",open:"alt+downarrow",close:"alt+uparrow"},this.valueWithMinutes=null,this.previousDateTime=null,this.isPreventBlur=!1,this.cloneElement=this.element.cloneNode(!0),this.dateTimeFormat=this.cldrDateTimeFormat(),this.initValue=this.value,!n.isNullOrUndefined(n.closest(this.element,"fieldset"))&&n.closest(this.element,"fieldset").disabled&&(this.enabled=!1),e.prototype.updateHtmlAttributeToElement.call(this),this.checkAttributes(!1);var t={placeholder:this.placeholder};this.l10n=new n.L10n("datetimepicker",t,this.locale),this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),e.prototype.render.call(this),this.createInputElement(),e.prototype.updateHtmlAttributeToWrapper.call(this),this.bindInputEvents(),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"}),this.setValue(!0),!this.enableMask||this.value||!this.maskedDateValue||"Always"!==this.floatLabelType&&this.floatLabelType&&this.placeholder||a.Input.setValue(this.maskedDateValue,this.inputElement,this.floatLabelType,this.showClearButton),this.setProperties({scrollTo:this.checkDateValue(new Date(this.checkValue(this.scrollTo)))},!0),this.previousDateTime=this.value&&new Date(+this.value),"EJS-DATETIMEPICKER"===this.element.tagName&&(this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex"),this.enabled||(this.inputElement.tabIndex=-1)),"Auto"===this.floatLabelType&&a.Input.calculateWidth(this.inputElement,this.inputWrapper.container),n.isNullOrUndefined(this.inputWrapper.buttons[0])||n.isNullOrUndefined(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])||"Never"===this.floatLabelType||this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-date-time-icon"),this.renderComplete()},i.prototype.setValue=function(t){if(void 0===t&&(t=!1),this.initValue=this.validateMinMaxRange(this.value),!this.strictMode&&this.isDateObject(this.initValue)){var i=this.validateMinMaxRange(this.initValue);a.Input.setValue(this.getFormattedValue(i),this.inputElement,this.floatLabelType,this.showClearButton),this.setProperties({value:i},!0)}else n.isNullOrUndefined(this.value)&&(this.initValue=null,this.setProperties({value:null},!0));this.valueWithMinutes=this.value,e.prototype.updateInput.call(this,t)},i.prototype.validateMinMaxRange=function(e){var t=e;return this.isDateObject(e)?t=this.validateValue(e):+this.min>+this.max&&this.disablePopupButton(!0),this.checkValidState(t),t},i.prototype.checkValidState=function(e){this.isValidState=!0,this.strictMode||(+e>+this.max||+e<+this.min)&&(this.isValidState=!1),this.checkErrorState()},i.prototype.checkErrorState=function(){this.isValidState?n.removeClass([this.inputWrapper.container],"e-error"):n.addClass([this.inputWrapper.container],"e-error"),n.attributes(this.inputElement,{"aria-invalid":this.isValidState?"false":"true"})},i.prototype.validateValue=function(e){var t=e;return this.strictMode?+this.min>+this.max?(this.disablePopupButton(!0),t=this.max):+e<+this.min?t=this.min:+e>+this.max&&(t=this.max):+this.min>+this.max&&(this.disablePopupButton(!0),t=e),t},i.prototype.disablePopupButton=function(e){e?(n.addClass([this.inputWrapper.buttons[0],this.timeIcon],e2),this.hide()):n.removeClass([this.inputWrapper.buttons[0],this.timeIcon],e2)},i.prototype.getFormattedValue=function(e){var t;return n.isNullOrUndefined(e)?null:(t="Gregorian"===this.calendarMode?{format:this.cldrDateTimeFormat(),type:"dateTime",skeleton:"yMd"}:{format:this.cldrDateTimeFormat(),type:"dateTime",skeleton:"yMd",calendar:"islamic"},this.globalize.formatDate(e,t))},i.prototype.isDateObject=function(e){return!n.isNullOrUndefined(e)&&!isNaN(+e)},i.prototype.createInputElement=function(){n.removeClass([this.inputElement],"e-datepicker"),n.removeClass([this.inputWrapper.container],"e-date-wrapper"),n.addClass([this.inputWrapper.container],"e-datetime-wrapper"),n.addClass([this.inputElement],e$),this.renderTimeIcon()},i.prototype.renderTimeIcon=function(){this.timeIcon=a.Input.appendSpan("e-input-group-icon e-time-icon e-icons",this.inputWrapper.container)},i.prototype.bindInputEvents=function(){n.EventHandler.add(this.timeIcon,"mousedown",this.timeHandler,this),n.EventHandler.add(this.inputWrapper.buttons[0],"mousedown",this.dateHandler,this),n.EventHandler.add(this.inputElement,"blur",this.blurHandler,this),n.EventHandler.add(this.inputElement,"focus",this.focusHandler,this),this.defaultKeyConfigs=n.extend(this.defaultKeyConfigs,this.keyConfigs),this.keyboardHandler=new n.KeyboardEvents(this.inputElement,{eventName:"keydown",keyAction:this.inputKeyAction.bind(this),keyConfigs:this.defaultKeyConfigs})},i.prototype.unBindInputEvents=function(){n.EventHandler.remove(this.timeIcon,"mousedown touchstart",this.timeHandler),n.EventHandler.remove(this.inputWrapper.buttons[0],"mousedown touchstart",this.dateHandler),this.inputElement&&(n.EventHandler.remove(this.inputElement,"blur",this.blurHandler),n.EventHandler.remove(this.inputElement,"focus",this.focusHandler)),this.keyboardHandler&&this.keyboardHandler.destroy()},i.prototype.cldrTimeFormat=function(){return this.isNullOrEmpty(this.timeFormat)?"en"===this.locale||"en-US"===this.locale?n.getValue("timeFormats.short",n.getDefaultDateObject()):this.getCultureTimeObject(n.cldrData,""+this.locale):this.timeFormat},i.prototype.cldrDateTimeFormat=function(){var e=new n.Internationalization(this.locale).getDatePattern({skeleton:"yMd"});return this.isNullOrEmpty(this.formatString)?e+" "+this.getCldrFormat("time"):this.formatString},i.prototype.getCldrFormat=function(e){return"en"===this.locale||"en-US"===this.locale?n.getValue("timeFormats.short",n.getDefaultDateObject()):this.getCultureTimeObject(n.cldrData,""+this.locale)},i.prototype.isNullOrEmpty=function(e){return!!(n.isNullOrUndefined(e)||"string"==typeof e&&""===e.trim())},i.prototype.getCultureTimeObject=function(e,t){return"Gregorian"===this.calendarMode?n.getValue("main."+this.locale+".dates.calendars.gregorian.timeFormats.short",e):n.getValue("main."+this.locale+".dates.calendars.islamic.timeFormats.short",e)},i.prototype.timeHandler=function(t){this.enabled&&(this.isIconClicked=!0,n.Browser.isDevice&&this.inputElement.setAttribute("readonly",""),t.currentTarget===this.timeIcon&&t.preventDefault(),this.enabled&&!this.readonly&&(this.isDatePopupOpen()&&e.prototype.hide.call(this,t),this.isTimePopupOpen()?this.closePopup(t):(this.inputElement.focus(),this.popupCreation("time",t),n.addClass([this.inputWrapper.container],[e1]))),this.isIconClicked=!1)},i.prototype.dateHandler=function(e){this.enabled&&(e.currentTarget===this.inputWrapper.buttons[0]&&e.preventDefault(),this.enabled&&!this.readonly&&(this.isTimePopupOpen()&&this.closePopup(e),n.isNullOrUndefined(this.popupWrapper)||this.popupCreation("date",e)))},i.prototype.show=function(t,i){this.enabled&&this.readonly||!this.enabled||("time"!==t||this.dateTimeWrapper?this.popupObj||(this.isTimePopupOpen()&&this.hide(i),e.prototype.show.call(this),this.popupCreation("date",i)):(this.isDatePopupOpen()&&this.hide(i),this.popupCreation("time",i)))},i.prototype.toggle=function(t){this.isDatePopupOpen()?(e.prototype.hide.call(this,t),this.show("time",null)):this.isTimePopupOpen()?(this.hide(t),e.prototype.show.call(this,null,t),this.popupCreation("date",null)):this.show(null,t)},i.prototype.listCreation=function(){e="Gregorian"===this.calendarMode?this.globalize.parseDate(this.inputElement.value,{format:this.cldrDateTimeFormat(),type:"datetime"}):this.globalize.parseDate(this.inputElement.value,{format:this.cldrDateTimeFormat(),type:"datetime",calendar:"islamic"});var e,i=n.isNullOrUndefined(this.value)?""!==this.inputElement.value?e:new Date:this.value;this.valueWithMinutes=i,this.listWrapper=n.createElement("div",{className:"e-content",attrs:{tabindex:"0"}});var r=this.startTime(i),a=this.endTime(i),s=t.TimePickerBase.createListItems(this.createElement,r,a,this.globalize,this.cldrTimeFormat(),this.step);this.timeCollections=s.collection,this.listTag=s.list,n.attributes(this.listTag,{role:"listbox","aria-hidden":"false",id:this.element.id+"_options"}),n.append([s.list],this.listWrapper),this.wireTimeListEvents(),this.rippleFn=n.rippleEffect(this.listWrapper,{duration:300,selector:"."+e6}),this.liCollections=this.listWrapper.querySelectorAll("."+e6)},i.prototype.popupCreation=function(e,t){n.Browser.isDevice&&this.element.setAttribute("readonly","readonly"),"date"===e?!this.readonly&&this.popupWrapper&&(n.addClass([this.popupWrapper],e0),n.attributes(this.popupWrapper,{id:this.element.id+"_datepopup"})):this.readonly||(this.dateTimeWrapper=n.createElement("div",{className:e$+" e-popup",attrs:{id:this.element.id+"_timepopup",style:"visibility:hidden ; display:block"}}),n.isNullOrUndefined(this.cssClass)||(this.dateTimeWrapper.className+=" "+this.cssClass),!n.isNullOrUndefined(this.step)&&this.step>0&&(this.listCreation(),n.append([this.listWrapper],this.dateTimeWrapper)),document.body.appendChild(this.dateTimeWrapper),this.addTimeSelection(),this.renderPopup(),this.setTimeScrollPosition(),this.openPopup(t),n.Browser.isDevice&&(!n.Browser.isDevice||this.fullScreenMode)||this.popupObject.refreshPosition(this.inputElement),n.Browser.isDevice&&this.fullScreenMode&&(this.dateTimeWrapper.style.left="0px"))},i.prototype.openPopup=function(e){var t=this;this.preventArgs={cancel:!1,popup:this.popupObject,event:e||null};var i=this.preventArgs;this.trigger("open",i,function(e){if(t.preventArgs=e,!t.preventArgs.cancel&&!t.readonly){var i={name:"FadeIn",duration:100};1e3===t.zIndex?t.popupObject.show(new n.Animation(i),t.element):t.popupObject.show(new n.Animation(i),null),n.addClass([t.inputWrapper.container],["e-icon-anim"]),n.attributes(t.inputElement,{"aria-expanded":"true"}),n.attributes(t.inputElement,{"aria-owns":t.inputElement.id+"_options"}),n.EventHandler.add(document,"mousedown touchstart",t.documentClickHandler,t)}})},i.prototype.documentClickHandler=function(e){var t=e.target;!n.isNullOrUndefined(this.popupObject)&&(this.inputWrapper.container.contains(t)&&"mousedown"!==e.type||this.popupObject.element&&this.popupObject.element.contains(t))&&"touchstart"!==e.type&&e.preventDefault(),n.closest(t,'[id="'+(this.popupObject&&this.popupObject.element.id+'"]'))||t===this.inputElement||t===this.timeIcon||n.isNullOrUndefined(this.inputWrapper)||t===this.inputWrapper.container?t!==this.inputElement&&(n.Browser.isDevice||(this.isPreventBlur=document.activeElement===this.inputElement&&(n.Browser.isIE||"edge"===n.Browser.info.name)&&t===this.popupObject.element)):this.isTimePopupOpen()&&(this.hide(e),this.focusOut())},i.prototype.isTimePopupOpen=function(){return!(!this.dateTimeWrapper||!this.dateTimeWrapper.classList.contains(""+e$))},i.prototype.isDatePopupOpen=function(){return!(!this.popupWrapper||!this.popupWrapper.classList.contains(""+e0))},i.prototype.renderPopup=function(){var e=this;if(this.containerStyle=this.inputWrapper.container.getBoundingClientRect(),n.Browser.isDevice&&(this.timeModal=n.createElement("div"),this.timeModal.className=e$+" e-time-modal",document.body.className+=" e-time-overflow",this.timeModal.style.display="block",document.body.appendChild(this.timeModal)),this.popupObject=new r.Popup(this.dateTimeWrapper,{width:this.setPopupWidth(),zIndex:this.zIndex,targetType:"container",collision:n.Browser.isDevice?{X:"fit",Y:"fit"}:{X:"flip",Y:"flip"},relateTo:n.Browser.isDevice?document.body:this.inputWrapper.container,position:n.Browser.isDevice?{X:"center",Y:"center"}:{X:"left",Y:"bottom"},enableRtl:this.enableRtl,offsetY:4,open:function(){e.dateTimeWrapper.style.visibility="visible",n.addClass([e.timeIcon],e3),n.Browser.isDevice||(e.timekeyConfigure=n.extend(e.timekeyConfigure,e.keyConfigs),e.inputEvent=new n.KeyboardEvents(e.inputWrapper.container,{keyAction:e.timeKeyActionHandle.bind(e),keyConfigs:e.timekeyConfigure,eventName:"keydown"}))},close:function(){n.removeClass([e.timeIcon],e3),e.unWireTimeListEvents(),e.inputElement.removeAttribute("aria-activedescendant"),n.remove(e.popupObject.element),e.popupObject.destroy(),e.dateTimeWrapper.innerHTML="",e.listWrapper=e.dateTimeWrapper=void 0,e.inputEvent&&e.inputEvent.destroy()},targetExitViewport:function(){n.Browser.isDevice||e.hide()}}),n.Browser.isDevice&&this.fullScreenMode?(this.popupObject.element.style.display="flex",this.popupObject.element.style.maxHeight="100%",this.popupObject.element.style.width="100%"):this.popupObject.element.style.maxHeight="250px",n.Browser.isDevice&&this.fullScreenMode){var t=n.createElement("div",{className:"e-datetime-mob-popup-wrap"}),i=this.createElement("div",{className:"e-model-header"}),a=this.createElement("span",{className:"e-model-title"});a.textContent="Select time";var s=this.createElement("span",{className:"e-popup-close"});n.EventHandler.add(s,"mousedown touchstart",this.dateTimeCloseHandler,this);var o=this.dateTimeWrapper.querySelector(".e-content");i.appendChild(s),i.appendChild(a),t.appendChild(i),t.appendChild(o),this.dateTimeWrapper.insertBefore(t,this.dateTimeWrapper.firstElementChild)}},i.prototype.dateTimeCloseHandler=function(e){this.hide()},i.prototype.setDimension=function(e){return e="number"==typeof e?n.formatUnit(e):"string"==typeof e?e:"100%"},i.prototype.setPopupWidth=function(){var e=this.setDimension(this.width);return e.indexOf("%")>-1&&(e=(this.containerStyle.width*parseFloat(e)/100).toString()+"px"),e},i.prototype.wireTimeListEvents=function(){n.EventHandler.add(this.listWrapper,"click",this.onMouseClick,this),n.Browser.isDevice||(n.EventHandler.add(this.listWrapper,"mouseover",this.onMouseOver,this),n.EventHandler.add(this.listWrapper,"mouseout",this.onMouseLeave,this))},i.prototype.unWireTimeListEvents=function(){this.listWrapper&&(n.EventHandler.remove(this.listWrapper,"click",this.onMouseClick),n.EventHandler.remove(document,"mousedown touchstart",this.documentClickHandler),n.Browser.isDevice||(n.EventHandler.add(this.listWrapper,"mouseover",this.onMouseOver,this),n.EventHandler.add(this.listWrapper,"mouseout",this.onMouseLeave,this)))},i.prototype.onMouseOver=function(e){var t=n.closest(e.target,"."+e6);this.setTimeHover(t,"e-hover")},i.prototype.onMouseLeave=function(){this.removeTimeHover("e-hover")},i.prototype.setTimeHover=function(e,t){this.enabled&&this.isValidLI(e)&&!e.classList.contains(t)&&(this.removeTimeHover(t),n.addClass([e],t))},i.prototype.getPopupHeight=function(){var e=parseInt("250px",10),t=this.dateTimeWrapper.getBoundingClientRect().height;return n.Browser.isDevice&&this.fullScreenMode?t:t>e?e:t},i.prototype.changeEvent=function(t){e.prototype.changeEvent.call(this,t),(this.value&&this.value.valueOf())!==(this.previousDateTime&&+this.previousDateTime.valueOf())&&(this.valueWithMinutes=this.value,this.setInputValue("date"),this.previousDateTime=this.value&&new Date(+this.value))},i.prototype.updateValue=function(e){this.setInputValue("time"),+this.previousDateTime!=+this.value&&(this.changedArgs={value:this.value,event:e||null,isInteracted:!n.isNullOrUndefined(e),element:this.element},this.addTimeSelection(),this.trigger("change",this.changedArgs),this.previousDateTime=this.previousDate=this.value)},i.prototype.setTimeScrollPosition=function(){var e=this.selectedElement;n.isNullOrUndefined(e)?this.dateTimeWrapper&&this.checkDateValue(this.scrollTo)&&this.setScrollTo():this.findScrollTop(e)},i.prototype.findScrollTop=function(e){var t=this.getPopupHeight(),i=e.nextElementSibling,r=i?i.offsetTop:e.offsetTop,a=e.getBoundingClientRect().height;r+e.offsetTop>t?n.Browser.isDevice&&this.fullScreenMode?this.dateTimeWrapper.querySelector(".e-content").scrollTop=i?r-(t/2+a/2):r:this.dateTimeWrapper.scrollTop=i?r-(t/2+a/2):r:this.dateTimeWrapper.scrollTop=0},i.prototype.setScrollTo=function(){var e,t=this.dateTimeWrapper.querySelectorAll("."+e6);if(t.length>=0){this.scrollInvoked=!0;var i=this.timeCollections[0];e=t[Math.round((this.getDateObject(this.checkDateValue(this.scrollTo)).getTime()-i)/(6e4*this.step))]}else this.dateTimeWrapper.scrollTop=0;n.isNullOrUndefined(e)?this.dateTimeWrapper.scrollTop=0:this.findScrollTop(e)},i.prototype.setInputValue=function(e){if("date"===e)this.inputElement.value=this.previousElementValue=this.getFormattedValue(this.getFullDateTime()),this.setProperties({value:this.getFullDateTime()},!0);else{var t=this.getFormattedValue(new Date(this.timeCollections[this.activeIndex]));a.Input.setValue(t,this.inputElement,this.floatLabelType,this.showClearButton),this.previousElementValue=this.inputElement.value,this.setProperties({value:new Date(this.timeCollections[this.activeIndex])},!0),this.enableMask&&this.createMask()}this.updateIconState()},i.prototype.getFullDateTime=function(){var e=null;return e=this.isDateObject(this.valueWithMinutes)?this.combineDateTime(this.valueWithMinutes):this.previousDate,this.validateMinMaxRange(e)},i.prototype.createMask=function(){this.notify("createMask",{module:"MaskedDateTime"})},i.prototype.combineDateTime=function(e){if(this.isDateObject(e)){var t=this.previousDate.getDate(),i=this.previousDate.getMonth(),n=this.previousDate.getFullYear(),r=e.getHours(),a=e.getMinutes(),s=e.getSeconds();return new Date(n,i,t,r,a,s)}return this.previousDate},i.prototype.onMouseClick=function(e){var t=e.target,i=this.selectedElement=n.closest(t,"."+e6);i&&i.classList.contains(e6)&&(this.timeValue=i.getAttribute("data-value"),this.hide(e)),this.setSelection(i,e)},i.prototype.setSelection=function(e,t){if(this.isValidLI(e)&&!e.classList.contains(e3)){this.selectedElement=e;var i=Array.prototype.slice.call(this.liCollections).indexOf(e);this.activeIndex=i,this.valueWithMinutes=new Date(this.timeCollections[this.activeIndex]),n.addClass([this.selectedElement],e3),this.selectedElement.setAttribute("aria-selected","true"),this.updateValue(t)}},i.prototype.setTimeActiveClass=function(){var e=n.isNullOrUndefined(this.dateTimeWrapper)?this.listWrapper:this.dateTimeWrapper;if(!n.isNullOrUndefined(e)){var t=e.querySelectorAll("."+e6);if(t.length){for(var i=0;i<t.length;i++)if(this.timeCollections[i]===+this.valueWithMinutes){t[i].setAttribute("aria-selected","true"),this.selectedElement=t[i],this.activeIndex=i,this.setTimeActiveDescendant();break}}}},i.prototype.setTimeActiveDescendant=function(){!n.isNullOrUndefined(this.selectedElement)&&this.value?n.attributes(this.inputElement,{"aria-activedescendant":this.selectedElement.getAttribute("id")}):this.inputElement.removeAttribute("aria-activedescendant")},i.prototype.addTimeSelection=function(){this.selectedElement=null,this.removeTimeSelection(),this.setTimeActiveClass(),n.isNullOrUndefined(this.selectedElement)||(n.addClass([this.selectedElement],e3),this.selectedElement.setAttribute("aria-selected","true"))},i.prototype.removeTimeSelection=function(){if(this.removeTimeHover("e-hover"),!n.isNullOrUndefined(this.dateTimeWrapper)){var e=this.dateTimeWrapper.querySelectorAll("."+e3);e.length&&(n.removeClass(e,e3),e[0].removeAttribute("aria-selected"))}},i.prototype.removeTimeHover=function(e){var t=this.getTimeHoverItem(e);t&&t.length&&n.removeClass(t,e)},i.prototype.getTimeHoverItem=function(e){var t,i=n.isNullOrUndefined(this.dateTimeWrapper)?this.listWrapper:this.dateTimeWrapper;return n.isNullOrUndefined(i)||(t=i.querySelectorAll("."+e)),t},i.prototype.isValidLI=function(e){return e&&e.classList.contains(e6)&&!e.classList.contains(e2)},i.prototype.calculateStartEnd=function(e,t,i){var n=e.getDate(),r=e.getMonth(),a=e.getFullYear(),s=e.getHours(),o=e.getMinutes(),l=e.getSeconds(),h=e.getMilliseconds();return t?"starttime"===i?new Date(a,r,n,0,0,0):new Date(a,r,n,23,59,59):new Date(a,r,n,s,o,l,h)},i.prototype.startTime=function(e){var t,i,n=this.min,r=null===e?new Date:e;return+r.getDate()==+n.getDate()&&+r.getMonth()==+n.getMonth()&&+r.getFullYear()==+n.getFullYear()||+new Date(r.getFullYear(),r.getMonth(),r.getDate())<=+new Date(n.getFullYear(),n.getMonth(),n.getDate())?(i=!1,t=this.min):+r<+this.max&&+r>+this.min?(i=!0,t=r):+r>=+this.max&&(i=!0,t=this.max),this.calculateStartEnd(t,i,"starttime")},i.prototype.endTime=function(e){var t,i,n=this.max,r=null===e?new Date:e;return+r.getDate()==+n.getDate()&&+r.getMonth()==+n.getMonth()&&+r.getFullYear()==+n.getFullYear()||+new Date(r.getUTCFullYear(),r.getMonth(),r.getDate())>=+new Date(n.getFullYear(),n.getMonth(),n.getDate())?(i=!1,t=this.max):+r<+this.max&&+r>+this.min?(i=!0,t=r):+r<=+this.min&&(i=!0,t=this.min),this.calculateStartEnd(t,i,"endtime")},i.prototype.hide=function(e){var t=this;if(this.popupObj||this.dateTimeWrapper){this.preventArgs={cancel:!1,popup:this.popupObj||this.popupObject,event:e||null};var i=this.preventArgs;n.isNullOrUndefined(this.popupObj)?this.trigger("close",i,function(i){t.dateTimeCloseEventCallback(e,i)}):this.dateTimeCloseEventCallback(e,i)}else n.Browser.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit()},i.prototype.dateTimeCloseEventCallback=function(t,i){this.preventArgs=i,this.preventArgs.cancel||(this.isDatePopupOpen()?e.prototype.hide.call(this,t):this.isTimePopupOpen()&&(this.closePopup(t),n.removeClass([document.body],"e-time-overflow"),n.Browser.isDevice&&this.timeModal&&(this.timeModal.style.display="none",this.timeModal.outerHTML="",this.timeModal=null),this.setTimeActiveDescendant())),n.Browser.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit()},i.prototype.closePopup=function(e){this.isTimePopupOpen()&&this.popupObject&&(this.popupObject.hide(new n.Animation({name:"FadeOut",duration:100,delay:0})),this.inputWrapper.container.classList.remove("e-icon-anim"),n.attributes(this.inputElement,{"aria-expanded":"false"}),this.inputElement.removeAttribute("aria-owns"),n.EventHandler.remove(document,"mousedown touchstart",this.documentClickHandler))},i.prototype.preRender=function(){this.checkFormat(),this.dateTimeFormat=this.cldrDateTimeFormat(),e.prototype.preRender.call(this),n.removeClass([this.inputElementCopy],[e$])},i.prototype.getProperty=function(e,t){"min"===t?this.setProperties({min:this.validateValue(e.min)},!0):this.setProperties({max:this.validateValue(e.max)},!0)},i.prototype.checkAttributes=function(e){for(var t,i=0,r=e?n.isNullOrUndefined(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["style","name","step","disabled","readonly","value","min","max","placeholder","type"];i<r.length;i++){var a=r[i];if(!n.isNullOrUndefined(this.inputElement.getAttribute(a)))switch(a){case"name":this.inputElement.setAttribute("name",this.inputElement.getAttribute(a));break;case"step":this.step=parseInt(this.inputElement.getAttribute(a),10);break;case"readonly":if(n.isNullOrUndefined(this.dateTimeOptions)||void 0===this.dateTimeOptions.readonly||e){var s="disabled"===this.inputElement.getAttribute(a)||""===this.inputElement.getAttribute(a)||"true"===this.inputElement.getAttribute(a);this.setProperties({readonly:s},!e)}break;case"placeholder":(n.isNullOrUndefined(this.dateTimeOptions)||void 0===this.dateTimeOptions.placeholder||e)&&this.setProperties({placeholder:this.inputElement.getAttribute(a)},!e);break;case"min":(n.isNullOrUndefined(this.dateTimeOptions)||void 0===this.dateTimeOptions.min||e)&&(t=new Date(this.inputElement.getAttribute(a)),this.isNullOrEmpty(t)||isNaN(+t)||this.setProperties({min:t},!e));break;case"disabled":if(n.isNullOrUndefined(this.dateTimeOptions)||void 0===this.dateTimeOptions.enabled||e){var o="disabled"!==this.inputElement.getAttribute(a)&&"true"!==this.inputElement.getAttribute(a)&&""!==this.inputElement.getAttribute(a);this.setProperties({enabled:o},!e)}break;case"value":(n.isNullOrUndefined(this.dateTimeOptions)||void 0===this.dateTimeOptions.value||e)&&(t=new Date(this.inputElement.getAttribute(a)),this.isNullOrEmpty(t)||isNaN(+t)||this.setProperties({value:t},!e));break;case"max":(n.isNullOrUndefined(this.dateTimeOptions)||void 0===this.dateTimeOptions.max||e)&&(t=new Date(this.inputElement.getAttribute(a)),this.isNullOrEmpty(t)||isNaN(+t)||this.setProperties({max:t},!e))}}},i.prototype.requiredModules=function(){var e=[];return this&&e.push({args:[this],member:"islamic"}),this.enableMask&&e.push(this.maskedDateModule()),e},i.prototype.maskedDateModule=function(){return{args:[this],member:"MaskedDateTime"}},i.prototype.getTimeActiveElement=function(){return n.isNullOrUndefined(this.dateTimeWrapper)?null:this.dateTimeWrapper.querySelectorAll("."+e3)},i.prototype.createDateObj=function(e){return e instanceof Date?e:null},i.prototype.getDateObject=function(e){if(!this.isNullOrEmpty(e)){var t=this.createDateObj(e),i=this.valueWithMinutes,r=!n.isNullOrUndefined(i);if(this.checkDateValue(t)){var a=r?i.getDate():e_,s=r?i.getMonth():eG,o=r?i.getFullYear():eK,l=r?i.getHours():eX,h=r?i.getMinutes():eZ,p=r?i.getSeconds():eQ,c=r?i.getMilliseconds():eJ;return this.scrollInvoked?(this.scrollInvoked=!1,new Date(o,s,a,t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())):new Date(o,s,a,l,h,p,c)}}return null},i.prototype.findNextTimeElement=function(e){var t=this.inputElement.value,i=n.isNullOrUndefined(this.valueWithMinutes)?this.createDateObj(t):this.getDateObject(this.valueWithMinutes),r=null,a=this.liCollections.length;if(!n.isNullOrUndefined(this.activeIndex)||!n.isNullOrUndefined(this.checkDateValue(i))){if("home"===e.action)r=+this.createDateObj(new Date(this.timeCollections[0])),this.activeIndex=0;else if("end"===e.action)r=+this.createDateObj(new Date(this.timeCollections[this.timeCollections.length-1])),this.activeIndex=this.timeCollections.length-1;else if("down"===e.action){for(var s=0;s<a;s++)if(+i<this.timeCollections[s]){r=+this.createDateObj(new Date(this.timeCollections[s])),this.activeIndex=s;break}}else for(s=a-1;s>=0;s--)if(+i>this.timeCollections[s]){r=+this.createDateObj(new Date(this.timeCollections[s])),this.activeIndex=s;break}this.selectedElement=this.liCollections[this.activeIndex],this.timeElementValue(n.isNullOrUndefined(r)?null:new Date(r))}},i.prototype.setTimeValue=function(e,t){var i,r,s=this.validateMinMaxRange(t),o=this.createDateObj(s);return this.getFormattedValue(o)!==(n.isNullOrUndefined(this.value)?null:this.getFormattedValue(this.value))?this.valueWithMinutes=n.isNullOrUndefined(o)?null:o:(this.strictMode&&(e=o),this.valueWithMinutes=this.checkDateValue(e)),r=new Date(+this.valueWithMinutes),i="Gregorian"===this.calendarMode?this.globalize.formatDate(r,{format:n.isNullOrUndefined(this.formatString)?this.cldrDateTimeFormat():this.formatString,type:"dateTime",skeleton:"yMd"}):this.globalize.formatDate(r,{format:n.isNullOrUndefined(this.formatString)?this.cldrDateTimeFormat():this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}),this.strictMode||n.isNullOrUndefined(r),a.Input.setValue(i,this.inputElement,this.floatLabelType,this.showClearButton),r},i.prototype.timeElementValue=function(e){if(!n.isNullOrUndefined(this.checkDateValue(e))&&!this.isNullOrEmpty(e)){var t=e instanceof Date?e:this.getDateObject(e);return this.setTimeValue(t,e)}return null},i.prototype.timeKeyHandler=function(e){if(!(n.isNullOrUndefined(this.step)||this.step<=0)){var t=this.timeCollections.length;if(n.isNullOrUndefined(this.getTimeActiveElement())||0===this.getTimeActiveElement().length)this.liCollections.length>0&&(n.isNullOrUndefined(this.value)&&n.isNullOrUndefined(this.activeIndex)?(this.activeIndex=0,this.selectedElement=this.liCollections[0],this.timeElementValue(new Date(this.timeCollections[0]))):this.findNextTimeElement(e));else{var i=void 0;if(e.keyCode>=37&&e.keyCode<=40){var r=40===e.keyCode||39===e.keyCode?++this.activeIndex:--this.activeIndex;this.activeIndex=r=this.activeIndex===t?0:this.activeIndex,this.activeIndex=r=this.activeIndex<0?t-1:this.activeIndex,i=n.isNullOrUndefined(this.timeCollections[r])?this.timeCollections[0]:this.timeCollections[r]}else"home"===e.action?(this.activeIndex=0,i=this.timeCollections[0]):"end"===e.action&&(this.activeIndex=t-1,i=this.timeCollections[t-1]);this.selectedElement=this.liCollections[this.activeIndex],this.timeElementValue(new Date(i))}this.isNavigate=!0,this.setTimeHover(this.selectedElement,"e-navigation"),this.setTimeActiveDescendant(),!this.isTimePopupOpen()||null===this.selectedElement||e&&"click"===e.type||this.setTimeScrollPosition()}},i.prototype.timeKeyActionHandle=function(e){if(this.enabled)switch("right"!==e.action&&"left"!==e.action&&"tab"!==e.action&&e.preventDefault(),e.action){case"up":case"down":case"home":case"end":this.timeKeyHandler(e);break;case"enter":this.isNavigate?(this.selectedElement=this.liCollections[this.activeIndex],this.valueWithMinutes=new Date(this.timeCollections[this.activeIndex]),this.setInputValue("time"),+this.previousDateTime!=+this.value&&(this.changedArgs.value=this.value,this.addTimeSelection(),this.previousDateTime=this.value)):this.updateValue(e),this.hide(e),n.addClass([this.inputWrapper.container],e1),this.isNavigate=!1,e.stopPropagation();break;case"escape":this.hide(e);break;default:this.isNavigate=!1}},i.prototype.inputKeyAction=function(e){"altDownArrow"===e.action&&(this.strictModeUpdate(),this.updateInput(),this.toggle(e))},i.prototype.onPropertyChanged=function(t,i){for(var r=0,s=Object.keys(t);r<s.length;r++){var o=s[r];switch(o){case"value":this.isDynamicValueChanged=!0,this.invalidValueString=null,this.checkInvalidValue(t.value),t.value=this.value,t.value=this.validateValue(t.value),this.enableMask?a.Input.setValue(this.maskedDateValue,this.inputElement,this.floatLabelType,this.showClearButton):a.Input.setValue(this.getFormattedValue(t.value),this.inputElement,this.floatLabelType,this.showClearButton),this.valueWithMinutes=t.value,this.setProperties({value:t.value},!0),this.popupObj&&this.popupUpdate(),this.previousDateTime=new Date(this.inputElement.value),this.updateInput(),this.changeTrigger(null),this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange,this.enableMask&&this.value&&this.notify("createMask",{module:"MaskedDateTime"});break;case"min":case"max":this.getProperty(t,o),this.updateInput();break;case"enableRtl":a.Input.setEnableRtl(this.enableRtl,[this.inputWrapper.container]);break;case"cssClass":n.isNullOrUndefined(i.cssClass)||(i.cssClass=i.cssClass.replace(/\s+/g," ").trim()),n.isNullOrUndefined(t.cssClass)||(t.cssClass=t.cssClass.replace(/\s+/g," ").trim()),a.Input.setCssClass(t.cssClass,[this.inputWrapper.container],i.cssClass),this.dateTimeWrapper&&a.Input.setCssClass(t.cssClass,[this.dateTimeWrapper],i.cssClass);break;case"locale":this.globalize=new n.Internationalization(this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),a.Input.setPlaceholder(this.l10n.getConstant("placeholder"),this.inputElement),this.dateTimeFormat=this.cldrDateTimeFormat(),e.prototype.updateInput.call(this);break;case"htmlAttributes":this.updateHtmlAttributeToElement(),this.updateHtmlAttributeToWrapper(),this.checkAttributes(!0);break;case"format":this.setProperties({format:t.format},!0),this.checkFormat(),this.dateTimeFormat=this.formatString,this.setValue(),this.enableMask&&(this.notify("createMask",{module:"MaskedDateTime"}),this.value||a.Input.setValue(this.maskedDateValue,this.inputElement,this.floatLabelType,this.showClearButton));break;case"placeholder":a.Input.setPlaceholder(t.placeholder,this.inputElement);break;case"enabled":a.Input.setEnabled(this.enabled,this.inputElement),this.enabled||(this.inputElement.tabIndex=-1);break;case"strictMode":this.invalidValueString=null,this.updateInput();break;case"width":this.setWidth(t.width),a.Input.calculateWidth(this.inputElement,this.inputWrapper.container),n.isNullOrUndefined(this.inputWrapper.buttons[0])||n.isNullOrUndefined(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])||"Never"===this.floatLabelType||this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-date-time-icon");break;case"readonly":a.Input.setReadonly(this.readonly,this.inputElement);break;case"floatLabelType":this.floatLabelType=t.floatLabelType,a.Input.removeFloating(this.inputWrapper),a.Input.addFloating(this.inputElement,this.floatLabelType,this.placeholder),n.isNullOrUndefined(this.inputWrapper.buttons[0])||n.isNullOrUndefined(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])||"Never"===this.floatLabelType||this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-date-time-icon");break;case"scrollTo":this.checkDateValue(new Date(this.checkValue(t.scrollTo)))?(this.dateTimeWrapper&&this.setScrollTo(),this.setProperties({scrollTo:this.checkDateValue(new Date(this.checkValue(t.scrollTo)))},!0)):this.setProperties({scrollTo:null},!0);break;case"enableMask":this.enableMask?(this.notify("createMask",{module:"MaskedDateTime"}),a.Input.setValue(this.maskedDateValue,this.inputElement,this.floatLabelType,this.showClearButton)):this.inputElement.value===this.maskedDateValue&&(this.maskedDateValue="",a.Input.setValue(this.maskedDateValue,this.inputElement,this.floatLabelType,this.showClearButton));break;default:e.prototype.onPropertyChanged.call(this,t,i)}this.isDynamicValueChanged||this.hide(null),this.isDynamicValueChanged=!1}},i.prototype.getModuleName=function(){return"datetimepicker"},i.prototype.restoreValue=function(){this.previousDateTime=this.previousDate,this.currentDate=this.value?this.value:new Date,this.valueWithMinutes=this.value,this.previousDate=this.value,this.previousElementValue=this.previousElementValue=n.isNullOrUndefined(this.inputValueCopy)?"":this.getFormattedValue(this.inputValueCopy)},eY([n.Property(null)],i.prototype,"timeFormat",void 0),eY([n.Property(30)],i.prototype,"step",void 0),eY([n.Property(null)],i.prototype,"scrollTo",void 0),eY([n.Property(1e3)],i.prototype,"zIndex",void 0),eY([n.Property(null)],i.prototype,"value",void 0),eY([n.Property(null)],i.prototype,"keyConfigs",void 0),eY([n.Property({})],i.prototype,"htmlAttributes",void 0),eY([n.Property(!1)],i.prototype,"enablePersistence",void 0),eY([n.Property(!0)],i.prototype,"allowEdit",void 0),eY([n.Property(!1)],i.prototype,"isMultiSelection",void 0),eY([n.Property(null)],i.prototype,"values",void 0),eY([n.Property(!0)],i.prototype,"showClearButton",void 0),eY([n.Property(null)],i.prototype,"placeholder",void 0),eY([n.Property(!1)],i.prototype,"strictMode",void 0),eY([n.Property(!1)],i.prototype,"fullScreenMode",void 0),eY([n.Property(null)],i.prototype,"serverTimezoneOffset",void 0),eY([n.Property(new Date(1900,0,1))],i.prototype,"min",void 0),eY([n.Property(new Date(2099,11,31))],i.prototype,"max",void 0),eY([n.Property(null)],i.prototype,"firstDayOfWeek",void 0),eY([n.Property("Gregorian")],i.prototype,"calendarMode",void 0),eY([n.Property("Month")],i.prototype,"start",void 0),eY([n.Property("Month")],i.prototype,"depth",void 0),eY([n.Property(!1)],i.prototype,"weekNumber",void 0),eY([n.Property(!0)],i.prototype,"showTodayButton",void 0),eY([n.Property("Short")],i.prototype,"dayHeaderFormat",void 0),eY([n.Property(!1)],i.prototype,"openOnFocus",void 0),eY([n.Property(!1)],i.prototype,"enableMask",void 0),eY([n.Property({day:"day",month:"month",year:"year",hour:"hour",minute:"minute",second:"second",dayOfTheWeek:"day of the week"})],i.prototype,"maskPlaceholder",void 0),eY([n.Event()],i.prototype,"open",void 0),eY([n.Event()],i.prototype,"close",void 0),eY([n.Event()],i.prototype,"cleared",void 0),eY([n.Event()],i.prototype,"blur",void 0),eY([n.Event()],i.prototype,"focus",void 0),eY([n.Event()],i.prototype,"created",void 0),eY([n.Event()],i.prototype,"destroyed",void 0),i=eY([n.NotifyPropertyChanges],i)}(_),e5="shiftTab",e8=function(){function e(e){this.mask="",this.defaultConstant={day:"day",month:"month",year:"year",hour:"hour",minute:"minute",second:"second",dayOfTheWeek:"day of the week"},this.hiddenMask="",this.validCharacters="dMyhmHfasz",this.isDayPart=!1,this.isMonthPart=!1,this.isYearPart=!1,this.isHourPart=!1,this.isMinutePart=!1,this.isSecondsPart=!1,this.isMilliSecondsPart=!1,this.monthCharacter="",this.periodCharacter="",this.isHiddenMask=!1,this.isComplete=!1,this.isNavigate=!1,this.navigated=!1,this.isBlur=!1,this.formatRegex=/EEEEE|EEEE|EEE|EE|E|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|HH|H|hh|h|mm|m|fff|ff|f|aa|a|ss|s|zzzz|zzz|zz|z|'[^']*'|'[^']*'/g,this.isDeletion=!1,this.isShortYear=!1,this.isDeleteKey=!1,this.isDateZero=!1,this.isMonthZero=!1,this.isYearZero=!1,this.dayTypeCount=0,this.monthTypeCount=0,this.hourTypeCount=0,this.minuteTypeCount=0,this.secondTypeCount=0,this.parent=e,this.dateformat=this.getCulturedFormat(),this.maskDateValue=null!=this.parent.value?new Date(+this.parent.value):new Date,this.maskDateValue.setMonth(0),this.maskDateValue.setHours(0),this.maskDateValue.setMinutes(0),this.maskDateValue.setSeconds(0),this.previousDate=new Date(this.maskDateValue.getFullYear(),this.maskDateValue.getMonth(),this.maskDateValue.getDate(),this.maskDateValue.getHours(),this.maskDateValue.getMinutes(),this.maskDateValue.getSeconds()),this.removeEventListener(),this.addEventListener()}return e.prototype.getModuleName=function(){return"MaskedDateTime"},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on("createMask",this.createMask,this),this.parent.on("setMaskSelection",this.validCharacterCheck,this),this.parent.on("inputHandler",this.maskInputHandler,this),this.parent.on("keyDownHandler",this.maskKeydownHandler,this),this.parent.on("clearHandler",this.clearHandler,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("createMask",this.createMask),this.parent.off("setMaskSelection",this.validCharacterCheck),this.parent.off("inputHandler",this.maskInputHandler),this.parent.off("keyDownHandler",this.maskKeydownHandler),this.parent.off("clearHandler",this.clearHandler))},e.prototype.createMask=function(e){this.isDayPart=this.isMonthPart=this.isYearPart=this.isHourPart=this.isMinutePart=this.isSecondsPart=!1,this.dateformat=this.getCulturedFormat(),this.parent.maskPlaceholder.day&&(this.defaultConstant.day=this.parent.maskPlaceholder.day),this.parent.maskPlaceholder.month&&(this.defaultConstant.month=this.parent.maskPlaceholder.month),this.parent.maskPlaceholder.year&&(this.defaultConstant.year=this.parent.maskPlaceholder.year),this.parent.maskPlaceholder.hour&&(this.defaultConstant.hour=this.parent.maskPlaceholder.hour),this.parent.maskPlaceholder.minute&&(this.defaultConstant.minute=this.parent.maskPlaceholder.minute),this.parent.maskPlaceholder.second&&(this.defaultConstant.second=this.parent.maskPlaceholder.second),this.parent.maskPlaceholder.dayOfTheWeek&&(this.defaultConstant.dayOfTheWeek=this.parent.maskPlaceholder.dayOfTheWeek.toString()),this.getCUltureMaskFormat();var t=this.dateformat.replace(this.formatRegex,this.formatCheck());this.isHiddenMask=!0,this.hiddenMask=this.dateformat.replace(this.formatRegex,this.formatCheck()),this.isHiddenMask=!1,this.previousHiddenMask=this.hiddenMask,this.mask=this.previousValue=t,this.parent.maskedDateValue=this.mask,this.parent.value&&(this.navigated=!0,this.isBlur=e.isBlur,this.setDynamicValue())},e.prototype.getCUltureMaskFormat=function(){this.l10n=new n.L10n(this.parent.moduleName,this.defaultConstant,this.parent.locale),this.objectString=Object.keys(this.defaultConstant);for(var e=0;e<this.objectString.length;e++)this.defaultConstant[this.objectString[e].toString()]=this.l10n.getConstant(this.objectString[e].toString())},e.prototype.validCharacterCheck=function(){var e=this.parent.inputElement.selectionStart;"timepicker"!==this.parent.moduleName&&e===this.hiddenMask.length&&this.mask===this.parent.inputElement.value&&(e=0);for(var t=e,i=e-1;t<this.hiddenMask.length||i>=0;t++,i--){if(t<this.hiddenMask.length&&-1!==this.validCharacters.indexOf(this.hiddenMask[t]))return void this.setSelection(this.hiddenMask[t]);if(i>=0&&-1!==this.validCharacters.indexOf(this.hiddenMask[i]))return void this.setSelection(this.hiddenMask[i])}},e.prototype.setDynamicValue=function(){this.maskDateValue=new Date(+this.parent.value),this.isDayPart=this.isMonthPart=this.isYearPart=this.isHourPart=this.isMinutePart=this.isSecondsPart=!0,this.updateValue(),this.isBlur||this.validCharacterCheck()},e.prototype.setSelection=function(e){for(var t=-1,i=0,n=0;n<this.hiddenMask.length;n++)this.hiddenMask[n]===e&&(i=n+1,-1===t&&(t=n));t<0&&(t=0),this.parent.inputElement.setSelectionRange(t,i)},e.prototype.maskKeydownHandler=function(e){if(this.dayTypeCount=this.monthTypeCount=this.hourTypeCount=this.minuteTypeCount=this.secondTypeCount=0,"Delete"!==e.e.key){if(!(e.e.altKey||e.e.ctrlKey||"ArrowLeft"!==e.e.key&&"ArrowRight"!==e.e.key&&e.e.key!==e5&&"Tab"!==e.e.key&&e.e.action!==e5&&"End"!==e.e.key&&"Home"!==e.e.key)){var t=this.parent.inputElement.selectionStart,i=this.parent.inputElement.selectionEnd,n=this.parent.inputElement.value.length;if(0===t&&i===n&&("Tab"===e.e.key||e.e.action===e5)){var r=e.e.action===e5?i:0;this.parent.inputElement.selectionStart=this.parent.inputElement.selectionEnd=r}if("End"===e.e.key||"Home"===e.e.key){var a="End"===e.e.key?n:0;this.parent.inputElement.selectionStart=this.parent.inputElement.selectionEnd=a}this.navigateSelection("ArrowLeft"===e.e.key||e.e.action===e5||"End"===e.e.key)}if(!(e.e.altKey||e.e.ctrlKey||"ArrowUp"!==e.e.key&&"ArrowDown"!==e.e.key)){t=this.parent.inputElement.selectionStart;var s="";-1!==this.validCharacters.indexOf(this.hiddenMask[t])&&(s=this.hiddenMask[t]),this.dateAlteration("ArrowDown"===e.e.key);var o=this.dateformat.replace(this.formatRegex,this.formatCheck());this.isHiddenMask=!0,this.hiddenMask=this.dateformat.replace(this.formatRegex,this.formatCheck()),this.isHiddenMask=!1,this.previousHiddenMask=this.hiddenMask,this.previousValue=o,this.parent.inputElement.value=o;for(var l=0;l<this.hiddenMask.length;l++)if(s===this.hiddenMask[l]){t=l;break}this.parent.inputElement.selectionStart=t,this.validCharacterCheck()}}else this.isDeleteKey=!0},e.prototype.isPersist=function(){return this.parent.isFocused||this.navigated},e.prototype.differenceCheck=function(){var e=this.parent.inputElement.selectionStart,t=this.parent.inputElement.value,i=this.previousValue.substring(0,e+this.previousValue.length-t.length),n=t.substring(0,e),r=new Date(+this.maskDateValue),a=new Date(r.getFullYear(),r.getMonth()+1,0).getDate();if(0===i.indexOf(n)&&(0===n.length||this.previousHiddenMask[n.length-1]!==this.previousHiddenMask[n.length])){for(var s=n.length;s<i.length;s++)""!==this.previousHiddenMask[s]&&this.validCharacters.indexOf(this.previousHiddenMask[s])>=0&&(this.isDeletion=this.handleDeletion(this.previousHiddenMask[s],!1));if(this.isDeletion)return}switch(this.previousHiddenMask[e-1]){case"d":var o=(this.isDayPart&&r.getDate().toString().length<2&&!this.isPersist()?10*r.getDate():0)+parseInt(n[e-1],10);if(this.isDateZero="0"===n[e-1],this.parent.isFocused=!this.parent.isFocused&&this.parent.isFocused,this.navigated=!this.navigated&&this.navigated,isNaN(o))return;for(s=0;o>a;s++)o=parseInt(o.toString().slice(1),10);if(o>=1){if(r.setDate(o),this.isNavigate=2===o.toString().length,this.previousDate=new Date(r.getFullYear(),r.getMonth(),r.getDate()),r.getMonth()!==this.maskDateValue.getMonth())return;this.isDayPart=!0,this.dayTypeCount=this.dayTypeCount+1}else this.isDayPart=!1,this.dayTypeCount=this.isDateZero?this.dayTypeCount+1:this.dayTypeCount;break;case"M":var l=void 0;if(l=r.getMonth().toString().length<2&&!this.isPersist()?(this.isMonthPart?10*(r.getMonth()+1):0)+parseInt(n[e-1],10):parseInt(n[e-1],10),this.parent.isFocused=!this.parent.isFocused&&this.parent.isFocused,this.navigated=!this.navigated&&this.navigated,this.isMonthZero="0"===n[e-1],isNaN(l)){var h=this.getCulturedValue("months[stand-alone].wide"),p=Object.keys(h);for(this.monthCharacter+=n[e-1].toLowerCase();this.monthCharacter.length>0;){s=1;for(var c=0;c<p.length;c++){if(p[c],0===h[s].toLowerCase().indexOf(this.monthCharacter))return r.setMonth(s-1),this.isMonthPart=!0,void(this.maskDateValue=r);s++}this.monthCharacter=this.monthCharacter.substring(1,this.monthCharacter.length)}}else{for(;l>12;)l=parseInt(l.toString().slice(1),10);if(l>=1){if(r.setMonth(l-1),this.isNavigate=2===l.toString().length,r.getMonth()!==l-1&&(r.setDate(1),r.setMonth(l-1)),this.isDayPart){var d=new Date(this.previousDate.getFullYear(),this.previousDate.getMonth()+1,0).getDate(),u=new Date(r.getFullYear(),r.getMonth()+1,0).getDate();this.previousDate.getDate()===d&&u<=d&&r.setDate(u)}this.previousDate=new Date(r.getFullYear(),r.getMonth(),r.getDate()),this.isMonthPart=!0,this.monthTypeCount=this.monthTypeCount+1}else r.setMonth(0),this.isMonthPart=!1,this.monthTypeCount=this.isMonthZero?this.monthTypeCount+1:this.monthTypeCount}break;case"y":var m=(this.isYearPart&&r.getFullYear().toString().length<4&&!this.isShortYear?10*r.getFullYear():0)+parseInt(n[e-1],10);if(this.isShortYear=!1,this.isYearZero="0"===n[e-1],isNaN(m))return;for(;m>9999;)m=parseInt(m.toString().slice(1),10);m<1?this.isYearPart=!1:(r.setFullYear(m),4===m.toString().length&&(this.isNavigate=!0),this.previousDate=new Date(r.getFullYear(),r.getMonth(),r.getDate()),this.isYearPart=!0);break;case"h":if(this.hour=(this.isHourPart&&(r.getHours()%12||12).toString().length<2&&!this.isPersist()?10*(r.getHours()%12||12):0)+parseInt(n[e-1],10),this.parent.isFocused=!this.parent.isFocused&&this.parent.isFocused,this.navigated=!this.navigated&&this.navigated,isNaN(this.hour))return;for(;this.hour>12;)this.hour=parseInt(this.hour.toString().slice(1),10);r.setHours(12*Math.floor(r.getHours()/12)+this.hour%12),this.isNavigate=2===this.hour.toString().length,this.isHourPart=!0,this.hourTypeCount=this.hourTypeCount+1;break;case"H":if(this.hour=(this.isHourPart&&r.getHours().toString().length<2&&!this.isPersist()?10*r.getHours():0)+parseInt(n[e-1],10),this.parent.isFocused=!this.parent.isFocused&&this.parent.isFocused,this.navigated=!this.navigated&&this.navigated,isNaN(this.hour))return;for(s=0;this.hour>23;s++)this.hour=parseInt(this.hour.toString().slice(1),10);r.setHours(this.hour),this.isNavigate=2===this.hour.toString().length,this.isHourPart=!0,this.hourTypeCount=this.hourTypeCount+1;break;case"m":var f=(this.isMinutePart&&r.getMinutes().toString().length<2&&!this.isPersist()?10*r.getMinutes():0)+parseInt(n[e-1],10);if(this.parent.isFocused=!this.parent.isFocused&&this.parent.isFocused,this.navigated=!this.navigated&&this.navigated,isNaN(f))return;for(s=0;f>59;s++)f=parseInt(f.toString().slice(1),10);r.setMinutes(f),this.isNavigate=2===f.toString().length,this.isMinutePart=!0,this.minuteTypeCount=this.minuteTypeCount+1;break;case"s":var v=(this.isSecondsPart&&r.getSeconds().toString().length<2&&!this.isPersist()?10*r.getSeconds():0)+parseInt(n[e-1],10);if(this.parent.isFocused=!this.parent.isFocused&&this.parent.isFocused,this.navigated=!this.navigated&&this.navigated,isNaN(v))return;for(s=0;v>59;s++)v=parseInt(v.toString().slice(1),10);r.setSeconds(v),this.isNavigate=2===v.toString().length,this.isSecondsPart=!0,this.secondTypeCount=this.secondTypeCount+1;break;case"a":this.periodCharacter+=n[e-1].toLowerCase();var g=this.getCulturedValue("dayPeriods.format.wide"),y=Object.keys(g);for(s=0;this.periodCharacter.length>0;s++)(0===g[y[0]].toLowerCase().indexOf(this.periodCharacter)&&r.getHours()>=12||0===g[y[1]].toLowerCase().indexOf(this.periodCharacter)&&12>r.getHours())&&(r.setHours((r.getHours()+12)%24),this.maskDateValue=r),this.periodCharacter=this.periodCharacter.substring(1,this.periodCharacter.length)}this.maskDateValue=r},e.prototype.formatCheck=function(){var e=this;return function(t){var i,n,r,a=e.getCulturedValue("days[stand-alone].abbreviated"),s=Object.keys(a),o=e.getCulturedValue("days[stand-alone].wide"),l=Object.keys(o),h=e.getCulturedValue("days[stand-alone].narrow"),p=Object.keys(h),c=e.getCulturedValue("months[stand-alone].abbreviated"),d=e.getCulturedValue("months[stand-alone].wide"),u=e.getCulturedValue("dayPeriods.format.wide"),m=Object.keys(u);switch(t){case"ddd":case"dddd":case"d":i=e.isDayPart?e.maskDateValue.getDate().toString():e.defaultConstant.day.toString(),i=e.zeroCheck(e.isDateZero,e.isDayPart,i),2===e.dayTypeCount&&(e.isNavigate=!0,e.dayTypeCount=0);break;case"dd":i=e.isDayPart?e.roundOff(e.maskDateValue.getDate(),2):e.defaultConstant.day.toString(),i=e.zeroCheck(e.isDateZero,e.isDayPart,i),2===e.dayTypeCount&&(e.isNavigate=!0,e.dayTypeCount=0);break;case"E":case"EE":case"EEE":i=e.isDayPart&&e.isMonthPart&&e.isYearPart?a[s[e.maskDateValue.getDay()]].toString():e.defaultConstant.dayOfTheWeek.toString();break;case"EEEE":i=e.isDayPart&&e.isMonthPart&&e.isYearPart?o[l[e.maskDateValue.getDay()]].toString():e.defaultConstant.dayOfTheWeek.toString();break;case"EEEEE":i=e.isDayPart&&e.isMonthPart&&e.isYearPart?h[p[e.maskDateValue.getDay()]].toString():e.defaultConstant.dayOfTheWeek.toString();break;case"M":i=e.isMonthPart?(e.maskDateValue.getMonth()+1).toString():e.defaultConstant.month.toString(),i=e.zeroCheck(e.isMonthZero,e.isMonthPart,i),2===e.monthTypeCount&&(e.isNavigate=!0,e.monthTypeCount=0);break;case"MM":i=e.isMonthPart?e.roundOff(e.maskDateValue.getMonth()+1,2):e.defaultConstant.month.toString(),i=e.zeroCheck(e.isMonthZero,e.isMonthPart,i),2===e.monthTypeCount&&(e.isNavigate=!0,e.monthTypeCount=0);break;case"MMM":i=e.isMonthPart?c[e.maskDateValue.getMonth()+1]:e.defaultConstant.month.toString();break;case"MMMM":i=e.isMonthPart?d[e.maskDateValue.getMonth()+1]:e.defaultConstant.month.toString();break;case"yy":i=e.isYearPart?e.roundOff(e.maskDateValue.getFullYear()%100,2):e.defaultConstant.year.toString(),i=e.zeroCheck(e.isYearZero,e.isYearPart,i),e.isYearPart&&(e.isNavigate=e.isShortYear=2===(e.maskDateValue.getFullYear()%100).toString().length);break;case"y":case"yyyy":i=e.isYearPart?e.roundOff(e.maskDateValue.getFullYear(),4):e.defaultConstant.year.toString(),i=e.zeroCheck(e.isYearZero,e.isYearPart,i);break;case"h":i=e.isHourPart?(e.maskDateValue.getHours()%12||12).toString():e.defaultConstant.hour.toString(),2===e.hourTypeCount&&(e.isNavigate=!0,e.hourTypeCount=0);break;case"hh":i=e.isHourPart?e.roundOff(e.maskDateValue.getHours()%12||12,2):e.defaultConstant.hour.toString(),2===e.hourTypeCount&&(e.isNavigate=!0,e.hourTypeCount=0);break;case"H":i=e.isHourPart?e.maskDateValue.getHours().toString():e.defaultConstant.hour.toString(),2===e.hourTypeCount&&(e.isNavigate=!0,e.hourTypeCount=0);break;case"HH":i=e.isHourPart?e.roundOff(e.maskDateValue.getHours(),2):e.defaultConstant.hour.toString(),2===e.hourTypeCount&&(e.isNavigate=!0,e.hourTypeCount=0);break;case"m":i=e.isMinutePart?e.maskDateValue.getMinutes().toString():e.defaultConstant.minute.toString(),2===e.minuteTypeCount&&(e.isNavigate=!0,e.minuteTypeCount=0);break;case"mm":i=e.isMinutePart?e.roundOff(e.maskDateValue.getMinutes(),2):e.defaultConstant.minute.toString(),2===e.minuteTypeCount&&(e.isNavigate=!0,e.minuteTypeCount=0);break;case"s":i=e.isSecondsPart?e.maskDateValue.getSeconds().toString():e.defaultConstant.second.toString(),2===e.secondTypeCount&&(e.isNavigate=!0,e.secondTypeCount=0);break;case"ss":i=e.isSecondsPart?e.roundOff(e.maskDateValue.getSeconds(),2):e.defaultConstant.second.toString(),2===e.secondTypeCount&&(e.isNavigate=!0,e.secondTypeCount=0);break;case"f":i=Math.floor(e.maskDateValue.getMilliseconds()/100).toString();break;case"ff":n=e.maskDateValue.getMilliseconds(),e.maskDateValue.getMilliseconds()>99&&(n=Math.floor(e.maskDateValue.getMilliseconds()/10)),i=e.roundOff(n,2);break;case"fff":i=e.roundOff(e.maskDateValue.getMilliseconds(),3);break;case"a":case"aa":i=12>e.maskDateValue.getHours()?u[m[0]]:u[m[1]];break;case"z":case"zz":case"zzz":case"zzzz":r={format:t,type:"dateTime",skeleton:"yMd",calendar:e.parent.calendarMode},i=e.parent.globalize.formatDate(e.maskDateValue,r)}if(i=void 0!==i?i:t.slice(1,t.length-1),e.isHiddenMask){for(var f="",v=0;v<i.length;v++)f+=t[0];return f}return i}},e.prototype.maskInputHandler=function(){var e=this.parent.inputElement.selectionStart,t="";-1!==this.validCharacters.indexOf(this.hiddenMask[e])&&(t=this.hiddenMask[e]),this.differenceCheck();var i=this.dateformat.replace(this.formatRegex,this.formatCheck());this.isHiddenMask=!0,this.hiddenMask=this.dateformat.replace(this.formatRegex,this.formatCheck()),this.isDateZero=this.isMonthZero=this.isYearZero=!1,this.isHiddenMask=!1,this.previousHiddenMask=this.hiddenMask,this.previousValue=i,this.parent.inputElement.value=i,this.parent.inputElement.value=i;for(var n=0;n<this.hiddenMask.length;n++)if(t===this.hiddenMask[n]){e=n;break}if(this.parent.inputElement.selectionStart=e,this.validCharacterCheck(),(this.isNavigate||this.isDeletion)&&!this.isDeleteKey){var r=!this.isNavigate;this.isNavigate=this.isDeletion=!1,this.navigateSelection(r)}this.isDeleteKey&&(this.isDeletion=!1),this.isDeleteKey=!1},e.prototype.navigateSelection=function(e){var t=this.parent.inputElement.selectionStart,i=this.parent.inputElement.selectionEnd,n=e?t-1:i;for(this.navigated=!0;n<this.hiddenMask.length&&n>=0;){if(this.validCharacters.indexOf(this.hiddenMask[n])>=0){this.setSelection(this.hiddenMask[n]);break}n+=e?-1:1}},e.prototype.roundOff=function(e,t){for(var i=e.toString(),n=t-i.length,r="",a=0;a<n;a++)r+="0";return r+i},e.prototype.zeroCheck=function(e,t,i){var n=i;return e&&!t&&(n="0"),n},e.prototype.handleDeletion=function(e,t){switch(e){case"d":this.isDayPart=t;break;case"M":this.isMonthPart=t,t||(this.maskDateValue.setMonth(0),this.monthCharacter="");break;case"y":this.isYearPart=t;break;case"H":case"h":this.isHourPart=t,t||(this.periodCharacter="");break;case"m":this.isMinutePart=t;break;case"s":this.isSecondsPart=t;break;default:return!1}return!0},e.prototype.dateAlteration=function(e){var t=this.parent.inputElement.selectionStart,i="";if(-1!==this.validCharacters.indexOf(this.hiddenMask[t])){i=this.hiddenMask[t];var n=new Date(this.maskDateValue.getFullYear(),this.maskDateValue.getMonth(),this.maskDateValue.getDate(),this.maskDateValue.getHours(),this.maskDateValue.getMinutes(),this.maskDateValue.getSeconds());this.previousDate=new Date(this.maskDateValue.getFullYear(),this.maskDateValue.getMonth(),this.maskDateValue.getDate(),this.maskDateValue.getHours(),this.maskDateValue.getMinutes(),this.maskDateValue.getSeconds());var r=e?-1:1;switch(i){case"d":n.setDate(n.getDate()+r);break;case"M":var a=n.getMonth()+r;if(n.setDate(1),n.setMonth(a),this.isDayPart){var s=new Date(this.previousDate.getFullYear(),this.previousDate.getMonth()+1,0).getDate(),o=new Date(n.getFullYear(),n.getMonth()+1,0).getDate();this.previousDate.getDate()===s&&o<=s?n.setDate(o):n.setDate(this.previousDate.getDate())}else n.setDate(this.previousDate.getDate());this.previousDate=new Date(n.getFullYear(),n.getMonth(),n.getDate());break;case"y":n.setFullYear(n.getFullYear()+r);break;case"H":case"h":n.setHours(n.getHours()+r);break;case"m":n.setMinutes(n.getMinutes()+r);break;case"s":n.setSeconds(n.getSeconds()+r);break;case"a":n.setHours((n.getHours()+12)%24)}this.maskDateValue=n.getFullYear()>0?n:this.maskDateValue,-1!==this.validCharacters.indexOf(this.hiddenMask[t])&&this.handleDeletion(this.hiddenMask[t],!0)}},e.prototype.getCulturedValue=function(e){var t=this.parent.locale;return"en"===t||"en-US"===t?n.getValue(e,n.getDefaultDateObject()):n.getValue("main."+t+".dates.calendars.gregorian."+e,n.cldrData)},e.prototype.getCulturedFormat=function(){var e=this.getCulturedValue("dateTimeFormats[availableFormats].yMd").toString();return"datepicker"===this.parent.moduleName&&(e=this.getCulturedValue("dateTimeFormats[availableFormats].yMd").toString(),this.parent.format&&this.parent.formatString&&(e=this.parent.formatString)),"datetimepicker"===this.parent.moduleName&&(e=this.getCulturedValue("dateTimeFormats[availableFormats].yMd").toString(),this.parent.dateTimeFormat&&(e=this.parent.dateTimeFormat)),"timepicker"===this.parent.moduleName&&(e=this.parent.cldrTimeFormat()),e},e.prototype.clearHandler=function(){this.isDayPart=this.isMonthPart=this.isYearPart=this.isHourPart=this.isMinutePart=this.isSecondsPart=!1,this.updateValue()},e.prototype.updateValue=function(){this.monthCharacter=this.periodCharacter="";var e=this.dateformat.replace(this.formatRegex,this.formatCheck());this.isHiddenMask=!0,this.hiddenMask=this.dateformat.replace(this.formatRegex,this.formatCheck()),this.isHiddenMask=!1,this.previousHiddenMask=this.hiddenMask,this.previousValue=e,this.parent.updateInputValue(e)},e.prototype.destroy=function(){this.removeEventListener()},e}(),t.CalendarBase=x,t.Calendar=M,t.Islamic=H,t.DatePicker=_,t.Presets=ek,t.DateRangePicker=ex,t.TimeMaskPlaceholder=eW,t.TimePicker=eq,t.DateTimePicker=e4,t.MaskedDateTime=e8,Object.defineProperty(t,"__esModule",{value:!0})},40344:function(e,t,i){var n,r,a,s,o,l,h,p,c,d,u,m,f,v,g,y,b;/*!
*  filename: ej2-compression.umd.min.js
*  version : 23.1.36
*  Copyright Syncfusion Inc. 2001 - 2020. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/n=i(43523),r=function(){function e(){}return e.bitReverse=function(t){return e.reverseBits[15&t]<<12|e.reverseBits[t>>4&15]<<8|e.reverseBits[t>>8&15]<<4|e.reverseBits[t>>12]},e.bitConverterToInt32=function(e,t){return e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24},e.bitConverterToInt16=function(e,t){return e[t]|e[t+1]<<8},e.bitConverterToUInt32=function(e){var t=new Uint32Array(1);return t[0]=e,t[0]},e.bitConverterToUInt16=function(e,t){var i=new Uint16Array(1);return i[0]=e[t]|e[t+1]<<8,i[0]},e.bitConverterUintToInt32=function(e){var t=new Int32Array(1);return t[0]=e,t[0]},e.bitConverterInt32ToUint=function(e){var t=new Uint32Array(1);return t[0]=e,t[0]},e.bitConverterInt32ToInt16=function(e){var t=new Int16Array(1);return t[0]=e,t[0]},e.byteToString=function(e){for(var t="",i=0;i<e.length;i++)t+=String.fromCharCode(e[i]);return t},e.byteIntToString=function(e){for(var t="",i=0;i<e.length;i++)t+=String.fromCharCode(e[i]);return t},e.arrayCopy=function(e,t,i,n,r){var a=new Uint8Array(e.buffer,t).subarray(0,r);i.set(a,n)},e.mergeArray=function(e,t){var i=new Uint8Array(e.length+t.length);return i.set(e),i.set(t,e.length),i},e.encodedString=function(e){var t,i,n,r,a,s,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=0,h=0,p=3*(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(e.charAt(e.length-1)===o.charAt(64)&&p--,e.charAt(e.length-2)===o.charAt(64)&&p--,p%1!=0)throw Error("Invalid base64 input, bad content length.");for(var c=new Uint8Array(0|p);l<e.length;)t=o.indexOf(e.charAt(l++))<<2|(r=o.indexOf(e.charAt(l++)))>>4,i=(15&r)<<4|(a=o.indexOf(e.charAt(l++)))>>2,n=(3&a)<<6|(s=o.indexOf(e.charAt(l++))),c[h++]=t,64!==a&&(c[h++]=i),64!==s&&(c[h++]=n);return c},e.reverseBits=[0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15],e.huffCodeLengthOrders=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],e}(),a=[],s=function(){function e(){0===a.length&&e.initCrc32Table(),this.files=[],this.level="Normal",n.Save.isMicrosoftBrowser=!!navigator.msSaveBlob}return Object.defineProperty(e.prototype,"items",{get:function(){return this.files},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"compressionLevel",{get:function(){return this.level},set:function(e){this.level=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return void 0===this.files?0:this.files.length},enumerable:!0,configurable:!0}),e.prototype.addItem=function(e){if(null==e)throw Error("ArgumentException: item cannot be null or undefined");for(var t=0;t<this.files.length;t++){var i=this.files[t];if(i instanceof l&&i.name===e.name)throw Error("item with same name already exist")}this.files.push(e)},e.prototype.addDirectory=function(e){if(null==e)throw Error("ArgumentException: string cannot be null or undefined");if(0===e.length)throw Error("ArgumentException: string cannot be empty");if("/"!==e.slice(-1)&&(e+="/"),-1!==this.files.indexOf(e))throw Error("item with same name already exist");this.files.push(e)},e.prototype.getItem=function(e){if(e>=0&&e<this.files.length)return this.files[e]},e.prototype.contains=function(e){return -1!==this.files.indexOf(e)},e.prototype.open=function(t){var i=r.encodedString(t);if(0==i.length)throw new DOMException("stream");var n=new b(i),a=e.findValueFromEnd(n,101010256,65557);if(a<0)throw new DOMException("Can't locate end of central directory record. Possible wrong file format or archive is corrupt.");n.position=a+12;var s=a-e.ReadInt32(n);n.position=s,this.readCentralDirectoryDataAndExtractItems(n)},e.prototype.readCentralDirectoryDataAndExtractItems=function(t){if(null==t)throw new DOMException("stream");for(var i;33639248==e.ReadInt32(t);)(i=new o).readCentralDirectoryData(t);i.readData(t,i.checkCrc),i.decompressData(),this.files.push(new l(i.unCompressedStream.buffer,i.name))},e.prototype.save=function(e){if(null==e||0===e.length)throw Error("ArgumentException: fileName cannot be null or undefined");if(0===this.files.length)throw Error("InvalidOperation");var t=this;return new Promise(function(i,n){t.saveInternal(e,!1).then(function(){i(t)})})},e.prototype.saveAsBlob=function(){var e=this;return new Promise(function(t,i){e.saveInternal("",!0).then(function(e){t(e)})})},e.prototype.saveInternal=function(e,t){var i=this,n=this;return new Promise(function(r,a){for(var s=[],o=0,l=0;l<n.files.length;l++)i.getCompressedData(i.files[l]).then(function(i){o=n.constructZippedObject(s,i,o,i.isDirectory),s.length===n.files.length&&r(n.writeZippedContent(e,s,o,t))})})},e.prototype.destroy=function(){if(void 0!==this.files&&this.files.length>0){for(var e=0;e<this.files.length;e++){var t=this.files[e];t instanceof l&&t.destroy(),t=void 0}this.files=[]}this.files=void 0,this.level=void 0},e.prototype.getCompressedData=function(e){var t=this;return new Promise(function(i,n){if(e instanceof l){var r=new FileReader;r.onload=function(){var n=new Uint8Array(r.result),s={fileName:e.name,crc32Value:0,compressedData:[],compressedSize:void 0,uncompressedDataSize:n.length,compressionType:void 0,isDirectory:!1};if("Normal"===t.level){t.compressData(n,s,a);for(var o=0,l=0;l<s.compressedData.length;l++)o+=s.compressedData[l].length;s.compressedSize=o,s.compressionType="\b\x00"}else s.compressedSize=n.length,s.crc32Value=t.calculateCrc32Value(0,n,a),s.compressionType="\x00\x00",s.compressedData.push(n);i(s)},r.readAsArrayBuffer(e.data)}else i({fileName:e,crc32Value:0,compressedData:"",compressedSize:0,uncompressedDataSize:0,compressionType:"\x00\x00",isDirectory:!0})})},e.prototype.compressData=function(e,t,i){var n=new u(!0),r=0,a=0;do{if(r>=e.length){n.close();break}a=Math.min(e.length,r+16384);var s=e.subarray(r,a);t.crc32Value=this.calculateCrc32Value(t.crc32Value,s,i),n.write(s,0,a-r),r=a}while(r<=e.length);t.compressedData=n.compressedData,n.destroy()},e.prototype.constructZippedObject=function(e,t,i,n){var r=0,a=new Date;n&&(r|=16),r|=0;var s=this.writeHeader(t,a),o="PK\x03\x04"+s+t.fileName,l=this.writeCentralDirectory(t,s,i,r);return e.push({localHeader:o,centralDir:l,compressedData:t}),i+o.length+t.compressedSize},e.prototype.writeHeader=function(e,t){return"\n\x00\x00\x00"+e.compressionType+this.getBytes(this.getModifiedTime(t),2)+this.getBytes(this.getModifiedDate(t),2)+this.getBytes(e.crc32Value,4)+this.getBytes(e.compressedSize,4)+this.getBytes(e.uncompressedDataSize,4)+this.getBytes(e.fileName.length,2)+this.getBytes(0,2)},e.prototype.writeZippedContent=function(e,t,i,r){for(var a=0,s=[],o=0;o<t.length;o++){var l=t[o];for(a+=l.centralDir.length,s.push(this.getArrayBuffer(l.localHeader));l.compressedData.compressedData.length;)s.push(l.compressedData.compressedData.shift().buffer)}for(o=0;o<t.length;o++)s.push(this.getArrayBuffer(t[o].centralDir));s.push(this.getArrayBuffer(this.writeFooter(t,a,i)));var h=new Blob(s,{type:"application/zip"});return r||n.Save.save(e,h),h},e.prototype.writeCentralDirectory=function(e,t,i,n){return"PK\x01\x02"+this.getBytes(20,2)+t+this.getBytes(0,2)+"\x00\x00\x00\x00"+this.getBytes(n,4)+this.getBytes(i,4)+e.fileName},e.prototype.writeFooter=function(e,t,i){return"PK\x05\x06\x00\x00\x00\x00"+this.getBytes(e.length,2)+this.getBytes(e.length,2)+this.getBytes(t,4)+this.getBytes(i,4)+this.getBytes(0,2)},e.prototype.getArrayBuffer=function(e){for(var t=new Uint8Array(e.length),i=0;i<e.length;++i)t[i]=255&e.charCodeAt(i);return t.buffer},e.prototype.getBytes=function(e,t){for(var i="",n=0;n<t;n++)i+=String.fromCharCode(255&e),e>>>=8;return i},e.prototype.getModifiedTime=function(e){var t=e.getHours();return t<<=6,t|=e.getMinutes(),t<<=5,t|=e.getSeconds()/2},e.prototype.getModifiedDate=function(e){var t=e.getFullYear()-1980;return t<<=4,t|=e.getMonth()+1,t<<=5,t|=e.getDate()},e.prototype.calculateCrc32Value=function(e,t,i){e^=-1;for(var n=0;n<t.length;n++)e=e>>>8^i[255&(e^t[n])];return -1^e},e.initCrc32Table=function(){for(var e,t=0;t<256;t++){e=t;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;a[t]=e}},e.findValueFromEnd=function(e,t,i){if(null==e)throw new DOMException("stream");var n=e.inputStream.buffer.byteLength;if(n<4)return -1;var r=new Uint8Array(4),a=Math.max(0,n-i),s=n-1-4;e.position=s,e.read(r,0,4);var o=r[0],l=o==t;if(!l){for(;s>a;)if(o<<=8,s--,e.position=s,(o+=e.readByte())==t){l=!0;break}}return l?s:-1},e.ReadInt32=function(e){var t=new Uint8Array(4);if(4!=e.read(t,0,4))throw new DOMException("Unable to read value at the specified position - end of stream was reached.");return r.bitConverterToInt32(t,0)},e.ReadInt16=function(e){var t=new Uint8Array(2);if(2!=e.read(t,0,2))throw new DOMException("Unable to read value at the specified position - end of stream was reached.");return r.bitConverterToInt16(t,0)},e.ReadUInt16=function(e){var t=new Uint8Array(2);if(2!=e.read(t,0,2))throw new DOMException("Unable to read value at the specified position - end of stream was reached.");return r.bitConverterToInt16(t,0)},e}(),o=function(){function e(){this.headerSignature=67324752,this.checkCrc=!0,this.crc32=0}return e.prototype.readCentralDirectoryData=function(e){e.position+=4,this.options=s.ReadInt16(e),this.compressionMethod=s.ReadInt16(e),this.checkCrc=99!=this.compressionMethod,s.ReadInt32(e),this.crc32=r.bitConverterToUInt32(s.ReadInt32(e)),this.compressedSize=s.ReadInt32(e),this.originalSize=s.ReadInt32(e);var t=s.ReadInt16(e),i=s.ReadInt16(e),n=s.ReadInt16(e);e.position+=4,this.externalAttributes=s.ReadInt32(e),this.localHeaderOffset=s.ReadInt32(e);var a=new Uint8Array(t);e.read(a,0,t);var o=r.byteToString(a);o=o.replace("\\","/"),this.name=o,e.position+=i+n,0!=this.options&&(this.options=0)},e.prototype.readData=function(e,t){if(0==e.length)throw new DOMException("stream");e.position=this.localHeaderOffset,this.checkCrc=t,this.readLocalHeader(e),this.readCompressedData(e)},e.prototype.decompressData=function(){8==this.compressionMethod&&this.originalSize>0&&this.decompressDataOld()},e.prototype.decompressDataOld=function(){var e,t=new y(this.compressedStream,!0);this.originalSize>0&&(e=new b(new Uint8Array(this.originalSize)));for(var i,n=new Uint8Array(4096);(i=t.read(n,0,4096))>0;)e.write(n.subarray(0,i),0,i);this.unCompressedStream=e.toByteArray(),this.checkCrc},e.prototype.readLocalHeader=function(e){if(0==e.length)throw new DOMException("stream");if(s.ReadInt32(e)!=this.headerSignature)throw new DOMException("Can't find local header signature - wrong file format or file is corrupt.");e.position+=22;var t=s.ReadInt16(e),i=s.ReadUInt16(e);if(99==this.compressionMethod);else if(i>2){if(e.position+=t,23==s.ReadInt16(e))throw new DOMException("UnSupported");e.position+=i-2}else e.position+=t+i},e.prototype.readCompressedData=function(e){var t;if(this.compressedSize>0){var i=this.compressedSize;t=new b(new Uint8Array(i));for(var n=new Uint8Array(4096);i>0;){var r=Math.min(i,4096);if(e.read(n,0,r)!=r)throw new DOMException("End of file reached - wrong file format or file is corrupt.");t.write(n.subarray(0,r),0,r),i-=r}this.compressedStream=new Uint8Array(t.inputStream)}else this.compressedSize<0||this.compressedSize},e}(),l=function(){function e(e,t){if(null==e)throw Error("ArgumentException: data cannot be null or undefined");if(null==t)throw Error("ArgumentException: string cannot be null or undefined");if(0===t.length)throw Error("string cannot be empty");this.data=e,this.name=t}return Object.defineProperty(e.prototype,"dataStream",{get:function(){return this.decompressedStream},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.fileName},set:function(e){this.fileName=e},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this.fileName=void 0,this.data=void 0},e}(),h=new Int16Array(286),p=new Uint8Array(286),c=new Int16Array(30),d=new Uint8Array(30),u=function(){function e(t){this.pendingBuffer=new Uint8Array(65536),this.pendingBufLength=0,this.pendingBufCache=0,this.pendingBufBitsInCache=0,this.bufferPosition=0,this.extraBits=0,this.currentHash=0,this.matchStart=0,this.matchLength=0,this.matchPrevAvail=!1,this.blockStart=0,this.stringStart=0,this.lookAhead=0,this.totalBytesIn=0,this.inputOffset=0,this.inputEnd=0,this.windowSize=32768,this.windowMask=this.windowSize-1,this.hashSize=32768,this.hashMask=this.hashSize-1,this.hashShift=Math.floor(17/3),this.maxDist=this.windowSize-262,this.checkSum=1,this.noWrap=!1,e.isHuffmanTreeInitiated||(e.initHuffmanTree(),e.isHuffmanTreeInitiated=!0),this.treeLiteral=new m(this,286,257,15),this.treeDistances=new m(this,30,1,15),this.treeCodeLengths=new m(this,19,4,7),this.arrDistances=new Uint16Array(16384),this.arrLiterals=new Uint8Array(16384),this.stream=[],this.dataWindow=new Uint8Array(2*this.windowSize),this.hashHead=new Int16Array(this.hashSize),this.hashPrevious=new Int16Array(this.windowSize),this.blockStart=this.stringStart=1,this.noWrap=t,t||this.writeZLibHeader()}return Object.defineProperty(e.prototype,"compressedData",{get:function(){return this.stream},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"getCompressedString",{get:function(){var e="";if(void 0!==this.stream)for(var t=0;t<this.stream.length;t++)e+=String.fromCharCode.apply(null,this.stream[t]);return e},enumerable:!0,configurable:!0}),e.prototype.write=function(e,t,i){if(null==e)throw Error("ArgumentException: data cannot null or undefined");var r=t+i;if(0>t||t>r||r>e.length)throw Error("ArgumentOutOfRangeException: Offset or length is incorrect");if("string"==typeof e){var a=new n.Encoding(!1);a.type="Utf8",r=t+(e=new Uint8Array(a.getBytes(e,0,e.length))).length}for(this.inputBuffer=e,this.inputOffset=t,this.inputEnd=r,this.noWrap||(this.checkSum=f.checksumUpdate(this.checkSum,this.inputBuffer,this.inputOffset,r));this.inputEnd!==this.inputOffset||0!==this.pendingBufLength;)this.pendingBufferFlush(),this.compressData(!1)},e.prototype.writeZLibHeader=function(){var e;e=30784,e+=31-e%31,this.pendingBufferWriteShortBytes(e)},e.prototype.pendingBufferWriteShortBytes=function(e){this.pendingBuffer[this.pendingBufLength++]=e>>8,this.pendingBuffer[this.pendingBufLength++]=e},e.prototype.compressData=function(e){var t;do{this.fillWindow();var i=e&&this.inputEnd===this.inputOffset;t=this.compressSlow(i,e)}while(0===this.pendingBufLength&&t);return t},e.prototype.compressSlow=function(e,t){if(this.lookAhead<262&&!e)return!1;for(;this.lookAhead>=262||e;){if(0===this.lookAhead)return this.lookAheadCompleted(t);this.stringStart>=2*this.windowSize-262&&this.slideWindow();var i=this.matchStart,n=this.matchLength;if(this.lookAhead>=3&&this.discardMatch(),n>=3&&this.matchLength<=n?n=this.matchPreviousBest(i,n):this.matchPreviousAvailable(),this.bufferPosition>=16384)return this.huffmanIsFull(t)}return!0},e.prototype.discardMatch=function(){var e=this.insertString();0!==e&&this.stringStart-e<=this.maxDist&&this.findLongestMatch(e)&&this.matchLength<=5&&3===this.matchLength&&this.stringStart-this.matchStart>4096&&(this.matchLength=2)},e.prototype.matchPreviousAvailable=function(){this.matchPrevAvail&&this.huffmanTallyLit(255&this.dataWindow[this.stringStart-1]),this.matchPrevAvail=!0,this.stringStart++,this.lookAhead--},e.prototype.matchPreviousBest=function(e,t){this.huffmanTallyDist(this.stringStart-1-e,t),t-=2;do this.stringStart++,this.lookAhead--,this.lookAhead>=3&&this.insertString();while(--t>0);return this.stringStart++,this.lookAhead--,this.matchPrevAvail=!1,this.matchLength=2,t},e.prototype.lookAheadCompleted=function(e){return this.matchPrevAvail&&this.huffmanTallyLit(255&this.dataWindow[this.stringStart-1]),this.matchPrevAvail=!1,this.huffmanFlushBlock(this.dataWindow,this.blockStart,this.stringStart-this.blockStart,e),this.blockStart=this.stringStart,!1},e.prototype.huffmanIsFull=function(e){var t=this.stringStart-this.blockStart;this.matchPrevAvail&&t--;var i=e&&0===this.lookAhead&&!this.matchPrevAvail;return this.huffmanFlushBlock(this.dataWindow,this.blockStart,t,i),this.blockStart+=t,!i},e.prototype.fillWindow=function(){for(this.stringStart>=this.windowSize+this.maxDist&&this.slideWindow();this.lookAhead<262&&this.inputOffset<this.inputEnd;){var e=2*this.windowSize-this.lookAhead-this.stringStart;e>this.inputEnd-this.inputOffset&&(e=this.inputEnd-this.inputOffset),this.dataWindow.set(this.inputBuffer.subarray(this.inputOffset,this.inputOffset+e),this.stringStart+this.lookAhead),this.inputOffset+=e,this.totalBytesIn+=e,this.lookAhead+=e}this.lookAhead>=3&&this.updateHash()},e.prototype.slideWindow=function(){this.dataWindow.set(this.dataWindow.subarray(this.windowSize,this.windowSize+this.windowSize),0),this.matchStart-=this.windowSize,this.stringStart-=this.windowSize,this.blockStart-=this.windowSize;for(var e=0;e<this.hashSize;++e){var t=65535&this.hashHead[e];this.hashHead[e]=t>=this.windowSize?t-this.windowSize:0}for(e=0;e<this.windowSize;e++)t=65535&this.hashPrevious[e],this.hashPrevious[e]=t>=this.windowSize?t-this.windowSize:0},e.prototype.insertString=function(){var e,t=(this.currentHash<<this.hashShift^this.dataWindow[this.stringStart+2])&this.hashMask;return this.hashPrevious[this.stringStart&this.windowMask]=e=this.hashHead[t],this.hashHead[t]=this.stringStart,this.currentHash=t,65535&e},e.prototype.findLongestMatch=function(e){var t,i=4096,n=258,r=this.stringStart,a=this.stringStart+this.matchLength,s=Math.max(this.matchLength,2),o=Math.max(this.stringStart-this.maxDist,0),l=this.stringStart+258-1,h=this.dataWindow[a-1],p=this.dataWindow[a],c=this.dataWindow;s>=32&&(i>>=2),n>this.lookAhead&&(n=this.lookAhead);do if(c[e+s]===p&&c[e+s-1]===h&&c[e]===c[r]&&c[e+1]===c[r+1]){for(t=e+2,r+=2;c[++r]===c[++t]&&c[++r]===c[++t]&&c[++r]===c[++t]&&c[++r]===c[++t]&&c[++r]===c[++t]&&c[++r]===c[++t]&&c[++r]===c[++t]&&c[++r]===c[++t]&&r<l;);if(r>a){if(this.matchStart=e,a=r,(s=r-this.stringStart)>=n)break;h=c[a-1],p=c[a]}r=this.stringStart}while((e=65535&this.hashPrevious[e&this.windowMask])>o&&0!=--i);return this.matchLength=Math.min(s,this.lookAhead),this.matchLength>=3},e.prototype.updateHash=function(){this.currentHash=this.dataWindow[this.stringStart]<<this.hashShift^this.dataWindow[this.stringStart+1]},e.prototype.huffmanTallyLit=function(e){return this.arrDistances[this.bufferPosition]=0,this.arrLiterals[this.bufferPosition++]=e,this.treeLiteral.codeFrequencies[e]++,this.bufferPosition>=16384},e.prototype.huffmanTallyDist=function(e,t){this.arrDistances[this.bufferPosition]=e,this.arrLiterals[this.bufferPosition++]=t-3;var i=this.huffmanLengthCode(t-3);this.treeLiteral.codeFrequencies[i]++,i>=265&&i<285&&(this.extraBits+=Math.floor((i-261)/4));var n=this.huffmanDistanceCode(e-1);return this.treeDistances.codeFrequencies[n]++,n>=4&&(this.extraBits+=Math.floor(n/2-1)),this.bufferPosition>=16384},e.prototype.huffmanFlushBlock=function(e,t,i,n){this.treeLiteral.codeFrequencies[256]++,this.treeLiteral.buildTree(),this.treeDistances.buildTree(),this.treeLiteral.calculateBLFreq(this.treeCodeLengths),this.treeDistances.calculateBLFreq(this.treeCodeLengths),this.treeCodeLengths.buildTree();for(var r=4,a=18;a>r;a--)this.treeCodeLengths.codeLengths[m.huffCodeLengthOrders[a]]>0&&(r=a+1);var s=14+3*r+this.treeCodeLengths.getEncodedLength()+this.treeLiteral.getEncodedLength()+this.treeDistances.getEncodedLength()+this.extraBits,o=this.extraBits;for(a=0;a<286;a++)o+=this.treeLiteral.codeFrequencies[a]*p[a];for(a=0;a<30;a++)o+=this.treeDistances.codeFrequencies[a]*d[a];s>=o&&(s=o),t>=0&&i+4<s>>3?this.huffmanFlushStoredBlock(e,t,i,n):(s==o?(this.pendingBufferWriteBits(2+(n?1:0),3),this.treeLiteral.setStaticCodes(h,p),this.treeDistances.setStaticCodes(c,d)):(this.pendingBufferWriteBits(4+(n?1:0),3),this.huffmanSendAllTrees(r)),this.huffmanCompressBlock(),this.huffmanReset())},e.prototype.huffmanFlushStoredBlock=function(e,t,i,n){this.pendingBufferWriteBits(0+(n?1:0),3),this.pendingBufferAlignToByte(),this.pendingBufferWriteShort(i),this.pendingBufferWriteShort(~i),this.pendingBufferWriteByteBlock(e,t,i),this.huffmanReset()},e.prototype.huffmanLengthCode=function(e){if(255===e)return 285;for(var t=257;e>=8;)t+=4,e>>=1;return t+e},e.prototype.huffmanDistanceCode=function(e){for(var t=0;e>=4;)t+=2,e>>=1;return t+e},e.prototype.huffmanSendAllTrees=function(e){this.treeCodeLengths.buildCodes(),this.treeLiteral.buildCodes(),this.treeDistances.buildCodes(),this.pendingBufferWriteBits(this.treeLiteral.treeLength-257,5),this.pendingBufferWriteBits(this.treeDistances.treeLength-1,5),this.pendingBufferWriteBits(e-4,4);for(var t=0;t<e;t++)this.pendingBufferWriteBits(this.treeCodeLengths.codeLengths[m.huffCodeLengthOrders[t]],3);this.treeLiteral.writeTree(this.treeCodeLengths),this.treeDistances.writeTree(this.treeCodeLengths)},e.prototype.huffmanReset=function(){this.bufferPosition=0,this.extraBits=0,this.treeLiteral.reset(),this.treeDistances.reset(),this.treeCodeLengths.reset()},e.prototype.huffmanCompressBlock=function(){for(var e=0;e<this.bufferPosition;e++){var t=255&this.arrLiterals[e],i=this.arrDistances[e];if(0!=i--){var n=this.huffmanLengthCode(t);this.treeLiteral.writeCodeToStream(n);var r=Math.floor((n-261)/4);r>0&&r<=5&&this.pendingBufferWriteBits(t&(1<<r)-1,r);var a=this.huffmanDistanceCode(i);this.treeDistances.writeCodeToStream(a),(r=Math.floor(a/2-1))>0&&this.pendingBufferWriteBits(i&(1<<r)-1,r)}else this.treeLiteral.writeCodeToStream(t)}this.treeLiteral.writeCodeToStream(256)},e.prototype.pendingBufferWriteBits=function(e,t){var i=new Uint32Array(1);i[0]=this.pendingBufCache|e<<this.pendingBufBitsInCache,this.pendingBufCache=i[0],this.pendingBufBitsInCache+=t,this.pendingBufferFlushBits()},e.prototype.pendingBufferFlush=function(e){if(this.pendingBufferFlushBits(),this.pendingBufLength>0){var t=new Uint8Array(this.pendingBufLength);t.set(this.pendingBuffer.subarray(0,this.pendingBufLength),0),this.stream.push(t)}this.pendingBufLength=0},e.prototype.pendingBufferFlushBits=function(){for(var e=0;this.pendingBufBitsInCache>=8&&this.pendingBufLength<65536;)this.pendingBuffer[this.pendingBufLength++]=this.pendingBufCache,this.pendingBufCache>>=8,this.pendingBufBitsInCache-=8,e++;return e},e.prototype.pendingBufferWriteByteBlock=function(e,t,i){var n=e.subarray(t,t+i);this.pendingBuffer.set(n,this.pendingBufLength),this.pendingBufLength+=i},e.prototype.pendingBufferWriteShort=function(e){this.pendingBuffer[this.pendingBufLength++]=e,this.pendingBuffer[this.pendingBufLength++]=e>>8},e.prototype.pendingBufferAlignToByte=function(){this.pendingBufBitsInCache>0&&(this.pendingBuffer[this.pendingBufLength++]=this.pendingBufCache),this.pendingBufCache=0,this.pendingBufBitsInCache=0},e.initHuffmanTree=function(){for(var e=0;e<144;)h[e]=m.bitReverse(48+e<<8),p[e++]=8;for(;e<256;)h[e]=m.bitReverse(256+e<<7),p[e++]=9;for(;e<280;)h[e]=m.bitReverse(-256+e<<9),p[e++]=7;for(;e<286;)h[e]=m.bitReverse(-88+e<<8),p[e++]=8;for(e=0;e<30;e++)c[e]=m.bitReverse(e<<11),d[e]=5},e.prototype.close=function(){do this.pendingBufferFlush(!0),this.compressData(!0)||(this.pendingBufferFlush(!0),this.pendingBufferAlignToByte(),this.noWrap||(this.pendingBufferWriteShortBytes(this.checkSum>>16),this.pendingBufferWriteShortBytes(65535&this.checkSum)),this.pendingBufferFlush(!0));while(this.inputEnd!==this.inputOffset||0!==this.pendingBufLength)},e.prototype.destroy=function(){this.stream=[],this.stream=void 0,this.pendingBuffer=void 0,this.treeLiteral=void 0,this.treeDistances=void 0,this.treeCodeLengths=void 0,this.arrLiterals=void 0,this.arrDistances=void 0,this.hashHead=void 0,this.hashPrevious=void 0,this.dataWindow=void 0,this.inputBuffer=void 0,this.pendingBufLength=void 0,this.pendingBufCache=void 0,this.pendingBufBitsInCache=void 0,this.bufferPosition=void 0,this.extraBits=void 0,this.currentHash=void 0,this.matchStart=void 0,this.matchLength=void 0,this.matchPrevAvail=void 0,this.blockStart=void 0,this.stringStart=void 0,this.lookAhead=void 0,this.totalBytesIn=void 0,this.inputOffset=void 0,this.inputEnd=void 0,this.windowSize=void 0,this.windowMask=void 0,this.hashSize=void 0,this.hashMask=void 0,this.hashShift=void 0,this.maxDist=void 0,this.checkSum=void 0,this.noWrap=void 0},e.isHuffmanTreeInitiated=!1,e}(),m=function(){function e(e,t,i,n){this.writer=e,this.codeMinCount=i,this.maxLength=n,this.codeFrequency=new Uint16Array(t),this.lengthCount=new Int32Array(n)}return Object.defineProperty(e.prototype,"treeLength",{get:function(){return this.codeCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"codeLengths",{get:function(){return this.codeLength},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"codeFrequencies",{get:function(){return this.codeFrequency},enumerable:!0,configurable:!0}),e.prototype.setStaticCodes=function(e,t){var i=new Int16Array(e.length);i.set(e,0),this.codes=i;var n=new Uint8Array(t.length);n.set(t,0),this.codeLength=n},e.prototype.reset=function(){for(var e=0;e<this.codeFrequency.length;e++)this.codeFrequency[e]=0;this.codes=void 0,this.codeLength=void 0},e.prototype.writeCodeToStream=function(e){this.writer.pendingBufferWriteBits(65535&this.codes[e],this.codeLength[e])},e.prototype.buildCodes=function(){var t=new Int32Array(this.maxLength);this.codes=new Int16Array(this.codeCount);for(var i=0,n=0;n<this.maxLength;n++)t[n]=i,i+=this.lengthCount[n]<<15-n;for(var r=0;r<this.codeCount;r++){var a=this.codeLength[r];a>0&&(this.codes[r]=e.bitReverse(t[a-1]),t[a-1]+=1<<16-a)}},e.bitReverse=function(t){return e.reverseBits[15&t]<<12|e.reverseBits[t>>4&15]<<8|e.reverseBits[t>>8&15]<<4|e.reverseBits[t>>12]},e.prototype.getEncodedLength=function(){for(var e=0,t=0;t<this.codeFrequency.length;t++)e+=this.codeFrequency[t]*this.codeLength[t];return e},e.prototype.calculateBLFreq=function(e){for(var t,i,n,r=-1,a=0;a<this.codeCount;){n=1;var s=this.codeLength[a];for(0===s?(t=138,i=3):(t=6,i=3,r!==s&&(e.codeFrequency[s]++,n=0)),r=s,a++;a<this.codeCount&&r===this.codeLength[a]&&(a++,!(++n>=t)););n<i?e.codeFrequency[r]+=n:0!==r?e.codeFrequency[16]++:n<=10?e.codeFrequency[17]++:e.codeFrequency[18]++}},e.prototype.writeTree=function(e){for(var t,i,n,r=-1,a=0;a<this.codeCount;){n=1;var s=this.codeLength[a];for(0===s?(t=138,i=3):(t=6,i=3,r!==s&&(e.writeCodeToStream(s),n=0)),r=s,a++;a<this.codeCount&&r===this.codeLength[a]&&(a++,!(++n>=t)););if(n<i)for(;n-- >0;)e.writeCodeToStream(r);else 0!==r?(e.writeCodeToStream(16),this.writer.pendingBufferWriteBits(n-3,2)):n<=10?(e.writeCodeToStream(17),this.writer.pendingBufferWriteBits(n-3,3)):(e.writeCodeToStream(18),this.writer.pendingBufferWriteBits(n-11,7))}},e.prototype.buildTree=function(){for(var e=this.codeFrequency.length,t=new Int32Array(e),i=0,n=0,r=0;r<e;r++){var a=this.codeFrequency[r];if(0!==a){for(var s=i++,o=0;s>0&&this.codeFrequency[t[o=Math.floor((s-1)/2)]]>a;)t[s]=t[o],s=o;t[s]=r,n=r}}for(;i<2;)t[i++]=n<2?++n:0;this.codeCount=Math.max(n+1,this.codeMinCount);for(var l=i,h=new Int32Array(4*i-2),p=new Int32Array(2*i-1),c=0;c<i;c++){var d=t[c],u=2*c;h[u]=d,h[u+1]=-1,p[c]=this.codeFrequency[d]<<8,t[c]=c}this.constructHuffmanTree(t,i,p,l,h),this.buildLength(h)},e.prototype.constructHuffmanTree=function(e,t,i,n,r){do{for(var a=e[0],s=e[--t],o=i[s],l=0,h=1;h<t;)h+1<t&&i[e[h]]>i[e[h+1]]&&h++,e[l]=e[h],h=2*(l=h)+1;for(;(h=l)>0&&i[e[l=Math.floor((h-1)/2)]]>o;)e[h]=e[l];e[h]=s;var p=e[0];r[2*(s=n++)]=a,r[2*s+1]=p;var c=Math.min(255&i[a],255&i[p]);for(i[s]=o=i[a]+i[p]-c+1,l=0,h=1;h<t;)h+1<t&&i[e[h]]>i[e[h+1]]&&h++,e[l]=e[h],h=2*(l=h)+1;for(;(h=l)>0&&i[e[l=Math.floor((h-1)/2)]]>o;)e[h]=e[l];e[h]=s}while(t>1)},e.prototype.buildLength=function(e){this.codeLength=new Uint8Array(this.codeFrequency.length);for(var t=Math.floor(e.length/2),i=Math.floor((t+1)/2),n=0,r=0;r<this.maxLength;r++)this.lengthCount[r]=0;if(0!==(n=this.calculateOptimalCodeLength(e,n,t))){var a=this.maxLength-1;do{for(;0===this.lengthCount[--a];);do this.lengthCount[a]--,this.lengthCount[++a]++,n-=1<<this.maxLength-1-a;while(n>0&&a<this.maxLength-1)}while(n>0);this.recreateTree(e,n,i)}},e.prototype.recreateTree=function(e,t,i){this.lengthCount[this.maxLength-1]+=t,this.lengthCount[this.maxLength-2]-=t;for(var n=2*i,r=this.maxLength;0!==r;r--)for(var a=this.lengthCount[r-1];a>0;){var s=2*e[n++];-1===e[s+1]&&(this.codeLength[e[s]]=r,a--)}},e.prototype.calculateOptimalCodeLength=function(e,t,i){var n=new Int32Array(i);n[i-1]=0;for(var r=i-1;r>=0;r--){var a=2*r+1;if(-1!==e[a])(s=n[r]+1)>this.maxLength&&(s=this.maxLength,t++),n[e[a-1]]=n[e[a]]=s;else{var s=n[r];this.lengthCount[s-1]++,this.codeLength[e[a-1]]=n[r]}}return t},e.reverseBits=[0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15],e.huffCodeLengthOrders=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],e}(),f=function(){function e(){}return e.checksumUpdate=function(t,i,n,r){var a=new Uint32Array(1);a[0]=t;for(var s=a[0],o=a[0]=65535&s,l=a[0]=s>>e.checkSumBitOffset;r>0;){var h=Math.min(r,e.checksumIterationCount);for(r-=h;--h>=0;)l+=o+=a[0]=255&i[n++];o%=e.checksumBase,l%=e.checksumBase}return l<<e.checkSumBitOffset|o},e.checkSumBitOffset=16,e.checksumBase=65521,e.checksumIterationCount=3800,e}(),v=function(){function e(e){this.buildTree(e)}return e.init=function(){var t,i;for(t=new Uint8Array(288),i=0;i<144;)t[i++]=8;for(;i<256;)t[i++]=9;for(;i<280;)t[i++]=7;for(;i<288;)t[i++]=8;for(e.m_LengthTree=new e(t),t=new Uint8Array(32),i=0;i<32;)t[i++]=5;e.m_DistanceTree=new e(t)},e.prototype.prepareData=function(t,i,n){for(var r=0,a=512,s=0;s<n.length;s++){var o=n[s];o>0&&t[o]++}for(var l=1;l<=e.MAX_BITLEN;l++)i[l]=r,r+=t[l]<<16-l,l>=10&&(a+=(130944&r)-(130944&i[l])>>16-l);return{code:r,treeSize:a}},e.prototype.treeFromData=function(t,i,n,a,s){for(var o=new Int16Array(s),l=512,h=e.MAX_BITLEN;h>=10;h--)for(var p=130944&a,c=130944&(a-=t[h]<<16-h);c<p;c+=128)o[r.bitReverse(c)]=r.bitConverterInt32ToInt16(-l<<4|h),l+=1<<h-9;for(c=0;c<n.length;c++)if(0!=(h=n[c])){a=i[h];var d=r.bitReverse(a);if(h<=9)do o[d]=r.bitConverterInt32ToInt16(c<<4|h),d+=1<<h;while(d<512);else{var u=o[511&d],m=1<<(15&u);u=-(u>>4);do o[u|d>>9]=r.bitConverterInt32ToInt16(c<<4|h),d+=1<<h;while(d<m)}i[h]=a+(1<<16-h)}return o},e.prototype.buildTree=function(e){var t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n=this.prepareData(t,i,e);this.m_Tree=this.treeFromData(t,i,e,n.code,n.treeSize)},e.prototype.unpackSymbol=function(e){var t,i;if((t=e.peekBits(9))>=0){if((i=this.m_Tree[t])>=0)return e.skipBits(15&i),i>>4;var n=-(i>>4),r=15&i;if((t=e.peekBits(r))>=0)return i=this.m_Tree[n|t>>9],e.skipBits(15&i),i>>4;var a=e.availableBits;return t=e.peekBits(a),(15&(i=this.m_Tree[n|t>>9]))<=a?(e.skipBits(15&i),i>>4):-1}return a=e.availableBits,t=e.peekBits(a),(i=this.m_Tree[t])>=0&&(15&i)<=a?(e.skipBits(15&i),i>>4):-1},Object.defineProperty(e,"lengthTree",{get:function(){return this.m_LengthTree},enumerable:!0,configurable:!0}),Object.defineProperty(e,"distanceTree",{get:function(){return this.m_DistanceTree},enumerable:!0,configurable:!0}),e.MAX_BITLEN=15,e}(),g=function(){function e(){}return e.ChecksumUpdate=function(e,t,i,n){for(var r=e,a=65535&r,s=r>>this.DEF_CHECKSUM_BIT_OFFSET;n>0;){var o=Math.min(n,this.DEF_CHECKSUM_ITERATIONSCOUNT);for(n-=o;--o>=0;)s+=a+=255&t[i++];a%=this.DEF_CHECKSUM_BASE,s%=this.DEF_CHECKSUM_BASE}e=s<<this.DEF_CHECKSUM_BIT_OFFSET|a},e.ChecksumGenerate=function(t,i,n){return e.ChecksumUpdate(1,t,i,n),1},e.DEF_CHECKSUM_BIT_OFFSET=16,e.DEF_CHECKSUM_BASE=65521,e.DEF_CHECKSUM_ITERATIONSCOUNT=3800,e}(),y=function(){function e(e,t){if(this.defaultHuffmanDynamicTree=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],this.DEF_HEADER_METHOD_MASK=3840,this.DEF_HEADER_INFO_MASK=61440,this.DEF_HEADER_FLAGS_FCHECK=31,this.DEF_HEADER_FLAGS_FDICT=32,this.DEF_HEADER_FLAGS_FLEVEL=192,this.DEF_MAX_WINDOW_SIZE=65535,this.DEF_HUFFMAN_REPEATE_MAX=258,this.DEF_HUFFMAN_END_BLOCK=256,this.DEF_HUFFMAN_LENGTH_MINIMUMCODE=257,this.DEF_HUFFMAN_LENGTH_MAXIMUMCODE=285,this.DEF_HUFFMAN_DISTANCE_MAXIMUMCODE=29,this.mCheckSum=1,this.tBuffer=0,this.mBufferedBits=0,this.mTempBuffer=new Uint8Array(4),this.mBlockBuffer=new Uint8Array(this.DEF_MAX_WINDOW_SIZE),this.mbNoWrap=!1,this.mWindowSize=0,this.mCurrentPosition=0,this.mDataLength=0,this.mbCanReadNextBlock=!0,this.mbCanReadMoreData=!0,this.mbCheckSumRead=!1,null==e)throw new DOMException("stream");if(0===e.length)throw new DOMException("stream - string can not be empty");v.init(),this.mInputStream=new b(e),this.mbNoWrap=t,this.mbNoWrap||this.readZLibHeader(),this.decodeBlockHeader()}return Object.defineProperty(e.prototype,"mBuffer",{get:function(){return this.tBuffer},set:function(e){this.tBuffer=e},enumerable:!0,configurable:!0}),e.prototype.peekBits=function(e){if(e<0)throw new DOMException("count","Bits count can not be less than zero.");if(e>32)throw new DOMException("count","Count of bits is too large.");return(this.mBufferedBits<e&&this.fillBuffer(),this.mBufferedBits<e)?-1:r.bitConverterUintToInt32(this.mBuffer&~(4294967295<<e))},e.prototype.fillBuffer=function(){var e=4-(this.mBufferedBits>>3)-(0!=(7&this.mBufferedBits)?1:0);if(0!==e)for(var t=this.mInputStream.read(this.mTempBuffer,0,e),i=0;i<t;i++)this.mBuffer=r.bitConverterInt32ToUint(this.mBuffer|r.bitConverterInt32ToUint(this.mTempBuffer[i]<<this.mBufferedBits)),this.mBufferedBits+=8},e.prototype.skipBits=function(e){if(e<0)throw new DOMException("count","Bits count can not be less than zero.");0!==e&&(e>=this.mBufferedBits?(e-=this.mBufferedBits,this.mBufferedBits=0,this.mBuffer=0,e>0&&(this.mInputStream.position+=e>>3,(e&=7)>0&&(this.fillBuffer(),this.mBufferedBits-=e,this.mBuffer=r.bitConverterInt32ToUint(this.mBuffer>>>e)))):(this.mBufferedBits-=e,this.mBuffer=r.bitConverterInt32ToUint(this.mBuffer>>>e)))},Object.defineProperty(e.prototype,"availableBits",{get:function(){return this.mBufferedBits},enumerable:!0,configurable:!0}),e.prototype.readZLibHeader=function(){var e=this.readInt16();if(-1===e)throw new DOMException("Header of the stream can not be read.");if(e%31!=0)throw new DOMException("Header checksum illegal");if(2048!=(e&this.DEF_HEADER_METHOD_MASK))throw new DOMException("Unsupported compression method.");if(this.mWindowSize=Math.pow(2,8+((e&this.DEF_HEADER_INFO_MASK)>>12)),this.mWindowSize>65535)throw new DOMException("Unsupported window size for deflate compression method.");if((e&this.DEF_HEADER_FLAGS_FDICT)>>5==1)throw new DOMException("Custom dictionary is not supported at the moment.")},e.prototype.readInt16=function(){return this.readBits(8)<<8|this.readBits(8)},e.prototype.readBits=function(e){var t=this.peekBits(e);return -1===t?-1:(this.mBufferedBits-=e,this.mBuffer=r.bitConverterInt32ToUint(this.mBuffer>>>e),t)},e.prototype.decodeBlockHeader=function(){if(!this.mbCanReadNextBlock)return!1;var e=this.readBits(1);if(-1===e)return!1;var t=this.readBits(2);if(-1===t)return!1;switch(this.mbCanReadNextBlock=0===e,t){case 0:this.mbReadingUncompressed=!0,this.skipToBoundary();var i=this.readInt16Inverted();if(i!==(65535^this.readInt16Inverted()))throw new DOMException("Wrong block length.");if(i>65535)throw new DOMException("Uncompressed block length can not be more than 65535.");this.mUncompressedDataLength=i,this.mCurrentLengthTree=null,this.mCurrentDistanceTree=null;break;case 1:this.mbReadingUncompressed=!1,this.mUncompressedDataLength=-1,this.mCurrentLengthTree=v.lengthTree,this.mCurrentDistanceTree=v.distanceTree;break;case 2:this.mbReadingUncompressed=!1,this.mUncompressedDataLength=-1;var n=this.decodeDynamicHeader(this.mCurrentLengthTree,this.mCurrentDistanceTree);this.mCurrentLengthTree=n.lengthTree,this.mCurrentDistanceTree=n.distanceTree;break;default:throw new DOMException("Wrong block type.")}return!0},e.prototype.skipToBoundary=function(){this.mBuffer=r.bitConverterInt32ToUint(this.mBuffer>>>(7&this.mBufferedBits)),this.mBufferedBits&=-8},e.prototype.readInt16Inverted=function(){return this.readBits(8)|this.readBits(8)<<8},e.prototype.decodeDynamicHeader=function(t,i){var n=0,r=this.readBits(5),a=this.readBits(5),s=this.readBits(4);if(r<0||a<0||s<0)throw new DOMException("Wrong dynamic huffman codes.");var o=(r+=257)+(a+=1),l=new Uint8Array(o),h=new Uint8Array(19);s+=4;for(var p=0;p<s;){var c=this.readBits(3);if(c<0)throw new DOMException("Wrong dynamic huffman codes.");h[this.defaultHuffmanDynamicTree[p++]]=c}var d=new v(h);for(p=0;;){var u=void 0,m=!1;for(u=d.unpackSymbol(this);0==(-16&u);){if(l[p++]=n=u,p===o){m=!0;break}u=d.unpackSymbol(this)}if(m)break;if(u<0)throw new DOMException("Wrong dynamic huffman codes.");if(u>=17)n=0;else if(0===p)throw new DOMException("Wrong dynamic huffman codes.");var f=u-16,g=e.DEF_HUFFMAN_DYNTREE_REPEAT_BITS[f],y=this.readBits(g);if(y<0||p+(y+=e.DEF_HUFFMAN_DYNTREE_REPEAT_MINIMUMS[f])>o)throw new DOMException("Wrong dynamic huffman codes.");for(;y-- >0;)l[p++]=n;if(p===o)break}var b=new Uint8Array(r);return b.set(l.subarray(0,r),0),t=new v(b),b=l.slice(r,r+a),{lengthTree:t,distanceTree:new v(b)}},e.prototype.readHuffman=function(){for(var t=this.DEF_MAX_WINDOW_SIZE-(this.mDataLength-this.mCurrentPosition),i=!1,n={};t>=this.DEF_HUFFMAN_REPEATE_MAX;){var r,a=void 0;for(a=this.mCurrentLengthTree.unpackSymbol(this);0==(-256&a);){if(n[(this.mDataLength+1)%this.DEF_MAX_WINDOW_SIZE]=a,this.mBlockBuffer[this.mDataLength++%this.DEF_MAX_WINDOW_SIZE]=a,i=!0,--t<this.DEF_HUFFMAN_REPEATE_MAX)return!0;a=this.mCurrentLengthTree.unpackSymbol(this)}if(a<this.DEF_HUFFMAN_LENGTH_MINIMUMCODE){if(a<this.DEF_HUFFMAN_END_BLOCK)throw new DOMException("Illegal code.");var s=i?1:0;return this.mbCanReadMoreData=this.decodeBlockHeader(),!!(s|(this.mbCanReadMoreData?1:0))}if(a>this.DEF_HUFFMAN_LENGTH_MAXIMUMCODE)throw new DOMException("Illegal repeat code length.");var o=e.DEF_HUFFMAN_REPEAT_LENGTH_BASE[a-this.DEF_HUFFMAN_LENGTH_MINIMUMCODE],l=e.DEF_HUFFMAN_REPEAT_LENGTH_EXTENSION[a-this.DEF_HUFFMAN_LENGTH_MINIMUMCODE];if(l>0){if((r=this.readBits(l))<0)throw new DOMException("Wrong data.");o+=r}if((a=this.mCurrentDistanceTree.unpackSymbol(this))<0||a>e.DEF_HUFFMAN_REPEAT_DISTANCE_BASE.length)throw new DOMException("Wrong distance code.");var h=e.DEF_HUFFMAN_REPEAT_DISTANCE_BASE[a];if((l=e.DEF_HUFFMAN_REPEAT_DISTANCE_EXTENSION[a])>0){if((r=this.readBits(l))<0)throw new DOMException("Wrong data.");h+=r}for(var p=0;p<o;p++)this.mBlockBuffer[this.mDataLength%this.DEF_MAX_WINDOW_SIZE]=this.mBlockBuffer[(this.mDataLength-h)%this.DEF_MAX_WINDOW_SIZE],this.mDataLength++,t--;i=!0}return i},e.prototype.read=function(e,t,i){if(null==e)throw new DOMException("buffer");if(t<0||t>e.length-1)throw new DOMException("offset","Offset does not belong to specified buffer.");if(i<0||i>e.length-t)throw new DOMException("length","Length is illegal.");for(var n=i;i>0;)if(this.mCurrentPosition<this.mDataLength){var a=this.mCurrentPosition%this.DEF_MAX_WINDOW_SIZE,s=Math.min(this.DEF_MAX_WINDOW_SIZE-a,this.mDataLength-this.mCurrentPosition);s=Math.min(s,i),r.arrayCopy(this.mBlockBuffer,a,e,t,s),this.mCurrentPosition+=s,t+=s,i-=s}else{if(!this.mbCanReadMoreData)break;var o=this.mDataLength;if(this.mbReadingUncompressed){if(0===this.mUncompressedDataLength){if(this.mbCanReadMoreData=this.decodeBlockHeader(),!this.mbCanReadMoreData)break}else{a=this.mDataLength%this.DEF_MAX_WINDOW_SIZE;var l=Math.min(this.mUncompressedDataLength,this.DEF_MAX_WINDOW_SIZE-a),h=this.readPackedBytes(this.mBlockBuffer,a,l);if(l!==h)throw new DOMException("Not enough data in stream.");this.mUncompressedDataLength-=h,this.mDataLength+=h}}else if(!this.readHuffman())break;if(o<this.mDataLength){var p=o%this.DEF_MAX_WINDOW_SIZE,c=this.mDataLength%this.DEF_MAX_WINDOW_SIZE;p<c?this.checksumUpdate(this.mBlockBuffer,p,c-p):(this.checksumUpdate(this.mBlockBuffer,p,this.DEF_MAX_WINDOW_SIZE-p),c>0&&this.checksumUpdate(this.mBlockBuffer,0,c))}}if(!this.mbCanReadMoreData&&!this.mbCheckSumRead&&!this.mbNoWrap){if(this.skipToBoundary(),this.readInt32()!==this.mCheckSum)throw new DOMException("Checksum check failed.");this.mbCheckSumRead=!0}return n-i},e.prototype.readPackedBytes=function(e,t,i){if(null==e)throw new DOMException("buffer");if(t<0||t>e.length-1)throw new DOMException('offset", "Offset can not be less than zero or greater than buffer length - 1.');if(i<0)throw new DOMException('length", "Length can not be less than zero.');if(i>e.length-t)throw new DOMException('length", "Length is too large.');if(0!=(7&this.mBufferedBits))throw new DOMException("Reading of unalligned data is not supported.");if(0===i)return 0;for(var n=0;this.mBufferedBits>0&&i>0;)e[t++]=this.mBuffer,this.mBufferedBits-=8,this.mBuffer=r.bitConverterInt32ToUint(this.mBuffer>>>8),i--,n++;return i>0&&(n+=this.mInputStream.read(e,t,i)),n},e.prototype.readInt32=function(){var e=this.readBits(8)<<24;return e|=this.readBits(8)<<16,e|=this.readBits(8)<<8,e|=this.readBits(8)},e.prototype.checksumUpdate=function(e,t,i){g.ChecksumUpdate(this.mCheckSum,e,t,i)},e.DEF_REVERSE_BITS=new Uint8Array([0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15]),e.DEF_HUFFMAN_DYNTREE_REPEAT_MINIMUMS=[3,3,11],e.DEF_HUFFMAN_DYNTREE_REPEAT_BITS=[2,3,7],e.DEF_HUFFMAN_REPEAT_LENGTH_BASE=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],e.DEF_HUFFMAN_REPEAT_LENGTH_EXTENSION=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],e.DEF_HUFFMAN_REPEAT_DISTANCE_BASE=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],e.DEF_HUFFMAN_REPEAT_DISTANCE_EXTENSION=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],e}(),b=function(){function e(e){this.position=0,this.inputStream=new Uint8Array(e.buffer)}return Object.defineProperty(e.prototype,"length",{get:function(){return this.inputStream.buffer.byteLength},enumerable:!0,configurable:!0}),e.prototype.read=function(e,t,i){var n=new Uint8Array(this.inputStream.buffer,this.position+t).subarray(0,i);return e.set(n,0),this.position+=n.byteLength,n.byteLength},e.prototype.readByte=function(){return this.inputStream[this.position++]},e.prototype.write=function(e,t,i){r.arrayCopy(e,0,this.inputStream,this.position+t,i),this.position+=i},e.prototype.toByteArray=function(){return new Uint8Array(this.inputStream.buffer)},e}(),t.ZipArchive=s,t.ZipArchiveItemHelper=o,t.ZipArchiveItem=l,t.CompressedStreamWriter=u,t.CompressorHuffmanTree=m,t.ChecksumCalculator=f,t.Utils=r,t.DecompressorHuffmanTree=v,t.CompressedStreamReader=y,t.Stream=b,Object.defineProperty(t,"__esModule",{value:!0})},15794:function(e,t,i){var n,r,a,s,o,l,h,p,c,d,u,m,f,v,g,y,b,D,w,C,T,E,S,O,k,x,M,V,I,A,N,P,H,R,F,U,L,B;/*!
*  filename: ej2-excel-export.umd.min.js
*  version : 23.1.36
*  Copyright Syncfusion Inc. 2001 - 2020. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/n=i(40344),r=i(38295),h=function(){this.numFmtId=0,this.backColor="none",this.fontName="Calibri",this.fontSize=10.5,this.fontColor="#000000",this.italic=!1,this.bold=!1,this.underline=!1,this.strikeThrough=!1,this.wrapText=!1,this.hAlign="general",this.vAlign="bottom",this.indent=0,this.rotation=0,this.numberFormat="GENERAL",this.type="datetime",this.borders=new g,this.isGlobalStyle=!1},p=function(){this.sz=10.5,this.name="Calibri",this.u=!1,this.b=!1,this.i=!1,this.color="FF000000",this.strike=!1},c=function(){},d=function(){},u=function(){},m=function(){this.name="Normal",this.xfId=0},f=function(e,t){this.numFmtId=e,this.formatCode=t},v=function(e,t){this.lineStyle=e,this.color=t},g=function(){this.left=new v("none","#FFFFFF"),this.right=new v("none","#FFFFFF"),this.top=new v("none","#FFFFFF"),this.bottom=new v("none","#FFFFFF"),this.all=new v("none","#FFFFFF")},a=function(e,t){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},y=function(e,t){function i(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},b=function(){},D=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.add=function(e){for(var i=!1,n=0,r=0;r<t.length;r++)t[r].index===e.index&&(t[n]=e,i=!0),n++;i||t.push(e)},t}return y(t,e),t}(Array),w=function(){},s=function(e,t){return(s=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},C=function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},T=function(){},E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.add=function(e){t.push(e)},t}return C(t,e),t}(Array),o=function(e,t){return(o=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},S=function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},O=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return S(t,e),t}(Array),l=function(e,t){return(l=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},k=function(e,t){function i(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},x=function(){this.isSummaryRowBelow=!0,this.showGridLines=!0,this.enableRtl=!1},M=function(){},V=function(){},I=function(){},A=function(){},N=function(e){function t(){var i=null!==e&&e.apply(this,arguments)||this;return i.add=function(e){for(var n=!1,r=0,a=0;a<i.length;a++){var s=i[a];if(t.isIntersecting(s,e)){var o=new A;o.x=Math.min(s.x,e.x),o.y=Math.min(s.Y,e.y),o.width=Math.max(s.Width+s.X,e.width+e.x),o.height=Math.max(s.Height+s.Y,e.height+e.y),o.ref=i[r].ref.split(":")[0]+":"+e.ref.split(":")[1],i[r]=o,e=o,n=!0}r++}return n||i.push(e),e},i}return k(t,e),t.isIntersecting=function(e,t){return e.x<=t.x+t.width&&t.x<=e.x+e.width&&e.y<=t.y+t.height&&t.y<=e.y+e.height},t}(Array),P=function(){},H=function(){function e(e){this.intl=new r.Internationalization}return e.prototype.getFormatFunction=function(e,t){return e.type?(t&&(e.isServerRendered=!0),this.intl.getDateFormat(e)):this.intl.getNumberFormat(e)},e.prototype.toView=function(e,t){var i=e;return r.isNullOrUndefined(t)||r.isNullOrUndefined(e)||(i=t(e)),i},e.prototype.displayText=function(e,t,i){return this.toView(e,this.getFormatFunction(t,i))},e}(),R=function(){function e(e,t){if(this.csvStr="",this.separator=null==t?",":t,this.formatter=new H,this.isMicrosoftBrowser=!!navigator.msSaveBlob,null!==e.isServerRendered&&void 0!==e.isServerRendered&&(this.isServerRendered=e.isServerRendered),null!==e.styles&&void 0!==e.styles){this.globalStyles=new Map;for(var i=0;i<e.styles.length;i++)void 0!==e.styles[i].name&&void 0!==e.styles[i].numberFormat&&this.globalStyles.set(e.styles[i].name,e.styles[i].numberFormat)}null!==e.worksheets&&void 0!==e.worksheets&&this.parseWorksheet(e.worksheets[0])}return e.prototype.parseWorksheet=function(e){null!==e.rows&&void 0!==e.rows&&this.parseRows(e.rows)},e.prototype.parseRows=function(e){for(var t=1,i=0;i<e.length;i++){var n=e[i];if(null===n.index||void 0===n.index)throw Error("Row index is missing.");for(;t<n.index;)this.csvStr+="\r\n",t++;this.parseRow(n)}},e.prototype.parseRow=function(e){if(null!==e.cells&&void 0!==e.cells)for(var t=1,i=0,n=e.cells;i<n.length;i++){var r=n[i];if(null===r.index||void 0===r.index)throw Error("Cell index is missing.");for(;t<r.index;)this.csvStr+=this.separator,t++;this.parseCell(r)}},e.prototype.parseCell=function(e){var t=this.csvStr;if(void 0!==e.value){if(e.value instanceof Date){if(void 0!==e.style&&void 0!==e.style.numberFormat)try{t+=this.parseCellValue(this.formatter.displayText(e.value,{type:"dateTime",skeleton:e.style.numberFormat},this.isServerRendered))}catch(i){t+=this.parseCellValue(this.formatter.displayText(e.value,{type:"dateTime",format:e.style.numberFormat},this.isServerRendered))}else if(void 0!==e.style&&void 0!==e.style.name&&this.globalStyles.has(e.style.name))try{t+=this.parseCellValue(this.formatter.displayText(e.value,{type:"dateTime",skeleton:this.globalStyles.get(e.style.name)},this.isServerRendered))}catch(i){t+=this.parseCellValue(this.formatter.displayText(e.value,{type:"dateTime",format:this.globalStyles.get(e.style.name)},this.isServerRendered))}else t+=e.value}else"boolean"==typeof e.value?t+=e.value?"TRUE":"FALSE":"number"==typeof e.value?void 0!==e.style&&void 0!==e.style.numberFormat?t+=this.parseCellValue(this.formatter.displayText(e.value,{format:e.style.numberFormat},this.isServerRendered)):void 0!==e.style&&void 0!==e.style.name&&this.globalStyles.has(e.style.name)?t+=this.parseCellValue(this.formatter.displayText(e.value,{format:this.globalStyles.get(e.style.name)},this.isServerRendered)):t+=e.value:t+=this.parseCellValue(e.value)}this.csvStr=t},e.prototype.parseCellValue=function(e){for(var t="",i=e.length,n=0;n<i;n++)'"'===e[n]?t+=e[n].replace('"','""'):t+=e[n];return -1!==(e=t).indexOf(this.separator)||-1!==e.indexOf("\n")||-1!==e.indexOf('"')?e='"'+e+'"':e},e.prototype.save=function(e){if(this.buffer=new Blob(["\uFEFF"+this.csvStr],{type:"text/csv;charset=UTF-8"}),this.isMicrosoftBrowser)navigator.msSaveBlob(this.buffer,e);else{var t=window.URL.createObjectURL(this.buffer),i=document.createElementNS("http://www.w3.org/1999/xhtml","a");i.download=e,i.href=t;var n=document.createEvent("MouseEvent");n.initEvent("click",!0,!0),i.dispatchEvent(n),setTimeout(function(){window.URL.revokeObjectURL(t)})}},e.prototype.saveAsBlob=function(){return new Blob(["\uFEFF"+this.csvStr],{type:"text/csv;charset=UTF-8"})},e}(),F=function(){function e(){this.parts=[]}return e.prototype.append=function(e){this.parts.push(e),this.blob=void 0},e.prototype.getBlob=function(){return new Blob(this.parts,{type:"text/plain"})},e}(),U=function(){},L=function(){function e(e,t,i,a,s){if(this.sharedStringCount=0,this.unitsProportions=[1.28,.32,96,96/25.4,96/2.54,1,96/72,96/72/12700],this.hyperlinkStyle={fontColor:"#0000FF",underline:!0},this.culture=void 0!==i?i:"en-US",this.currency=void 0!==a?a:"USD",this.intl=new r.Internationalization(this.culture),this.mSaveType=t,"xlsx"===t){if(this.mArchive=new n.ZipArchive,this.sharedString=[],this.mFonts=[],this.mBorders=[],this.mStyles=[],this.printTitles=new Map,this.cellStyles=new Map,this.mNumFmt=new Map,this.mFills=new Map,this.mStyles.push(new h),this.mFonts.push(new p),this.cellStyles.set("Normal",new m),this.mCellXfs=[],this.mCellStyleXfs=[],this.drawingCount=0,this.imageCount=0,null!==e.styles&&void 0!==e.styles){this.globalStyles=new Map;for(var o=0;o<e.styles.length;o++)if(void 0!==e.styles[o].name){if(this.cellStyles.has(e.styles[o].name))throw Error("Style name "+e.styles[o].name+" is already existed");var l=new h;l.isGlobalStyle=!0,this.parserCellStyle(e.styles[o],l,"none");var c=new m;c.name=l.name,c.xfId=l.index-1,this.cellStyles.set(c.name,c);var d={};void 0!==e.styles[o].numberFormat&&(d.format=e.styles[o].numberFormat),void 0!==e.styles[o].type?d.type=e.styles[o].type:d.type="datetime",void 0!==d.format&&this.globalStyles.set(e.styles[o].name,d)}}if(null===e.worksheets||void 0===e.worksheets)throw Error("Worksheet is expected.");this.parserWorksheets(e.worksheets),null!==e.builtInProperties&&void 0!==e.builtInProperties&&(this.builtInProperties=new B,this.parserBuiltInProperties(e.builtInProperties,this.builtInProperties))}else this.csvHelper=new R(e,s)}return e.prototype.parserBuiltInProperties=function(e,t){null!==e.author&&void 0!==e.author&&(t.author=e.author),null!==e.comments&&void 0!==e.comments&&(t.comments=e.comments),null!==e.category&&void 0!==e.category&&(t.category=e.category),null!==e.company&&void 0!==e.company&&(t.company=e.company),null!==e.manager&&void 0!==e.manager&&(t.manager=e.manager),null!==e.subject&&void 0!==e.subject&&(t.subject=e.subject),null!==e.title&&void 0!==e.title&&(t.title=e.title),null!==e.createdDate&&void 0!==e.createdDate&&(t.createdDate=e.createdDate),null!==e.modifiedDate&&void 0!==e.modifiedDate&&(t.modifiedDate=e.modifiedDate),null!==e.tags&&void 0!==e.tags&&(t.tags=e.tags),null!==e.status&&void 0!==e.status&&(t.status=e.status)},e.prototype.parserWorksheets=function(e){this.worksheets=new O;for(var t=e.length,i=0;i<t;i++){var n=e[i],r=new x;this.mergeCells=new N,this.mergedCellsStyle=new Map,this.mHyperLinks=[],null!==n.name&&void 0!==n.name?r.name=n.name:r.name="Sheet"+(i+1).toString(),null!==n.enableRtl&&void 0!==n.enableRtl&&(r.enableRtl=n.enableRtl),r.index=i+1,null!==n.columns&&void 0!==n.columns&&this.parserColumns(n.columns,r),null!==n.rows&&void 0!==n.rows&&this.parserRows(n.rows,r),null!==n.showGridLines&&void 0!==n.showGridLines&&(r.showGridLines=n.showGridLines),null!==n.freeze&&void 0!==n.freeze&&this.parserFreezePanes(n.freeze,r),null!==n.printTitle&&void 0!==n.printTitle&&this.parserPrintTitle(n.printTitle,r),void 0!==n.pageSetup&&void 0!==n.pageSetup.isSummaryRowBelow&&(r.isSummaryRowBelow=n.pageSetup.isSummaryRowBelow),void 0!==n.images&&this.parserImages(n.images,r),null!==n.autoFilters&&void 0!==n.autoFilters&&this.parseFilters(n.autoFilters,r),r.index=i+1,r.mergeCells=this.mergeCells,r.hyperLinks=this.mHyperLinks,this.worksheets.push(r)}},e.prototype.mergeOptions=function(e,t){var i={};return this.applyProperties(e,i),this.applyProperties(t,i),i},e.prototype.applyProperties=function(e,t){for(var i=Object.keys(e),n=0;n<i.length;n++)"name"!==i[n]&&(t[i[n]]=e[i[n]])},e.prototype.getCellName=function(e,t){return this.getColumnName(t)+e.toString()},e.prototype.getColumnName=function(e){e--;var t="";do{var i=e%26;e=e/26-1,t=String.fromCharCode(65+i)+t}while(e>=0);return t},e.prototype.parserPrintTitle=function(e,t){var i,n,r="";if(null!==e.fromRow&&void 0!==e.fromRow&&(n="$"+e.fromRow+":$"+(null!==e.toRow&&void 0!==e.toRow?e.toRow:e.fromRow)),null!==e.fromColumn&&void 0!==e.fromColumn){var a=e.fromColumn,s=void 0;s=null!==e.toColumn&&void 0!==e.toColumn?e.toColumn:e.fromColumn,i="$"+this.getColumnName(a)+":$"+this.getColumnName(s)}void 0!==n&&(r+=t.name+"!"+n),void 0!==i&&void 0!==n?r+=","+t.name+"!"+i:void 0!==i&&(r+=t.name+"!"+i),""!==r&&this.printTitles.set(t.index-1,r)},e.prototype.parserFreezePanes=function(e,t){t.freezePanes=new I,null!==e.row&&void 0!==e.row?t.freezePanes.row=e.row:t.freezePanes.row=0,null!==e.column&&void 0!==e.column?t.freezePanes.column=e.column:t.freezePanes.column=0,t.freezePanes.leftCell=this.getCellName(t.freezePanes.row+1,t.freezePanes.column+1)},e.prototype.parserColumns=function(e,t){var i=e.length;t.columns=[];for(var n=0;n<i;n++){var r=new w;if(null===e[n].index||void 0===e[n].index)throw Error("Column index is missing.");r.index=e[n].index,null!==e[n].width&&void 0!==e[n].width&&(r.width=e[n].width),t.columns.push(r)}},e.prototype.parserRows=function(e,t){var i=e.length;t.rows=new E;for(var n=0,r=0;r<i;r++){var a=this.parserRow(e[r],n);n=a.index,t.rows.add(a)}this.insertMergedCellsStyle(t)},e.prototype.insertMergedCellsStyle=function(e){var t=this;this.mergeCells.length>0&&this.mergedCellsStyle.forEach(function(i,n){var a=e.rows.filter(function(e){return e.index===i.y})[0];if(r.isNullOrUndefined(a)){var s=e.rows.filter(function(e){return e.index<=i.y}),o=new T;o.index=i.y,o.cells=new D,o.cells.add(t.createCell(i,n)),p=0,s.length>0&&(p=e.rows.indexOf(s[s.length-1])+1),e.rows.splice(p,0,o)}else{var l=a.cells.filter(function(e){return e.index===i.x})[0];if(r.isNullOrUndefined(l)){var h=a.cells.filter(function(e){return e.index<=i.x}),p=0;h.length>0&&(p=a.cells.indexOf(h[h.length-1])+1),a.cells.splice(p,0,t.createCell(i,n))}else l.styleIndex=i.styleIndex}})},e.prototype.createCell=function(e,t){var i=new b;return i.refName=t,i.index=e.x,i.cellStyle=new h,i.styleIndex=e.styleIndex,i},e.prototype.parserRow=function(e,t){var i=new T;if(null!==e.height&&void 0!==e.height&&(i.height=e.height),null===e.index||void 0===e.index)throw Error("Row index is missing.");return i.index=e.index,null!==e.grouping&&void 0!==e.grouping&&this.parseGrouping(e.grouping,i),this.parseCells(e.cells,i),i},e.prototype.parseGrouping=function(e,t){t.grouping=new V,void 0!==e.outlineLevel&&(t.grouping.outlineLevel=e.outlineLevel),void 0!==e.isCollapsed&&(t.grouping.isCollapsed=e.isCollapsed),void 0!==e.isHidden&&(t.grouping.isHidden=e.isHidden)},e.prototype.parseCells=function(e,t){t.cells=new D;for(var i=void 0!==e?e.length:0,n=1,r=1,a=0;a<i;a++){var s=e[a],o=new b;if(null===s.index||void 0===s.index)throw Error("Cell index is missing.");if(o.index=s.index,o.index<n?n=o.index:o.index>r&&(r=o.index),o.refName=this.getCellName(t.index,o.index),null!==s.rowSpan&&void 0!==s.rowSpan?o.rowSpan=s.rowSpan-1:o.rowSpan=0,null!==s.colSpan&&void 0!==s.colSpan?o.colSpan=s.colSpan-1:o.colSpan=0,null!==s.hyperlink&&void 0!==s.hyperlink){var l=new M;void 0!==s.hyperlink.target&&(l.target=s.hyperlink.target,void 0!==s.hyperlink.displayText?o.value=s.hyperlink.displayText:o.value=s.hyperlink.target,o.type=this.getCellValueType(o.value),l.ref=o.refName,l.rId=this.mHyperLinks.length+1,this.mHyperLinks.push(l),o.cellStyle=new h,this.parserCellStyle(void 0!==s.style?this.mergeOptions(s.style,this.hyperlinkStyle):this.hyperlinkStyle,o.cellStyle,"string"),o.styleIndex=o.cellStyle.index)}null!==s.formula&&void 0!==s.formula&&(o.formula=s.formula,o.type="formula"),null!==s.value&&void 0!==s.value&&(void 0!==o.formula?o.value=0:(o.value=s.value,o.type=this.getCellValueType(o.value))),null!==s.style&&void 0!==s.style&&void 0===o.styleIndex?(o.cellStyle=new h,o.value instanceof Date?this.parserCellStyle(s.style,o.cellStyle,o.type,14):this.parserCellStyle(s.style,o.cellStyle,o.type),o.styleIndex=o.cellStyle.index):o.value instanceof Date&&(o.cellStyle=new h,this.parserCellStyle({},o.cellStyle,o.type,14),o.styleIndex=o.cellStyle.index),this.parseCellType(o),this.mergeCells=this.processMergeCells(o,t.index,this.mergeCells),t.cells.add(o)}t.spans=n+":"+r},e.prototype.GetColors=function(){var e;return(e=new Map).set("WHITE","FFFFFFFF"),e.set("SILVER","FFC0C0C0"),e.set("GRAY","FF808080"),e.set("BLACK","FF000000"),e.set("RED","FFFF0000"),e.set("MAROON","FF800000"),e.set("YELLOW","FFFFFF00"),e.set("OLIVE","FF808000"),e.set("LIME","FF00FF00"),e.set("GREEN","FF008000"),e.set("AQUA","FF00FFFF"),e.set("TEAL","FF008080"),e.set("BLUE","FF0000FF"),e.set("NAVY","FF000080"),e.set("FUCHSIA","FFFF00FF"),e.set("PURPLE","FF800080"),e},e.prototype.processColor=function(e){return 0===e.indexOf("#")?e.replace("#","FF"):(e=e.toUpperCase(),this.rgbColors=this.GetColors(),e=this.rgbColors.has(e)?this.rgbColors.get(e):"FF000000")},e.prototype.processCellValue=function(e,t){if(-1!==e.indexOf("<font")||-1!==e.indexOf("<a")||-1!==e.indexOf("<b>")||-1!==e.indexOf("<i>")||-1!==e.indexOf("<u>")){var i="",n=e.indexOf("<",0),r=e.indexOf(">",n+1);if(n>=0&&r>=0){for(0!==n&&(i+='<r><t xml:space="preserve">'+this.processString(e.substring(0,n))+"</t></r>");n>=0&&r>=0;)if((r=e.indexOf(">",n+1))>=0){var a=e.substring(n+1,r);(n=e.indexOf("<",r+1))<0&&(n=e.length);var s=e.substring(r+1,n);if(0!==s.length){var o=a.split(" ");if(o.length>0&&(i+="<r><rPr>"),o.length>1)for(var l=0;l<o.length;l++){var h=o[l];switch(h.trim().substring(0,5)){case"size=":i+='<sz val="'+h.substring(6,h.length-1)+'"/>';break;case"face=":i+='<rFont val="'+h.substring(6,h.length-1)+'"/>';break;case"color":i+='<color rgb="'+this.processColor(h.substring(7,h.length-1))+'"/>';break;case"href=":var p=new M;p.target=h.substring(6,h.length-1).trim(),p.ref=t.refName,p.rId=this.mHyperLinks.length+1,this.mHyperLinks.push(p),i+='<color rgb="FF0000FF"/><u/><b/>'}}else if(1===o.length)switch(o[0].trim()){case"b":i+="<b/>";break;case"i":i+="<i/>";break;case"u":i+="<u/>"}i+='</rPr><t xml:space="preserve">'+this.processString(s)+"</t></r>"}}return""===i?e:i}}return e},e.prototype.applyGlobalStyle=function(e,t){this.cellStyles.has(e.name)&&(t.index=this.mStyles.filter(function(t){return t.name===e.name})[0].index,t.name=e.name)},e.prototype.parserCellStyle=function(e,t,i,n){if(null!==e.name&&void 0!==e.name){if(!t.isGlobalStyle)return void this.applyGlobalStyle(e,t);t.name=e.name}null!==e.backColor&&void 0!==e.backColor&&(t.backColor=e.backColor),t.borders=new g,null!==e.borders&&void 0!==e.borders&&this.parserBorder(e.borders,t.borders.all),null!==e.leftBorder&&void 0!==e.leftBorder&&this.parserBorder(e.leftBorder,t.borders.left),null!==e.rightBorder&&void 0!==e.rightBorder&&this.parserBorder(e.rightBorder,t.borders.right),null!==e.topBorder&&void 0!==e.topBorder&&this.parserBorder(e.topBorder,t.borders.top),null!==e.bottomBorder&&void 0!==e.bottomBorder&&this.parserBorder(e.bottomBorder,t.borders.bottom),null!==e.fontName&&void 0!==e.fontName&&(t.fontName=e.fontName),null!==e.fontSize&&void 0!==e.fontSize&&(t.fontSize=e.fontSize),null!==e.fontColor&&void 0!==e.fontColor&&(t.fontColor=e.fontColor),null!==e.italic&&void 0!==e.italic&&(t.italic=e.italic),null!==e.bold&&void 0!==e.bold&&(t.bold=e.bold),null!==e.hAlign&&void 0!==e.hAlign&&(t.hAlign=e.hAlign.toLowerCase()),null!==e.indent&&void 0!==e.indent&&(t.indent=e.indent,"left"!==t.hAlign&&"right"!==t.hAlign&&(t.hAlign="left")),null!==e.rotation&&void 0!==e.rotation&&(t.rotation=e.rotation),null!==e.vAlign&&void 0!==e.vAlign&&(t.vAlign=e.vAlign.toLowerCase()),null!==e.underline&&void 0!==e.underline&&(t.underline=e.underline),null!==e.strikeThrough&&void 0!==e.strikeThrough&&(t.strikeThrough=e.strikeThrough),null!==e.wrapText&&void 0!==e.wrapText&&(t.wrapText=e.wrapText),null!==e.numberFormat&&void 0!==e.numberFormat?null!==e.type&&void 0!==e.type?t.numberFormat=this.getNumberFormat(e.numberFormat,e.type):t.numberFormat=this.getNumberFormat(e.numberFormat,i):(void 0!==n&&(t.numFmtId=14),t.numberFormat="GENERAL"),t.index=this.processCellStyle(t)},e.prototype.switchNumberFormat=function(e,t){var i=this.getNumberFormat(e,t);if(i!==e){var n=this.mNumFmt.get(e);if(void 0!==n&&(n.formatCode=i,this.mNumFmt.has(i))){for(var r=0,a=this.mCellStyleXfs;r<a.length;r++){var s=a[r];s.numFmtId===n.numFmtId&&(s.numFmtId=this.mNumFmt.get(i).numFmtId)}for(var o=0,l=this.mCellXfs;o<l.length;o++){var h=l[o];h.numFmtId===n.numFmtId&&(h.numFmtId=this.mNumFmt.get(i).numFmtId)}}}},e.prototype.changeNumberFormats=function(e){if("string"==typeof e){var t=RegExp(this.currency,"g");e=e.replace(t,"[$"+this.currency+"]")}else if("object"==typeof e)for(var i=0;i<e.length;i++)e[i]=e[i].replace(this.currency,"[$"+this.currency+"]");return e},e.prototype.getNumberFormat=function(e,t){var i;switch(t){case"number":try{i=this.intl.getNumberPattern({format:e,currency:this.currency,useGrouping:!0},!0),this.currency.length>1&&(i=this.changeNumberFormats(i))}catch(t){i=e}break;case"datetime":try{i=this.intl.getDatePattern({skeleton:e,type:"dateTime"},!0)}catch(t){try{i=this.intl.getDatePattern({format:e,type:"dateTime"},!0)}catch(t){i=e}}break;case"date":try{i=this.intl.getDatePattern({skeleton:e,type:"date"},!0)}catch(t){try{i=this.intl.getDatePattern({format:e,type:"date"},!0)}catch(t){i=e}}break;case"time":try{i=this.intl.getDatePattern({skeleton:e,type:"time"},!0)}catch(t){try{i=this.intl.getDatePattern({format:e,type:"time"},!0)}catch(t){i=e}}break;default:i=e}return i},e.prototype.parserBorder=function(e,t){null!==e.color&&void 0!==e.color?t.color=e.color:t.color="#000000",null!==e.lineStyle&&void 0!==e.lineStyle?t.lineStyle=e.lineStyle:t.lineStyle="thin"},e.prototype.processCellStyle=function(e){if(e.isGlobalStyle)return this.processNumFormatId(e),this.mStyles.push(e),this.mStyles.length;var t=this.compareStyle(e);return t.result?t.index:(this.processNumFormatId(e),this.mStyles.push(e),this.mStyles.length)},e.prototype.processNumFormatId=function(e){if("GENERAL"!==e.numberFormat&&!this.mNumFmt.has(e.numberFormat)){var t=this.mNumFmt.size+164;this.mNumFmt.set(e.numberFormat,new f(t,e.numberFormat))}},e.prototype.isNewFont=function(e){for(var t=!1,i=0,n=0,r=this.mFonts;n<r.length;n++){var a=r[n];i++;var s=void 0;if(void 0!==e.fontColor&&(s="FF"+e.fontColor.replace("#","")),t=a.color===s&&a.b===e.bold&&a.i===e.italic&&a.u===e.underline&&a.strike===e.strikeThrough&&a.name===e.fontName&&a.sz===e.fontSize)break}return{index:i-=1,result:t}},e.prototype.isNewBorder=function(e){var t=new h;return this.isAllBorder(e.borders)?t.borders.all.color===e.borders.all.color&&t.borders.all.lineStyle===e.borders.all.lineStyle:t.borders.left.color===e.borders.left.color&&t.borders.left.lineStyle===e.borders.left.lineStyle&&t.borders.right.color===e.borders.right.color&&t.borders.right.lineStyle===e.borders.right.lineStyle&&t.borders.top.color===e.borders.top.color&&t.borders.top.lineStyle===e.borders.top.lineStyle&&t.borders.bottom.color===e.borders.bottom.color&&t.borders.bottom.lineStyle===e.borders.bottom.lineStyle},e.prototype.isAllBorder=function(e){var t=new h;return t.borders.all.color!==e.all.color&&t.borders.all.lineStyle!==e.all.lineStyle},e.prototype.compareStyle=function(e){for(var t=!0,i=0,n=0,r=this.mStyles;n<r.length;n++){var a=r[n];if(t=!a.isGlobalStyle&&a.backColor===e.backColor&&a.bold===e.bold&&a.numFmtId===e.numFmtId&&a.numberFormat===e.numberFormat&&a.type===e.type&&a.fontColor===e.fontColor&&a.fontName===e.fontName&&a.fontSize===e.fontSize&&a.hAlign===e.hAlign&&a.italic===e.italic&&a.underline===e.underline&&a.strikeThrough===e.strikeThrough&&a.vAlign===e.vAlign&&a.indent===e.indent&&a.rotation===e.rotation&&a.wrapText===e.wrapText&&a.borders.all.color===e.borders.all.color&&a.borders.all.lineStyle===e.borders.all.lineStyle&&a.borders.left.color===e.borders.left.color&&a.borders.left.lineStyle===e.borders.left.lineStyle&&a.borders.right.color===e.borders.right.color&&a.borders.right.lineStyle===e.borders.right.lineStyle&&a.borders.top.color===e.borders.top.color&&a.borders.top.lineStyle===e.borders.top.lineStyle&&a.borders.bottom.color===e.borders.bottom.color&&a.borders.bottom.lineStyle===e.borders.bottom.lineStyle){i=a.index;break}}return{index:i,result:t}},e.prototype.contains=function(e,t){var i=e.indexOf(t);return i>-1&&i<e.length},e.prototype.getCellValueType=function(e){return e instanceof Date?"datetime":"boolean"==typeof e?"boolean":"number"==typeof e?"number":"string"},e.prototype.parseCellType=function(e){var t,i=e.type,n=e.value;switch(i){case"datetime":if(n=this.toOADate(n),void 0!==e.cellStyle&&void 0!==e.cellStyle.name&&this.globalStyles.has(e.cellStyle.name)){var r=this.globalStyles.get(e.cellStyle.name);this.switchNumberFormat(r.format,r.type)}t="n";break;case"boolean":n=n?1:0,t="b";break;case"number":t="n",void 0!==e.cellStyle&&void 0!==e.cellStyle.name&&this.globalStyles.has(e.cellStyle.name)&&this.switchNumberFormat(this.globalStyles.get(e.cellStyle.name).format,"number");break;case"string":this.sharedStringCount++,t="s";var a=this.processCellValue(n,e);this.contains(this.sharedString,a)||this.sharedString.push(a),n=this.sharedString.indexOf(a)}e.saveType=t,e.value=n},e.prototype.parserImages=function(e,t){var i=e.length;t.images=[];for(var n=0;n<i;n++){var r=this.parserImage(e[n]);t.images.push(r)}},e.prototype.parseFilters=function(e,t){if(t.autoFilters=new U,null===e.row||void 0===e.row)throw Error("Argument Null Exception: row null or empty");if(t.autoFilters.row=e.row,null===e.lastRow||void 0===e.lastRow)throw Error("Argument Null Exception: lastRow cannot be null or empty");if(t.autoFilters.lastRow=e.lastRow,null===e.column||void 0===e.column)throw Error("Argument Null Exception: column cannot be null or empty");if(t.autoFilters.column=e.column,null===e.lastColumn||void 0===e.row)throw Error("Argument Null Exception: lastColumn cannot be null or empty");t.autoFilters.lastColumn=e.lastColumn},e.prototype.parserImage=function(e){var t=new P;return null!==e.image&&void 0!==e.image&&(t.image=e.image),null!==e.row&&void 0!==e.row&&(t.row=e.row),null!==e.column&&void 0!==e.column&&(t.column=e.column),null!==e.lastRow&&void 0!==e.lastRow&&(t.lastRow=e.lastRow),null!==e.lastColumn&&void 0!==e.lastColumn&&(t.lastColumn=e.lastColumn),null!==e.width&&void 0!==e.width&&(t.width=e.width),null!==e.height&&void 0!==e.height&&(t.height=e.height),null!==e.horizontalFlip&&void 0!==e.horizontalFlip&&(t.horizontalFlip=e.horizontalFlip),null!==e.verticalFlip&&void 0!==e.verticalFlip&&(t.verticalFlip=e.verticalFlip),null!==e.rotation&&void 0!==e.rotation&&(t.rotation=e.rotation),t},e.prototype.saveAsBlob=function(e){var t=this;return new Promise("text/csv"===e?function(e,i){var n={};n.blobData=t.csvHelper.saveAsBlob(),e(n)}:function(e,i){t.saveInternal(),t.mArchive.saveAsBlob().then(function(t){var i={};i.blobData=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),e(i)})})},e.prototype.save=function(e,t){var i=this;if(null==e||""===e)throw Error("Argument Null Exception: fileName cannot be null or empty");var n=e.match(".xlsx$"),r=e.match(".csv$");if(null!==n&&n[0]==="."+this.mSaveType)this.saveInternal(),this.mArchive.save(e).then(function(){i.mArchive.destroy()});else{if(null===r||r[0]!=="."+this.mSaveType)throw Error("Save type and file extension is different.");this.csvHelper.save(e)}},e.prototype.saveInternal=function(){this.saveWorkbook(),this.saveWorksheets(),this.saveSharedString(),this.saveStyles(),this.saveApp(this.builtInProperties),this.saveCore(this.builtInProperties),this.saveContentType(),this.saveTopLevelRelation(),this.saveWorkbookRelation()},e.prototype.saveWorkbook=function(){for(var e='<?xml version="1.0" encoding="utf-8"?><workbook xmlns:r = "http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns= "http://schemas.openxmlformats.org/spreadsheetml/2006/main"><workbookPr codeName="ThisWorkbook" defaultThemeVersion= "153222"/><bookViews><workbookView activeTab="0"/></bookViews>',t="<sheets>",i=this.worksheets.length,n=0;n<i;n++){var r=this.worksheets[n].name;t+='<sheet name="'+(r=(r=(r=(r=r.replace("&","&amp;")).replace("<","&lt;")).replace(">","&gt;")).replace('"',"&quot;"))+'" sheetId="'+(n+1).toString()+'" r:id ="rId'+(n+1).toString()+'" />'}if(t+="</sheets>",e+=t,this.printTitles.size>0){var a="<definedNames>";this.printTitles.forEach(function(e,t){a+='<definedName name="_xlnm.Print_Titles" localSheetId="'+t+'">'+e+"</definedName>"}),e+=a+="</definedNames>"}this.addToArchive(e+"</workbook>","xl/workbook.xml")},e.prototype.saveWorksheets=function(){for(var e=this.worksheets.length,t=0;t<e;t++)this.saveWorksheet(this.worksheets[t],t)},e.prototype.saveWorksheet=function(e,t){var i=new F,n='<?xml version="1.0" encoding="utf-8" standalone="yes"?><worksheet xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:x14="http://schemas.microsoft.com/office/spreadsheetml/2009/9/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main">';if(e.isSummaryRowBelow?n+="<sheetPr />":n+='<sheetPr><outlinePr summaryBelow="0" ></outlinePr></sheetPr>',n+=this.saveSheetView(e),void 0!==e.columns){for(var a="<cols>",s=0,o=e.columns;s<o.length;s++){var l=o[s];void 0!==l.width?a+='<col min="'+l.index+'" max="'+l.index+'" width="'+this.pixelsToColumnWidth(l.width)+'" customWidth="1" />':a+='<col min="'+l.index+'" max="'+l.index+'" width="8.43" customWidth="1" />'}n+=a+"</cols>"}if(n+="<sheetData>",i.append(n),n="",void 0!==e.rows)for(var h=0,p=e.rows;h<p.length;h++){var c=p[h],d='<row r="'+c.index+'" ';r.isNullOrUndefined(c.spans)||(d+='spans="'+c.spans+'" '),void 0!==c.height&&(d+='ht="'+this.pixelsToRowHeight(c.height)+'" customHeight="1" '),void 0!==c.grouping&&(c.grouping.isHidden&&(d+='hidden="1" '),void 0!==c.grouping.outlineLevel&&(d+='outlineLevel="'+c.grouping.outlineLevel+'" '),c.grouping.isCollapsed&&(d+='collapsed="1" ')),d+=">";for(var u=0,m=c.cells;u<m.length;u++){var f=m[u];void 0===f||void 0===f.value&&void 0===f.cellStyle||(d+='<c r="'+f.refName+'" ',void 0!==f.saveType&&(d+='t="'+f.saveType+'" '),void 0!==f.styleIndex&&(d+='s="'+f.styleIndex+'" '),d+=" >",void 0!==f.formula&&(d+="<f>"+f.formula+"</f>"),void 0!==f.value?d+="<v>"+f.value+"</v></c>":d+="</c>")}d+="</row>",i.append(d)}if(n+="</sheetData>",null!==e.autoFilters&&void 0!==e.autoFilters&&(n+='<autoFilter ref="'+this.getCellName(e.autoFilters.row,e.autoFilters.column)+":"+this.getCellName(e.autoFilters.lastRow,e.autoFilters.lastColumn)+'"/>'),e.mergeCells.length>0){n+='<mergeCells count="'+e.mergeCells.length+'">';for(var v=0,g=e.mergeCells;v<g.length;v++)n+='<mergeCell ref="'+g[v].ref+'" />';n+="</mergeCells>"}if(e.hyperLinks.length>0){n+="<hyperlinks>";for(var y=0,b=e.hyperLinks;y<b.length;y++){var D=b[y];n+='<hyperlink ref="'+D.ref+'" r:id="rId'+D.rId+'" />'}n+="</hyperlinks>"}n+='<pageMargins left="0.75" right="0.75" top="1" bottom="1" header="0.5" footer="0.5" /><headerFooter scaleWithDoc="1" alignWithMargins="0" differentFirst="0" differentOddEven="0" />',void 0!=e.images&&e.images.length>0&&(this.drawingCount++,this.saveDrawings(e,e.index),n+='<drawing r:id="rId'+(e.hyperLinks.length+1)+'"/>'),this.addToArchive(this.saveSheetRelations(e),"xl/worksheets/_rels/sheet"+e.index+".xml.rels"),i.append(n+"</worksheet>"),this.addToArchive(i.getBlob(),"xl/worksheets/sheet"+(t+1)+".xml")},e.prototype.saveDrawings=function(e,t){var i=new F,n='<xdr:wsDr xmlns:xdr="http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing" xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main">';if(void 0!==e.images){for(var r=0,a=0,s=e.images;a<s.length;a++){var o=s[a];void 0!==o.height&&void 0!==o.width?(this.updatelastRowOffset(e,o),this.updatelastColumnOffSet(e,o),o.lastRow-=1,o.lastColumn-=1):void 0!==o.lastRow&&void 0!==o.lastColumn&&(o.lastRowOffset=0,o.lastColOffset=0),r++,n+='<xdr:twoCellAnchor editAs="oneCell"><xdr:from><xdr:col>'+(o.column-1)+"</xdr:col><xdr:colOff>0</xdr:colOff><xdr:row>"+(o.row-1)+"</xdr:row><xdr:rowOff>0</xdr:rowOff></xdr:from><xdr:to><xdr:col>"+o.lastColumn+"</xdr:col><xdr:colOff>"+o.lastColOffset+"</xdr:colOff><xdr:row>"+o.lastRow+"</xdr:row><xdr:rowOff>"+o.lastRowOffset+"</xdr:rowOff></xdr:to><xdr:pic><xdr:nvPicPr>"+('<xdr:cNvPr id="'+r+'" name="Picture ')+r+'"> </xdr:cNvPr><xdr:cNvPicPr><a:picLocks noChangeAspect="1"/></xdr:cNvPicPr> </xdr:nvPicPr><xdr:blipFill><a:blip xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" r:embed="rId'+r+'" cstate="print"></a:blip><a:stretch><a:fillRect /></a:stretch></xdr:blipFill><xdr:spPr><a:xfrm',void 0!=o.rotation&&o.rotation<=3600&&o.rotation>=-3600&&(n+=' rot="'+6e4*o.rotation+'"'),void 0!=o.verticalFlip&&0!=o.verticalFlip&&(n+=' flipV="1"'),void 0!=o.horizontalFlip&&0!=o.horizontalFlip&&(n+=' flipH="1"'),n+='/><a:prstGeom prst="rect"><a:avLst /></a:prstGeom></xdr:spPr></xdr:pic><xdr:clientData /></xdr:twoCellAnchor>';var l=this.convertBase64toImage(o.image);this.imageCount+=1,this.addToArchive(l,"xl/media/image"+this.imageCount+".png")}i.append(n),i.append("</xdr:wsDr>"),this.saveDrawingRelations(e),this.addToArchive(i.getBlob(),"xl/drawings/drawing"+this.drawingCount+".xml")}},e.prototype.updatelastRowOffset=function(e,t){for(var i=t.height,n=t.row,r=0;i>=0;){var a=0,s=(a=void 0!==e.rows&&void 0!==e.rows[n-1]?this.convertToPixels(void 0===e.rows[n-1].height?15:e.rows[n-1].height):this.convertToPixels(15))-r*a/256;if(s>i){t.lastRow=n,t.lastRowOffset=r+256*i/a;var o=0;o=void 0!==e.rows&&void 0!==e.rows[n-1]?this.convertToPixels(void 0===e.rows[n-1].height?15:e.rows[n-1].height):this.convertToPixels(15),t.lastRowOffset=o*t.lastRowOffset/256,t.lastRowOffset=Math.round(t.lastRowOffset/this.unitsProportions[7]);break}i-=s,n++,r=0}},e.prototype.updatelastColumnOffSet=function(e,t){for(var i=t.width,n=t.column,r=0;i>=0;){var a=0,s=(a=void 0!==e.columns&&void 0!==e.columns[n-1]?this.ColumnWidthToPixels(void 0===e.columns[n-1].width?8.43:e.columns[n-1].width):this.ColumnWidthToPixels(8.43))-r*a/1024;if(s>i){t.lastColumn=n,t.lastColOffset=r+1024*i/a;var o=0;o=void 0!==e.columns&&void 0!==e.columns[n-1]?this.ColumnWidthToPixels(void 0===e.columns[n-1].width?8.43:e.columns[n-1].width):this.ColumnWidthToPixels(8.43),t.lastColOffset=o*t.lastColOffset/1024,t.lastColOffset=Math.round(t.lastColOffset/this.unitsProportions[7]);break}i-=s,n++,r=0}},e.prototype.convertToPixels=function(e){return e*this.unitsProportions[6]},e.prototype.convertBase64toImage=function(e){for(var t=window.atob(e),i=new ArrayBuffer(t.length),n=new Uint8Array(i),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return new Blob([n],{type:"image/png"})},e.prototype.saveDrawingRelations=function(e){for(var t='<?xml version="1.0" encoding="utf-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">',i=e.images.length,n=this.imageCount-e.images.length,r=1;r<=i;r++)t+='<Relationship Id="rId'+r+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/image" Target="../media/image'+ ++n+'.png" />';this.addToArchive(t+"</Relationships>","xl/drawings/_rels/drawing"+this.drawingCount+".xml.rels")},e.prototype.pixelsToColumnWidth=function(e){var t=e>12?this.trunc((e-5)/7*100+.5)/100:e/12;return t>1?(7*t+5)/7*256/256:12*t/7*256/256},e.prototype.ColumnWidthToPixels=function(e){return this.trunc((256*(e>1?(7*e+5)/7*256/256:12*e/7*256/256)+this.trunc(128/7))/256*7)},e.prototype.trunc=function(e){var t=e-e%1;return 0===t&&(e<0||0===e&&1/e!=1/0)?-0:t},e.prototype.pixelsToRowHeight=function(e){return e*this.unitsProportions[5]/this.unitsProportions[6]},e.prototype.saveSheetRelations=function(e){for(var t='<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">',i=0,n=e.hyperLinks;i<n.length;i++){var r=n[i];t+='<Relationship Id="rId'+r.rId+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink" Target="'+this.processString(r.target)+'" TargetMode="External" />'}return void 0!=e.images&&e.images.length>0&&(t+='<Relationship Id="rId'+(e.hyperLinks.length+1)+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing" Target="../drawings/drawing'+this.drawingCount+'.xml" />'),t+="</Relationships>"},e.prototype.saveSheetView=function(e){var t='<sheetViews><sheetView workbookViewId="0" ';return!0===e.enableRtl&&(t+='rightToLeft="1"'),!1===e.showGridLines?t+='showGridLines="0" >':t+=">",void 0!==e.freezePanes&&(t+='<pane state="frozen" topLeftCell="'+e.freezePanes.leftCell+'" ',0!==e.freezePanes.row&&(t+='ySplit="'+e.freezePanes.row+'" '),0!==e.freezePanes.column&&(t+='xSplit="'+e.freezePanes.column+'" '),t+="/>"),t+="</sheetView></sheetViews > "},e.prototype.saveSharedString=function(){var e=this.sharedString.length;if(e>0){for(var t='<?xml version="1.0" encoding="utf-8"?><sst uniqueCount="'+e+'" count="'+this.sharedStringCount+'" xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main">',i="",n=0;n<e;n++)0!==this.sharedString[n].indexOf("<r>")?i+="<si><t>"+this.processString(this.sharedString[n])+"</t></si>":i+="<si>"+this.sharedString[n]+"</si>";i+="</sst>",this.addToArchive(t+i,"xl/sharedStrings.xml")}},e.prototype.processString=function(e){if("string"==typeof e)-1!==e.indexOf("&")&&(e=e.replace(/&/g,"&amp;")),-1!==e.indexOf("<")&&(e=e.replace(/</g,"&lt;")),-1!==e.indexOf(">")&&(e=e.replace(/>/g,"&gt;")),-1!==e.indexOf("\v")&&(e=e.replace(/\v/g,"_x000B_"));else if("object"==typeof e)for(var t=0;t<e.length;t++)-1!==e[t].indexOf("&")&&(e[t]=e[t].replace(/&/g,"&amp;")),-1!==e[t].indexOf("<")&&(e[t]=e[t].replace(/</g,"&lt;")),-1!==e[t].indexOf(">")&&(e[t]=e[t].replace(/>/g,"&gt;")),-1!==e[t].indexOf("\v")&&(e[t]=e[t].replace(/\v/g,"_x000B_"));return e},e.prototype.saveStyles=function(){this.updateCellXfsStyleXfs();var e='<?xml version="1.0" encoding="utf-8"?><styleSheet xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac" xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main">';e+=this.saveNumberFormats()+this.saveFonts()+this.saveFills()+this.saveBorders()+this.saveCellStyleXfs()+this.saveCellXfs()+this.saveCellStyles(),this.addToArchive(e+"</styleSheet>","xl/styles.xml")},e.prototype.updateCellXfsStyleXfs=function(){for(var e=0,t=this.mStyles;e<t.length;e++){var i=t[e],n=void 0;i.isGlobalStyle?(n=new u).xfId=i.index-1:(n=new c).xfId=0;var r=this.isNewFont(i);if(r.result)n.fontId=r.index;else{var a=new p;a.b=i.bold,a.i=i.italic,a.name=i.fontName,a.sz=i.fontSize,a.u=i.underline,a.strike=i.strikeThrough,a.color="FF"+i.fontColor.replace("#",""),this.mFonts.push(a),n.fontId=this.mFonts.length-1}if("none"!==i.backColor){var s="FF"+i.backColor.replace("#","");if(this.mFills.has(s)){var o=this.mFills.get(s);n.fillId=o}else o=this.mFills.size+2,this.mFills.set(s,o),n.fillId=o}else n.fillId=0;if(this.isNewBorder(i)?n.borderId=0:(this.mBorders.push(i.borders),n.borderId=this.mBorders.length),"GENERAL"!==i.numberFormat){if(this.mNumFmt.has(i.numberFormat)){var l=this.mNumFmt.get(i.numberFormat);n.numFmtId=l.numFmtId}else{var h=this.mNumFmt.size+164;this.mNumFmt.set(i.numberFormat,new f(h,i.numberFormat)),n.numFmtId=h}}else"GENERAL"===i.numberFormat&&14===i.numFmtId?n.numFmtId=14:n.numFmtId=0;i.isGlobalStyle||(n.applyAlignment=1),n.alignment=new d,n.alignment.indent=i.indent,n.alignment.horizontal=i.hAlign,n.alignment.vertical=i.vAlign,n.alignment.wrapText=i.wrapText?1:0,n.alignment.rotation=i.rotation,i.isGlobalStyle&&this.mCellStyleXfs.push(n),this.mCellXfs.push(n)}},e.prototype.saveNumberFormats=function(){if(this.mNumFmt.size>=1){var e='<numFmts count="'+this.mNumFmt.size+'">';return this.mNumFmt.forEach(function(t,i){e+='<numFmt numFmtId="'+t.numFmtId+'" formatCode="'+t.formatCode.replace(/"/g,"&quot;")+'" />'}),e+="</numFmts>"}return""},e.prototype.saveFonts=function(){var e='<fonts count="'+this.mFonts.length+'">';if(this.mFonts.length>=1)for(var t=0,i=this.mFonts;t<i.length;t++){var n=i[t];e+="<font>",n.b&&(e+="<b />"),n.i&&(e+="<i />"),n.u&&(e+="<u />"),n.strike&&(e+="<strike />"),e+='<sz val="'+n.sz+'" /><color rgb="'+n.color+'" /><name val="'+n.name+'" /></font>'}return e+"</fonts>"},e.prototype.saveFills=function(){var e='<fills count="'+(this.mFills.size+2)+'"><fill><patternFill patternType="none"></patternFill></fill><fill><patternFill patternType="gray125"></patternFill></fill>';return this.mFills.size>=1&&this.mFills.forEach(function(t,i){e+='<fill><patternFill patternType="solid"><fgColor rgb="'+i+'" /><bgColor rgb="FFFFFFFF" /></patternFill></fill>'}),e+"</fills>"},e.prototype.saveBorders=function(){var e='<borders count="'+(this.mBorders.length+1)+'"><border><left /><right /><top /><bottom /><diagonal /></border>';if(this.mBorders.length>=1)for(var t=0,i=this.mBorders;t<i.length;t++){var n=i[t];if(this.isAllBorder(n)){var r=n.all.color.replace("#",""),a=n.all.lineStyle;e+='<border><left style="'+a+'"><color rgb="FF'+r+'" /></left><right style="'+a+'"><color rgb="FF'+r+'" /></right><top style="'+a+'"><color rgb="FF'+r+'" /></top><bottom style="'+a+'"><color rgb="FF'+r+'" /></bottom></border>'}else e+='<border><left style="'+n.left.lineStyle+'"><color rgb="FF'+n.left.color.replace("#","")+'" /></left><right style="'+n.right.lineStyle+'"><color rgb="FF'+n.right.color.replace("#","")+'" /></right><top style="'+n.top.lineStyle+'"><color rgb="FF'+n.top.color.replace("#","")+'" /></top><bottom style="'+n.bottom.lineStyle+'"><color rgb="FF'+n.bottom.color.replace("#","")+'" /></bottom></border>'}return e+"</borders>"},e.prototype.saveCellStyles=function(){var e=this,t='<cellStyles  count="'+this.cellStyles.size+'">';return this.cellStyles.forEach(function(i,n){t+='<cellStyle name="'+n+'" xfId="'+e.cellStyles.get(n).xfId+'"',"Normal"===n&&(t+=' builtinId="0"'),t+=" />"}),t+="</cellStyles>"},e.prototype.saveCellStyleXfs=function(){var e='<cellStyleXfs count="'+(this.mCellStyleXfs.length+1)+'"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" />';if(this.mCellStyleXfs.length>=1)for(var t=0,i=this.mCellStyleXfs;t<i.length;t++){var n=i[t];e+='<xf numFmtId="'+n.numFmtId+'" fontId="'+n.fontId+'" fillId="'+n.fillId+'" borderId="'+n.borderId+'" ',void 0!==n.alignment?e+=">"+this.saveAlignment(n)+"</xf>":e+=" />"}return e+"</cellStyleXfs>"},e.prototype.saveCellXfs=function(){var e='<cellXfs count="'+(this.mCellXfs.length+1)+'"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" xfId="0" />';if(this.mCellXfs.length>=1)for(var t=0,i=this.mCellXfs;t<i.length;t++){var n=i[t];e+='<xf numFmtId="'+n.numFmtId+'" fontId="'+n.fontId+'" fillId="'+n.fillId+'" borderId="'+n.borderId+'" xfId="'+n.xfId+'" ',1===n.applyAlignment&&(e+='applyAlignment="1"'),e+=">"+this.saveAlignment(n)+"</xf>"}return e+"</cellXfs>"},e.prototype.saveAlignment=function(e){var t="<alignment ";return void 0!==e.alignment.horizontal&&(t+='horizontal="'+e.alignment.horizontal+'" '),void 0!==e.alignment.indent&&0!==e.alignment.indent?t+='indent="'+e.alignment.indent+'" ':void 0!==e.alignment.rotation&&0!==e.alignment.rotation&&(t+='textRotation="'+e.alignment.rotation+'" '),void 0!==e.alignment.vertical&&(t+='vertical="'+e.alignment.vertical+'" '),t+='wrapText="'+e.alignment.wrapText+'" />'},e.prototype.saveApp=function(e){var t='<?xml version="1.0" encoding="utf-8" standalone="yes"?><Properties xmlns="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties"><Application>Essential XlsIO</Application>';void 0!==e&&(void 0!==e.manager&&(t+="<Manager>"+e.manager+"</Manager>"),void 0!==e.company&&(t+="<Company>"+e.company+"</Company>")),this.addToArchive(t+"</Properties>","docProps/app.xml")},e.prototype.saveCore=function(e){var t=new Date,i='<?xml version="1.0" encoding="utf-8" standalone="yes"?><cp:coreProperties xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/" xmlns:dcmitype="http://purl.org/dc/dcmitype/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:cp="http://schemas.openxmlformats.org/package/2006/metadata/core-properties">';void 0!==this.builtInProperties?(void 0!==e.author&&(i+="<dc:creator>"+e.author+"</dc:creator>"),void 0!==e.subject&&(i+="<dc:subject>"+e.subject+"</dc:subject>"),void 0!==e.category&&(i+="<cp:category>"+e.category+"</cp:category>"),void 0!==e.comments&&(i+="<dc:description>"+e.comments+"</dc:description>"),void 0!==e.title&&(i+="<dc:title>"+e.title+"</dc:title>"),void 0!==e.tags&&(i+="<cp:keywords>"+e.tags+"</cp:keywords>"),void 0!==e.status&&(i+="<cp:contentStatus>"+e.status+"</cp:contentStatus>"),void 0!==e.createdDate?i+='<dcterms:created xsi:type="dcterms:W3CDTF">'+e.createdDate.toISOString()+"</dcterms:created>":i+='<dcterms:created xsi:type="dcterms:W3CDTF">'+t.toISOString()+"</dcterms:created>",void 0!==e.modifiedDate?i+='<dcterms:modified xsi:type="dcterms:W3CDTF">'+e.modifiedDate.toISOString()+"</dcterms:modified>":i+='<dcterms:modified xsi:type="dcterms:W3CDTF">'+t.toISOString()+"</dcterms:modified>"):i+='<dcterms:created xsi:type="dcterms:W3CDTF">'+t.toISOString()+'</dcterms:created><dcterms:modified xsi:type="dcterms:W3CDTF">'+t.toISOString()+"</dcterms:modified>",i+="</cp:coreProperties>",this.addToArchive(i,"docProps/core.xml")},e.prototype.saveTopLevelRelation=function(){this.addToArchive('<?xml version="1.0" encoding="utf-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml" /><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties" Target="docProps/app.xml" /><Relationship Id="rId3" Type="http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties" Target="docProps/core.xml" /></Relationships>',"_rels/.rels")},e.prototype.saveWorkbookRelation=function(){for(var e='<?xml version="1.0" encoding="utf-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">',t=this.worksheets.length,i=0,n=0;n<t;n++,i++)e+='<Relationship Id="rId'+(n+1).toString()+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/sheet'+(n+1).toString()+'.xml" />';e+='<Relationship Id="rId'+(++i).toString()+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml" />',this.sharedStringCount>0&&(e+='<Relationship Id="rId'+(++i).toString()+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings" Target="sharedStrings.xml" />'),this.addToArchive(e+"</Relationships>","xl/_rels/workbook.xml.rels")},e.prototype.saveContentType=function(){for(var e='<?xml version="1.0" encoding="utf-8" standalone="yes"?><Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="xml" ContentType="application/xml" /><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml" /><Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml" /><Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml" /><Override PartName="/docProps/app.xml" ContentType="application/vnd.openxmlformats-officedocument.extended-properties+xml" /><Override PartName="/docProps/core.xml" ContentType="application/vnd.openxmlformats-package.core-properties+xml" />',t="",i=this.worksheets.length,n=0,r=0;r<i;r++)t+='<Override PartName="/xl/worksheets/sheet'+(r+1).toString()+'.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml" />',void 0!=this.worksheets[r].images&&this.worksheets[r].images.length>0&&(t+='<Override PartName="/xl/drawings/drawing'+(++n).toString()+'.xml" ContentType="application/vnd.openxmlformats-officedocument.drawing+xml" />');this.imageCount>0&&(t+='<Default Extension="png" ContentType="image/png" />'),this.sharedStringCount>0&&(e+='<Override PartName="/xl/sharedStrings.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml" />'),this.addToArchive(e+t+"</Types>","[Content_Types].xml")},e.prototype.addToArchive=function(e,t){if("string"==typeof e){var i=new Blob([e],{type:"text/plain"}),r=new n.ZipArchiveItem(i,t);this.mArchive.addItem(r)}else r=new n.ZipArchiveItem(e,t),this.mArchive.addItem(r)},e.prototype.processMergeCells=function(e,t,i){if(0!==e.rowSpan||0!==e.colSpan){var n=new A;n.x=e.index,n.width=e.colSpan,n.y=t,n.height=e.rowSpan;var r=this.getCellName(n.y,n.x),a=this.getCellName(t+n.height,e.index+n.width);n.ref=r+":"+a,i.add(n);var s={x:n.x,y:n.y},o={x:e.index+n.width,y:t+n.height};this.updatedMergedCellStyles(s,o,e)}return i},e.prototype.updatedMergedCellStyles=function(e,t,i){for(var n=e.x;n<=t.x;n++)for(var r=e.y;r<=t.y;r++)this.mergedCellsStyle.set(this.getCellName(r,n),{x:n,y:r,styleIndex:i.styleIndex})},e.prototype.dateToTicks=function(e,t,i){if(e>=1&&e<=9999&&t>=1&&t<=12){var n=e-1;return 864e9*(365*n+(n/4|0)-(n/100|0)+(n/400|0)+(this.isLeapYear(e)?[0,31,60,91,121,152,182,213,244,274,305,335,366]:[0,31,59,90,120,151,181,212,243,273,304,334,365])[t-1]+i-1)}throw Error("Not a valid date")},e.prototype.timeToTicks=function(e,t,i){if(e>=0&&e<24&&t>=0&&t<60&&i>=0&&i<60)return 1e4*(3600*e+60*t+i)*1e3;throw Error("Not valid time")},e.prototype.isLeapYear=function(e){return e%4==0&&(e%100!=0||e%400==0)},e.prototype.toOADate=function(e){var t=0;if(0===(t=this.dateToTicks(e.getFullYear(),e.getMonth()+1,e.getDate())+this.timeToTicks(e.getHours(),e.getMinutes(),e.getSeconds())))return 0;if(t<31241376e9)throw Error("Arg_OleAutDateInvalid");return(t-599264352e9)/1e4/864e5},e}(),B=function(){},t.CellStyle=h,t.Font=p,t.CellXfs=c,t.Alignment=d,t.CellStyleXfs=u,t.CellStyles=m,t.NumFmt=f,t.Border=v,t.Borders=g,t.Cell=b,t.Cells=D,t.Column=w,t.Row=T,t.Rows=E,t.Workbook=L,t.BuiltInProperties=B,t.Worksheet=x,t.HyperLink=M,t.Grouping=V,t.FreezePane=I,t.MergeCell=A,t.MergeCells=N,t.Worksheets=O,t.CsvHelper=R,t.ValueFormatter=H,t.BlobHelper=F,Object.defineProperty(t,"__esModule",{value:!0})},43523:function(e,t){/*!
*  filename: ej2-file-utils.umd.min.js
*  version : 23.1.36
*  Copyright Syncfusion Inc. 2001 - 2020. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/(function(e){"use strict";function t(e,t){if(null==e)throw Error("ArgumentException: "+t+" cannot be null or undefined")}var i=function(){function e(){}return e.save=function(e,t){if(null==e||""===e)throw Error("ArgumentException: fileName cannot be undefined, null or empty");var i=e.substring(e.lastIndexOf(".")+1,e.length),n=this.getMimeType(i);if(""!==n&&(t=new Blob([t],{type:n})),this.isMicrosoftBrowser)navigator.msSaveBlob(t,e);else{var r=document.createElementNS("http://www.w3.org/1999/xhtml","a");this.saveInternal(e,i,t,r,"download"in r)}},e.saveInternal=function(e,t,i,n,r){if(r){n.download=e;var a=window.URL.createObjectURL(i);n.href=a;var s=document.createEvent("MouseEvent");s.initEvent("click",!0,!0),n.dispatchEvent(s),setTimeout(function(){window.URL.revokeObjectURL(a),a=void 0})}else if("docx"!==t&&"xlsx"!==t){var o=window.URL.createObjectURL(i);window.open(o,"_blank")||(window.location.href=o)}else{var l=new FileReader;l.onloadend=function(){window.open(l.result,"_blank")||(window.location.href=l.result)},l.readAsDataURL(i)}},e.getMimeType=function(e){var t="";switch(e){case"html":t="text/html";break;case"pdf":t="application/pdf";break;case"docx":t="application/vnd.openxmlformats-officedocument.wordprocessingml.document";break;case"xlsx":t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";break;case"txt":t="text/plain"}return t},e}(),n=function(){function e(){this.contentPos=0,this.bufferText="",this.bufferBlob=new Blob([""],{type:"text/plain"}),this.currentState="Initial",this.namespaceStack=[],this.namespaceStack.push(new r),this.namespaceStack[0].set("xmlns","http://www.w3.org/2000/xmlns/","Special"),this.namespaceStack.push(new r),this.namespaceStack[1].set("xml","http://www.w3.org/XML/1998/namespace","Special"),this.namespaceStack.push(new r),this.namespaceStack[2].set("","","Implied"),this.elementStack=[],this.elementStack.push(new a),this.elementStack[0].set("","","",this.namespaceStack.length-1),this.attributeStack=[],i.isMicrosoftBrowser=!!navigator.msSaveBlob}return Object.defineProperty(e.prototype,"buffer",{get:function(){return this.flush(),this.bufferBlob},enumerable:!0,configurable:!0}),e.prototype.writeProcessingInstruction=function(e,t){if(null==e||0===e.length)throw Error("ArgumentException: name should not be undefined, null or empty");if(this.checkName(e),null!=t||(t=""),3===e.length&&"xml"===e&&"Initial"!==this.currentState)throw Error("InvalidArgumentException: Cannot write XML declaration.WriteStartDocument method has already written it");if("Initial"!==this.currentState||void 0===this.bufferBlob)throw Error("InvalidOperationException: Wrong Token");this.writeStartDocument(),this.writeProcessingInstructionInternal(e,t)},e.prototype.writeStartDocument=function(e){if("Initial"!==this.currentState||void 0===this.bufferBlob)throw Error("InvalidOperationException: Wrong Token");this.currentState="StartDocument",this.rawText('<?xml version="1.0" encoding="utf-8'),null!=e&&(this.rawText('" standalone="'),this.rawText(e?"yes":"no")),this.rawText('"?>')},e.prototype.writeEndDocument=function(){for(;this.elementStack.length-1>0;)this.writeEndElement();this.currentState="EndDocument",this.flush()},e.prototype.writeStartElement=function(e,t,i){if(void 0===this.bufferBlob)throw Error("InvalidOperationException: Wrong Token");if(null==t||0===t.length)throw Error("ArgumentException: localName cannot be undefined, null or empty");if(this.checkName(t),"Initial"===this.currentState&&this.writeStartDocument(),"StartElement"===this.currentState&&this.startElementContent(),this.currentState="StartElement",null==e)null!=i&&(e=this.lookupPrefix(i)),null!=e||(e="");else if(e.length>0&&(null!=i||(i=this.lookupNamespace(e)),null==i||void 0!==i&&0===i.length))throw Error("ArgumentException: Cannot use a prefix with an empty namespace");null!=i||(i=this.lookupNamespace(e)),this.writeStartElementInternal(e,t,i)},e.prototype.writeEndElement=function(){"StartElement"===this.currentState?(this.startElementContent(),this.currentState="ElementContent"):"ElementContent"===this.currentState&&(this.currentState="ElementContent"),this.currentState="EndElement";var e=this.elementStack.length-1;this.writeEndElementInternal(this.elementStack[e].prefix,this.elementStack[e].localName),this.namespaceStack.splice(this.elementStack[e].previousTop+1),this.elementStack.splice(e),this.bufferText.length>10240&&this.flush()},e.prototype.writeElementString=function(e,t,i,n){this.writeStartElement(e,t,i),null!=n&&0!==n.length&&this.writeString(n),this.writeEndElement()},e.prototype.writeAttributeString=function(e,t,i,n){this.writeStartAttribute(e,t,i,n),this.writeStringInternal(n,!0),this.writeEndAttribute()},e.prototype.writeString=function(e){this.writeInternal(e,!1)},e.prototype.writeRaw=function(e){this.writeInternal(e,!0)},e.prototype.writeInternal=function(e,t){if(null!=e){if("StartElement"!==this.currentState&&"ElementContent"!==this.currentState)throw Error("InvalidOperationException: Wrong Token");"StartElement"===this.currentState&&this.startElementContent(),this.currentState="ElementContent",t?this.rawText(e):this.writeStringInternal(e,!1)}},e.prototype.save=function(e){for(;this.elementStack.length-1>0;)this.writeEndElement();""!==this.bufferText&&this.flush(),i.save(e,this.buffer)},e.prototype.destroy=function(){this.bufferBlob=void 0;for(var e=0;e<this.namespaceStack.length;e++)this.namespaceStack[e].destroy();for(e=0,this.namespaceStack=[];e<this.elementStack.length;e++)this.elementStack[e].destroy();this.elementStack=[],this.bufferText="",this.contentPos=0},e.prototype.flush=function(){void 0!==this.bufferBlob&&(this.bufferBlob=new Blob([this.bufferBlob,this.bufferText],{type:"text/plain"}),this.bufferText="")},e.prototype.writeProcessingInstructionInternal=function(e,t){this.bufferText+="<?",this.rawText(e),t.length>0&&(this.bufferText+=" ",t=t.replace(/\?\>/g,"? >"),this.bufferText+=t),this.bufferText+="?",this.bufferText+=">"},e.prototype.writeStartAttribute=function(e,t,i,n){if(null==t||0===t.length){if("xmlns"!==e)throw Error("ArgumentException: localName cannot be undefined, null or empty");t="xmlns",e=""}if("StartElement"!==this.currentState)throw Error("InvalidOperationException: Wrong Token");this.checkName(t),this.writeStartAttributePrefixAndNameSpace(e,t,i,n)},e.prototype.writeStartAttributePrefixAndNameSpace=function(e,t,i,n){null!=e||(null!=i&&("xmlns"===t&&"http://www.w3.org/2000/xmlns/"===i||(e=this.lookupPrefix(i))),null!=e||(e="")),null!=i||(null!=e&&e.length>0&&(i=this.lookupNamespace(e)),null!=i||(i="")),this.writeStartAttributeSpecialAttribute(e,t,i,n)},e.prototype.writeStartAttributeSpecialAttribute=function(e,t,i,n){if(0===e.length){if("x"===t[0]&&"xmlns"===t)return this.skipPushAndWrite(e,t,i),void this.pushNamespaceExplicit("",n);i.length>0&&(e=this.lookupPrefix(i))}else{if("x"===e[0]){if("xmlns"===e)return this.skipPushAndWrite(e,t,i),void this.pushNamespaceExplicit(t,n);if("xml"===e&&("space"===t||"lang"===t))return void this.skipPushAndWrite(e,t,i)}0===i.length&&(e="")}null!=e&&0!==e.length&&this.pushNamespaceImplicit(e,i),this.skipPushAndWrite(e,t,i)},e.prototype.writeEndAttribute=function(){this.currentState="StartElement",this.bufferText+='"'},e.prototype.writeStartElementInternal=function(e,t,i){this.bufferText+="<",e.length>0&&(this.rawText(e),this.bufferText+=":"),this.rawText(t);var n=this.elementStack.length;this.elementStack.push(new a),this.elementStack[n].set(e,t,i,this.namespaceStack.length-1),this.pushNamespaceImplicit(e,i);for(var r=0;r<this.attributeStack.length;r++)this.attributeStack[r].destroy();this.attributeStack=[]},e.prototype.writeEndElementInternal=function(e,t){this.contentPos!==this.bufferText.length+1?(this.bufferText+="</",null!=e&&0!==e.length&&(this.rawText(e),this.bufferText+=":"),this.rawText(t),this.bufferText+=">"):(this.bufferText=this.bufferText.substring(0,this.bufferText.length-1),this.bufferText+=" />")},e.prototype.writeStartAttributeInternal=function(e,t,i){this.bufferText+=" ",null!=e&&e.length>0&&(this.rawText(e),this.bufferText+=":"),this.rawText(t),this.bufferText+="=",this.bufferText+='"'},e.prototype.writeNamespaceDeclaration=function(e,t){this.writeStartNamespaceDeclaration(e),this.writeStringInternal(t,!0),this.bufferText+='"'},e.prototype.writeStartNamespaceDeclaration=function(e){null==e||0===e.length?this.rawText(' xmlns="'):(this.rawText(" xmlns:"),this.rawText(e),this.bufferText+="=",this.bufferText+='"')},e.prototype.writeStringInternal=function(e,t){null!=e||(e=""),e=(e=(e=e.replace(/\&/g,"&amp;")).replace(/\</g,"&lt;")).replace(/\>/g,"&gt;"),t&&(e=e.replace(/\"/g,"&quot;")),this.bufferText+=e,t||(this.contentPos=0)},e.prototype.startElementContent=function(){for(var e=this.elementStack[this.elementStack.length-1].previousTop,t=this.namespaceStack.length-1;t>e;t--)"NeedToWrite"===this.namespaceStack[t].kind&&this.writeNamespaceDeclaration(this.namespaceStack[t].prefix,this.namespaceStack[t].namespaceUri);this.bufferText+=">",this.contentPos=this.bufferText.length+1},e.prototype.rawText=function(e){this.bufferText+=e},e.prototype.addNamespace=function(e,t,i){var n=this.namespaceStack.length;this.namespaceStack.push(new r),this.namespaceStack[n].set(e,t,i)},e.prototype.lookupPrefix=function(e){for(var t=this.namespaceStack.length-1;t>=0;t--)if(this.namespaceStack[t].namespaceUri===e)return this.namespaceStack[t].prefix},e.prototype.lookupNamespace=function(e){for(var t=this.namespaceStack.length-1;t>=0;t--)if(this.namespaceStack[t].prefix===e)return this.namespaceStack[t].namespaceUri},e.prototype.lookupNamespaceIndex=function(e){for(var t=this.namespaceStack.length-1;t>=0;t--)if(this.namespaceStack[t].prefix===e)return t;return -1},e.prototype.pushNamespaceImplicit=function(e,t){var i,n=this.lookupNamespaceIndex(e);if(-1!==n){if(n>this.elementStack[this.elementStack.length-1].previousTop){if(this.namespaceStack[n].namespaceUri!==t)throw Error("XmlException namespace Uri needs to be the same as the one that is already declared");return}if("Special"===this.namespaceStack[n].kind){if("xml"!==e)throw Error('InvalidArgumentException: Prefix "xmlns" is reserved for use by XML.');if(t!==this.namespaceStack[n].namespaceUri)throw Error("InvalidArgumentException: Xml String");i="Implied"}else i=this.namespaceStack[n].namespaceUri===t?"Implied":"NeedToWrite"}else{if("http://www.w3.org/XML/1998/namespace"===t&&"xml"!==e||"http://www.w3.org/2000/xmlns/"===t&&"xmlns"!==e)throw Error("InvalidArgumentException");i="NeedToWrite"}this.addNamespace(e,t,i)},e.prototype.pushNamespaceExplicit=function(e,t){var i=this.lookupNamespaceIndex(e);-1!==i&&i>this.elementStack[this.elementStack.length-1].previousTop?this.namespaceStack[i].kind="Written":this.addNamespace(e,t,"Written")},e.prototype.addAttribute=function(e,t,i){var n=this.attributeStack.length;this.attributeStack.push(new s),this.attributeStack[n].set(e,t,i);for(var r=0;r<n;r++)if(this.attributeStack[r].isDuplicate(e,t,i))throw Error("XmlException: duplicate attribute name")},e.prototype.skipPushAndWrite=function(e,t,i){this.addAttribute(e,t,i),this.writeStartAttributeInternal(e,t,i)},e.prototype.checkName=function(e){if(/[ !@#$%^&*()+\=\[\]{};':"\\|,<>\/?]/.test(e))throw Error("InvalidArgumentException: invalid name character")},e}(),r=function(){function e(){}return e.prototype.set=function(e,t,i){this.prefix=e,this.namespaceUri=t,this.kind=i},e.prototype.destroy=function(){this.prefix=void 0,this.namespaceUri=void 0,this.kind=void 0},e}(),a=function(){function e(){}return e.prototype.set=function(e,t,i,n){this.previousTop=n,this.prefix=e,this.namespaceUri=i,this.localName=t},e.prototype.destroy=function(){this.previousTop=void 0,this.prefix=void 0,this.localName=void 0,this.namespaceUri=void 0},e}(),s=function(){function e(){}return e.prototype.set=function(e,t,i){this.prefix=e,this.namespaceUri=i,this.localName=t},e.prototype.isDuplicate=function(e,t,i){return this.localName===t&&(this.prefix===e||this.namespaceUri===i)},e.prototype.destroy=function(){this.prefix=void 0,this.namespaceUri=void 0,this.localName=void 0},e}(),o=function(){function e(e){this.emitBOM=!0,this.encodingType="Ansi",this.initBOM(e)}return Object.defineProperty(e.prototype,"includeBom",{get:function(){return this.emitBOM},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this.encodingType},set:function(e){this.encodingType=e},enumerable:!0,configurable:!0}),e.prototype.initBOM=function(e){this.emitBOM=null==e||e},e.prototype.getByteCount=function(e){return(t(e,"string"),""===e)?this.utf8Len(e.charCodeAt(0)):(null!==this.type&&void 0!==this.type||(this.type="Ansi"),this.getByteCountInternal(e,0,e.length))},e.prototype.utf8Len=function(e){return e<=127?1:e<=2047?2:e<=65535?3:e<=2097151?4:0},e.prototype.isHighSurrogate=function(e){return e>=55296&&e<=56319},e.prototype.toCodepoint=function(e,t){return((e=(1023&e)<<10)|1023&t)+65536},e.prototype.getByteCountInternal=function(e,t,i){var n=0;if("Utf8"===this.encodingType||"Unicode"===this.encodingType){for(var r="Utf8"===this.encodingType,a=0;a<i;a++){var s=e.charCodeAt(r?t:t++);if(this.isHighSurrogate(s)){if(r){var o=e.charCodeAt(++t);n+=this.utf8Len(this.toCodepoint(s,o))}else n+=4,++a}else n+=r?this.utf8Len(s):2;r&&t++}return n}return i},e.prototype.getBytes=function(e,i,n){if(t(e,"string"),t(i,"charIndex"),t(n,"charCount"),i<0||n<0)throw RangeError("Argument Out Of Range Exception: charIndex or charCount is less than zero");if(e.length-i<n)throw RangeError("Argument Out Of Range Exception: charIndex and charCount do not denote a valid range in string");if(""===e)return new ArrayBuffer(0);null!==this.type&&void 0!==this.type||(this.type="Ansi");var r=this.getByteCountInternal(e,i,n);switch(this.type){case"Utf8":return this.getBytesOfUtf8Encoding(r,e,i,n);case"Unicode":return this.getBytesOfUnicodeEncoding(r,e,i,n);default:return this.getBytesOfAnsiEncoding(r,e,i,n)}},e.prototype.getString=function(e,i,n){if(t(e,"bytes"),t(i,"index"),t(n,"count"),i<0||n<0)throw RangeError("Argument Out Of Range Exception: index or count is less than zero");if(e.byteLength-i<n)throw RangeError("Argument Out Of Range Exception: index and count do not denote a valid range in bytes");if(0===e.byteLength||0===n)return"";null!==this.type&&void 0!==this.type||(this.type="Ansi");var r="",a=new Uint8Array(e);switch(this.type){case"Utf8":return this.getStringOfUtf8Encoding(a,i,n);case"Unicode":var s=new Uint16Array(e);return this.getStringofUnicodeEncoding(s,i,n);default:for(var o=i,l=0;l<n;l++)r+=String.fromCharCode(a[o]),o++;return r}},e.prototype.getBytesOfAnsiEncoding=function(e,t,i,n){for(var r=new ArrayBuffer(e),a=new Uint8Array(r),s=0,o=0;o<n;o++){var l=t.charCodeAt(i++);a[s]=l<2048?l:63,s++}return r},e.prototype.getBytesOfUtf8Encoding=function(e,t,i,n){for(var r=new ArrayBuffer(e),a=new Uint8Array(r),s=i,o=0,l=0;l<n;l++){var h=t.charCodeAt(s);h<=127?a[o]=h:h<2048?(a[o]=192|h>>6,a[++o]=128|63&h):h<55296||h>=57344?(a[o]=224|h>>12,a[++o]=128|h>>6&63,a[++o]=128|63&h):(a[o]=239,a[++o]=191,a[++o]=189),++o,++s}return r},e.prototype.getBytesOfUnicodeEncoding=function(e,t,i,n){for(var r=new ArrayBuffer(e),a=new Uint16Array(r),s=0;s<n;s++){var o=t.charCodeAt(s);a[s]=o}return r},e.prototype.getStringOfUtf8Encoding=function(e,t,i){for(var n=0,r=t,a="";n<i;n++){for(var s=e[r++];r>e.length;)return a;s>127&&(s>191&&s<224&&r<i?s=(31&s)<<6|63&e[r]:s>223&&s<240&&r<e.byteLength?s=(15&s)<<12|(63&e[r])<<6|63&e[++r]:s>239&&s<248&&r<e.byteLength&&(s=(7&s)<<18|(63&e[r])<<12|(63&e[++r])<<6|63&e[++r]),++r),a+=String.fromCharCode(s)}return a},e.prototype.getStringofUnicodeEncoding=function(e,t,i){if(i>e.length)throw RangeError("ArgumentOutOfRange_Count");for(var n=new Uint16Array(i),r=0;r<i&&r<e.length;r++)n[r]=e[t++];return String.fromCharCode.apply(null,n)},e.prototype.destroy=function(){this.emitBOM=void 0,this.encodingType=void 0},e}(),l=function(){function e(e){this.bufferBlob=new Blob([""]),this.bufferText="",this.init(e),i.isMicrosoftBrowser=!!navigator.msSaveBlob}return Object.defineProperty(e.prototype,"buffer",{get:function(){return this.flush(),this.bufferBlob},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"encoding",{get:function(){return this.enc},enumerable:!0,configurable:!0}),e.prototype.init=function(e){null==e?(this.enc=new o(!1),this.enc.type="Utf8"):(this.enc=e,this.setBomByte())},e.prototype.setBomByte=function(){if(this.encoding.includeBom)switch(this.encoding.type){case"Unicode":var e=new ArrayBuffer(2),t=new Uint8Array(e);t[0]=255,t[1]=254,this.bufferBlob=new Blob([e]);break;case"Utf8":var i=new ArrayBuffer(3),n=new Uint8Array(i);n[0]=239,n[1]=187,n[2]=191,this.bufferBlob=new Blob([i]);break;default:this.bufferBlob=new Blob([""])}},e.prototype.save=function(e){""!==this.bufferText&&this.flush(),i.save(e,this.buffer)},e.prototype.write=function(e){if(void 0===this.encoding)throw Error("Object Disposed Exception: current writer is disposed");t(e,"string"),this.bufferText+=e,this.bufferText.length>=10240&&this.flush()},e.prototype.flush=function(){if(void 0!==this.bufferText&&null!==this.bufferText&&0!==this.bufferText.length){var e=this.encoding.getBytes(this.bufferText,0,this.bufferText.length);this.bufferText="",this.bufferBlob=new Blob([this.bufferBlob,e])}},e.prototype.writeLine=function(e){if(void 0===this.encoding)throw Error("Object Disposed Exception: current writer is disposed");t(e,"string"),this.bufferText=this.bufferText+e+"\r\n",this.bufferText.length>=10240&&this.flush()},e.prototype.destroy=function(){this.bufferBlob=void 0,this.bufferText=void 0,this.enc instanceof o&&this.enc.destroy(),this.enc=void 0},e}();e.XmlWriter=n,e.Namespace=r,e.XmlElement=a,e.XmlAttribute=s,e.StreamWriter=l,e.Encoding=o,e.validateNullOrUndefined=t,e.Save=i,Object.defineProperty(e,"__esModule",{value:!0})})(t)},68732:function(e,t,i){/*!
*  filename: ej2-react-schedule.umd.min.js
*  version : 23.1.36
*  Copyright Syncfusion Inc. 2001 - 2020. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/(function(e,t,i,n){"use strict";var r,a,s,o,l,h=(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return h(t,e),t.moduleName="view",t.complexTemplate={"timeScale.minorSlotTemplate":"timeScale.minorSlotTemplate","timeScale.majorSlotTemplate":"timeScale.majorSlotTemplate","group.headerTooltipTemplate":"group.headerTooltipTemplate"},t}(t.ComplexBase),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return h(t,e),t.propertyName="views",t.moduleName="views",t}(t.ComplexBase),d=(a=function(e,t){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.moduleName="resource",t}(t.ComplexBase),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.propertyName="resources",t.moduleName="resources",t}(t.ComplexBase),f=(s=function(e,t){return(s=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.moduleName="headerRow",t}(t.ComplexBase),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.propertyName="headerRows",t.moduleName="headerRows",t}(t.ComplexBase),y=(o=function(e,t){return(o=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),b=function(e){function t(t){var i=e.call(this,t)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!0,i.directivekeys={views:"view",resources:"resource",headerRows:"headerRow"},i.statelessTemplateProps=null,i.templateProps=null,i.immediateRender=!1,i.portals=[],i}return y(t,e),t.prototype.render=function(){if(!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return i.createElement("div",this.getDefaultAttributes(),[].concat(this.props.children,this.portals));e.prototype.render.call(this),this.initRenderCalled=!0},t}(n.Schedule);t.applyMixins(b,[t.ComponentBase,i.Component]);var D=(l=function(e,t){return(l=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),w=function(e){function t(t){var i=e.call(this,t)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!1,i.statelessTemplateProps=null,i.templateProps=null,i.immediateRender=!0,i.portals=[],i}return D(t,e),t.prototype.render=function(){if(!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return i.createElement("div",this.getDefaultAttributes(),[].concat(this.props.children,this.portals));e.prototype.render.call(this),this.initRenderCalled=!0},t}(n.RecurrenceEditor);t.applyMixins(w,[t.ComponentBase,i.Component]),e.Inject=t.Inject,e.ViewDirective=p,e.ViewsDirective=c,e.ResourceDirective=u,e.ResourcesDirective=m,e.HeaderRowDirective=v,e.HeaderRowsDirective=g,e.ScheduleComponent=b,e.RecurrenceEditorComponent=w,Object.keys(n).forEach(function(t){e[t]=n[t]}),Object.defineProperty(e,"__esModule",{value:!0})})(t,i(12027),i(9885),i(35272))},35272:function(e,t,i){/*!
*  filename: ej2-schedule.umd.min.js
*  version : 23.1.36
*  Copyright Syncfusion Inc. 2001 - 2020. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/(function(e,t,i,n,r,a,s,o,l,h,p){"use strict";function c(e,i){var n=0,r=t.createElement("div",{className:i}).cloneNode();return r.style.visibility="hidden",r.style.position="absolute",e.appendChild(r),n=r.getBoundingClientRect().height,t.remove(r),n}function d(e,i){var n=0,r=t.createElement("div",{className:i}).cloneNode();return r.style.visibility="hidden",r.style.position="absolute",e.appendChild(r),n=r.getBoundingClientRect().width,t.remove(r),n}function u(e){var t=getComputedStyle(e);return window.WebKitCSSMatrix?new WebKitCSSMatrix(t.webkitTransform).m42:0}function m(e){var t=getComputedStyle(e);return window.WebKitCSSMatrix?new WebKitCSSMatrix(t.webkitTransform).m41:0}function f(e,t){var i=new Date(e.getTime());return t=(t-i.getDay()-7)%7,new Date(i.setDate(i.getDate()+t))}function v(e,t){var i=f(e,t),n=new Date(i.getFullYear(),i.getMonth(),i.getDate()+6);return new Date(n.getTime())}function g(e){return new Date(e.getFullYear(),e.getMonth(),1)}function y(e){return new Date(e.getFullYear(),e.getMonth()+1,0)}function b(e){var t=new Date(e.getFullYear(),0,1).valueOf();return Math.ceil((new Date(e.getFullYear(),e.getMonth(),e.getDate()).valueOf()-t+tm)/tm/7)}function D(e,t){return new Date(t.valueOf()-(t.valueOf()-e.valueOf())/2)}function w(e,t){var i=e.getTimezoneOffset(),n=new Date(e.getTime()+t),r=n.getTimezoneOffset()-i;return e.setTime(n.getTime()+r*tf),e}function C(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())}function T(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0).getTimezoneOffset(),i=e.getTimezoneOffset()-t;return e.getTime()-new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0).getTime()-60*i*1e3}function E(e,t){return Math.ceil((t.getTime()-e.getTime())/tm)}function S(e,t){return e=new Date(""+e),new Date(e.setDate(e.getDate()+t))}function O(e,t){var i=(e=new Date(""+e)).getDate();return e.setDate(1),e.setMonth(e.getMonth()+t),e.setDate(Math.min(i,M(e))),e}function k(e,t){var i=(e=new Date(""+e)).getDate();return e.setDate(1),e.setFullYear(e.getFullYear()+t),e.setDate(Math.min(i,M(e))),e}function x(e,t,i){var n=new Date(e.getTime());n.setHours(t.getHours()),n.setMinutes(t.getMinutes()),n.setSeconds(t.getSeconds());var r=new Date(e.getTime());return 0===i.getHours()?r=S(r,1):(r.setHours(i.getHours()),r.setMinutes(i.getMinutes()),r.setSeconds(i.getSeconds())),{startHour:n,endHour:r}}function M(e){return y(e).getDate()}function V(e,t){var i=C(new Date(e));return Math.round((C(new Date(t)).getTime()-i.getTime())/tm)}function I(e){return new Date(-1!==e.indexOf("Date")?parseInt(e.match(/\d+/g).toString(),10):-1!==e.indexOf("T")?e:e.replace(/-/g,"/"))}function A(){if(null!==tv)return tv;null===tg&&(tg=window.devicePixelRatio||window.screen.availWidth/document.documentElement.clientWidth);var e=t.createElement("div"),i=0;e.style.cssText="width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;",document.body.appendChild(e);var n=devicePixelRatio?"1.10"===devicePixelRatio.toFixed(2)||devicePixelRatio<=1?Math.ceil(devicePixelRatio%1):Math.floor(devicePixelRatio%1):0;return i=e.offsetWidth-e.clientWidth-n|0,document.body.removeChild(e),tv=i}function N(){var e=window.devicePixelRatio||window.screen.availWidth/document.documentElement.clientWidth;tg&&tg!==e&&(tv=null,tg=e)}function P(e,t,i,n,r){for(var a=0,s=e.length;a<s;a++)if(e[parseInt(a.toString(),10)][""+t]===i){if(!n)return a;var o=r.slice(-2)[0].field;if((n[""+o]instanceof Array?n[""+o]:[n[""+o]]).join(",").includes(e[parseInt(a.toString(),10)][r.slice(-1)[0].groupIDField]))return a}return -1}function H(e){var t=getComputedStyle(e);return e.offsetHeight+(parseInt(t.marginTop,10)||0)+(parseInt(t.marginBottom,10)||0)}function R(e){for(var t=0,i=[].slice.call(e.children);t<i.length;t++){var n=i[t];e.removeChild(n)}}function F(e){var t=new Date(e.getFullYear(),0,1),i=new Date(e.getFullYear(),6,1);return e.getTimezoneOffset()<Math.max(t.getTimezoneOffset(),i.getTimezoneOffset())}function U(e){return Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function L(){return window.navigator.userAgent.toLowerCase().indexOf("mobi")>-1}function B(){return window.navigator.userAgent.toLowerCase().indexOf("ipad")>-1}function j(e,i){if("multiple"===i)e=e.split(" ").map(function(e){return e.charAt(0).toLocaleUpperCase()+e.substring(1)}).join(" ");else if("single"===i){if(e[0]>="0"&&e[0]<="9"){var n=e.match(/[a-zA-Z]/);e=t.isNullOrUndefined(n)?e:e.slice(0,n.index)+e[n.index].toLocaleUpperCase()+e.slice(n.index+1)}e=e[0].toLocaleUpperCase()+e.slice(1)}return e}function W(e,i,n,r){void 0===r&&(r="Gregorian");var a,s,o=ep(e),l=i.getConstant(rb)+" ",h=r.toLowerCase();if("en"===n||"en-US"===n){var p="months.stand-alone.abbreviated",c="days.stand-alone.abbreviated";s=t.getValue(p,t.getDefaultDateObject(h)),a=t.getValue(c,t.getDefaultDateObject(h))}else p="main."+n+".dates.calendars."+h+".months.stand-alone.abbreviated",c="main."+n+".dates.calendars."+h+".days.stand-alone.abbreviated",s=t.getValue(p,t.cldrData),a=t.getValue(c,t.cldrData);switch(o.interval>1&&(l+=o.interval+" "),o.freq){case"DAILY":l+=i.getConstant(rw);break;case"WEEKLY":l+=i.getConstant(rC)+" "+i.getConstant(ry)+" ",o.day.forEach(function(e,i){l+=j(t.getValue(rS[""+e],a),"single")+(o.day.length-1===i?"":", ")});break;case"MONTHLY":l+=i.getConstant(rT)+" "+i.getConstant(ry)+" "+q(o,a,i);break;case"YEARLY":l+=i.getConstant(rE)+" "+i.getConstant(ry)+" "+j(t.getValue(o.month[0].toString(),s),"single")+" "+q(o,a,i)}if(o.count)l+=", "+o.count+" "+i.getConstant(rg);else if(o.until){var d=o.until;l+=", "+i.getConstant(rD)+" "+d.getDate()+" "+j(t.getValue((d.getMonth()+1).toString(),s),"single")+" "+d.getFullYear()}return l}function q(e,i,n){var r="";if(e.monthDay.length)r+=e.monthDay[0];else if(e.day){var a=e.setPosition-1;r+=n.getConstant(rv[a>-1?a:rv.length-1])+" "+j(t.getValue(rS[e.day[0]],i),"single")}return r}function z(e,i,n,r,a,s,o,l){void 0===a&&(a=rf),void 0===s&&(s=null),void 0===o&&(o="Gregorian"),void 0===l&&(l=null);var h,p=ep(i);eG=ed(o);var c=[],d=new Date(e.getTime());ez=[];var u=t.isNullOrUndefined(n)?[]:n.split(","),m=new rp;if(u.forEach(function(e){var t=Y(e);l&&(t=m.add(new Date(t.getTime()),l)),ez.push(new Date(t.getTime()).setHours(0,0,0,0))}),p.recExceptionCount=t.isNullOrUndefined(p.count)?0:ez.length,e_=s&&s>e&&!p.count?new Date(new Date(s.getTime()).setHours(0,0,0)):null,!p.until&&e_&&((h=new Date(e_.getTime())).setDate(e_.getDate()+a*p.interval),p.until=h),p.until&&e>p.until)return c;if(eY=a,function(e){for(;ru[0]!==e;)(function(e){var t=e.shift();e.push(t)})(ru)}(rm[parseInt(r.toString(),10)]),p.until){var f=C(p.until);p.until=new Date(f.getFullYear(),f.getMonth(),f.getDate(),23,59,59)}switch(p.freq){case"DAILY":!function(e,t,i,n){for(var r=new Date(e.getTime()),a=n.interval,s=G(e,n),o=n.day;eo(r,t)&&!(ec(r,n)&&(o.indexOf(rm[r.getDay()])>-1||0===o.length)&&(_(i,r.getTime()),s&&i.length+n.recExceptionCount>=s));)r.setDate(r.getDate()+a),r.getHours()!==e.getHours()&&r.setHours(e.getHours())}(d,p.until,c,p);break;case"WEEKLY":!function(e,i,n,r){var a=new Date(e.getTime());r.day.length||r.day.push(rm[e.getDay()]);var s,o=r.interval,l=r.day,h=G(e,r),p=!0,c=[];if(l.length>1)for((t.isNullOrUndefined(r.wkst)||""===r.wkst)&&(r.wkst=ru[0]),s=rm.indexOf(r.wkst);eo(a,i);){var d=rm.indexOf(rm[a.getDay()])-s,u=S(a,-(d=-1===d?6:d)),m=S(u,6),f=new Date(a.getTime());for(m=C(m),f=C(f);m>=f&&(l.indexOf(rm[a.getDay()])>-1&&c.push([a.getTime()]),!(h&&n.length+r.recExceptionCount>=h));)a.setDate(a.getDate()+1),a.getHours()!==e.getHours()&&a.setHours(e.getHours()),f=C(f=new Date(a.getTime()));if(a.setDate(a.getDate()-1),h&&n.length+r.recExceptionCount>=h)break;a.setDate(a.getDate()+1+7*(o-1)),ee(c,p,e,i,n,r),c=[]}else{for(a=eh(e,r.day);eo(a,i)&&((p=ec(a,r))&&l.indexOf(rm[a.getDay()])>-1&&_(n,a.getTime()),!(h&&n.length+r.recExceptionCount>=h));)a.setDate(a.getDate()+7*o);ee(c,p,e,i,n,r),c=[]}}(d,p.until,c,p);break;case"MONTHLY":K(d,p.until,c,p);break;case"YEARLY":!function(e,i,n,r){switch(r.yearDay.length?"YEARDAY":r.weekNo.length?"WEEKNO":"MONTH"){case"MONTH":K(e,i,n,r);break;case"WEEKNO":!function(e,i,n,r){for(var a,s,o,l,h,p=eG.getYearLastDate(e,0),c=G(e,r),d=r.weekNo,u=[],m=r.day;eo(p,i);){s=6-ru.indexOf(rm[p.getDay()])+1;for(var f=0;f<d.length;f++)for(l=1===(o=(o=d[parseInt(f.toString(),10)])>0?o:53+o+1)?s:s+7*(o-1),h=1===o?s-7:s+7*(o-2);h<l;)a=new Date(p.getTime()+tm*h),(0===m.length||m.indexOf(rm[a.getDay()])>-1)&&(t.isNullOrUndefined(r.setPosition)?er(void 0,e,i,n,r,a.getTime()):u.push([a.getTime()])),h++;if(t.isNullOrUndefined(r.setPosition)||es(u,void 0,e,i,n,r),c&&n.length+r.recExceptionCount>=c)return;p=eG.getYearLastDate(a,r.interval),u=[]}}(e,i,n,r);break;case"YEARDAY":!function(e,i,n,r){for(var a,s,o=eG.getYearLastDate(e,0),l=G(e,r),h=[],p=r.day;eo(o,i);){for(var c=0;c<r.yearDay.length;c++)s=r.yearDay[parseInt(c.toString(),10)],a=new Date(o.getTime()),s!==eG.getLeapYearDaysCount()&&s!==-eG.getLeapYearDaysCount()||eG.isLeapYear(eG.getFullYear(a),1)?(a.setDate(a.getDate()+(s<0?eG.getYearDaysCount(a,1)+1+s:s)),(0===p.length||p.indexOf(rm[a.getDay()])>-1)&&(null==r.setPosition?er(void 0,e,i,n,r,a.getTime()):h.push([a.getTime()]))):a.setDate(a.getDate()+1);if(t.isNullOrUndefined(r.setPosition)||es(h,void 0,e,i,n,r),l&&n.length+r.recExceptionCount>=l)return;o=eG.getYearLastDate(a,r.interval),h=[]}}(e,i,n,r)}}(d,p.until,c,p)}return c}function Y(e){return new Date(e.substr(0,4)+"-"+e.substr(4,2)+"-"+e.substr(6,5)+":"+e.substr(11,2)+":"+e.substr(13))}function _(e,t){var i=new Date(t).setHours(0,0,0,0);-1===ez.indexOf(i)&&(!e_||i>=e_.getTime())&&e.push(t)}function G(e,t){var i=eY;return t.count?i=t.count:t.until&&("DAILY"===t.freq||"WEEKLY"===t.freq?i=Math.floor((t.until.getTime()-e.getTime())/tm)+1:"MONTHLY"!==t.freq&&"YEARLY"!==t.freq||(i=Math.floor((t.until.getMonth()+12*t.until.getFullYear()-(e.getMonth()+12*e.getFullYear()))/t.interval)+(t.day.length>1?Math.floor((t.until.getTime()-e.getTime())/tm)+1:1),"YEARLY"===t.freq&&(i=t.month.length>1?i*t.month.length:i))),i}function K(e,i,n,r){switch(r.month.length||r.day.length||r.monthDay.length?!(r.month.length>0)||r.day.length||r.monthDay.length||r.monthDay.push(e.getDate()):(r.monthDay.push(e.getDate()),"YEARLY"===r.freq&&r.month.push(e.getMonth()+1)),r.monthDay.length&&!r.day.length?"date":!r.monthDay.length&&r.day.length?"day":"both"){case"day":switch(r.freq){case"MONTHLY":$(e,i,n,r);break;case"YEARLY":!function(e,i,n,r){var a=r.day,s=a.map(function(e){return rO.test(e)});if(a.length>1&&s.indexOf(!0)>-1)return void function(e,i,n,r){var a,s,o,l=r.day,h=G(e,r),p=new Date(e.getTime()),c=r.interval,d=[],u=[],m=0;p=eG.getMonthStartDate(p);var f=[];for(r.month.length&&eG.setMonth(p,r.month[0],1),p=eh(p,r.day);eo(p,i);){s=new Date(p.getTime());for(var v=0;v<=r.month.length;v++)for(var g=0;g<=l.length-1;g++){for(p=eh(p=eG.getMonthStartDate(p),r.day),d=[];eG.isSameYear(s,p)&&h&&n.length+r.recExceptionCount<=h;)for(;eG.isSameYear(s,p);){if(s=new Date(p.getTime()),0===r.month.length||r.month.length>0&&r.month[parseInt(v.toString(),10)]===eG.getMonth(s)){var y=l[parseInt(g.toString(),10)].match(rx),b=parseInt(y[0],10);for(o=new Date(p.getTime());eG.isSameYear(o,p)&&eG.isSameMonth(o,p);)y[y.length-1]===rm[o.getDay()]&&d.push([o.getTime()]),o.setDate(o.getDate()+1);o.setDate(o.getDate()-1),a=isNaN(a=y[0].indexOf("-")>-1?d.length- -1*b:b-1)?0:a}m=J(p,r,m,void 0,1),p=eh(p,r.day)}if(p=new Date(0===g&&o?o.getTime():s.getTime()),d.length>0&&(t.isNullOrUndefined(r.setPosition)?es(d,void 0,e,i,n,r,a):u=[en(d,a,f)]),h&&n.length+r.recExceptionCount>=h)return}t.isNullOrUndefined(r.setPosition)||(ea(u,void 0,e,i,n,r),f=[]),eG.isLastMonth(p)?(eG.setValidDate(p,1,1),p.setFullYear(p.getFullYear()+c-1)):p.setFullYear(p.getFullYear()+c),p=eh(p,r.day),r.month.length&&eG.setMonth(p,r.month[0],p.getDate())}}(e,i,n,r);if(r.month.length&&1===a.length&&s.indexOf(!0)>-1)return void $(e,i,n,r);var o,l=new Date(e.getTime()),h=G(e,r),p=r.interval,c=[];for(r.month.length&&eG.setMonth(l,r.month[0],l.getDate()),t.isNullOrUndefined(r.setPosition)&&0===r.month.length&&0===r.weekNo.length&&l.setFullYear(e.getFullYear(),0,1),l=eh(l=eG.getMonthStartDate(l),r.day);eo(l,i);){for(o=new Date(l.getTime());eG.isSameYear(o,l)&&h&&n.length+r.recExceptionCount<=h;)for(o=new Date(l.getTime());eG.isSameYear(o,l);){if(!(0===r.month.length||r.month.length>0&&!eG.checkMonth(l,r.month))){eG.setValidDate(l,1,1),l=eh(l,r.day);break}if(a.length>1){if(eG.compareMonth(o,l)){eG.setValidDate(l,1,1),l=eh(l,r.day);break}a.indexOf(rm[o.getDay()])>-1&&c.push([o.getTime()]),o.setDate(o.getDate()+1)}else{if(o.getFullYear()>l.getFullYear()){eG.setValidDate(l,1,1),l=eh(l,r.day);break}var d=el(a[0]);rm[o.getDay()]===d&&new Date(o.getFullYear(),o.getMonth(),0)>new Date(e.getFullYear())&&c.push([o.getTime()]),o.setDate(o.getDate()+7)}}if(l.setFullYear(o.getFullYear(),o.getMonth(),o.getDate()),ei(c,e,i,n,r),eG.isLastMonth(l)&&(eG.setValidDate(l,1,1),l=eh(l,r.day)),l.setFullYear(l.getFullYear()+p-1),h&&n.length+r.recExceptionCount>=h)return;l=eh(l,r.day),c=[]}}(e,i,n,r)}break;case"both":case"date":switch(r.freq){case"MONTHLY":Z(e,i,n,r);break;case"YEARLY":!function(e,t,i,n){if(n.month.length)return void Z(e,t,i,n);var r,a=X(e,n);for(a.tempDate=a.mainDate=eG.getMonthStartDate(a.tempDate);eo(a.tempDate,t);){for(r=new Date(a.tempDate.getTime());eG.isSameYear(r,a.tempDate)&&a.expectedCount&&i.length+n.recExceptionCount<=a.expectedCount;){if(!(0===n.month.length||n.month.length>0&&!eG.checkMonth(a.tempDate,n.month))){eG.setValidDate(a.tempDate,1,1),a.tempDate=eh(a.tempDate,n.day);break}Q(n,a,t,!1),a.beginDate=new Date(a.tempDate.getTime()),a.monthInit=J(a.tempDate,n,a.monthInit,a.beginDate)}if(a.tempDate.setFullYear(r.getFullYear(),r.getMonth(),r.getDate()),ee(a.dateCollection,a.state,e,t,i,n),eG.isLastMonth(a.tempDate)&&(eG.setValidDate(a.tempDate,1,1),a.tempDate=eh(a.tempDate,n.day)),a.expectedCount&&i.length+n.recExceptionCount>=a.expectedCount)return;a.tempDate.setFullYear(a.tempDate.getFullYear()+n.interval-1),a.tempDate=eh(a.tempDate,n.day),a.monthInit=J(a.tempDate,n,a.monthInit,a.beginDate),a.dateCollection=[]}}(e,i,n,r)}}}function X(e,t){var i={monthCollection:[],index:0,tempDate:new Date(e.getTime()),mainDate:new Date(e.getTime()),expectedCount:G(e,t),monthInit:0,dateCollection:[]};return t.month.length&&eG.setMonth(i.tempDate,t.month[0],i.tempDate.getDate()),i}function Z(e,i,n,r){var a=X(e,r);if(a.tempDate=a.mainDate=eG.getMonthStartDate(a.tempDate),!(("MONTHLY"===r.freq&&12===r.interval||"YEARLY"===r.freq)&&eG.getMonthDaysCount(e)<r.monthDay[0]))for(;eo(a.tempDate,i);){if(a.beginDate=new Date(a.tempDate.getTime()),Q(r,a,i,!0,e,n),t.isNullOrUndefined(r.setPosition)||es(a.dateCollection,a.state,e,i,n,r),a.expectedCount&&n.length+r.recExceptionCount>=a.expectedCount)return;a.monthInit=J(a.tempDate,r,a.monthInit,a.beginDate),a.dateCollection=[]}}function Q(e,i,n,r,a,s){for(var o=0;o<e.monthDay.length;o++){i.date=e.monthDay[parseInt(o.toString(),10)],i.tempDate=eG.getMonthStartDate(i.tempDate);var l,h,p,c=eG.getMonthDaysCount(i.tempDate);if(i.date=i.date>0?i.date:c+i.date+1,l=i.tempDate,h=i.date,p=i.mainDate,h<=eG.getMonthDaysCount(l)&&l>=p&&i.date>0){if(eG.setDate(i.tempDate,i.date),n&&i.tempDate>n)return;(0===e.day.length||e.day.indexOf(rm[i.tempDate.getDay()])>-1)&&(r&&t.isNullOrUndefined(e.setPosition)&&i.expectedCount&&s.length+e.recExceptionCount<i.expectedCount?er(i.state,a,n,s,e,i.tempDate.getTime()):i.dateCollection.push([i.tempDate.getTime()]))}}}function J(e,i,n,r,a){void 0===r&&(r=null);var s=r?r.getMonth():0,o=eG.getMonthStartDate(e);return a=t.isNullOrUndefined(a)?i.interval:a,e.setFullYear(o.getFullYear()),e.setMonth(o.getMonth()),e.setDate(o.getDate()),i.month.length?(n++,n%=i.month.length,eG.setMonth(e,i.month[parseInt(n.toString(),10)],1),0===n&&eG.addYears(e,a,i.month[0])):(r&&r.getFullYear()<e.getFullYear()&&(s=e.getMonth()-1),eG.setValidDate(e,a,1,s,r)),n}function $(e,i,n,r){if(r.day.length>1)!function(e,i,n,r){var a=r.day,s=new Date(e.getTime());s=eG.getMonthStartDate(s);var o,l,h=[],p=[],c=[],d=G(e,r),u=0;for(r.month.length&&eG.setMonth(s,r.month[0],1),s=eh(s,r.day);eo(s,i)&&d&&n.length+r.recExceptionCount<d;){var m=new Date(s.getTime());if(a.map(function(e){return rO.test(e)}).indexOf(!0)>-1){for(var f=0;f<=a.length-1;f++){var v=a[parseInt(f.toString(),10)].match(rx),g=parseInt(v[0],10);for(s=new Date(s.getTime()),s=eh(s=eG.getMonthStartDate(s),a),m.setFullYear(s.getFullYear(),s.getMonth(),s.getDate());eG.isSameYear(m,s)&&eG.isSameMonth(m,s);)v[v.length-1]===rm[m.getDay()]&&h.push([m.getTime()]),m.setDate(m.getDate()+1);if(m.setDate(m.getDate()-1),o=isNaN(o=v[0].indexOf("-")>-1?h.length- -1*g:g-1)?0:o,h.length>0&&(t.isNullOrUndefined(r.setPosition)?es(h,void 0,e,i,n,r,o):p=[en(h,o,c)]),d&&n.length+r.recExceptionCount>=d)return;h=[]}t.isNullOrUndefined(r.setPosition)||(ea(p,void 0,e,i,n,r),c=[]),u=J(s,r,u,l),s=eh(s,r.day),h=[]}else{var y=[],b=function(e){var t={};return e.forEach(function(i,n){if(n===e.length-1){for(var r=ru.indexOf(i),a=r;a%7!==ru.indexOf(e[0]);)a++;t[""+i]=a-r}else t[""+i]=ru.indexOf(e[n+1])-ru.indexOf(i)}),t}(a);m.setFullYear(s.getFullYear(),s.getMonth(),s.getDate());var D=new Date(s.getTime());for(l=new Date(s.getTime());eG.isSameMonth(D,s);)y.push(s.getTime()),a.indexOf(rm[s.getDay()])>-1&&(h.push(y),y=[]),s.setDate(s.getDate()+b[rm[s.getDay()]]);if(o=r.setPosition<1?h.length+r.setPosition:r.setPosition-1,t.isNullOrUndefined(r.setPosition)){o=0;for(var w=[],C=0;C<h.length;C++)for(var T=0;T<h[parseInt(C.toString(),10)].length;T++)w.push(h[parseInt(C.toString(),10)][parseInt(T.toString(),10)]);h=[w]}if(h.length>0&&es(h,void 0,e,i,n,r,o),d&&n.length+r.recExceptionCount>=d)return;u=J(s,r,u,l),s=eh(s,r.day),h=[]}}}(e,i,n,r);else{var a,s=new Date(e.getTime()),o=G(e,r),l=[],h=0;for(s=eG.getMonthStartDate(s),r.month.length&&eG.setMonth(s,r.month[0],1),s=eh(s,r.day);eo(s,i)&&o&&n.length+r.recExceptionCount<o;){a=new Date(s.getTime());for(var p=new Date(s.getTime());eG.isSameMonth(s,p);)l.push([p.getTime()]),p.setDate(p.getDate()+7);ei(l,e,i,n,r),h=J(s,r,h,a),s=eh(s,r.day),l=[]}}}function ee(e,i,n,r,a,s){var o=s.setPosition<1?e.length+s.setPosition:s.setPosition-1;t.isNullOrUndefined(s.setPosition)&&(o=0,e=et(e)),e.length>0&&es(e,i,n,r,a,s,o)}function et(e){for(var t=[],i=0;i<e.length;i++)for(var n=0;n<e[parseInt(i.toString(),10)].length;n++)t.push(new Date(e[parseInt(i.toString(),10)][parseInt(n.toString(),10)]).getTime());return e=t.length>0?[t]:[]}function ei(e,t,i,n,r){var a=[],s=function(e,t){var i,n={monthCollection:[],index:0};if(1===t.length){var r=t[0].match(rx),a=void 0;r.length>1?i=(a=parseInt(r[0],10))<1?e.length+a:a-1:(i=0,e=et(e))}else i=0,e=et(e);return n.monthCollection=e,n.index=i,n}(e,r.day);e=s.monthCollection;var o=s.index;null!=r.setPosition?ea([en(e,o,a)],void 0,t,i,n,r):e.length>0&&es(e,void 0,t,i,n,r,o),a=[]}function en(e,t,i){for(var n=0;n<e[parseInt(t.toString(),10)].length;n++)i.push(e[parseInt(t.toString(),10)][parseInt(n.toString(),10)]);return i}function er(e,t,i,n,r,a){var s=G(t,r),o=new Date(a);e=ec(o,r),o>=t&&eo(o,i)&&e&&s&&n.length+r.recExceptionCount<s&&_(n,a)}function ea(e,t,i,n,r,a){if(e.length>0)for(var s=0;s<e.length;s++){e[parseInt(s.toString(),10)].sort();var o=a.day.map(function(e){return rO.test(e)}),l="YEARLY"===a.freq&&a.validRules.indexOf("BYMONTH")>-1&&!(o.indexOf(!0)>-1)?function(e,t,i,n,r){var a=new Date(e,r.month[0]-1,1),s=new Date(e,r.month[0],0).getDate(),o=Math.ceil(((a.getDay()-0+7)%7+s)/7)-1,l=i[parseInt(n.toString(),10)][parseInt(o.toString(),10)];return ec(new Date(l),r)?o:o-1}(new Date(e[0][0]).getFullYear(),0,e,s,a):e[parseInt(s.toString(),10)].length+a.setPosition,h=a.setPosition<1?l:a.setPosition-1;er(t,i,n,r,a,e[parseInt(s.toString(),10)][parseInt(h.toString(),10)])}}function es(e,i,n,r,a,s,o){if(e.length>0){o=t.isNullOrUndefined(o)?s.setPosition<1?e.length+s.setPosition:s.setPosition-1:o,e[parseInt(o.toString(),10)].sort();for(var l=0;l<e[parseInt(o.toString(),10)].length;l++)er(i,n,r,a,s,e[parseInt(o.toString(),10)][parseInt(l.toString(),10)])}}function eo(e,t){return!t||e<=t}function el(e){return e.replace(rk,"")}function eh(e,t){var i=new Date(e.getTime());if(t.length>0){for(var n=[],r=0;r<=t.length-1;r++)n.push(el(t[parseInt(r.toString(),10)]));if(-1===n.indexOf(rm[i.getDay()]))do i.setDate(i.getDate()+1);while(-1===n.indexOf(rm[i.getDay()]))}return i}function ep(e){var t,i={freq:null,interval:1,count:null,until:null,day:[],wkst:null,month:[],weekNo:[],monthDay:[],yearDay:[],setPosition:null,validRules:[]},n=[];if(e.split(";").forEach(function(e){switch((n=e.split("="))[0]){case"UNTIL":t=n[1],i.until=Y(t);break;case"BYDAY":i.day=n[1].split(","),i.validRules.push(n[0]);break;case"BYMONTHDAY":i.monthDay=n[1].split(",").map(Number),i.validRules.push(n[0]);break;case"BYMONTH":i.month=n[1].split(",").map(Number),i.validRules.push(n[0]);break;case"BYYEARDAY":i.yearDay=n[1].split(",").map(Number),i.validRules.push(n[0]);break;case"BYWEEKNO":i.weekNo=n[1].split(",").map(Number),i.validRules.push(n[0]);break;case"INTERVAL":i.interval=parseInt(n[1],10);break;case"COUNT":i.count=parseInt(n[1],10);break;case"BYSETPOS":i.setPosition=parseInt(n[1],10)>4?-1:parseInt(n[1],10);break;case"FREQ":i.freq=n[1];break;case"WKST":i.wkst=n[1]}}),"MONTHLY"===i.freq&&0===i.monthDay.length){var r=i.validRules.indexOf("BYDAY");i.validRules.splice(r,1)}return i}function ec(e,t){var i=!0,n=t.day,r=t.month,a=eG.getExpectedDays(e,t.monthDay),s=t.yearDay;return t.validRules.forEach(function(t){switch(t){case"BYDAY":var o,l;o=e.getDay(),l=[],n.forEach(function(e){var t=e.match(rx);2===t.length?l.push(t[1]):l.push(t[0])}),-1===l.indexOf(rm[parseInt(o.toString(),10)])&&(i=!1);break;case"BYMONTH":eG.checkMonth(e,r)&&(i=!1);break;case"BYMONTHDAY":(function(e,t){var i,n=t.slice(0),r=eG.getMonthDaysCount(e);for(i=n.shift();i;){if(i<0&&(i=i+r+1),i===e.getDate())return!1;i=n.shift()}return!0})(e,a)&&(i=!1);break;case"BYYEARDAY":(function(e,t){var i,n,r=t.slice(0),a=(rd[eG.getFullYear(e)]||(rd[eG.getFullYear(e)]=eG.getYearLastDate(e,0)),i=rd[eG.getFullYear(e)],Math.ceil((e.getTime()-i.getTime())/tm));for(n=r.shift();n;){if(n<0&&(n=n+eG.getYearDaysCount(e,0)+1),n===a)return!1;n=r.shift()}return!0})(e,s)&&(i=!1)}}),i}function ed(e){return"Islamic"===e?new rh:new rl}function eu(e){return[e.getUTCFullYear(),em(e.getUTCMonth()+1),em(e.getUTCDate()),"T",em(e.getUTCHours()),em(e.getUTCMinutes()),em(e.getUTCSeconds()),"Z"].join("")}function em(e){return("0"+e).slice(-2)}var ef,ev,eg,ey,eb,eD,ew,eC,eT,eE,eS,eO,ek,ex,eM,eV,eI,eA,eN,eP,eH,eR,eF,eU,eL,eB,ej,eW,eq,ez,eY,e_,eG,eK="cellClick",eX="cellDoubleClick",eZ="moreEventsClick",eQ="select",eJ="actionBegin",e$="actionComplete",e0="actionFailure",e1="navigating",e2="renderCell",e3="eventClick",e6="eventRendered",e4="dataBinding",e5="popupOpen",e8="popupClose",e9="resizeStart",e7="resizeStop",te="inlineClick",tt="cellSelect",ti="virtualScrollStart",tn="virtualScrollStop",tr="print",ta="data-ready",ts="events-loaded",to="content-ready",tl="scroll",th="virtual-scroll",tp="scroll-ui-update",tc="ui-update",td="document-click",tu="cell-mouse-down",tm=864e5,tf=6e4,tv=null,tg=null,ty="e-schedule",tb="e-device",tD="e-multi-drag",tw="e-icons",tC="e-enable",tT="e-disable",tE="e-table-container",tS="e-schedule-table",tO="e-all-day-cells",tk="e-all-day-row",tx="e-content-table",tM="e-work-cells",tV="e-work-hours",tI="e-popup-open",tA="e-date-header-wrap",tN="e-date-header-container",tP="e-header-cells",tH="e-work-days",tR="e-other-month",tF="e-current-day",tU="e-current-date",tL="e-current-panel",tB="e-previous-panel",tj="e-translate",tW="e-left-indent",tq="e-left-indent-wrap",tz="e-event-table",tY="e-resource-group-cells",t_="e-resource-text",tG="e-resource-column-wrap",tK="e-resource-column-table",tX="e-parent-node",tZ="e-resource-expand",tQ="e-resource-collapse",tJ="e-resource-tree-icon",t$="e-resource-cells",t0="e-time-cells-wrap",t1="e-time-slots",t2="e-alternate-cells",t3="e-current-time",t6="e-current-timeline",t4="e-hide-childs",t5="e-scroll-container",t8="e-timeline-wrapper",t9="e-appointment-wrapper",t7="e-day-wrapper",ie="e-schedule-resource-toolbar-container",it="e-schedule-toolbar",ii="e-schedule-resource-toolbar",ir="e-selected-cell",ia="e-week-number-wrapper",is="e-week-number",io="e-appointment-wrap",il="e-wrapper-container",ih="e-appointment-container",ip="e-appointment",ic="e-block-appointment",id="e-block-indicator",iu="e-appointment-border",im="e-appointment-details",iv="e-subject-wrap",ig="e-resource-name",iy="e-time",ib="e-table-wrap",iD="e-outer-table",iw="e-content-wrap",iC="e-virtual-track",iT="e-agenda-cells",iE="e-current-day",iS="e-active-appointment-agenda",iO="e-month-header",ik="e-day-date-header",ix="e-date-column",iM="e-navigate",iV="e-date-header",iI="e-date-time",iA="e-no-event",iN="e-appointment-indicator",iP="e-indicator",iH="e-event-action",iR="e-new-event",iF="e-schedule-event-clone",iU="e-clone-time-indicator",iL="e-event-resize",iB="e-resize-clone",ij="e-left-handler",iW="e-right-handler",iq="e-top-handler",iz="e-bottom-handler",iY="e-recurrence-icon",i_="e-recurrence-edit-icon",iG="e-header-row",iK="e-all-day-appointment-wrapper",iX="e-all-day-appointment",iZ="e-appointment-hide",iQ="e-row-count-wrapper",iJ="e-all-day-appointment-section",i$="e-appointment-expand",i0="e-appointment-collapse",i1="e-more-indicator",i2="e-cell-popup",i3="e-event-popup",i6="e-popup-header",i4="e-header-icon-wrapper",i5="e-popup-footer",i8="e-date-time-details",i9="e-event-details",i7="e-event-create",ne="e-event-edit",nt="e-event-delete",ni="e-text-ellipsis",nn="e-more-popup-wrapper",nr="e-more-event-popup",na="e-more-event-date-header",ns="e-header-date",no="e-more-event-close",nl="e-more-event-content",nh="e-more-appointment-wrapper",np="e-quick-dialog-occurrence-event",nc="e-quick-dialog-series-event",nd="e-quick-dialog-following-events",nu="e-following-events-dialog",nm="e-quick-dialog-delete",nf="e-quick-dialog-cancel",nv="e-quick-alertok",ng="e-quick-alertcancel",ny="e-quick-alertfollowing",nb="e-quick-dialog-alert-btn",nD="e-schedule-dialog",nw="e-schedule-form",nC="e-all-day",nT="e-time-zone",nE="e-repeat",nS="e-subject",nO="e-location",nk="e-location-details",nx="e-start",nM="e-end",nV="e-description",nI="e-description-details",nA="e-time-zone-row",nN="e-start-time-zone",nP="e-end-time-zone",nH="e-event-cancel",nR="e-event-save",nF="e-icon-disable",nU="e-edit",nL="e-edit-icon",nB="e-delete",nj="e-delete-icon",nW="e-close",nq="e-close-icon",nz="e-schedule-error",nY="e-animate",n_="e-hidden",nG="e-disable-dates",nK="e-quick-popup-wrapper",nX="e-resource-menu",nZ="e-resource-level-title",nQ="e-resource-tree-popup-overlay",nJ="e-resource-tree-popup",n$="e-resource-icon",n0="e-resource-details",n1="e-date-time-icon",n2="e-virtual-scroll",n3="e-icon-disable",n6="e-auto-height",n4="e-ignore-whitespace",n5="e-read-only",n8="e-month-header-wrapper",n9="e-inline-subject",n7="e-inline-appointment",re="e-scroll-hidden",rt="e-all-day-scroll",ri="e-all-day-auto",rn=function(){function e(e){this.parent=e,this.l10n=this.parent.localeObj,this.renderHeader(),this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.on(td,this.closeHeaderPopup,this)},e.prototype.removeEventListener=function(){this.parent.off(td,this.closeHeaderPopup)},e.prototype.closeHeaderPopup=function(e){var i=t.closest(e.event.target,".e-date-range,.e-header-popup,.e-day,.e-selected"),n=t.closest(e.event.target,".e-hor-nav,.e-toolbar-pop"),r=this.parent.element.querySelector("."+iw);if(this.parent.isAdaptive){if(t.isNullOrUndefined(n)||!n.classList.contains("e-toolbar-pop")&&!n.classList.contains("e-hor-nav")||n.classList.contains("e-hor-nav")&&this.element.querySelector(".e-toolbar-pop").classList.contains(tI)){t.removeClass([r],re);var a=this.element.querySelector(".e-toolbar-pop");if(!t.isNullOrUndefined(a)){var s=a.ej2_instances[0];!s||!t.isNullOrUndefined(n)&&n.classList.contains("e-hor-nav")&&a.classList.contains(tI)||s.hide()}}else t.addClass([r],re)}t.isNullOrUndefined(i)&&this.hideHeaderPopup()},e.prototype.hideHeaderPopup=function(){this.headerPopup&&this.headerPopup.hide()},e.prototype.renderHeader=function(){this.element=t.createElement("div",{className:"e-schedule-toolbar-container"});var e=t.createElement("div",{className:it});this.element.appendChild(e),this.parent.element.insertBefore(this.element,this.parent.element.firstElementChild),this.renderToolbar()},e.prototype.renderToolbar=function(){var e=this,t=this.getItems();this.parent.trigger(eJ,{requestType:"toolbarItemRendering",items:t},function(t){e.toolbarObj=new n.Toolbar({items:t.items,overflowMode:"Popup",clicked:e.toolbarClickHandler.bind(e),enableRtl:e.parent.enableRtl,enableHtmlSanitizer:e.parent.enableHtmlSanitizer,locale:e.parent.locale}),e.toolbarObj.appendTo(e.parent.element.querySelector("."+it));var i=e.toolbarObj.element.querySelector(".e-prev");i&&i.firstElementChild.setAttribute("title",e.l10n.getConstant("previous"));var r=e.toolbarObj.element.querySelector(".e-next");r&&r.firstElementChild.setAttribute("title",e.l10n.getConstant("next")),e.updateAddIcon(),e.updateActiveView(),e.parent.trigger(e$,{requestType:"toolBarItemRendered",items:e.toolbarObj.items})})},e.prototype.updateItems=function(){var e=this;if(this.toolbarObj){var t=this.getItems();this.parent.trigger(eJ,{requestType:"toolbarItemRendering",items:t},function(t){e.toolbarObj.items=t.items,e.toolbarObj.dataBind(),e.parent.trigger(e$,{requestType:"toolBarItemRendered",items:e.toolbarObj.items})})}},e.prototype.getPopUpRelativeElement=function(){return this.parent.isAdaptive?this.toolbarObj.element:this.element.querySelector(".e-date-range")},e.prototype.setDayOfWeek=function(e){this.headerCalendar&&(this.headerCalendar.firstDayOfWeek=e,this.headerCalendar.dataBind())},e.prototype.setCalendarDate=function(e){this.headerCalendar&&(this.headerCalendar.value=e,this.headerCalendar.dataBind())},e.prototype.setCalendarMinMaxDate=function(){this.headerCalendar&&(this.headerCalendar.min=this.parent.minDate,this.headerCalendar.max=this.parent.maxDate,this.headerCalendar.dataBind())},e.prototype.getCalendarView=function(){return["Month","MonthAgenda","TimelineMonth"].indexOf(this.parent.currentView)>-1?"Year":["Year","TimelineYear"].indexOf(this.parent.currentView)>-1?"Decade":"Month"},e.prototype.setCalendarView=function(){if(this.headerCalendar){var e=this.getCalendarView();this.headerCalendar.depth=e,this.headerCalendar.start=e,this.headerCalendar.refresh()}},e.prototype.updateActiveView=function(){var e=[].slice.call(this.toolbarObj.element.querySelectorAll(".e-views"));t.removeClass(e,["e-active-view"]),e.length>0&&e[this.parent.viewIndex]&&t.addClass([e[this.parent.viewIndex]],["e-active-view"])},e.prototype.updateDateRange=function(e){var i=this.toolbarObj.element.querySelector(".e-date-range");if(i){var n=i.querySelector(".e-tbar-btn-text");if(this.parent.activeViewOptions.dateRangeTemplate){n.textContent="";var r={startDate:this.parent.activeView.getStartDate(),endDate:this.parent.activeView.getEndDate(),currentView:this.parent.currentView},a=this.parent.activeViewOptions.dateRangeTemplateName,s=this.parent.element.id+"_"+a+"dateRangeTemplate",o=[].slice.call(this.parent.getDateRangeTemplate()(r,this.parent,"dateRangeTemplate",s,!1));t.append(o,n)}else{var l=this.parent.activeView.getDateRangeText(e);i.firstElementChild.setAttribute("aria-label",l),n.textContent=l}this.refresh()}},e.prototype.refresh=function(){this.toolbarObj&&this.toolbarObj.refreshOverflow()},e.prototype.updateAddIcon=function(){var e=this.toolbarObj.element.querySelector(".e-add");e&&(this.parent.eventSettings.allowAdding?t.removeClass([e],n_):t.addClass([e],n_))},e.prototype.getDateRangeText=function(){return j(this.parent.globalize.formatDate(this.parent.selectedDate,{format:"MMMM y",calendar:this.parent.getCalendarMode()}),"single")},e.prototype.getItems=function(){var e=[];if(e.push({align:"Left",prefixIcon:"e-icon-prev",tooltipText:"Previous",overflow:"Show",cssClass:"e-prev",htmlAttributes:{role:"navigation"}}),e.push({align:"Left",prefixIcon:"e-icon-next",tooltipText:"Next",overflow:"Show",cssClass:"e-next",htmlAttributes:{role:"navigation"}}),e.push({align:"Left",text:this.getDateRangeText(),suffixIcon:"e-icon-down-arrow",cssClass:"e-date-range",overflow:"Show",htmlAttributes:{"aria-atomic":"true","aria-live":"assertive",role:"navigation"}}),this.parent.isAdaptive||this.parent.enableAdaptiveUI?(e.push({align:"Right",showAlwaysInPopup:this.parent.isAdaptive||this.parent.enableAdaptiveUI,prefixIcon:"e-icon-add",text:this.l10n.getConstant("newEvent"),cssClass:"e-add",overflow:"Show"}),e.push({align:"Right",showAlwaysInPopup:this.parent.isAdaptive||this.parent.enableAdaptiveUI,prefixIcon:"e-icon-today",text:this.l10n.getConstant("today"),cssClass:"e-today",overflow:"Show"})):(e.push({align:"Right",showAlwaysInPopup:this.parent.isAdaptive||this.parent.enableAdaptiveUI,prefixIcon:"e-icon-day",text:this.l10n.getConstant("today"),cssClass:"e-today",overflow:"Show"}),this.parent.views.length>1&&e.push({align:"Right",type:"Separator",cssClass:"e-schedule-seperator"})),this.parent.views.length>1)for(var t=0,i=this.parent.views;t<i.length;t++){var n=i[t];e.push(this.getItemObject(n))}return e},e.prototype.getItemObject=function(e){"string"==typeof e?(t=e.toLowerCase(),i=null):(t=e.option.toLowerCase(),i=e.displayName);var t,i,n,r=this.parent.isAdaptive||this.parent.enableAdaptiveUI;switch(t){case"day":n={align:"Right",showAlwaysInPopup:r,prefixIcon:"e-icon-day",text:i||this.l10n.getConstant("day"),cssClass:"e-views e-day"};break;case"week":n={align:"Right",showAlwaysInPopup:r,prefixIcon:"e-icon-week",text:i||this.l10n.getConstant("week"),cssClass:"e-views e-week"};break;case"workweek":n={align:"Right",showAlwaysInPopup:r,prefixIcon:"e-icon-workweek",text:i||this.l10n.getConstant("workWeek"),cssClass:"e-views e-work-week"};break;case"month":n={align:"Right",showAlwaysInPopup:r,prefixIcon:"e-icon-month",text:i||this.l10n.getConstant("month"),cssClass:"e-views e-month"};break;case"year":n={align:"Right",showAlwaysInPopup:r,prefixIcon:"e-icon-year",text:i||this.l10n.getConstant("year"),cssClass:"e-views e-year"};break;case"agenda":n={align:"Right",showAlwaysInPopup:r,prefixIcon:"e-icon-agenda",text:i||this.l10n.getConstant("agenda"),cssClass:"e-views e-agenda"};break;case"monthagenda":n={align:"Right",showAlwaysInPopup:r,prefixIcon:"e-icon-month-agenda",text:i||this.l10n.getConstant("monthAgenda"),cssClass:"e-views e-month-agenda"};break;case"timelineday":n={align:"Right",showAlwaysInPopup:r,prefixIcon:"e-icon-timeline-day",text:i||this.l10n.getConstant("timelineDay"),cssClass:"e-views e-timeline-day"};break;case"timelineweek":n={align:"Right",showAlwaysInPopup:r,prefixIcon:"e-icon-timeline-week",text:i||this.l10n.getConstant("timelineWeek"),cssClass:"e-views e-timeline-week"};break;case"timelineworkweek":n={align:"Right",showAlwaysInPopup:r,prefixIcon:"e-icon-timeline-workweek",text:i||this.l10n.getConstant("timelineWorkWeek"),cssClass:"e-views e-timeline-work-week"};break;case"timelinemonth":n={align:"Right",showAlwaysInPopup:r,prefixIcon:"e-icon-timeline-month",text:i||this.l10n.getConstant("timelineMonth"),cssClass:"e-views e-timeline-month"};break;case"timelineyear":n={align:"Right",showAlwaysInPopup:r,prefixIcon:"e-icon-timeline-year-"+("Vertical"===e.orientation?"vertical":"horizontal"),text:i||this.l10n.getConstant("timelineYear"),cssClass:"e-views e-timeline-year"}}return n},e.prototype.renderHeaderPopup=function(){var e=t.createElement("div",{className:"e-header-popup"}),n=t.createElement("div",{className:"e-header-calendar"});e.appendChild(n),this.element.appendChild(e),this.headerPopup=new i.Popup(e,{actionOnScroll:"hide",targetType:"relative",relateTo:this.getPopUpRelativeElement(),position:{X:"left",Y:"bottom"},enableRtl:this.parent.enableRtl});var a=this.getCalendarView(),s="Month"===this.parent.currentView&&!t.isNullOrUndefined(this.parent.activeViewOptions.displayDate)&&!this.hasSelectedDate();this.headerCalendar=new r.Calendar({value:s?this.parent.activeViewOptions.displayDate:this.parent.selectedDate,min:this.parent.minDate,max:this.parent.maxDate,firstDayOfWeek:this.parent.activeViewOptions.firstDayOfWeek,enableRtl:this.parent.enableRtl,locale:this.parent.locale,depth:a,start:a,calendarMode:this.parent.calendarMode,change:this.calendarChange.bind(this)}),this.setCalendarTimezone(),this.headerCalendar.appendTo(n),this.headerPopup.hide()},e.prototype.calendarChange=function(e){if(e.value.getTime()!==this.parent.selectedDate.getTime()){var t=C(new Date(e.value));this.parent.changeDate(t)}this.headerPopup.hide()},e.prototype.setCalendarTimezone=function(){this.headerCalendar&&(this.headerCalendar.timezone=this.parent.timezone||this.parent.tzModule.getLocalTimezoneName())},e.prototype.calculateViewIndex=function(e){var i=t.closest(e.originalEvent.target,".e-views");return[].slice.call(this.element.querySelectorAll(".e-views")).indexOf(i)},e.prototype.toolbarClickHandler=function(e){if(e.item){var i,n,r;switch(e.item.cssClass.replace("e-views ","")){case"e-date-range":this.headerPopup||this.renderHeaderPopup(),this.headerPopup.element.classList.contains(tI)?this.headerPopup.hide():this.headerPopup.show();break;case"e-day":this.parent.changeView("Day",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-week":this.parent.changeView("Week",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-work-week":this.parent.changeView("WorkWeek",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-month":this.parent.changeView("Month",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-year":this.parent.changeView("Year",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-agenda":this.parent.changeView("Agenda",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-month-agenda":this.parent.changeView("MonthAgenda",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-timeline-day":this.parent.changeView("TimelineDay",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-timeline-week":this.parent.changeView("TimelineWeek",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-timeline-work-week":this.parent.changeView("TimelineWorkWeek",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-timeline-month":this.parent.changeView("TimelineMonth",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-timeline-year":this.parent.changeView("TimelineYear",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-today":r=C(this.parent.getCurrentTime()),"Agenda"!==this.parent.currentView&&"MonthAgenda"!==this.parent.currentView&&this.parent.isSelectedDate(r)&&("Month"!==this.parent.currentView||!this.parent.activeViewOptions.displayDate||this.hasSelectedDate()||C(this.parent.activeViewOptions.displayDate)===r)&&("Month"!==this.parent.currentView||!(this.parent.activeViewOptions.numberOfWeeks>0)||this.hasSelectedDate()||C(g(this.parent.selectedDate))===r)||this.parent.changeDate(r,e.originalEvent);break;case"e-prev":this.parent.changeDate(this.parent.activeView.getNextPreviousDate("previous"),e.originalEvent);break;case"e-next":this.parent.changeDate(this.parent.activeView.getNextPreviousDate("next"),e.originalEvent);break;case"e-add":if(n=this.parent.activeCellsData.startTime.getTime()===this.parent.activeCellsData.endTime.getTime(),this.parent.activeCellsData&&!n)i=this.parent.activeCellsData;else{var a=this.parent.activeViewOptions.timeScale.interval*tf/this.parent.activeViewOptions.timeScale.slotCount,s=new Date(this.parent.selectedDate.getTime()),o=this.parent.getCurrentTime();s.setHours(o.getHours(),Math.round(s.getMinutes()/a)*a,0),i={startTime:s,endTime:new Date(new Date(s.getTime()).setMilliseconds(s.getMilliseconds()+a)),isAllDay:!1}}this.parent.eventWindow.openEditor(t.extend(i,{cancel:!1,event:e.originalEvent}),"Add")}if(!t.isNullOrUndefined(this.toolbarObj)){var l=this.toolbarObj.element.querySelector(".e-toolbar-pop");l&&"Input"!==e.item.type&&l.ej2_instances[0].hide({name:"SlideUp",duration:100})}}},e.prototype.hasSelectedDate=function(){var e=C(this.parent.selectedDate).getTime();return e>=this.parent.activeView.getStartDate().getTime()&&e<=this.parent.activeView.getEndDate().getTime()},e.prototype.getHeaderElement=function(){return this.toolbarObj.element},e.prototype.updateHeaderItems=function(e){var i=this.toolbarObj.element.querySelector(".e-prev"),n=this.toolbarObj.element.querySelector(".e-next"),r=this.toolbarObj.element.querySelector(".e-date-range");i&&("add"===e?t.addClass([i],n_):t.removeClass([i],n_)),n&&("add"===e?t.addClass([n],n_):t.removeClass([n],n_)),r&&("add"===e?t.addClass([r],ni):t.removeClass([r],ni))},e.prototype.previousNextIconHandler=function(){var e="Agenda"===this.parent.currentView?[this.parent.getCurrentViewDates()[0]]:this.parent.getCurrentViewDates(),i=this.toolbarObj.element.querySelector(".e-prev"),n=this.toolbarObj.element.querySelector(".e-next"),r=new Date(e[0].getTime()),a=new Date(e[e.length-1].getTime());if("WorkWeek"===this.parent.currentView||"TimelineWorkWeek"===this.parent.currentView)a=S(r=f(C(this.parent.selectedDate),this.parent.firstDayOfWeek),7*this.parent.activeViewOptions.interval);else if("Month"===this.parent.currentView){var s=!t.isNullOrUndefined(this.parent.activeViewOptions.displayDate)||this.parent.activeViewOptions.numberOfWeeks>0;r=s?this.parent.activeView.getStartDate():g(this.parent.selectedDate),a=s?this.parent.activeView.getEndDate():y(O(r,this.parent.activeViewOptions.interval-1))}t.isNullOrUndefined(i)||this.toolbarObj.enableItems(i,r>C(this.parent.minDate)),t.isNullOrUndefined(n)||this.toolbarObj.enableItems(n,a<C(this.parent.maxDate)),this.setCalendarMinMaxDate()},e.prototype.getModuleName=function(){return"headerbar"},e.prototype.destroy=function(){this.headerPopup&&!this.headerPopup.isDestroyed&&(this.headerPopup.destroy(),this.headerPopup=null),this.headerCalendar&&!this.headerCalendar.isDestroyed&&(this.headerCalendar.destroy(),this.headerCalendar=null),this.toolbarObj&&!this.toolbarObj.isDestroyed&&(this.toolbarObj.destroy(),this.removeEventListener(),t.remove(this.element),this.toolbarObj=null),this.element=null,this.parent=null,this.l10n=null},e}(),rr=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.getModuleName=function(){return"scroll"},e.prototype.setWidth=function(){this.parent.element.style.width=t.formatUnit(this.parent.width)},e.prototype.setHeight=function(){this.parent.element.style.height=t.formatUnit(this.parent.height)},e.prototype.addEventListener=function(){this.parent.on(to,this.setDimensions,this),this.parent.on(tc,this.onPropertyChanged,this)},e.prototype.removeEventListener=function(){this.parent.off(to,this.setDimensions),this.parent.off(tc,this.onPropertyChanged)},e.prototype.setDimensions=function(){this.setWidth(),this.setHeight();var e={cssProperties:this.parent.getCssProperties(),module:this.getModuleName()};this.parent.notify(tp,e)},e.prototype.onPropertyChanged=function(){this.setDimensions()},e.prototype.destroy=function(){this.removeEventListener()},e}(),ra=function(){function e(e){this.parent=e,this.element=this.parent.element.querySelector("."+tE),this.touchObj=new t.Touch(this.element,{scroll:this.scrollHandler.bind(this),swipe:this.swipeHandler.bind(this),tapHold:this.tapHoldHandler.bind(this),swipeSettings:{swipeThresholdDistance:1}}),t.EventHandler.add(this.element,"transitionend",this.onTransitionEnd,this),this.touchLeftDirection=this.parent.enableRtl?"Right":"Left",this.touchRightDirection=this.parent.enableRtl?"Left":"Right"}return e.prototype.scrollHandler=function(e){if(!("Agenda"===this.parent.currentView||this.parent.uiStateValues.action||!this.parent.allowSwiping||e.originalEvent&&e.originalEvent.target&&(e.originalEvent.target.classList.contains(ip)||t.closest(e.originalEvent.target,"."+ip))&&!this.parent.isAdaptive)){if(this.timeStampStart||(this.timeStampStart=Date.now()),this.element.classList.contains(tj)&&this.onTransitionEnd(),"Left"===e.scrollDirection||"Right"===e.scrollDirection){var i={requestType:"dateNavigate",cancel:!1,event:e.originalEvent};if(this.parent.trigger(eJ,i),i.cancel)return;var n=this.element.querySelector("."+iw);if(n&&n.scrollWidth>n.clientWidth)return;this.isScrollTriggered=!0,e.originalEvent.preventDefault(),e.originalEvent.stopPropagation()}if(e.scrollDirection===this.touchLeftDirection){this.nextPanel||(this.renderPanel("e-next-panel","next"),this.nextPanel={element:this.parent.activeView.getPanel(),selectedDate:new Date(this.parent.selectedDate.getTime()),renderDates:this.parent.activeView.renderDates,colLevels:this.parent.activeView.colLevels},this.setDimensions(this.nextPanel.element));var r=this.parent.enableRtl?e.distanceX:-e.distanceX;this.element.style.transform="translatex("+(this.getTranslateX(this.element)+r)+"px)"}else if(e.scrollDirection===this.touchRightDirection){var a=0;this.previousPanel||(this.renderPanel(tB,"previous"),this.previousPanel={element:this.parent.activeView.getPanel(),selectedDate:new Date(this.parent.selectedDate.getTime()),renderDates:this.parent.activeView.renderDates,colLevels:this.parent.activeView.colLevels},this.setDimensions(this.previousPanel.element),a=this.previousPanel.element.offsetWidth),r=this.parent.enableRtl?a-e.distanceX:-a+e.distanceX,this.element.style.transform="translatex("+(this.getTranslateX(this.element)+r)+"px)"}}},e.prototype.swipeHandler=function(e){if(this.isScrollTriggered&&!this.parent.uiStateValues.action&&this.parent.allowSwiping){this.isScrollTriggered=!1;var i="Left"===e.swipeDirection?this.parent.activeView.renderDates[0]:this.parent.activeView.renderDates.slice(-1)[0];if("Left"===e.swipeDirection&&i<this.parent.maxDate||"Right"===e.swipeDirection&&i>=this.parent.minDate){var n=Date.now()-this.timeStampStart,r=e.distanceX*(t.Browser.isDevice?6:1.66);r>n||e.distanceX>this.parent.element.offsetWidth/2?(this.swapPanels(e.swipeDirection),r>n&&e.distanceX>this.parent.element.offsetWidth/2&&(this.element.style.transitionDuration=(t.Browser.isDevice?e.distanceX:r)/n/10+"s"),this.confirmSwipe(e.swipeDirection)):this.cancelSwipe();var a={requestType:"dateNavigate",cancel:!1,event:e.originalEvent};this.parent.trigger(e$,a)}else this.cancelSwipe();this.timeStampStart=null}},e.prototype.tapHoldHandler=function(e){var i=t.closest(e.originalEvent.target,"."+ip);t.isNullOrUndefined(i)||!this.parent.isAdaptive||this.parent.quickPopup.tapHoldEventPopup(e.originalEvent)},e.prototype.renderPanel=function(e,t){this.currentPanel?this.parent.setProperties({selectedDate:this.currentPanel.selectedDate},!0):(this.currentPanel={element:this.parent.activeView.getPanel(),selectedDate:new Date(this.parent.selectedDate.getTime()),renderDates:this.parent.activeView.renderDates,colLevels:this.parent.activeView.colLevels},this.setDimensions(this.currentPanel.element)),this.parent.setProperties({selectedDate:this.parent.activeView.getNextPreviousDate(t)},!0),this.parent.headerModule&&this.parent.headerModule.setCalendarDate(this.parent.selectedDate),this.parent.activeView.getRenderDates(),this.parent.activeView.renderLayout(e)},e.prototype.swapPanels=function(e){if(e===this.touchLeftDirection){var t=this.nextPanel;this.nextPanel=this.currentPanel,this.currentPanel=t}else t=this.previousPanel,this.previousPanel=this.currentPanel,this.currentPanel=t},e.prototype.confirmSwipe=function(e){var i=this,n={action:"date",cancel:!1,previousDate:e===this.touchLeftDirection?this.nextPanel.selectedDate:this.previousPanel.selectedDate,currentDate:this.currentPanel.selectedDate};this.parent.trigger(e1,n,function(n){if(n.cancel)i.swapPanels(e),i.cancelSwipe();else{i.parent.activeView.setPanel(i.currentPanel.element),i.parent.setProperties({selectedDate:i.currentPanel.selectedDate},!0);var r=void 0;r=i.parent.enableRtl?e===i.touchLeftDirection?i.previousPanel?i.previousPanel.element.offsetLeft:i.currentPanel.element.offsetWidth:0:e===i.touchLeftDirection?-i.currentPanel.element.offsetLeft:0,i.parent.activeView.renderDates=i.currentPanel.renderDates,i.parent.activeView.colLevels=i.currentPanel.colLevels,t.addClass([i.element],tj),i.element.style.transform="translatex("+r+"px)",i.parent.headerModule&&i.parent.headerModule.updateDateRange(),i.parent.renderTemplates(),i.parent.crudModule.refreshDataManager()}})},e.prototype.cancelSwipe=function(){this.parent.activeView.setPanel(this.currentPanel.element),this.parent.setProperties({selectedDate:this.currentPanel.selectedDate},!0),this.parent.activeView.renderDates=this.currentPanel.renderDates,this.parent.activeView.colLevels=this.currentPanel.colLevels,t.addClass([this.element],tj);var e=this.previousPanel?this.previousPanel.element.offsetWidth:0;this.element.style.transform="translatex("+(this.parent.enableRtl?e:-this.currentPanel.element.offsetLeft)+"px)"},e.prototype.onTransitionEnd=function(){t.removeClass([this.element],tj),this.element.style.transitionDuration="",this.element.style.transform="",this.previousPanel&&(t.remove(this.previousPanel.element),this.previousPanel=null,t.removeClass([this.currentPanel.element],tB),t.addClass([this.currentPanel.element],tL)),this.nextPanel&&(t.remove(this.nextPanel.element),this.nextPanel=null,t.removeClass([this.currentPanel.element],"e-next-panel"),t.addClass([this.currentPanel.element],tL)),this.currentPanel=null,this.parent.activeView.getPanel().style.width=""},e.prototype.getTranslateX=function(e){var t=window.getComputedStyle(e);return new WebKitCSSMatrix(t.webkitTransform).m41},e.prototype.setDimensions=function(e){e.style.width=this.parent.element.clientWidth+"px"},e.prototype.resetValues=function(){this.currentPanel=null,this.previousPanel=null,this.nextPanel=null,this.timeStampStart=null,this.element.style.transform="",this.element.style.transitionDuration="",R(this.element),t.removeClass([this.element],tj)},e.prototype.destroy=function(){this.touchObj&&(this.touchObj.destroy(),this.touchObj=null),t.EventHandler.remove(this.element,"transitionend",this.onTransitionEnd),this.resetValues()},e}(),rs=function(){function e(e){this.selectedCells=[],this.keyConfigs={downArrow:"downarrow",upArrow:"uparrow",rightArrow:"rightarrow",leftArrow:"leftarrow",shiftDownArrow:"shift+downarrow",shiftUpArrow:"shift+uparrow",shiftRightArrow:"shift+rightarrow",shiftLeftArrow:"shift+leftarrow",ctrlLeftArrow:"ctrl+leftarrow",ctrlRightArrow:"ctrl+rightarrow",altOne:"alt+1",altTwo:"alt+2",altThree:"alt+3",altFour:"alt+4",altFive:"alt+5",altSix:"alt+6",altSeven:"alt+7",altEight:"alt+8",altNine:"alt+9",enter:"enter",escape:"escape",delete:"delete",backspace:"backspace",home:"home",pageUp:"pageup",pageDown:"pagedown",tab:"tab",shiftTab:"shift+tab",ctrlShiftUpArrow:"ctrl+shift+uparrow",ctrlShiftDownArrow:"ctrl+shift+downarrow",ctrlShiftLeftArrow:"ctrl+shift+leftarrow",ctrlShiftRightArrow:"ctrl+shift+rightarrow"},this.parent=e,this.parent.element.tabIndex=-1===this.parent.element.tabIndex?0:this.parent.element.tabIndex,this.keyboardModule=new t.KeyboardEvents(this.parent.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),this.addEventListener()}return e.prototype.keyActionHandler=function(e){switch(e.action){case"downArrow":case"shiftDownArrow":this.processDown(e,e.shiftKey);break;case"upArrow":case"shiftUpArrow":this.processUp(e,e.shiftKey);break;case"leftArrow":case"shiftLeftArrow":this.processLeft(e,e.shiftKey);break;case"rightArrow":case"shiftRightArrow":this.processRight(e,e.shiftKey);break;case"ctrlLeftArrow":this.parent.changeDate(this.parent.activeView.getNextPreviousDate("previous"),e),this.parent.headerModule&&this.parent.headerModule.element.querySelector(".e-prev button").focus();break;case"ctrlRightArrow":this.parent.changeDate(this.parent.activeView.getNextPreviousDate("next"),e),this.parent.headerModule&&this.parent.headerModule.element.querySelector(".e-next button").focus();break;case"altOne":case"altTwo":case"altThree":case"altFour":case"altFive":case"altSix":case"altSeven":case"altEight":case"altNine":this.processViewNavigation(e);break;case"enter":this.processEnter(e);break;case"home":this.focusFirstCell();break;case"tab":case"shiftTab":this.processTab(e,e.shiftKey);break;case"delete":case"backspace":this.processDelete(e);break;case"ctrlShiftUpArrow":case"ctrlShiftDownArrow":case"ctrlShiftLeftArrow":case"ctrlShiftRightArrow":this.processCtrlShiftNavigationArrows(e);break;case"escape":this.processEscape(e);break;case"fTwelve":this.parent.allowInline&&this.parent.inlineModule&&(e.preventDefault(),this.processFTwelve(e))}},e.prototype.processFTwelve=function(e){var i=e.target;if(i.classList.contains(tM)||i.classList.contains(tO)){this.parent.activeCellsData=this.getSelectedElements(i);var n=t.extend(this.parent.activeCellsData,{cancel:!1,event:e}),r={element:n.element,groupIndex:n.groupIndex,type:"Cell"};this.parent.notify(te,r)}i.classList.contains(ip)&&i.click()},e.prototype.addEventListener=function(){this.parent.on(tu,this.onCellMouseDown,this)},e.prototype.removeEventListener=function(){this.parent.off(tu,this.onCellMouseDown)},e.prototype.onCellMouseDown=function(e){if(!e.event.shiftKey&&(this.initialTarget=this.getClosestCell(e.event),!this.parent.activeViewOptions.readonly&&"MonthAgenda"!==this.parent.currentView&&this.initialTarget&&(e.event.target.classList.contains(tM)&&3!==e.event.which&&(this.parent.removeSelectedClass(),t.EventHandler.add(this.parent.getContentTable(),"mousemove",this.onMouseSelection,this),t.EventHandler.add(this.parent.getContentTable(),"mouseup",this.onMoveUp,this)),e.event.target.classList.contains(tO)&&3!==e.event.which))){this.parent.removeSelectedClass();var i=this.parent.getAllDayRow();t.EventHandler.add(i,"mousemove",this.onMouseSelection,this),t.EventHandler.add(i,"mouseup",this.onMoveUp,this)}},e.prototype.onMouseSelection=function(e){var i=[].slice.call(this.parent.element.querySelectorAll("."+ip));t.addClass(i,"e-allow-select");var n=this.parent.boundaryValidation(e.pageY,e.pageX);if(n.bottom||n.top||n.left||n.right){var r=this.parent.element.querySelector("."+iw),a=r.offsetHeight<=r.scrollHeight&&r.scrollTop>=0&&r.scrollTop+r.offsetHeight<=r.scrollHeight,s=r.offsetWidth<=r.scrollWidth&&r.scrollLeft>=0&&r.scrollLeft+r.offsetWidth<=r.scrollWidth;a&&(n.top||n.bottom)&&(r.scrollTop+=n.top?-e.target.offsetHeight:e.target.offsetHeight),s&&(n.left||n.right)&&(r.scrollLeft+=n.left?-e.target.offsetWidth:e.target.offsetWidth)}var o=this.getClosestCell(e);o&&this.selectCells(!0,o)},e.prototype.getClosestCell=function(e){return t.closest(e.target,"."+tM+",."+tO)},e.prototype.onMoveUp=function(e){var i=this,n=[].slice.call(this.parent.element.querySelectorAll("."+ip));if(t.removeClass(n,"e-allow-select"),e.target.classList.contains(tM)&&(t.EventHandler.remove(this.parent.getContentTable(),"mousemove",this.onMouseSelection),t.EventHandler.remove(this.parent.getContentTable(),"mouseup",this.onMoveUp)),e.target.classList.contains(tO)){var r=this.parent.getAllDayRow();t.EventHandler.remove(r,"mousemove",this.onMouseSelection),t.EventHandler.remove(r,"mouseup",this.onMoveUp)}if(!this.isPreventAction(e)){var a=t.closest(e.target,".e-work-cells,.e-all-day-cells,.e-header-cells"),s=this.parent.getSelectedCells();if(s.length>0&&-1===s.indexOf(a)&&(a=s[s.length-1]),"TimelineYear"!==this.parent.currentView||!a.classList.contains(tR)){this.parent.activeCellsData=this.getSelectedElements(a);var o={};this.parent.eventWindow&&this.parent.eventWindow.convertToEventData(this.parent.activeCellsData,o);var l={data:o,element:this.parent.activeCellsData.element,event:e,requestType:tt,showQuickPopup:!1};this.parent.trigger(eQ,l,function(n){if((n.showQuickPopup||i.parent.quickInfoOnSelectionEnd)&&s.length>1){var r=t.extend(i.parent.activeCellsData,{cancel:!1,event:e,name:"cellClick"});i.parent.notify(eK,r)}})}}},e.prototype.processEnter=function(e){if(!(this.parent.activeViewOptions.readonly&&!e.target.classList.contains(ip)||this.isPreventAction(e)||"TimelineYear"===this.parent.currentView&&e.target.classList.contains(tR))){var i=e.target;if(t.closest(i,"."+nK))i.classList.contains(i9)||i.classList.contains(i7)||i.classList.contains(ne)||i.classList.contains(nt)||i.classList.contains(nW)?(i.click(),e.preventDefault()):i.classList.contains(nS)&&(this.parent.element.querySelector("."+i7).click(),e.preventDefault());else if(i.classList.contains(t$)&&i.classList.contains(tX)){var n=i.querySelector("."+tJ);n&&n.click()}else if(i.classList.contains(tM)||i.classList.contains(tO)){this.parent.activeCellsData=this.getSelectedElements(i);var r=t.extend(this.parent.activeCellsData,{cancel:!1,event:e});if(this.parent.allowInline){var a={element:r.element,groupIndex:r.groupIndex,type:"Cell"};this.parent.notify(te,a)}else"Year"===this.parent.currentView?i.click():this.parent.notify(eK,r)}else if(i.classList.contains(n9)&&this.parent.inlineModule)this.parent.inlineModule.inlineCrudActions(i);else{if(!(i.classList.contains(ip)||i.classList.contains(no)||i.classList.contains(iJ)||i.classList.contains(i1)))return i.classList.contains(ns)?(this.parent.setProperties({selectedDate:this.parent.getDateFromElement(i)},!0),this.parent.changeView(this.parent.getNavigateView(),e),void this.processEscape(e)):void 0;i.click()}}},e.prototype.getSelectedElements=function(e){var t;if(this.selectedCells.length>1&&e.classList.contains(ir)){var i=this.parent.getCellDetails(this.selectedCells[0]),n=this.parent.getCellDetails(this.selectedCells.slice(-1)[0]);i.endTime=n.endTime,i.element=e,t=i}else t=this.parent.getCellDetails(e);return t},e.prototype.getCells=function(e,t,i){var n=this.parent.getContentTable(),r="TimelineYear"===this.parent.currentView,a=r&&!e?"."+tM+":not(."+tR+")":"td",s=[].slice.call(n.querySelectorAll(a)),o=n.rows.length,l=n.rows[0].cells.length;if(t&&t.classList.contains(tO)){var h=this.parent.getAllDayRow();s=[].slice.call(h.cells),o=1,l=h.cells.length}var p=s.indexOf(t),c=s.indexOf(i),d=[];if(e){for(var u=0;u<l;u++)for(var m=0;m<o;m++){var f=s[l*m+u];r&&f.classList.contains(tR)||d.push(f)}p=d.indexOf(t),c=d.indexOf(i)}if(p>c){var v=p;p=c,c=v}return(e?d:s).slice(p,c+1)},e.prototype.focusFirstCell=function(){if("Agenda"===this.parent.currentView){var e=this.parent.getContentTable().querySelector("."+iT);return e.setAttribute("tabindex","0"),void e.focus()}if(this.parent.eventBase.removeSelectedAppointmentClass(),this.parent.activeView.isTimelineView()&&"TimelineYear"!==this.parent.currentView){var t=this.parent.element.querySelector("."+tx+" tr:not(."+n_+") ."+tM+":not(."+tY+")");this.selectCells(!1,t)}else if(this.parent.currentView.indexOf("Year")>-1){var i="."+tM+":not(."+tR+"):not(."+tY+")";i+="TimelineYear"===this.parent.currentView&&"Vertical"===this.parent.activeViewOptions.orientation?'[data-date="'+this.parent.activeView.startDate().getTime()+'"]':"",this.selectCells(!1,this.parent.element.querySelector(i))}else this.selectCells(!1,this.parent.getWorkCellElements()[0])},e.prototype.isInverseTableSelect=function(){return this.parent.activeView.isInverseTableSelect},e.prototype.selectCells=function(e,t){var i=this;this.parent.removeSelectedClass();var n=t instanceof Array?t.slice(-1)[0]:t;if(e){var r,a=["Day","Week","WorkWeek","TimelineDay","TimelineWeek","TimelineWorkWeek","TimelineMonth","TimelineYear"],s={element:t,requestType:"mousemove",allowMultipleRow:!0};this.parent.inlineModule.removeInlineAppointmentElement(),this.parent.trigger(eQ,s,function(e){if(!e.allowMultipleRow||!i.parent.allowMultiRowSelection){var t="TimelineYear"===i.parent.currentView;t&&"Horizontal"===i.parent.activeViewOptions.orientation||"Month"===i.parent.currentView?n=t&&i.parent.activeViewOptions.group.resources.length>0?i.initialTarget:i.initialTarget.parentElement.children[n.cellIndex]:a.indexOf(i.parent.currentView)>-1&&(n=n.parentElement.children[i.initialTarget.cellIndex])}var s=i.getCells(i.isInverseTableSelect(),i.initialTarget,n);if(i.parent.activeViewOptions.group.resources.length>0){r=i.initialTarget.getAttribute("data-group-index");for(var o=[],l=0,h=s;l<h.length;l++)(c=h[l]).getAttribute("data-group-index")===r&&o.push(c);s=o}if(i.parent.allowMultiCellSelection||(s=[i.initialTarget]),i.selectedCells=s,s.length>2&&!n.classList.contains(tO)){var p=i.getAllDayCells(s);if(i.parent.activeViewOptions.group.resources.length>0){for(var c,d=[],u=0,m=p;u<m.length;u++)(c=m[u]).getAttribute("data-group-index")===r&&d.push(c);p=d}s=s.concat(p)}n.getAttribute("data-group-index")!==r&&i.parent.activeViewOptions.group.resources.length>0&&(n=i.selectedCells[i.selectedCells.length-1]),i.parent.addSelectedClass(s,n)})}else s={element:n,requestType:tt},this.parent.trigger(eQ,s,function(){i.initialTarget=n,i.selectedCells=[n],i.parent.addSelectedClass([n],n)})},e.prototype.selectAppointment=function(e,i){var n=this.getAppointmentElements();if(!(n.length<0)){if(this.parent.eventBase.removeSelectedAppointmentClass(),i.classList.contains(ip)){var r,a=n.indexOf(i);r=n[e?a-1:a+1]}else r=e?n[n.length-1]:n[0];r&&(this.parent.eventBase.addSelectedAppointments([r],!0),r.focus(),t.addClass([r],iS))}},e.prototype.selectAppointmentElementFromWorkCell=function(e,t){var i=this;if(this.parent.eventBase.removeSelectedAppointmentClass(),this.parent.removeSelectedClass(),t.classList.contains(tM)||t.classList.contains(tO)){var n=this.getUniqueAppointmentElements(),r=[],a=this.parent.getDateFromElement(t).getTime();if(this.parent.eventsProcessed.filter(function(t){return e?t[i.parent.eventFields.startTime].getTime()<=a:t[i.parent.eventFields.startTime].getTime()>=a}).filter(function(e){n.filter(function(t){JSON.stringify(e.Guid)===JSON.stringify(t.getAttribute("data-guid"))&&r.push(t)})}),r.length>0){var s=e?r[r.length-1]:r[0],o=this.getAppointmentElementsByGuid(s.getAttribute("data-guid"));this.parent.eventBase.addSelectedAppointments(o,!0),o[o.length-1].focus()}}},e.prototype.getAllDayCells=function(e){var t=this.parent.getAllDayRow();if(!t)return[];var i=e[0],n=e[e.length-1],r=this.parent.getCellDetails(i);return this.parent.getCellDetails(n).endTime.getTime()-r.startTime.getTime()>=tm?[].slice.call(t.cells).slice(i.cellIndex,n.cellIndex+1):[]},e.prototype.getAppointmentElements=function(){return[].slice.call(this.parent.element.querySelectorAll("."+ip))},e.prototype.getAppointmentElementsByGuid=function(e){return[].slice.call(this.parent.element.querySelectorAll('div[data-guid="'+e+'"]'))},e.prototype.getUniqueAppointmentElements=function(){var e=this.getAppointmentElements(),t=[];return e.map(function(e){return e.getAttribute("data-guid")}).filter(function(i,n,r){r.indexOf(i)===n&&t.push(e[parseInt(n.toString(),10)])}),t},e.prototype.getWorkCellFromAppointmentElement=function(e){var t=this.parent.eventBase.getEventByGuid(e.getAttribute("data-guid"));return this.parent.eventBase.selectWorkCellByTime([t])},e.prototype.processViewNavigation=function(e){var t=parseInt(e.key,10)-1;if(t<this.parent.views.length){var i=this.parent.viewCollections[parseInt(t.toString(),10)].option;this.parent.changeView(i,e,void 0,t),this.parent.headerModule&&this.parent.headerModule.element.querySelector(".e-active-view button").focus()}},e.prototype.cancelUpDownAction=function(e){var t=e&&"Vertical"===this.parent.activeViewOptions.orientation,i=this.parent.activeViewOptions.group.resources.length>0;return!!(t&&i||e&&this.initialTarget.classList.contains(tR))||!((!this.parent.activeView.isTimelineView()||e)&&"MonthAgenda"!==this.parent.currentView)},e.prototype.processUp=function(e,t){var i="TimelineYear"===this.parent.currentView;if(!t||!this.cancelUpDownAction(i)){var n=e.target,r=this.parent.getSelectedCells(),a=this.parent.eventBase.getSelectedAppointments(),s=this.parent.element.querySelector("."+nn),o=this.getQuickPopupElement();if(r.length>0&&!e.target.classList.contains(tM)&&(n=r[r.length-1]),!(a.length>0)||s.classList.contains(tI)||o.classList.contains(tI)||-1===["Day","Week","WorkWeek","Month"].indexOf(this.parent.currentView)||(n=this.getWorkCellFromAppointmentElement(a[a.length-1]),this.parent.eventBase.removeSelectedAppointmentClass()),n){if(n.classList.contains(tM)&&!this.parent.element.querySelector("."+tI)){var l=this.parent.getTableRows(),h=l.indexOf(n.parentElement),p=void 0;if(i&&t&&0===this.parent.activeViewOptions.group.resources.length&&(p=this.isInverseTableSelect()?this.getVerticalUpDownCell(l,n,h,!0):this.getHorizontalUpDownCell(l,n,h,!0)),(h>0||p)&&h<l.length){if(p=p||l[h-1].cells[n.cellIndex],"Year"===this.parent.currentView&&p.classList.contains(tR)){if(!(this.parent.activeView.getStartDate().getTime()<+p.getAttribute("data-date")))return;p=this.getYearUpDownCell(l,h-1,n.cellIndex,!0)}e.preventDefault(),this.selectCells(t,p)}}else"Agenda"!==this.parent.currentView&&"MonthAgenda"!==this.parent.currentView||this.selectAppointment(!0,n)}}},e.prototype.processDown=function(e,t){var i="TimelineYear"===this.parent.currentView;if(!t||!this.cancelUpDownAction(i)){var n=e.target,r=this.parent.getSelectedCells(),a=this.parent.eventBase.getSelectedAppointments(),s=this.parent.element.querySelector("."+nn),o=this.getQuickPopupElement();r.length>0&&!e.target.classList.contains(tM)&&(n=r[r.length-1]),!(a.length>0)||s.classList.contains(tI)||o.classList.contains(tI)||-1===["Day","Week","WorkWeek","Month"].indexOf(this.parent.currentView)||(n=this.getWorkCellFromAppointmentElement(a[a.length-1]),this.parent.eventBase.removeSelectedAppointmentClass());var l=this.parent.getTableRows();if(n){if(n.classList.contains(tM)&&!this.parent.element.querySelector("."+tI)){var h=l.indexOf(n.parentElement),p=void 0;if(i&&t&&0===this.parent.activeViewOptions.group.resources.length&&(p=this.isInverseTableSelect()?this.getVerticalUpDownCell(l,n,h,!1):this.getHorizontalUpDownCell(l,n,h,!1)),h>=0&&(h<l.length-1||p)){if(p=p||l[h+1].cells[n.cellIndex],"Year"===this.parent.currentView&&p.classList.contains(tR)){if(!(this.parent.activeView.getEndDate().getTime()>+p.getAttribute("data-date")))return;p=this.getYearUpDownCell(l,h+1,n.cellIndex,!1)}e.preventDefault(),this.selectCells(t,p)}}else"Agenda"!==this.parent.currentView&&"MonthAgenda"!==this.parent.currentView||this.selectAppointment(!1,n)}}},e.prototype.getYearUpDownCell=function(e,t,i,n){for(;e[parseInt(t.toString(),10)]&&e[parseInt(t.toString(),10)].cells[parseInt(i.toString(),10)].classList.contains(tR);)t+=n?-1:1;return e[parseInt(t.toString(),10)].cells[parseInt(i.toString(),10)]},e.prototype.getHorizontalUpDownCell=function(e,t,i,n){var r=e[i+(n?-1:1)],a=r?r.cells[t.cellIndex]:t;if(a.classList.contains(tR)){var s=r.querySelector("."+tM+":not(."+tR+")"),o=new Date(+s.getAttribute("data-date")),l='[data-date="'+new Date(o.getFullYear(),o.getMonth()+1,0).getTime()+'"]';a=a.cellIndex<s.cellIndex?s:r.querySelector(l)}return a},e.prototype.getVerticalUpDownCell=function(e,t,i,n){var r=n&&i>0||!n&&i<e.length-1?e[i+(n?-1:1)].cells[t.cellIndex]:void 0;if(!r||r.classList.contains(tR)){if(e[parseInt(i.toString(),10)].cells[t.cellIndex-(n?1:-1)]){var a=+t.getAttribute("data-date")-(n?tm:-tm);return this.parent.getContentTable().querySelector("."+tM+'[data-date="'+a+'"]')}r=t}return r},e.prototype.processLeftRight=function(e){var t="Year"===this.parent.currentView?e.closest("tbody"):this.parent.getContentTable(),i=e.parentNode.sectionRowIndex;return{element:t,rowIndex:i,columnIndex:e.cellIndex,maxIndex:t.rows[parseInt(i.toString(),10)].cells.length}},e.prototype.getQuickPopupElement=function(){return(this.parent.isAdaptive?document.body:this.parent.element).querySelector("."+nK)},e.prototype.isCancelLeftRightAction=function(e,t,i){var n="MonthAgenda"===this.parent.currentView||i&&this.initialTarget.classList.contains(tR);if("Agenda"===this.parent.currentView||t&&n||this.isPreventAction(e)&&t)return!0;var r=this.parent.element.querySelector("."+nn),a=this.getQuickPopupElement();return!(!r.classList.contains(tI)&&!a.classList.contains(tI))},e.prototype.processRight=function(e,i){var n="TimelineYear"===this.parent.currentView;if(!this.isCancelLeftRightAction(e,i,n)){var r,a=this.parent.getSelectedCells(),s=this.parent.eventBase.getSelectedAppointments(),o=e.target;if(!(a.length>0)||o.classList.contains(tM)||o.classList.contains(tO)||(o=a[a.length-1]),!(s.length>0)||(o=this.getWorkCellFromAppointmentElement(s[s.length-1]),this.parent.eventBase.removeSelectedAppointmentClass(),o)){if(o.classList.contains(tM)&&e.target.classList.contains(tM)){var l=this.processLeftRight(o),h=new Date(+o.getAttribute("data-date")),p="Year"===this.parent.currentView&&h.getTime()===y(h).getTime();if(l.columnIndex>=0&&l.columnIndex<l.maxIndex-1&&!p)r=this.calculateNextPrevDate(o,l.element.rows[l.rowIndex].cells[o.cellIndex+1],"right"),n&&i&&r.classList.contains(tR)&&(r=this.getTimelineYearTargetCell(l,o,!0)),t.isNullOrUndefined(r)||this.selectCells(i,r);else if(l.columnIndex===l.maxIndex-1||p){if(this.isInverseTableSelect()||!(l.rowIndex<l.element.rows.length-1)||p){if(!i){if(p&&h.getTime()!==this.parent.activeView.getEndDate().getTime())return void this.selectCells(i,this.parent.element.querySelector(":not(."+tR+')[data-date="'+(h.getTime()+tm)+'"]'));var c=this.isInverseTableSelect()?l.rowIndex:0;this.parent.changeDate(this.parent.activeView.getNextPreviousDate("next"),e);var d=this.parent.getContentTable(),u=p?d.rows[parseInt(c.toString(),10)].querySelector("."+tM+":not(."+tR+")"):d.rows[parseInt(c.toString(),10)].cells[0];this.selectCells(!1,u)}}else r=this.calculateNextPrevDate(o,l.element.rows[l.rowIndex+1].cells[0],"right"),r=n&&i&&r.classList.contains(tR)?this.getHorizontalLeftRightCell(l,o,!0):r,t.isNullOrUndefined(r)||this.selectCells(i,r)}}else if(o.classList.contains(tO)){var m=o.cellIndex,f=this.parent.getAllDayRow(),v=f.cells.length;if(m>=0&&m<v-1)this.selectCells(i,f.cells[m+1]);else if(m===v-1&&!i){this.parent.changeDate(this.parent.activeView.getNextPreviousDate("next"),e);var g=this.parent.getAllDayRow();this.selectCells(!1,g.cells[0])}}}}},e.prototype.processLeft=function(e,i){var n="TimelineYear"===this.parent.currentView;if(!this.isCancelLeftRightAction(e,i,n)){var r,a=e.target,s=this.parent.getSelectedCells();!(s.length>0)||a.classList.contains(tM)||a.classList.contains(tO)||(a=s[s.length-1]);var o=this.parent.eventBase.getSelectedAppointments();if(!(o.length>0)||(a=this.getWorkCellFromAppointmentElement(o[o.length-1]),this.parent.eventBase.removeSelectedAppointmentClass(),a)){if(e.target.classList.contains(tM)&&a.classList.contains(tM)){var l=this.processLeftRight(a),h=new Date(+a.getAttribute("data-date")),p="Year"===this.parent.currentView&&h.getTime()===g(h).getTime();if(l.columnIndex>0&&l.columnIndex<l.maxIndex&&!p)r=this.calculateNextPrevDate(a,l.element.rows[l.rowIndex].cells[a.cellIndex-1],"left"),n&&i&&r.classList.contains(tR)&&(r=this.getTimelineYearTargetCell(l,a,!1)),t.isNullOrUndefined(r)||this.selectCells(i,r);else if(0===l.columnIndex||p){if(!this.isInverseTableSelect()&&l.rowIndex>0)r=this.calculateNextPrevDate(a,l.element.rows[l.rowIndex-1].cells[l.maxIndex-1],"left"),r=n&&i&&r.classList.contains(tR)?this.getHorizontalLeftRightCell(l,a,!1):r,t.isNullOrUndefined(r)||this.selectCells(i,r);else if(!i){if(p&&h.getTime()!==this.parent.activeView.getStartDate().getTime())return void this.selectCells(i,this.parent.element.querySelector('[data-date="'+(h.getTime()-tm)+'"]'));this.parent.changeDate(this.parent.activeView.getNextPreviousDate("previous"),e);var c=this.parent.getContentTable(),d=this.isInverseTableSelect()?l.rowIndex:c.rows.length-1,u=c.rows[parseInt(d.toString(),10)].cells[l.maxIndex-1];if(p){var m=this.parent.element.querySelectorAll("."+tx+" tbody");u=m.item(m.length-1).querySelector(":not(."+tR+')[data-date="'+this.parent.activeView.getEndDate().getTime()+'"]')}this.selectCells(!1,u)}}}else if(a.classList.contains(tO)){var f=a.cellIndex,v=this.parent.getAllDayRow(),y=v.cells.length;if(f>0&&f<y)this.selectCells(i,v.cells[f-1]);else if(0===f&&!i){this.parent.changeDate(this.parent.activeView.getNextPreviousDate("previous"),e);var b=this.parent.getAllDayRow();this.selectCells(!1,b.cells[y-1])}}}}},e.prototype.getTimelineYearTargetCell=function(e,t,i){return this.isInverseTableSelect()?this.getVerticalLeftRightCell(t,i):this.getHorizontalLeftRightCell(e,t,i)},e.prototype.getHorizontalLeftRightCell=function(e,t,i){var n=e.element.rows[t.parentNode.sectionRowIndex+(i?1:-1)];if(n){var r=i?"."+tM+":not(."+tR+")":'[data-date="'+(+t.getAttribute("data-date")-tm)+'"]';return n.querySelector(r)}return t},e.prototype.getVerticalLeftRightCell=function(e,t){var i=new Date(+e.getAttribute("data-date")),n=new Date(i.getFullYear(),i.getMonth()+(t?1:-1),1),r=this.parent.getContentTable(),a=r.querySelector('[data-date="'+n.getTime()+'"]');return a.parentNode.sectionRowIndex>e.parentNode.sectionRowIndex?a:r.querySelector('[data-date="'+new Date(n.getFullYear(),n.getMonth()+1,0).getTime()+'"]')},e.prototype.calculateNextPrevDate=function(e,t,i){var n=this.initialTarget.getAttribute("data-group-index");if(this.parent.activeViewOptions.group.resources.length>0&&"Month"===this.parent.currentView&&e&&t&&t.getAttribute("data-group-index")!==n){var r=this.parent.getDateFromElement(e),a=new Date("right"===i?r.setDate(r.getDate()+1):r.setDate(r.getDate()-1));t=[].slice.call(this.parent.element.querySelectorAll('td[data-date="'+a.getTime().toString()+'"][data-group-index="'+n+'"]'))[0]}return t},e.prototype.getFocusableElements=function(e){return[].slice.call(e.querySelectorAll('a[href]:not([tabindex="-1"]),input:not([disabled]):not([tabindex="-1"]),textarea:not([disabled]):not([tabindex="-1"]),button:not([disabled]):not([tabindex="-1"]),select:not([disabled]):not([tabindex="-1"]),[tabindex]:not([tabindex="-1"]),[contentEditable=true]:not([tabindex="-1"])'))},e.prototype.processTabOnPopup=function(e,i){var n=this,r=this.getFocusableElements(i),a=(r=r.filter(function(e){var t=n.parent.element.querySelector("."+i5);return t&&t.offsetParent?!(e.classList.contains(nU)||e.classList.contains(nB)):!(e.classList.contains(ne)||e.classList.contains(nt))}))[0],s=r[r.length-1];t.isNullOrUndefined(s)||document.activeElement!==s||e.shiftKey||(e.preventDefault(),a.focus()),!t.isNullOrUndefined(a)&&document.activeElement===a&&e.shiftKey&&(e.preventDefault(),s.focus())},e.prototype.processTab=function(e,i){var n=e.target;if(n.classList.contains(n9)&&this.parent.inlineModule&&(n=n.closest(".e-appointment"),this.parent.inlineModule.inlineCrudActions(e.target)),"TimelineYear"===this.parent.currentView&&n.classList.contains(tR))n.classList.contains(ir)&&this.parent.removeSelectedClass();else{var r=t.closest(n,"."+nK+",."+nn);if(r&&r.classList.contains(tI))return r.classList.contains(nn)&&this.parent.eventBase.removeSelectedAppointmentClass(),void this.processTabOnPopup(e,r);if(n.classList.contains(ty))this.parent.eventBase.removeSelectedAppointmentClass();else if(n.classList.contains(t$)&&this.parent.activeView.isTimelineView()&&this.parent.activeViewOptions.group.resources.length>0){var a=parseInt(n.getAttribute("data-group-index"),10),s="."+ip+'[data-group-index="'+(i?a-1:a)+'"]';if((h=[].slice.call(this.parent.element.querySelectorAll(s))).length>0){this.parent.eventBase.removeSelectedAppointmentClass();var o=i?h.slice(-1)[0]:h[0];this.parent.eventBase.addSelectedAppointments([o],!0),o.focus(),e.preventDefault()}else if(a+1===this.parent.resourceBase.lastResourceLevel.length)this.parent.element.focus(),e.preventDefault();else if(this.parent.virtualScrollModule){var l=Math.round(this.parent.element.querySelector("."+iC).offsetHeight/this.parent.resourceBase.expandedResources.length);this.parent.element.querySelector(".e-content-wrap").scrollTop=(i?a-1:a+1)*l,this.parent.virtualScrollModule.virtualScrolling()}else this.setScrollPosition(a)}else if(n.classList.contains(ip)){var h=[].slice.call(this.parent.element.querySelectorAll("."+ip)),p="TimelineYear"===this.parent.currentView;if((this.parent.activeView.isTimelineView()&&!p||p&&"Vertical"===this.parent.activeViewOptions.orientation)&&this.parent.activeViewOptions.group.resources.length>0){a=parseInt(n.getAttribute("data-group-index"),10),h=[].slice.call(this.parent.element.querySelectorAll("."+ip+'[data-group-index="'+a+'"]'));var c="."+t$+'[data-group-index="'+(i?a:a+1)+'"]',d=this.parent.element.querySelector(c);if(d&&(i&&n.getAttribute("data-guid")===h[0].getAttribute("data-guid")||!i&&n.getAttribute("data-guid")===h.slice(-1)[0].getAttribute("data-guid")))return this.parent.eventBase.removeSelectedAppointmentClass(),this.parent.virtualScrollModule?d.focus({preventScroll:!0}):d.focus(),this.parent.activeView.isTimelineView()&&this.parent.activeViewOptions.group.resources.length>0&&t.isNullOrUndefined(this.parent.virtualScrollModule)&&this.setScrollPosition(a),void e.preventDefault()}var u=this.parent.eventBase.getSelectedAppointments();if(u.length>0&&(n=u[u.length-1]),this.parent.eventBase.removeSelectedAppointmentClass(),!i&&n.getAttribute("data-guid")===h[h.length-1].getAttribute("data-guid")||i&&n.getAttribute("data-guid")===h[0].getAttribute("data-guid"))return;"Agenda"!==this.parent.currentView&&"MonthAgenda"!==this.parent.currentView||(this.selectAppointment(i,n),e.preventDefault())}else{var m=this.parent.getSelectedCells();if(m.length>0&&!n.classList.contains(ip))return n=m[m.length-1],this.selectAppointmentElementFromWorkCell(i,n),void e.preventDefault();n&&!n.classList.contains(t$)&&this.parent.activeView.isTimelineView()&&this.parent.activeViewOptions.group.resources.length>0&&this.processTabOnResourceCells(n,i)}}},e.prototype.processDelete=function(e){var i=document.activeElement;if("MonthAgenda"===this.parent.currentView){var n=this.parent.eventBase.getSelectedEvents().element;i=n&&t.isNullOrUndefined(n.length)?n:n[0]}if(i&&i.classList.contains(ip)){if(t.addClass([i],iu),this.parent.activeEventData=this.parent.eventBase.getSelectedEvents(),this.parent.activeViewOptions.readonly||i.classList.contains(n5)||!this.parent.eventSettings.allowDeleting)return;this.parent.quickPopup.deleteClick(e)}},e.prototype.processCtrlShiftNavigationArrows=function(e){if(this.parent.activeViewOptions.group.resources.length>0&&document.activeElement.classList.contains(ip)){var t=parseInt(document.activeElement.getAttribute("data-group-index"),10);r=(r="ctrlShiftLeftArrow"===e.action||"ctrlShiftUpArrow"===e.action?t-1:t+1)<0?0:r>this.parent.resourceBase.lastResourceLevel.length?this.parent.resourceBase.lastResourceLevel.length:r;for(var i=[];0===i.length&&r>=0&&r<=this.parent.resourceBase.lastResourceLevel.length;)i=[].slice.call(this.parent.element.querySelectorAll("."+ip+'[data-group-index="'+r+'"]')),r="ctrlShiftLeftArrow"===e.action||"ctrlShiftUpArrow"===e.action?r-1:r+1;var n=i[0];n&&(this.parent.eventBase.removeSelectedAppointmentClass(),this.parent.eventBase.addSelectedAppointments([n],!0),n.focus())}else if(this.parent.activeViewOptions.group.resources.length>0&&!document.activeElement.classList.contains(ip)){var r=this.parent.resourceBase.renderedResources[0].groupIndex,a="."+ip+'[data-group-index="'+r+'"]',s=[].slice.call(this.parent.element.querySelectorAll(a));if(s.length>0){this.parent.eventBase.removeSelectedAppointmentClass();var o=s[0];this.parent.eventBase.addSelectedAppointments([o],!0),o.focus(),e.preventDefault()}}},e.prototype.processEscape=function(e){this.parent.quickPopup.onClosePopup(e),this.parent.quickPopup.morePopup.hide(),this.parent.headerModule&&this.parent.headerModule.hideHeaderPopup(),this.parent.inlineModule&&this.parent.inlineModule.removeInlineAppointmentElement()},e.prototype.isPreventAction=function(e){var i=t.closest(e.target,"."+tY);return!(!this.parent.activeView.isTimelineView()||t.isNullOrUndefined(i))},e.prototype.processTabOnResourceCells=function(e,t){var i=[].slice.call(this.parent.element.querySelectorAll('[tabIndex="0"]')),n=i.indexOf(e),r=t?i[n-1]:i[n+1];if(r&&r.classList.contains(t$)){var a=parseInt(r.getAttribute("data-group-index"),10);if(this.parent.virtualScrollModule){var s=this.parent.element.querySelector("."+tG);[].slice.call(this.parent.element.querySelectorAll("."+t$)).forEach(function(e){e.getBoundingClientRect().top<s.getBoundingClientRect().top&&e.setAttribute("tabindex","-1")})}else this.setScrollPosition(a)}},e.prototype.setScrollPosition=function(e){var t=this.parent.element.querySelector("."+tM+'[data-group-index="'+e+'"]');t&&(this.parent.element.querySelector("."+iw).scrollTop=t.offsetTop)},e.prototype.getModuleName=function(){return"keyboard"},e.prototype.destroy=function(){this.removeEventListener(),this.selectedCells=[],this.keyboardModule.destroy()},e}(),ro=function(){function e(e,t,i){this.parent=e,this.initDataManager(t,i)}return e.prototype.initDataManager=function(e,t){this.dataManager=e instanceof a.DataManager?e:new a.DataManager(e),this.query=t instanceof a.Query?t:new a.Query},e.prototype.generateQuery=function(e,i){var n=this.query.clone();if(this.parent&&e&&i){if(this.parent.activeViewOptions&&this.parent.activeViewOptions.enableLazyLoading&&!t.isNullOrUndefined(this.parent.activeViewOptions.group.resources)&&this.parent.activeViewOptions.group.resources.length>0&&this.parent.resourceBase&&this.parent.resourceBase.resourceCollection.length>0&&this.parent.resourceBase.renderedResources.length>0){var r=[];this.parent.resourceBase.resourceCollection.forEach(function(){return r.push([])}),this.parent.resourceBase.renderedResources.forEach(function(e){r.forEach(function(t,i){var n=e.groupOrder[parseInt(i.toString(),10)];n&&0>t.indexOf(n)&&t.push(n)})}),this.parent.resourceBase.resourceCollection.forEach(function(e,t){n.addParams(e.field,r[parseInt(t.toString(),10)].toString())})}if(this.parent.timezone&&(e=this.parent.tzModule.remove(new Date(+e.getTime()),this.parent.timezone),i=this.parent.tzModule.remove(new Date(+i.getTime()),this.parent.timezone)),this.parent.eventSettings.includeFiltersInQuery){var s=this.getStartEndQuery(e,i),o=new a.Predicate(this.parent.eventFields.recurrenceRule,"notequal",null).and(new a.Predicate(this.parent.eventFields.recurrenceRule,"notequal",""));return n.where(s.or(o))}n.addParams("StartDate",e.toISOString()),n.addParams("EndDate",i.toISOString())}return n},e.prototype.getStartEndQuery=function(e,t){var i=this.parent.eventFields;return new a.Predicate(i.startTime,"greaterthanorequal",e).and(new a.Predicate(i.endTime,"greaterthanorequal",e)).and(new a.Predicate(i.startTime,"lessthan",t)).or(new a.Predicate(i.startTime,"lessthanorequal",e).and(new a.Predicate(i.endTime,"greaterthan",e)))},e.prototype.getData=function(e){return this.dataManager.executeQuery(e)},e.prototype.destroy=function(){this.dataManager=null,this.query=null},e}(),rl=function(){function e(){}return e.prototype.firstDateOfMonth=function(e){return new Date(e.getFullYear(),e.getMonth())},e.prototype.lastDateOfMonth=function(e){return new Date(e.getFullYear(),e.getMonth()+1,0)},e.prototype.isMonthStart=function(e){return 1===e.getDate()},e.prototype.getLeapYearDaysCount=function(){return 366},e.prototype.getYearDaysCount=function(e,t){return(e.getFullYear()+t)%4==0?366:365},e.prototype.getDate=function(e){return e.getDate()},e.prototype.getMonth=function(e){return e.getMonth()+1},e.prototype.getFullYear=function(e){return e.getFullYear()},e.prototype.getYearLastDate=function(e,t){return new Date(e.getFullYear()+t,0,0)},e.prototype.getMonthDaysCount=function(e){return this.lastDateOfMonth(e).getDate()},e.prototype.getMonthStartDate=function(e){return new Date(e.getFullYear(),e.getMonth(),1,e.getHours(),e.getMinutes())},e.prototype.getMonthEndDate=function(e){return e.setDate(1),new Date(e.setMonth(e.getMonth()+1))},e.prototype.getExpectedDays=function(e,t){return t},e.prototype.setDate=function(e,t){e.setDate(t)},e.prototype.setValidDate=function(e,i,n,r,a){t.isNullOrUndefined(a)?e.setMonth(e.getMonth()+i,n):e.setMonth((a?r:e.getMonth())+i)},e.prototype.setMonth=function(e,t,i){e.setDate(1),e.setFullYear(e.getFullYear()),e.setMonth(t-1);var n=new Date(e.getFullYear(),e.getMonth()+1,0).getDate();e.setDate(Math.min(i,n))},e.prototype.addYears=function(e,t){e.setFullYear(e.getFullYear()+t)},e.prototype.isSameMonth=function(e,t){return e.getMonth()===t.getMonth()},e.prototype.checkMonth=function(e,t){return -1===t.indexOf(e.getMonth()+1)},e.prototype.compareMonth=function(e,t){return e.getMonth()>t.getMonth()},e.prototype.isSameYear=function(e,t){return e.getFullYear()===t.getFullYear()},e.prototype.isLastMonth=function(e){return 11===e.getMonth()},e.prototype.isLeapYear=function(e,t){return(e+t)%4==0},e}(),rh=function(){function e(){}return e.prototype.firstDateOfMonth=function(e){var i=this.getHijriDate(e);return t.HijriParser.toGregorian(i.year,i.month,1)},e.prototype.lastDateOfMonth=function(e){var i=this.getHijriDate(e),n=this.getDaysInMonth(i.month,i.year),r=t.HijriParser.toGregorian(i.year,i.month,n),a=new Date(r.getTime());a=new Date(a.setDate(a.getDate()+1));var s=this.getHijriDate(a);return i.month===s.month?a:(s=this.getHijriDate(r),i.month===s.month?r:new Date(r.setDate(r.getDate()-1)))},e.prototype.isMonthStart=function(e){return 1===this.getHijriDate(e).date},e.prototype.getLeapYearDaysCount=function(){return 355},e.prototype.getYearDaysCount=function(e,t){var i=this.getHijriDate(e);return this.isLeapYear(i.year,t)?355:354},e.prototype.getDate=function(e){return this.getHijriDate(e).date},e.prototype.getMonth=function(e){return this.getHijriDate(e).month},e.prototype.getFullYear=function(e){return this.getHijriDate(e).year},e.prototype.getYearLastDate=function(e,i){var n=this.getHijriDate(e);return t.HijriParser.toGregorian(n.year+i,1,0)},e.prototype.getMonthDaysCount=function(e){var t=this.lastDateOfMonth(e);return this.getHijriDate(t).date},e.prototype.getMonthStartDate=function(e){var t=this.firstDateOfMonth(e);return new Date(t.getFullYear(),t.getMonth(),t.getDate(),e.getHours(),e.getMinutes())},e.prototype.getMonthEndDate=function(e){var t=this.lastDateOfMonth(e);return t.setDate(t.getDate()+1),new Date(t.setMonth(t.getMonth()))},e.prototype.getExpectedDays=function(e,i){for(var n=this.getHijriDate(e),r=[],a=0;a<i.length;a++){var s=t.HijriParser.toGregorian(n.year,n.month,i[parseInt(a.toString(),10)]);r.push(s.getDate())}return r},e.prototype.setDate=function(e,i){var n=this.getHijriDate(e),r=t.HijriParser.toGregorian(n.year,n.month,i);this.updateDateObj(e,r)},e.prototype.setValidDate=function(e,i,n,r,a){var s=t.isNullOrUndefined(a)?e:this.firstDateOfMonth(a),o=this.getHijriDate(s),l=t.HijriParser.toGregorian(o.year,o.month+i,n);this.updateDateObj(e,l)},e.prototype.setMonth=function(e,i,n){var r=this.getHijriDate(e),a=t.HijriParser.toGregorian(r.year,i,n);this.updateDateObj(e,a)},e.prototype.addYears=function(e,i,n){var r=this.getHijriDate(e),a=t.HijriParser.toGregorian(r.year+i,n,1);this.updateDateObj(e,a)},e.prototype.isSameMonth=function(e,t){var i=this.getHijriDate(e),n=this.getHijriDate(t);return i.month===n.month},e.prototype.checkMonth=function(e,t){var i=this.getHijriDate(e);return -1===t.indexOf(i.month)},e.prototype.compareMonth=function(e,t){var i=this.getHijriDate(e),n=this.getHijriDate(t);return i.month>n.month},e.prototype.isSameYear=function(e,t){var i=this.getHijriDate(e),n=this.getHijriDate(t);return i.year===n.year},e.prototype.isLastMonth=function(e){return 12===this.getHijriDate(e).month},e.prototype.updateDateObj=function(e,t){e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate())},e.prototype.isLeapYear=function(e,t){return(14+11*(e+t))%30<11},e.prototype.getDaysInMonth=function(e,t){var i=0;return i=29+(e+1)%2,11===e&&this.isLeapYear(t,0)&&i++,i},e.prototype.getHijriDate=function(e){return t.HijriParser.getHijriDate(e)},e}(),rp=function(){function e(){this.timezoneData=[],this.timezoneData=this.getTimezoneData()}return e.prototype.offset=function(e,t){var i=e.getTimezoneOffset();try{var n=new Date(e.toLocaleString("en-US",{timeZone:t}));return isNaN(n.getTime())?0:(e.getTime()-n.getTime())/6e4+i}catch(e){return 0}},e.prototype.convert=function(e,t,i){"string"==typeof t&&(t=this.offset(e,t)),"string"==typeof i&&(i=this.offset(e,i));var n=e.getTimezoneOffset(),r=(e=new Date(e.getTime()+6e4*(t-i))).getTimezoneOffset();return new Date(e.getTime()+6e4*(r-n))},e.prototype.add=function(e,t){return this.convert(e,e.getTimezoneOffset(),t)},e.prototype.remove=function(e,t){return this.convert(e,t,e.getTimezoneOffset())},e.prototype.removeLocalOffset=function(e){return new Date(e.getTime()-6e4*e.getTimezoneOffset())},e.prototype.getLocalTimezoneName=function(){return window.Intl&&Intl.DateTimeFormat().resolvedOptions().timeZone||"UTC"},e.prototype.getTimezoneData=function(){return rc},e}(),rc=[{Value:"Pacific/Niue",Text:"(UTC-11:00) Niue"},{Value:"Pacific/Pago_Pago",Text:"(UTC-11:00) Pago Pago"},{Value:"Pacific/Honolulu",Text:"(UTC-10:00) Hawaii Time"},{Value:"Pacific/Rarotonga",Text:"(UTC-10:00) Rarotonga"},{Value:"Pacific/Tahiti",Text:"(UTC-10:00) Tahiti"},{Value:"Pacific/Marquesas",Text:"(UTC-09:30) Marquesas"},{Value:"America/Anchorage",Text:"(UTC-09:00) Alaska Time"},{Value:"Pacific/Gambier",Text:"(UTC-09:00) Gambier"},{Value:"America/Los_Angeles",Text:"(UTC-08:00) Pacific Time"},{Value:"America/Tijuana",Text:"(UTC-08:00) Pacific Time - Tijuana"},{Value:"America/Vancouver",Text:"(UTC-08:00) Pacific Time - Vancouver"},{Value:"America/Whitehorse",Text:"(UTC-08:00) Pacific Time - Whitehorse"},{Value:"Pacific/Pitcairn",Text:"(UTC-08:00) Pitcairn"},{Value:"America/Denver",Text:"(UTC-07:00) Mountain Time"},{Value:"America/Phoenix",Text:"(UTC-07:00) Mountain Time - Arizona"},{Value:"America/Mazatlan",Text:"(UTC-07:00) Mountain Time - Chihuahua, Mazatlan"},{Value:"America/Dawson_Creek",Text:"(UTC-07:00) Mountain Time - Dawson Creek"},{Value:"America/Edmonton",Text:"(UTC-07:00) Mountain Time - Edmonton"},{Value:"America/Hermosillo",Text:"(UTC-07:00) Mountain Time - Hermosillo"},{Value:"America/Yellowknife",Text:"(UTC-07:00) Mountain Time - Yellowknife"},{Value:"America/Belize",Text:"(UTC-06:00) Belize"},{Value:"America/Chicago",Text:"(UTC-06:00) Central Time"},{Value:"America/Mexico_City",Text:"(UTC-06:00) Central Time - Mexico City"},{Value:"America/Regina",Text:"(UTC-06:00) Central Time - Regina"},{Value:"America/Tegucigalpa",Text:"(UTC-06:00) Central Time - Tegucigalpa"},{Value:"America/Winnipeg",Text:"(UTC-06:00) Central Time - Winnipeg"},{Value:"America/Costa_Rica",Text:"(UTC-06:00) Costa Rica"},{Value:"America/El_Salvador",Text:"(UTC-06:00) El Salvador"},{Value:"Pacific/Galapagos",Text:"(UTC-06:00) Galapagos"},{Value:"America/Guatemala",Text:"(UTC-06:00) Guatemala"},{Value:"America/Managua",Text:"(UTC-06:00) Managua"},{Value:"America/Cancun",Text:"(UTC-05:00) America Cancun"},{Value:"America/Bogota",Text:"(UTC-05:00) Bogota"},{Value:"Pacific/Easter",Text:"(UTC-05:00) Easter Island"},{Value:"America/New_York",Text:"(UTC-05:00) Eastern Time"},{Value:"America/Iqaluit",Text:"(UTC-05:00) Eastern Time - Iqaluit"},{Value:"America/Toronto",Text:"(UTC-05:00) Eastern Time - Toronto"},{Value:"America/Guayaquil",Text:"(UTC-05:00) Guayaquil"},{Value:"America/Havana",Text:"(UTC-05:00) Havana"},{Value:"America/Jamaica",Text:"(UTC-05:00) Jamaica"},{Value:"America/Lima",Text:"(UTC-05:00) Lima"},{Value:"America/Nassau",Text:"(UTC-05:00) Nassau"},{Value:"America/Panama",Text:"(UTC-05:00) Panama"},{Value:"America/Port-au-Prince",Text:"(UTC-05:00) Port-au-Prince"},{Value:"America/Rio_Branco",Text:"(UTC-05:00) Rio Branco"},{Value:"America/Halifax",Text:"(UTC-04:00) Atlantic Time - Halifax"},{Value:"America/Barbados",Text:"(UTC-04:00) Barbados"},{Value:"Atlantic/Bermuda",Text:"(UTC-04:00) Bermuda"},{Value:"America/Boa_Vista",Text:"(UTC-04:00) Boa Vista"},{Value:"America/Caracas",Text:"(UTC-04:00) Caracas"},{Value:"America/Curacao",Text:"(UTC-04:00) Curacao"},{Value:"America/Grand_Turk",Text:"(UTC-04:00) Grand Turk"},{Value:"America/Guyana",Text:"(UTC-04:00) Guyana"},{Value:"America/La_Paz",Text:"(UTC-04:00) La Paz"},{Value:"America/Manaus",Text:"(UTC-04:00) Manaus"},{Value:"America/Martinique",Text:"(UTC-04:00) Martinique"},{Value:"America/Port_of_Spain",Text:"(UTC-04:00) Port of Spain"},{Value:"America/Porto_Velho",Text:"(UTC-04:00) Porto Velho"},{Value:"America/Puerto_Rico",Text:"(UTC-04:00) Puerto Rico"},{Value:"America/Santo_Domingo",Text:"(UTC-04:00) Santo Domingo"},{Value:"America/Thule",Text:"(UTC-04:00) Thule"},{Value:"America/St_Johns",Text:"(UTC-03:30) Newfoundland Time - St. Johns"},{Value:"America/Araguaina",Text:"(UTC-03:00) Araguaina"},{Value:"America/Asuncion",Text:"(UTC-03:00) Asuncion"},{Value:"America/Belem",Text:"(UTC-03:00) Belem"},{Value:"America/Argentina/Buenos_Aires",Text:"(UTC-03:00) Buenos Aires"},{Value:"America/Campo_Grande",Text:"(UTC-03:00) Campo Grande"},{Value:"America/Cayenne",Text:"(UTC-03:00) Cayenne"},{Value:"America/Cuiaba",Text:"(UTC-03:00) Cuiaba"},{Value:"America/Fortaleza",Text:"(UTC-03:00) Fortaleza"},{Value:"America/Godthab",Text:"(UTC-03:00) Godthab"},{Value:"America/Maceio",Text:"(UTC-03:00) Maceio"},{Value:"America/Miquelon",Text:"(UTC-03:00) Miquelon"},{Value:"America/Montevideo",Text:"(UTC-03:00) Montevideo"},{Value:"Antarctica/Palmer",Text:"(UTC-03:00) Palmer"},{Value:"America/Paramaribo",Text:"(UTC-03:00) Paramaribo"},{Value:"America/Punta_Arenas",Text:"(UTC-03:00) Punta Arenas"},{Value:"America/Recife",Text:"(UTC-03:00) Recife"},{Value:"Antarctica/Rothera",Text:"(UTC-03:00) Rothera"},{Value:"America/Bahia",Text:"(UTC-03:00) Salvador"},{Value:"America/Santiago",Text:"(UTC-03:00) Santiago"},{Value:"Atlantic/Stanley",Text:"(UTC-03:00) Stanley"},{Value:"America/Noronha",Text:"(UTC-02:00) Noronha"},{Value:"America/Sao_Paulo",Text:"(UTC-02:00) Sao Paulo"},{Value:"Atlantic/South_Georgia",Text:"(UTC-02:00) South Georgia"},{Value:"Atlantic/Azores",Text:"(UTC-01:00) Azores"},{Value:"Atlantic/Cape_Verde",Text:"(UTC-01:00) Cape Verde"},{Value:"America/Scoresbysund",Text:"(UTC-01:00) Scoresbysund"},{Value:"Africa/Abidjan",Text:"(UTC+00:00) Abidjan"},{Value:"Africa/Accra",Text:"(UTC+00:00) Accra"},{Value:"Africa/Bissau",Text:"(UTC+00:00) Bissau"},{Value:"Atlantic/Canary",Text:"(UTC+00:00) Canary Islands"},{Value:"Africa/Casablanca",Text:"(UTC+00:00) Casablanca"},{Value:"America/Danmarkshavn",Text:"(UTC+00:00) Danmarkshavn"},{Value:"Europe/Dublin",Text:"(UTC+00:00) Dublin"},{Value:"Africa/El_Aaiun",Text:"(UTC+00:00) El Aaiun"},{Value:"Atlantic/Faroe",Text:"(UTC+00:00) Faeroe"},{Value:"Etc/UTC",Text:"(UTC+00:00) UTC (no daylight saving)"},{Value:"Europe/Lisbon",Text:"(UTC+00:00) Lisbon"},{Value:"Europe/London",Text:"(UTC+00:00) London"},{Value:"Africa/Monrovia",Text:"(UTC+00:00) Monrovia"},{Value:"Atlantic/Reykjavik",Text:"(UTC+00:00) Reykjavik"},{Value:"UTC",Text:"UTC"},{Value:"Africa/Algiers",Text:"(UTC+01:00) Algiers"},{Value:"Europe/Amsterdam",Text:"(UTC+01:00) Amsterdam"},{Value:"Europe/Andorra",Text:"(UTC+01:00) Andorra"},{Value:"Europe/Berlin",Text:"(UTC+01:00) Berlin"},{Value:"Europe/Brussels",Text:"(UTC+01:00) Brussels"},{Value:"Europe/Budapest",Text:"(UTC+01:00) Budapest"},{Value:"Europe/Belgrade",Text:"(UTC+01:00) Central European Time - Belgrade"},{Value:"Europe/Prague",Text:"(UTC+01:00) Central European Time - Prague"},{Value:"Africa/Ceuta",Text:"(UTC+01:00) Ceuta"},{Value:"Europe/Copenhagen",Text:"(UTC+01:00) Copenhagen"},{Value:"Europe/Gibraltar",Text:"(UTC+01:00) Gibraltar"},{Value:"Africa/Lagos",Text:"(UTC+01:00) Lagos"},{Value:"Europe/Luxembourg",Text:"(UTC+01:00) Luxembourg"},{Value:"Europe/Madrid",Text:"(UTC+01:00) Madrid"},{Value:"Europe/Malta",Text:"(UTC+01:00) Malta"},{Value:"Europe/Monaco",Text:"(UTC+01:00) Monaco"},{Value:"Africa/Ndjamena",Text:"(UTC+01:00) Ndjamena"},{Value:"Europe/Oslo",Text:"(UTC+01:00) Oslo"},{Value:"Europe/Paris",Text:"(UTC+01:00) Paris"},{Value:"Europe/Rome",Text:"(UTC+01:00) Rome"},{Value:"Europe/Stockholm",Text:"(UTC+01:00) Stockholm"},{Value:"Europe/Tirane",Text:"(UTC+01:00) Tirane"},{Value:"Africa/Tunis",Text:"(UTC+01:00) Tunis"},{Value:"Europe/Vienna",Text:"(UTC+01:00) Vienna"},{Value:"Europe/Warsaw",Text:"(UTC+01:00) Warsaw"},{Value:"Europe/Zurich",Text:"(UTC+01:00) Zurich"},{Value:"Asia/Amman",Text:"(UTC+02:00) Amman"},{Value:"Europe/Athens",Text:"(UTC+02:00) Athens"},{Value:"Asia/Beirut",Text:"(UTC+02:00) Beirut"},{Value:"Europe/Bucharest",Text:"(UTC+02:00) Bucharest"},{Value:"Africa/Cairo",Text:"(UTC+02:00) Cairo"},{Value:"Europe/Chisinau",Text:"(UTC+02:00) Chisinau"},{Value:"Asia/Damascus",Text:"(UTC+02:00) Damascus"},{Value:"Asia/Gaza",Text:"(UTC+02:00) Gaza"},{Value:"Europe/Helsinki",Text:"(UTC+02:00) Helsinki"},{Value:"Asia/Jerusalem",Text:"(UTC+02:00) Jerusalem"},{Value:"Africa/Johannesburg",Text:"(UTC+02:00) Johannesburg"},{Value:"Africa/Khartoum",Text:"(UTC+02:00) Khartoum"},{Value:"Europe/Kiev",Text:"(UTC+02:00) Kiev"},{Value:"Africa/Maputo",Text:"(UTC+02:00) Maputo"},{Value:"Europe/Kaliningrad",Text:"(UTC+02:00) Moscow-01 - Kaliningrad"},{Value:"Asia/Nicosia",Text:"(UTC+02:00) Nicosia"},{Value:"Europe/Riga",Text:"(UTC+02:00) Riga"},{Value:"Europe/Sofia",Text:"(UTC+02:00) Sofia"},{Value:"Europe/Tallinn",Text:"(UTC+02:00) Tallinn"},{Value:"Africa/Tripoli",Text:"(UTC+02:00) Tripoli"},{Value:"Europe/Vilnius",Text:"(UTC+02:00) Vilnius"},{Value:"Africa/Windhoek",Text:"(UTC+02:00) Windhoek"},{Value:"Asia/Baghdad",Text:"(UTC+03:00) Baghdad"},{Value:"Europe/Istanbul",Text:"(UTC+03:00) Istanbul"},{Value:"Europe/Minsk",Text:"(UTC+03:00) Minsk"},{Value:"Europe/Moscow",Text:"(UTC+03:00) Moscow+00 - Moscow"},{Value:"Africa/Nairobi",Text:"(UTC+03:00) Nairobi"},{Value:"Asia/Qatar",Text:"(UTC+03:00) Qatar"},{Value:"Asia/Riyadh",Text:"(UTC+03:00) Riyadh"},{Value:"Antarctica/Syowa",Text:"(UTC+03:00) Syowa"},{Value:"Asia/Tehran",Text:"(UTC+03:30) Tehran"},{Value:"Asia/Baku",Text:"(UTC+04:00) Baku"},{Value:"Asia/Dubai",Text:"(UTC+04:00) Dubai"},{Value:"Indian/Mahe",Text:"(UTC+04:00) Mahe"},{Value:"Indian/Mauritius",Text:"(UTC+04:00) Mauritius"},{Value:"Europe/Samara",Text:"(UTC+04:00) Moscow+01 - Samara"},{Value:"Indian/Reunion",Text:"(UTC+04:00) Reunion"},{Value:"Asia/Tbilisi",Text:"(UTC+04:00) Tbilisi"},{Value:"Asia/Yerevan",Text:"(UTC+04:00) Yerevan"},{Value:"Asia/Kabul",Text:"(UTC+04:30) Kabul"},{Value:"Asia/Aqtau",Text:"(UTC+05:00) Aqtau"},{Value:"Asia/Aqtobe",Text:"(UTC+05:00) Aqtobe"},{Value:"Asia/Ashgabat",Text:"(UTC+05:00) Ashgabat"},{Value:"Asia/Dushanbe",Text:"(UTC+05:00) Dushanbe"},{Value:"Asia/Karachi",Text:"(UTC+05:00) Karachi"},{Value:"Indian/Kerguelen",Text:"(UTC+05:00) Kerguelen"},{Value:"Indian/Maldives",Text:"(UTC+05:00) Maldives"},{Value:"Antarctica/Mawson",Text:"(UTC+05:00) Mawson"},{Value:"Asia/Yekaterinburg",Text:"(UTC+05:00) Moscow+02 - Yekaterinburg"},{Value:"Asia/Tashkent",Text:"(UTC+05:00) Tashkent"},{Value:"Asia/Colombo",Text:"(UTC+05:30) Colombo"},{Value:"Asia/Kolkata",Text:"(UTC+05:30) India Standard Time"},{Value:"Asia/Katmandu",Text:"(UTC+05:45) Katmandu"},{Value:"Asia/Almaty",Text:"(UTC+06:00) Almaty"},{Value:"Asia/Bishkek",Text:"(UTC+06:00) Bishkek"},{Value:"Indian/Chagos",Text:"(UTC+06:00) Chagos"},{Value:"Asia/Dhaka",Text:"(UTC+06:00) Dhaka"},{Value:"Asia/Omsk",Text:"(UTC+06:00) Moscow+03 - Omsk"},{Value:"Asia/Thimphu",Text:"(UTC+06:00) Thimphu"},{Value:"Antarctica/Vostok",Text:"(UTC+06:00) Vostok"},{Value:"Indian/Cocos",Text:"(UTC+06:30) Cocos"},{Value:"Asia/Yangon",Text:"(UTC+06:30) Rangoon"},{Value:"Asia/Bangkok",Text:"(UTC+07:00) Bangkok"},{Value:"Indian/Christmas",Text:"(UTC+07:00) Christmas"},{Value:"Antarctica/Davis",Text:"(UTC+07:00) Davis"},{Value:"Asia/Saigon",Text:"(UTC+07:00) Hanoi"},{Value:"Asia/Hovd",Text:"(UTC+07:00) Hovd"},{Value:"Asia/Jakarta",Text:"(UTC+07:00) Jakarta"},{Value:"Asia/Krasnoyarsk",Text:"(UTC+07:00) Moscow+04 - Krasnoyarsk"},{Value:"Asia/Brunei",Text:"(UTC+08:00) Brunei"},{Value:"Asia/Shanghai",Text:"(UTC+08:00) China Time - Beijing"},{Value:"Asia/Choibalsan",Text:"(UTC+08:00) Choibalsan"},{Value:"Asia/Hong_Kong",Text:"(UTC+08:00) Hong Kong"},{Value:"Asia/Kuala_Lumpur",Text:"(UTC+08:00) Kuala Lumpur"},{Value:"Asia/Macau",Text:"(UTC+08:00) Macau"},{Value:"Asia/Makassar",Text:"(UTC+08:00) Makassar"},{Value:"Asia/Manila",Text:"(UTC+08:00) Manila"},{Value:"Asia/Irkutsk",Text:"(UTC+08:00) Moscow+05 - Irkutsk"},{Value:"Asia/Singapore",Text:"(UTC+08:00) Singapore"},{Value:"Asia/Taipei",Text:"(UTC+08:00) Taipei"},{Value:"Asia/Ulaanbaatar",Text:"(UTC+08:00) Ulaanbaatar"},{Value:"Australia/Perth",Text:"(UTC+08:00) Western Time - Perth"},{Value:"Asia/Pyongyang",Text:"(UTC+08:30) Pyongyang"},{Value:"Asia/Dili",Text:"(UTC+09:00) Dili"},{Value:"Asia/Jayapura",Text:"(UTC+09:00) Jayapura"},{Value:"Asia/Yakutsk",Text:"(UTC+09:00) Moscow+06 - Yakutsk"},{Value:"Pacific/Palau",Text:"(UTC+09:00) Palau"},{Value:"Asia/Seoul",Text:"(UTC+09:00) Seoul"},{Value:"Asia/Tokyo",Text:"(UTC+09:00) Tokyo"},{Value:"Australia/Darwin",Text:"(UTC+09:30) Central Time - Darwin"},{Value:"Antarctica/DumontDUrville",Text:'(UTC+10:00) Dumont D"Urville'},{Value:"Australia/Brisbane",Text:"(UTC+10:00) Eastern Time - Brisbane"},{Value:"Pacific/Guam",Text:"(UTC+10:00) Guam"},{Value:"Asia/Vladivostok",Text:"(UTC+10:00) Moscow+07 - Vladivostok"},{Value:"Pacific/Port_Moresby",Text:"(UTC+10:00) Port Moresby"},{Value:"Pacific / Chuuk",Text:"(UTC+10:00) Truk"},{Value:"Australia/Adelaide",Text:"(UTC+10:30) Central Time - Adelaide"},{Value:"Antarctica/Casey",Text:"(UTC+11:00) Casey"},{Value:"Australia/Hobart",Text:"(UTC+11:00) Eastern Time - Hobart"},{Value:"Australia/Sydney",Text:"(UTC+11:00) Eastern Time - Melbourne, Sydney"},{Value:"Pacific/Efate",Text:"(UTC+11:00) Efate"},{Value:"Pacific/Guadalcanal",Text:"(UTC+11:00) Guadalcanal"},{Value:"Pacific/Kosrae",Text:"(UTC+11:00) Kosrae"},{Value:"Asia/Magadan",Text:"(UTC+11:00) Moscow+08 - Magadan"},{Value:"Pacific / Norfolk",Text:"(UTC+11:00) Norfolk"},{Value:"Pacific/Noumea",Text:"(UTC+11:00) Noumea"},{Value:"Pacific/Pohnpei",Text:"(UTC+11:00) Ponape"},{Value:"Pacific/Funafuti",Text:"(UTC+12:00) Funafuti"},{Value:"Pacific/Kwajalein",Text:"(UTC+12:00) Kwajalein"},{Value:"Pacific/Majuro",Text:"(UTC+12:00) Majuro"},{Value:"Asia/Kamchatka",Text:"(UTC+12:00) Moscow+09 - Petropavlovsk - Kamchatskiy"},{Value:"Pacific / Nauru",Text:"(UTC+12:00) Nauru"},{Value:"Pacific/Tarawa",Text:"(UTC+12:00) Tarawa"},{Value:"Pacific/Wake",Text:"(UTC+12:00) Wake"},{Value:"Pacific/Wallis",Text:"(UTC+12:00) Wallis"},{Value:"Pacific/Auckland",Text:"(UTC+13:00) Auckland"},{Value:"Pacific/Enderbury",Text:"(UTC+13:00) Enderbury"},{Value:"Pacific/Fakaofo",Text:"(UTC+13:00) Fakaofo"},{Value:"Pacific/Fiji",Text:"(UTC+13:00) Fiji"},{Value:"Pacific/Tongatapu",Text:"(UTC+13:00) Tongatapu"},{Value:"Pacific/Apia",Text:"(UTC+14:00) Apia"},{Value:"Pacific/Kiritimati",Text:"(UTC+14:00) Kiritimati"}],rd={},ru=["SU","MO","TU","WE","TH","FR","SA"],rm=["SU","MO","TU","WE","TH","FR","SA"],rf=43,rv=["first","second","third","fourth","last"],rg="summaryTimes",ry="summaryOn",rb="every",rD="summaryUntil",rw="summaryDay",rC="summaryWeek",rT="summaryMonth",rE="summaryYear",rS={SU:"sun",MO:"mon",TU:"tue",WE:"wed",TH:"thu",FR:"fri",SA:"sat"},rO=/\d/,rk=/[^A-Z]+/,rx=/[a-z]+|[^a-z]+/gi,rM=function(){function e(e){this.slots=[],this.isDoubleTapped=!1,this.parent=e}return e.prototype.processData=function(e,i,n){var r=this,a=this.parent.activeView.startDate(),s=this.parent.activeView.endDate(),o=this.parent.eventFields,l=[],h=1,p=!1,c=this.parent.resourceBase?this.parent.resourceBase.resourceCollection:[];e.length>0&&t.isNullOrUndefined(e[0][o.id])&&(p=!0);for(var d=function(e){p&&(e[o.id]=h++),e=u.updateEventDateTime(e),i?u.processTimezoneChange(e,n):u.parent.isPrinting||u.parent.uiStateValues.isPreventTimezone||(e=u.processTimezone(e));for(var a=0;a<c.length;a++)null!==e[c[parseInt(a.toString(),10)].field]&&0!==e[c[parseInt(a.toString(),10)].field]||(e[c[parseInt(a.toString(),10)].field]=void 0);if(t.isNullOrUndefined(e[o.recurrenceRule])||""!==e[o.recurrenceRule]||(e[o.recurrenceRule]=null),t.isNullOrUndefined(e[o.recurrenceRule])||!t.isNullOrUndefined(e[o.recurrenceID])||u.parent.crudModule&&u.parent.crudModule.crudObj.isCrudAction){if(u.parent.crudModule&&u.parent.crudModule.crudObj.isCrudAction){if(!t.isNullOrUndefined(e[o.recurrenceRule])&&t.isNullOrUndefined(e[o.recurrenceID]))for(var s=function(e){var t=u.parent.eventsProcessed.filter(function(t){return t[o.startTime].getTime()-e[o.startTime].getTime()==0&&t[o.id]===e[o.id]});e.Guid=t.length>0?t[0].Guid:u.generateGuid(),l.push(e)},d=0,m=u.generateOccurrence(e,null,!0);d<m.length;d++)s(m[d]);else{var f=u.parent.eventsProcessed.filter(function(t){return t[r.parent.eventFields.id]===e[r.parent.eventFields.id]});e.Guid=f.length>0?f[0].Guid:u.generateGuid(),l.push(e)}}else e.Guid=u.generateGuid(),l.push(e)}else l=l.concat(u.generateOccurrence(e,null,!0))},u=this,m=0;m<e.length;m++)d(e[m]);this.parent.eventsProcessed=[];var f=l.filter(function(e){return!e[r.parent.eventFields.isBlock]});this.parent.eventsProcessed=this.filterEvents(a,s,f);for(var v=l.filter(function(e){return e[r.parent.eventFields.isBlock]}),g=0;g<v.length;g++){var y=v[g];y[o.isAllDay]&&(C(new Date(y[o.startTime].getTime()))<C(new Date(y[o.endTime].getTime()))||(y[o.startTime]=C(y[o.startTime]),y[o.endTime]=S(C(y[o.endTime]),1)))}return this.parent.blockProcessed=v,f},e.prototype.updateEventDateTime=function(e){return"string"==typeof e[this.parent.eventFields.startTime]&&(e[this.parent.eventFields.startTime]=I(e[this.parent.eventFields.startTime])),"string"==typeof e[this.parent.eventFields.endTime]&&(e[this.parent.eventFields.endTime]=I(e[this.parent.eventFields.endTime])),e},e.prototype.getProcessedEvents=function(e){void 0===e&&(e=this.parent.eventsData);for(var i=[],n=0,r=e;n<r.length;n++){var a=r[n];!t.isNullOrUndefined(a[this.parent.eventFields.recurrenceRule])&&t.isNullOrUndefined(a[this.parent.eventFields.recurrenceID])?i=i.concat(this.generateOccurrence(a)):i.push(a)}return i},e.prototype.timezonePropertyChange=function(e){var t=this.parent.eventsData.concat(this.parent.blockData),i=this.processData(t,!0,e);this.parent.notify(ta,{processedData:i})},e.prototype.timezoneConvert=function(e){var t=this.parent.eventFields;if(e[t.startTimezone]=e[t.startTimezone]||e[t.endTimezone],e[t.endTimezone]=e[t.endTimezone]||e[t.startTimezone],this.parent.timezone){var i=e[t.startTimezone],n=e[t.endTimezone];e[t.startTime]=this.parent.tzModule.convert(e[t.startTime],this.parent.timezone,i),e[t.endTime]=this.parent.tzModule.convert(e[t.endTime],this.parent.timezone,n)}},e.prototype.processTimezoneChange=function(e,t){var i=this.parent.eventFields;e[i.isAllDay]||(t&&this.parent.timezone?(e[i.startTime]=this.parent.tzModule.convert(e[i.startTime],t,this.parent.timezone),e[i.endTime]=this.parent.tzModule.convert(e[i.endTime],t,this.parent.timezone)):!t&&this.parent.timezone?(e[i.startTime]=this.parent.tzModule.add(e[i.startTime],this.parent.timezone),e[i.endTime]=this.parent.tzModule.add(e[i.endTime],this.parent.timezone)):t&&!this.parent.timezone&&(e[i.startTime]=this.parent.tzModule.remove(e[i.startTime],t),e[i.endTime]=this.parent.tzModule.remove(e[i.endTime],t)))},e.prototype.processTimezone=function(e,t){void 0===t&&(t=!1);var i=this.parent.eventFields;if(e[i.startTimezone]||e[i.endTimezone]){var n=e[i.startTimezone]||e[i.endTimezone],r=e[i.endTimezone]||e[i.startTimezone];t?this.parent.timezone?(e[i.startTime]=this.parent.tzModule.convert(e[i.startTime],n,this.parent.timezone),e[i.endTime]=this.parent.tzModule.convert(e[i.endTime],r,this.parent.timezone),e[i.startTime]=this.parent.tzModule.remove(e[i.startTime],this.parent.timezone),e[i.endTime]=this.parent.tzModule.remove(e[i.endTime],this.parent.timezone)):(e[i.startTime]=this.parent.tzModule.remove(e[i.startTime],n),e[i.endTime]=this.parent.tzModule.remove(e[i.endTime],r)):(e[i.startTime]=this.parent.tzModule.add(e[i.startTime],n),e[i.endTime]=this.parent.tzModule.add(e[i.endTime],r),this.parent.timezone&&(e[i.startTime]=this.parent.tzModule.convert(e[i.startTime],n,this.parent.timezone),e[i.endTime]=this.parent.tzModule.convert(e[i.endTime],r,this.parent.timezone)))}else this.parent.timezone&&(t?(e[i.startTime]=this.parent.tzModule.remove(e[i.startTime],this.parent.timezone),e[i.endTime]=this.parent.tzModule.remove(e[i.endTime],this.parent.timezone)):(e[i.startTime]=this.parent.tzModule.add(e[i.startTime],this.parent.timezone),e[i.endTime]=this.parent.tzModule.add(e[i.endTime],this.parent.timezone)));return e},e.prototype.filterBlockEvents=function(e){var i,n=this.parent.eventFields,r=e[n.startTime],a=e[n.endTime];if(this.parent.activeViewOptions.group.resources.length>0){var s=this.getGroupIndexFromEvent(e);i=this.parent.resourceBase.lastResourceLevel[parseInt(s.toString(),10)]}for(var o=t.extend([],this.parent.blockProcessed,null,!0),l=0;l<o.length;l++){var h=o[l];h[n.isAllDay]&&h[n.endTime].getTime()>C(new Date(h[n.endTime].getTime())).getTime()&&(h[n.startTime]=C(h[n.startTime]),h[n.endTime]=S(C(h[n.endTime]),1))}return this.filterEvents(r,a,o,i)},e.prototype.filterEvents=function(e,t,i,n){void 0===i&&(i=this.parent.eventsProcessed);var r=this.parent.dataModule.getStartEndQuery(e,t),s=new a.DataManager({json:i}).executeLocal((new a.Query).where(r));return n&&(s=this.filterEventsByResource(n,s)),this.sortByTime(s)},e.prototype.filterEventsByRange=function(e,t,i){var n=this,r=[];return r=t&&i?this.filterEvents(t,i,e):t&&!i?e.filter(function(e){return e[n.parent.eventFields.startTime]>=t}):!t&&i?e.filter(function(e){return e[n.parent.eventFields.endTime]<=i}):e,this.sortByTime(r)},e.prototype.filterEventsByResource=function(e,t){void 0===t&&(t=this.parent.eventsProcessed);for(var i={},n=this.parent.resourceBase.resourceCollection,r=0;r<n.length;r++)i[n[parseInt(r.toString(),10)].field]=e.groupOrder[parseInt(r.toString(),10)];var a=Object.keys(i);return t.filter(function(e){return a.every(function(t){return e[""+t]instanceof Array?e[""+t].indexOf(i[""+t])>-1:e[""+t]===i[""+t]})})},e.prototype.sortByTime=function(e){if(this.parent.eventSettings.sortComparer&&("function"==typeof this.parent.eventSettings.sortComparer||"string"==typeof this.parent.eventSettings.sortComparer))e=this.customSorting(e);else{var t=this.parent.eventFields;e.sort(function(e,i){var n=e[t.startTime],r=i[t.startTime];return n.getTime()-r.getTime()})}return e},e.prototype.sortByDateTime=function(e){if(this.parent.eventSettings.sortComparer&&("function"==typeof this.parent.eventSettings.sortComparer||"string"==typeof this.parent.eventSettings.sortComparer))e=this.customSorting(e);else{var t=this.parent.eventFields;e.sort(function(e,i){var n=e[t.startTime],r=i[t.startTime],a=e[t.endTime],s=i[t.endTime],o=a.getTime()-n.getTime(),l=s.getTime()-r.getTime();return n.getTime()-r.getTime()||l-o})}return e},e.prototype.customSorting=function(e){if("function"==typeof this.parent.eventSettings.sortComparer)return this.parent.eventSettings.sortComparer.call(this.parent,e);if("string"==typeof this.parent.eventSettings.sortComparer){var i=this.parent.eventSettings.sortComparer.split("."),n=void 0;if(t.isNullOrUndefined(window)||(n=window[i[i.length-1]]),n)return n(e)}return e},e.prototype.getSmallestMissingNumber=function(e){for(var t=Math.max.apply(Math,e),i=0;i<t;i++)if(-1===e.indexOf(i))return i;return t+1},e.prototype.splitEventByDay=function(e){var i=this.parent.eventFields,n=[],r=e[i.startTime],a=e[i.endTime];if(C(new Date(r.getTime()))<C(new Date(a.getTime())))for(var s=new Date(r.getTime()),o=S(C(new Date(r.getTime())),1),l=0===a.getHours()&&0===a.getMinutes()?a:S(a,1),h=1,p=V(r.getTime(),l.getTime());o<=a&&s.getTime()!==o.getTime();){var c=t.extend({},e);c[i.startTime]=s,c[i.endTime]=o,c.data={index:h,count:p},c.Guid=this.generateGuid(),c.isSpanned=!0,n.push(c),s=o,C(new Date(s.getTime())).getTime()===C(new Date(a.getTime())).getTime()&&o.getTime()!==a.getTime()?(o=new Date(s.getTime()),o=new Date(o.setHours(a.getHours(),a.getMinutes(),a.getSeconds()))):o=S(C(new Date(s.getTime())),1),h++}else n.push(e);return n},e.prototype.splitEvent=function(e,i){var n=this.parent.eventFields,r=C(e[n.startTime]).getTime(),a=C(e[n.endTime]).getTime();0>=T(e[n.endTime])&&(a=r>(b=S(C(e[n.endTime]),-1).getTime())?r:b);var s=r,o=a,l=[];if(r!==a){r<i[0].getTime()&&(r=i[0].getTime()),a>i[i.length-1].getTime()&&(a=i[i.length-1].getTime());for(var h=r,p=0;p<this.slots.length;p++){var c=this.slots[parseInt(p.toString(),10)];if("WorkWeek"===this.parent.currentView||"TimelineWorkWeek"===this.parent.currentView||this.parent.activeViewOptions.group.byDate||this.parent.activeViewOptions.showWeekend){for(var d=[],u=0,m=c;u<m.length;u++){var f=m[u];d.push(new Date(f))}var v=this.getRenderedDates(d);if(!t.isNullOrUndefined(v)&&v.length>0){c=[];for(var g=0;g<v.length;g++){var y=v[g];c.push(y.getTime())}}}if("number"==typeof c){var b=c;(c=[]).push(b)}var D=c[0];if((h=h<=D&&a>=D?D:h)>a||D>a)break;if(!this.parent.activeViewOptions.group.byDate&&this.parent.activeViewOptions.showWeekend&&"WorkWeek"!==this.parent.currentView&&"TimelineWorkWeek"!==this.parent.currentView){var w=c.indexOf(h);if(-1!==w){var E=c.indexOf(a),O=-1!==E,k=(E=O?E:c.length-1)-w+1,x=c[parseInt(w.toString(),10)]!==s,M=c[parseInt(E.toString(),10)]!==o;if(l.push(this.cloneEventObject(e,c[parseInt(w.toString(),10)],c[parseInt(E.toString(),10)],k,x,M)),O)break}}else if(this.dateInRange(h,c[0],c[c.length-1])){for(var V=[],I=0;I<c.length;I++)this.dateInRange(c[parseInt(I.toString(),10)],s,o)&&V.push(c[parseInt(I.toString(),10)]);if(V.length>0){if(this.parent.activeViewOptions.group.byDate)for(var A=0;A<V.length;A++){var N=V[A];l.push(this.cloneEventObject(e,N,N,1,N!==s,N!==o))}else x=V[0]!==s,M=V[V.length-1]!==o,l.push(this.cloneEventObject(e,V[0],V[V.length-1],V.length,x,M))}}}}else l.push(this.cloneEventObject(e,r,a,1,!1,!1));return l},e.prototype.cloneEventObject=function(e,i,n,r,a,s){var o=this.parent.eventFields,l=t.extend({},e,null,!0),h={count:r,isLeft:a,isRight:s};return h[o.startTime]=e[o.startTime],h[o.endTime]=e[o.endTime],l.data=h,l[o.startTime]=new Date(i),l[o.endTime]=new Date(n),l},e.prototype.dateInRange=function(e,t,i){return t<=e&&e<=i},e.prototype.getSelectedEventElements=function(e){if(this.removeSelectedAppointmentClass(),this.parent.selectedElements.length<=0)this.parent.selectedElements.push(e);else if(this.parent.selectedElements.filter(function(t){return t.getAttribute("data-guid")===e.getAttribute("data-guid")}).length<=0)for(var t='div[data-guid="'+e.getAttribute("data-guid")+'"]',i=0,n=[].slice.call(this.parent.element.querySelectorAll(t));i<n.length;i++){var r=n[i];this.parent.selectedElements.push(r)}else{var a=this.parent.selectedElements.filter(function(t){return t.getAttribute("data-guid")!==e.getAttribute("data-guid")});this.parent.selectedElements=a}return e&&this.parent.selectedElements.length>0&&this.addSelectedAppointments(this.parent.selectedElements,!1),this.parent.selectedElements},e.prototype.getSelectedEvents=function(){var e=this,t=[],i=[];return[].slice.call(this.parent.element.querySelectorAll("."+iu)).filter(function(n){0===t.filter(function(e){return e.Guid===n.getAttribute("data-guid")}).length&&t.push(e.getEventByGuid(n.getAttribute("data-guid"))),i.push(n)}),{event:t.length>1?t:t[0],element:i.length>1?i:i[0]}},e.prototype.removeSelectedAppointmentClass=function(){var e=this.getSelectedAppointments();t.removeClass(e,iu),"Agenda"!==this.parent.currentView&&"MonthAgenda"!==this.parent.currentView||t.removeClass(e,iS)},e.prototype.addSelectedAppointments=function(e,i){"MonthAgenda"!==this.parent.currentView&&this.parent.removeSelectedClass(),t.addClass(e,iu),e.length>0&&!i&&e[e.length-1].focus()},e.prototype.getSelectedAppointments=function(){return[].slice.call(this.parent.element.querySelectorAll("."+iu+",."+ip+":focus"))},e.prototype.focusElement=function(e){if(!this.parent.eventWindow.dialogObject||!this.parent.eventWindow.dialogObject.visible){var i=document.activeElement,n=this.parent.getSelectedCells();if(!(n.length>0&&(i&&(this.parent.element.contains(i)||-1!==n.indexOf(i))||e))){var r=this.getSelectedAppointments();return r.length>0?this.parent.activeEventData&&this.parent.activeEventData.element&&r.indexOf(this.parent.activeEventData.element)>-1?void this.parent.activeEventData.element.focus():void r[r.length-1].focus():void 0}if(this.parent.keyboardInteractionModule){var a=!t.isNullOrUndefined(this.parent.activeCellsData)&&this.parent.activeCellsData.element||n[n.length-1];this.parent.keyboardInteractionModule.selectCells(a instanceof Array,a)}}},e.prototype.selectWorkCellByTime=function(e){var t;if("Agenda"===this.parent.currentView||"MonthAgenda"===this.parent.currentView)return t;if(e.length>0){var i=e[e.length-1],n=i[this.parent.eventFields.startTime],r=new Date(+n).setMinutes(0,0,0),a=this.isAllDayAppointment(i);("Month"===this.parent.currentView||a)&&(r=new Date(+n).setHours(0,0,0,0));var s=void 0;s=a&&-1!==["Day","Week","WorkWeek"].indexOf(this.parent.currentView)?this.parent.getAllDayRow():this.parent.getContentTable();var o='[data-date="'+new Date(r).getTime()+'"]';if(this.parent.activeViewOptions.group.resources.length>0&&(o+='[data-group-index="'+this.getGroupIndexFromEvent(i)+'"]'),t=s.querySelector(o))return this.parent.activeCellsData=this.parent.getCellDetails(t),this.parent.keyboardInteractionModule&&this.parent.keyboardInteractionModule.selectCells(!1,t),t}return t},e.prototype.getGroupIndexFromEvent=function(e){for(var i,n,r,a,s=this.parent.resourceBase.resourceCollection.length-1;s>=0;s--){var o=e[this.parent.resourceBase.resourceCollection[parseInt(s.toString(),10)].field];if(!t.isNullOrUndefined(o)){n=this.parent.resourceBase.resourceCollection[parseInt(s.toString(),10)],i=s,r=n.name,a=n.field;break}}t.isNullOrUndefined(r)&&t.isNullOrUndefined(i)&&(r=this.parent.resourceCollection.slice(-1)[0].name,i=this.parent.resourceCollection.length-1,a=this.parent.resourceCollection.slice(-1)[0].field,n=this.parent.resourceCollection.filter(function(e,t){return e.name===r?(i=t,e):null})[0]);var l=e[""+a]instanceof Array?e[""+a][0]:e[""+a];if(i>0){var h=this.parent.resourceCollection[i-1].field;return this.parent.resourceBase.getIndexFromResourceId(l,r,n,e,h)}return this.parent.resourceBase.getIndexFromResourceId(l,r,n)},e.prototype.isAllDayAppointment=function(e){var t=this.parent.eventFields,i=e[t.isAllDay],n=(U(e[t.endTime])-U(e[t.startTime]))/tm>=1;return!!(i||"TimeSlot"!==this.parent.eventSettings.spannedEventPlacement&&n)},e.prototype.addEventListener=function(){this.parent.on(td,this.appointmentBorderRemove,this)},e.prototype.removeEventListener=function(){this.parent.off(td,this.appointmentBorderRemove)},e.prototype.appointmentBorderRemove=function(e){var i=e.event.target;t.closest(i,"."+ip)?"MonthAgenda"!==this.parent.currentView&&this.parent.removeSelectedClass():t.closest(i,"."+tI)||(this.removeSelectedAppointmentClass(),this.parent.selectedElements=[])},e.prototype.wireAppointmentEvents=function(e,i,n){void 0===n&&(n=!1);var r=!t.isNullOrUndefined(i)&&i[this.parent.eventFields.isReadonly];t.EventHandler.add(e,"click",this.eventClick,this),this.parent.isAdaptive||this.parent.activeViewOptions.readonly||r||(t.EventHandler.add(e,"touchstart",this.eventTouchClick,this),t.EventHandler.add(e,"dblclick",this.eventDoubleClick,this)),this.parent.activeViewOptions.readonly||r||n||(this.parent.resizeModule&&this.parent.resizeModule.wireResizeEvent(e),this.parent.dragAndDropModule&&this.parent.dragAndDropModule.wireDragEvent(e))},e.prototype.eventTouchClick=function(e){var t=this;setTimeout(function(){return t.isDoubleTapped=!1},250),e.preventDefault(),this.isDoubleTapped?this.eventDoubleClick(e):this.isDoubleTapped||(this.isDoubleTapped=!0,this.eventClick(e))},e.prototype.renderResizeHandler=function(e,i,n){if(this.parent.resizeModule&&this.parent.allowResizing&&!this.parent.activeViewOptions.readonly&&!n)for(var r=0,a=Object.keys(i);r<a.length;r++){var s=a[r],o=t.createElement("div",{className:iL});switch(s){case"isLeft":i.isLeft||(o.appendChild(t.createElement("div",{className:"e-left-right-resize"})),t.addClass([o],this.parent.enableRtl?iW:ij),t.prepend([o],e));break;case"isRight":i.isRight||(o.appendChild(t.createElement("div",{className:"e-left-right-resize"})),t.addClass([o],this.parent.enableRtl?ij:iW),t.append([o],e));break;case"isTop":i.isTop||(o.appendChild(t.createElement("div",{className:"e-top-bottom-resize"})),t.addClass([o],iq),t.prepend([o],e));break;case"isBottom":i.isBottom||(o.appendChild(t.createElement("div",{className:"e-top-bottom-resize"})),t.addClass([o],iz),t.append([o],e))}}},e.prototype.eventClick=function(e){var i=this,n=e.target;if(!(n.classList.contains("e-drag-clone")||n.classList.contains(iB)||n.classList.contains(n9))){if((e.ctrlKey||e.metaKey)&&1===e.which&&this.parent.keyboardInteractionModule){this.parent.quickPopup.quickPopup.hide(),this.parent.selectedElements=[].slice.call(this.parent.element.querySelectorAll("."+iu));var r=t.closest(e.target,"."+ip);this.getSelectedEventElements(r),this.activeEventData(e,!1);var a={data:this.parent.activeEventData.event,element:this.parent.activeEventData.element,event:e,requestType:"eventSelect"};this.parent.trigger(eQ,a);var s=t.extend(this.parent.activeEventData,{cancel:!1,originalEvent:e});this.parent.trigger(e3,s)}else{this.removeSelectedAppointmentClass(),this.activeEventData(e,!0);var o={data:this.parent.activeEventData.event,element:this.parent.activeEventData.element,event:e,requestType:"eventSelect"};this.parent.trigger(eQ,o),s=t.extend(this.parent.activeEventData,{cancel:!1,originalEvent:e}),this.parent.trigger(e3,s,function(e){if(e.cancel)i.removeSelectedAppointmentClass(),i.parent.selectedElements=[],i.parent.quickPopup&&i.parent.quickPopup.quickPopupHide();else if("Agenda"!==i.parent.currentView&&"MonthAgenda"!==i.parent.currentView||t.addClass([i.parent.activeEventData.element],iS),i.parent.allowInline){var n={data:e.event,element:e.element,type:"Event"};i.parent.notify(te,n)}else i.parent.notify(e3,e)})}}},e.prototype.eventDoubleClick=function(e){this.parent.quickPopup&&this.parent.quickPopup.quickPopupHide(!0),"touchstart"===e.type&&this.activeEventData(e,!0),this.removeSelectedAppointmentClass(),this.parent.selectedElements=[],this.parent.activeEventData.element.classList.contains(n7)||this.parent.activeEventData.element.querySelector("."+n9)||(!t.isNullOrUndefined(this.parent.activeEventData.event)&&t.isNullOrUndefined(this.parent.activeEventData.event[this.parent.eventFields.recurrenceID])?this.parent.eventWindow.openEditor(this.parent.activeEventData.event,"Save"):(this.parent.currentAction="EditOccurrence",this.parent.quickPopup.openRecurrenceAlert()))},e.prototype.getEventByGuid=function(e){return this.parent.eventsProcessed.filter(function(t){return t.Guid===e})[0]},e.prototype.getEventById=function(e){var t=this;return this.parent.eventsData.filter(function(i){return i[t.parent.eventFields.id]===e})[0]},e.prototype.generateGuid=function(){return"xyxxxxyx-xxxy-yxxx-xyxx-xxyxxxxyyxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},e.prototype.getEventIDType=function(){return 0!==this.parent.eventsData.length?typeof this.parent.eventsData[0][this.parent.eventFields.id]:0!==this.parent.blockData.length?typeof this.parent.blockData[0][this.parent.eventFields.id]:"string"},e.prototype.getEventMaxID=function(e){var i=this;if(this.parent.eventsData.length<1&&this.parent.blockData.length<1)return 1;var n,r=this.getEventIDType();if("string"===r&&(n=this.generateGuid()),"number"===r){var a=this.parent.eventsData.concat(this.parent.blockData).map(function(e){return e[i.parent.eventFields.id]}).reduce(function(e,t){return Math.max(e,t)});n=(a=t.isNullOrUndefined(e)?a:a+e)+1}return n},e.prototype.activeEventData=function(e,i){var n=this,r=t.closest(e.target,"."+ip),a=r.getAttribute("data-guid");i&&(this.addSelectedAppointments([].slice.call(this.parent.element.querySelectorAll('div[data-guid="'+a+'"]')),!0),r.focus());var s=this.getEventByGuid(a);s&&s.isSpanned&&(s=this.parent.eventsData.filter(function(e){return e[n.parent.eventFields.id]===s[n.parent.eventFields.id]})[0]),this.parent.activeEventData={event:s,element:r}},e.prototype.generateOccurrence=function(e,i,n){var r=e[this.parent.eventFields.startTime],a=e[this.parent.eventFields.endTime],s=e[this.parent.eventFields.recurrenceRule],o=a.getTimezoneOffset()-r.getTimezoneOffset(),l=a.getTime()-r.getTime()-6e4*o;i=new Date((i||this.parent.activeView.startDate()).getTime()-l);var h,p=e[this.parent.eventFields.recurrenceException];"Agenda"!==this.parent.currentView&&n&&(h=E(i,this.parent.activeView.endDate())+1);var c=this.parent.timezone||this.parent.tzModule.getLocalTimezoneName(),d=z(r,s,p,this.parent.activeViewOptions.firstDayOfWeek,h,i,this.parent.calendarMode,c);"Agenda"===this.parent.currentView&&-1===s.indexOf("COUNT")&&-1===s.indexOf("UNTIL")&&(t.isNullOrUndefined(e.generatedDates)?e.generatedDates={start:new Date(d[0]),end:new Date(d[d.length-1])}:(d[0]<e.generatedDates.start.getTime()&&(e.generatedDates.start=new Date(d[0])),d[d.length-1]>e.generatedDates.end.getTime()&&(e.generatedDates.end=new Date(d[d.length-1]))));for(var u=[],m=0;m<d.length;m++){var f=d[m],v=t.extend({},e,null,!0);f=this.getDSTAdjustedTime(f,v),v[this.parent.eventFields.startTime]=new Date(f),v[this.parent.eventFields.endTime]=new Date(new Date(f).setMilliseconds(l)),v[this.parent.eventFields.recurrenceID]=v[this.parent.eventFields.id],delete v[this.parent.eventFields.recurrenceException],delete v[this.parent.eventFields.followingID],v.Guid=this.generateGuid(),u.push(v)}return u},e.prototype.getDSTAdjustedTime=function(e,t){var i=e;if(this.parent.timezone&&(t[this.parent.eventFields.startTimezone]||t[this.parent.eventFields.endTimezone])){var n=this.getDSTDiff(t[this.parent.eventFields.startTime],new Date(e),t[this.parent.eventFields.startTimezone]),r=this.getDSTDiff(t[this.parent.eventFields.startTime],new Date(e),this.parent.timezone);i=new Date(e).getTime()-6e4*(n-r)}return i},e.prototype.getDSTDiff=function(e,t,i){return this.parent.tzModule.offset(new Date(e),i)-this.parent.tzModule.offset(new Date(t),i)},e.prototype.getParentEvent=function(e,i){void 0===i&&(i=!1);do(e=this.getFollowingEvent(e))&&(n=t.extend({},e,null,!0));while(e&&i);if(i&&n){var n,r=this.getEventCollections(n),a=r.follow.slice(-1)[0];r.occurrence.length>0&&!n[this.parent.eventFields.recurrenceException]&&(a=r.occurrence.slice(-1)[0]),a&&(n[this.parent.eventFields.recurrenceRule]=a[this.parent.eventFields.recurrenceRule])}return n},e.prototype.getEventCollections=function(e,t){var i=[],n=[],r=e;do(r=this.getFollowingEvent(r,!0))&&i.push(r),n=n.concat(this.getOccurrenceEvent(r||e));while(r);var a={};if(t){var s=this.parent.eventFields;a={follow:i.filter(function(e){return e[s.startTime]>=t[s.startTime]}),occurrence:n.filter(function(e){return e[s.startTime]>=t[s.startTime]})}}else a={follow:i,occurrence:n};return a},e.prototype.getFollowingEvent=function(e,t){var i,n=this.parent.eventFields;return i=t?e[n.id]:e[n.recurrenceID]||e[n.followingID],this.parent.eventsData.filter(function(e){return e[t?n.followingID:n.id]===i}).shift()},e.prototype.isFollowingEvent=function(e,t){var i=e[this.parent.eventFields.startTime],n=t[this.parent.eventFields.startTime];return i.getHours()===n.getHours()&&i.getMinutes()===n.getMinutes()&&i.getSeconds()===n.getSeconds()},e.prototype.getOccurrenceEvent=function(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=!1);var n=t?"Guid":i?this.parent.eventFields.followingID:this.parent.eventFields.recurrenceID,r=t?"Guid":this.parent.eventFields.id;return(t?this.parent.eventsProcessed:this.parent.eventsData).filter(function(t){return t[""+n]===e[""+r]})},e.prototype.getOccurrencesByID=function(e){for(var i=this.parent.eventFields,n=[],r=0,a=this.parent.eventsData.filter(function(t){return t[i.id]===e});r<a.length;r++){var s=a[r];t.isNullOrUndefined(s[i.recurrenceRule])||(n=n.concat(this.generateOccurrence(s)))}return n},e.prototype.getOccurrencesByRange=function(e,i){for(var n=this.parent.eventFields,r=[],a=0,s=this.parent.eventsData;a<s.length;a++){var o=s[a];t.isNullOrUndefined(o[n.recurrenceRule])||(r=r.concat(this.generateOccurrence(o)))}return r.filter(function(r){return r[n.startTime]>=e&&r[n.endTime]<=i&&!t.isNullOrUndefined(r[n.recurrenceID])})},e.prototype.getDeletedOccurrences=function(e){var i,n=this.parent.eventFields,r=[];if((i="string"==typeof e||"number"==typeof e?this.parent.eventsData.filter(function(t){return t[n.id]===e})[0]:t.extend({},e,null,!0))[n.recurrenceException])for(var a=i[n.recurrenceException].split(","),s=function(s,l){if(0===o.parent.eventsData.filter(function(e){return e[n.recurrenceID]===i[n.id]&&e[n.recurrenceException]===a[parseInt(s.toString(),10)]}).length){var h=Y(a[parseInt(s.toString(),10)]),p=t.extend({},e,null,!0);p[n.recurrenceID]=i[n.id],delete p[n.followingID],p[n.recurrenceException]=a[parseInt(s.toString(),10)];var c=new Date(h.getTime()),d=i[n.endTime].getTime()-i[n.startTime].getTime(),u=new Date(c.getTime());u.setMilliseconds(d),p[n.startTime]=new Date(c.getTime()),p[n.endTime]=new Date(u.getTime()),r.push(p)}},o=this,l=0,h=a.length;l<h;l++)s(l);return r},e.prototype.applyResourceColor=function(e,i,n,r,a){if(this.parent.resourceBase){var s,o=this.parent.resourceBase.getResourceColor(i,r);o&&(e.style[n]=t.isNullOrUndefined(a)?o:"rgba("+parseInt((s=(s=o).replace("#","")).substring(0,s.length/3),16)+", "+parseInt(s.substring(s.length/3,2*s.length/3),16)+", "+parseInt(s.substring(2*s.length/3,3*s.length/3),16)+", "+a+")")}},e.prototype.createBlockAppointmentElement=function(e,i,n){var r,a=e[this.parent.eventFields.subject]||this.parent.eventSettings.fields.subject.default,s=t.createElement("div",{className:ic,attrs:{"data-id":"Appointment_"+e[this.parent.eventFields.id],"aria-disabled":"true"}});if(t.isNullOrUndefined(this.parent.activeViewOptions.eventTemplate)){var o=t.createElement("div",{className:nS});this.parent.sanitize(a,o),r=[o]}else{var l=this.parent.element.id+"_"+this.parent.activeViewOptions.eventTemplateName+"eventTemplate",h="eventTemplate"+(n&&-1===this.parent.currentView.indexOf("Year")?"_"+i:"");r=this.parent.getAppointmentTemplate()(e,this.parent,h,l,!1)}return t.append(r,s),this.setWrapperAttributes(s,i),s},e.prototype.setWrapperAttributes=function(e,i){t.isNullOrUndefined(this.cssClass)||t.addClass([e],this.cssClass),this.parent.activeViewOptions.group.resources.length>0&&e.setAttribute("data-group-index",i.toString())},e.prototype.getReadonlyAttribute=function(e){return(e[this.parent.eventFields.isReadonly]||this.parent.readonly).toString()},e.prototype.isBlockRange=function(e){for(var i=e instanceof Array?e:[e],n=!1,r=this.parent.eventFields,a=0;a<i.length;a++){var s=i[a],o=[];t.isNullOrUndefined(s[r.recurrenceRule])||!t.isNullOrUndefined(s[r.recurrenceID])&&s[r.id]!==s[r.recurrenceID]?o.push(s):o=this.generateOccurrence(s);for(var l=0,h=o;l<h.length;l++){var p=h[l];if(this.filterBlockEvents(p).length>0){n=!0;break}}}return this.parent.uiStateValues.isBlock=n,n},e.prototype.getFilterEventsList=function(e,t){return new a.DataManager(e).executeLocal((new a.Query).where(t))},e.prototype.getSeriesEvents=function(e,i){var n=this.parent.eventFields;i=t.isNullOrUndefined(i)?e[n.startTime]:i;var r,s,o,l=[],h=e[n.id],p=e[n.followingID],c="EditSeries"===this.parent.currentAction?"greaterthan":"greaterthanorequal";do o=new a.Predicate(n.followingID,"equal",h).and(new a.Predicate(n.startTime,c,i)),r=(s=this.getFilterEventsList(this.parent.eventsData,o)).slice(-1)[0],t.isNullOrUndefined(r)||r[n.id]===p?p=null:(l.push(r),h=r[n.id],p=r[n.followingID]);while(1===s.length&&!t.isNullOrUndefined(r[n.followingID]));return l},e.prototype.getEditedOccurrences=function(e,t){for(var i,n=this.parent.eventFields,r=[],s=0;s<e.length;s++){var o=e[s],l=new a.Predicate(n.recurrenceID,"equal",o[n.id]).or(new a.Predicate(n.recurrenceID,"equal",o[n.followingID]).and(new a.Predicate(n.recurrenceID,"notequal",void 0)).and(new a.Predicate(n.recurrenceID,"notequal",null)));"EditFollowingEvents"!==this.parent.currentAction&&"DeleteFollowingEvents"!==this.parent.currentAction||(l=l.and(new a.Predicate(n.startTime,"greaterthanorequal",t))),i=this.getFilterEventsList(this.parent.eventsData,l),r=r.concat(i)}return r},e.prototype.getRenderedDates=function(e){var t,i=0,n=e.length;if(e[0]<this.parent.minDate&&e[e.length-1]>this.parent.maxDate){for(var r=0;r<e.length;r++)C(e[parseInt(r.toString(),10)]).getTime()===C(new Date(this.parent.minDate)).getTime()&&(i=r),C(e[parseInt(r.toString(),10)]).getTime()===C(new Date(this.parent.maxDate)).getTime()&&(n=r);t=e.filter(function(t){return t>=e[parseInt(i.toString(),10)]&&t<=e[parseInt(n.toString(),10)]})}return t},e.prototype.isValidEvent=function(e,t,i,n){var r=i.getTime()>n.startHour.getTime()&&t.getTime()<n.endHour.getTime(),a=n.startHour.getTime()<=t.getTime()&&e[this.parent.eventFields.startTime].getTime()>=n.startHour.getTime()&&e[this.parent.eventFields.endTime].getTime()<n.endHour.getTime()&&t.getTime()===i.getTime();return r||a},e.prototype.allDayExpandScroll=function(e){var i=0;[].slice.call(this.parent.element.querySelectorAll("."+iG)).forEach(function(e){[].slice.call(e.children).forEach(function(e){e.style.top=i+"px"}),i+=e.offsetHeight}),i=e.offsetHeight-i,this.parent.element.querySelector("."+tO).style.height=i/12+"em",this.parent.uiStateValues.expand?t.addClass([e],rt):t.removeClass([e],rt)},e.prototype.updateEventMinimumDuration=function(e,t,i){if(t.getTime()<i.getTime()&&(U(i)-U(t))/tf<this.parent.eventSettings.minimumEventDuration){var n=new Date(t);if(n.setMinutes(n.getMinutes()+this.parent.eventSettings.minimumEventDuration),(i=n).getTime()>e.endHour.getTime()){var r=new Date(e.endHour.getTime());r.setMinutes(r.getMinutes()-this.parent.eventSettings.minimumEventDuration),t=r,i=e.endHour}}return{startDate:t,endDate:i}},e.prototype.createEventWrapper=function(e,i){void 0===e&&(e=""),void 0===i&&(i=0);for(var n=t.createElement("tr"),r=this.parent.activeView.colLevels.slice(-1)[0],a=0,s=r.length;a<s;a++){var o=r[parseInt(a.toString(),10)],l=t.createElement("td",{className:"allDay"===e?iK:"timeIndicator"===e?t8:t7,attrs:{"data-date":o.date.getTime().toString()}});if(t.isNullOrUndefined(o.groupIndex)||l.setAttribute("data-group-index",o.groupIndex.toString()),""===e){var h=t.createElement("div",{id:t9+"-"+i.toString(),className:t9});l.appendChild(h)}n.appendChild(l),i+=1}return n},e.prototype.getPageCoordinates=function(e){if(t.isNullOrUndefined(e))return e;var i=e.event;return i&&i.changedTouches?i.changedTouches[0]:e.changedTouches?e.changedTouches[0]:i||e},e.prototype.renderSpannedIcon=function(e,i){var n=t.createElement("div",{className:iP+" "+tw});if(i.isLeft){var r=n.cloneNode();t.addClass([r],"e-left-icon"),t.prepend([r],e)}if(i.isRight){var a=n.cloneNode();t.addClass([a],"e-right-icon"),t.append([a],e)}if(i.isTop){var s=n.cloneNode();t.addClass([s],"e-up-icon"),t.prepend([s],e)}if(i.isBottom){var o=n.cloneNode();t.addClass([o],"e-down-icon"),t.append([o],e)}},e.prototype.unWireEvents=function(){for(var e=0,i=[].slice.call(this.parent.element.querySelectorAll("."+ip));e<i.length;e++){var n=i[e];t.EventHandler.clearEvents(n)}},e.prototype.destroy=function(){this.unWireEvents(),this.parent=null},e}(),rV=(ef=function(e,t){return(ef=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}ef(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),rI=function(e){function i(i){var n=e.call(this,i)||this;return n.dateRender=[],n.renderedEvents=[],n.renderedAllDayEvents=[],n.overlapEvents=[],n.moreEvents=[],n.overlapList=[],n.allDayEvents=[],n.slotCount=n.parent.activeViewOptions.timeScale.slotCount,n.interval=n.parent.activeViewOptions.timeScale.interval,n.allDayLevel=0,n.startHour=n.parent.activeView.getStartHour(),n.endHour=n.parent.activeView.getEndHour(),n.element=n.parent.activeView.getPanel(),n.fields=n.parent.eventFields,n.animation=new t.Animation({progress:n.animationUiUpdate.bind(n)}),n.addEventListener(),n}return rV(i,e),i.prototype.renderAppointments=function(){if(!t.isNullOrUndefined(this.parent)){this.parent.dragAndDropModule&&this.parent.dragAndDropModule.setDragArea(),this.isResourceEventTemplate=this.parent.isSpecificResourceEvents();for(var e=[].slice.call(this.parent.element.querySelectorAll("."+ic+",."+ip+",."+iQ)),i=!(!this.parent.crudModule||!this.parent.crudModule.crudObj.isCrudAction),n=0;n<e.length;n++){var r=e[n];if(!i||r.classList.contains(iX)||r.classList.contains(iQ))t.remove(r);else for(var a=parseInt(r.getAttribute("data-group-index"),10),s=0,o=this.parent.crudModule.crudObj.sourceEvent.length;s<o;s++)a!==this.parent.crudModule.crudObj.sourceEvent[parseInt(s.toString(),10)].groupIndex&&a!==this.parent.crudModule.crudObj.targetEvent[parseInt(s.toString(),10)].groupIndex||t.remove(r)}if(this.element.querySelector("."+tM)&&(this.parent.virtualScrollModule&&this.parent.virtualScrollModule.updateFocusedWorkCell(),this.allDayElement=[].slice.call(this.element.querySelectorAll("."+tO)),this.setAllDayRowHeight(0),0!==this.parent.eventsProcessed.length||0!==this.parent.blockProcessed.length)){var l=this.element.querySelector("."+iJ);t.EventHandler.remove(l,"click",this.rowExpandCollapse),t.EventHandler.add(l,"click",this.rowExpandCollapse,this),this.renderedEvents=[],this.renderedAllDayEvents=[],this.initializeValues(),this.processBlockEvents(),this.renderEvents("normalEvents"),this.allDayEvents.length>0&&(this.allDayEvents=this.allDayEvents.filter(function(e,t,i){return t===i.map(function(e){return e.Guid}).indexOf(e.Guid)}),t.removeClass(this.allDayElement,nY),this.slots.push(this.parent.activeView.renderDates.map(function(e){return+e})),this.renderEvents("allDayEvents"),this.animation.animate(this.allDayElement[0])),this.parent.notify(to,{}),t.addClass(this.allDayElement,nY),i&&(this.parent.crudModule.crudObj.isCrudAction=!1),this.parent.renderTemplates()}}},i.prototype.initializeValues=function(){if(this.resources=this.parent.activeViewOptions.group.resources.length>0?this.parent.uiStateValues.isGroupAdaptive?[this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]]:this.parent.resourceBase.lastResourceLevel:[],this.resources.length>0&&this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.virtualScrollModule&&(this.resources=this.parent.resourceBase.renderedResources),this.cellHeight=parseFloat(this.parent.element.querySelector(".e-content-wrap tbody tr").getBoundingClientRect().height.toFixed(2)),this.dateRender[0]=this.parent.activeView.renderDates,this.parent.activeViewOptions.group.resources.length>0)for(var e=0,t=this.resources.length;e<t;e++)this.dateRender[parseInt(e.toString(),10)]=this.resources[parseInt(e.toString(),10)].renderDates},i.prototype.getHeight=function(e,t){var i=(U(t)-U(e))/tf*(this.cellHeight*this.slotCount)/this.interval;return i<=0?this.cellHeight:i},i.prototype.appendEvent=function(e,i,n,r){var a=this.element.querySelector("."+t9+'[id="'+t9+"-"+n+'"]');this.parent.enableRtl?t.setStyleAttribute(i,{right:r}):t.setStyleAttribute(i,{left:r});var s=i.classList.contains(ic)?"blockEvent":"event",o={data:t.extend({},e,null,!0),element:i,cancel:!1,type:s};this.parent.trigger(e6,o,function(e){e.cancel||a.appendChild(i)})},i.prototype.processBlockEvents=function(){for(var e=this.getResourceList(),t=this.getStartCount(),i=0;i<e.length;i++)for(var n=e[i],r=this.dateRender[parseInt(n.toString(),10)],a=0,s=r.length;a<s;a++){for(var o=new Date(r[parseInt(a.toString(),10)].getTime()),l=S(r[parseInt(a.toString(),10)],1),h=0,p=this.filterEvents(o,l,this.parent.blockProcessed,this.resources[parseInt(n.toString(),10)]);h<p.length;h++){var c=p[h];this.parent.resourceBase&&this.setValues(c,n),this.renderBlockEvents(c,a,n,t),this.cssClass=null,this.groupOrder=null}t+=1}},i.prototype.renderBlockEvents=function(e,i,n,r){var a=this.isSpannedEvent(e,i,n),s=a[this.fields.startTime],o=a[this.fields.endTime],l=x(C(new Date(this.dateRender[parseInt(n.toString(),10)][parseInt(i.toString(),10)].getTime())),this.startHour,this.endHour);if(s<=o&&this.isValidEvent(e,s,o,l)&&this.isWorkDayAvailable(n,s)){var h=void 0,p=void 0;if(a[this.fields.isAllDay]){var c=this.parent.element.querySelector("."+iw+" table");p=t.formatUnit(c.offsetHeight),h=t.formatUnit(0)}else p=t.formatUnit(this.getHeight(s,o)),h=t.formatUnit(this.getTopValue(s,i,n));var d=this.createBlockAppointmentElement(e,n,this.isResourceEventTemplate);t.setStyleAttribute(d,{width:"100%",height:p,top:h});var u=this.getDayIndex(i,n,r);this.appendEvent(e,d,u,"0px")}},i.prototype.renderEvents=function(e){t.removeClass(this.allDayElement,nY);for(var i,n="allDayEvents"===e?this.sortByDateTime(this.allDayEvents):void 0,r=this.getResourceList(),a=this.getStartCount(),s="allDayEvents"===e?c(this.element.querySelector("."+iK),ip):0,o="allDayEvents"===e&&this.allDayElement.length>0?this.allDayElement[0].offsetTop:0,l=function(r){i=!0,h.parent.crudModule&&h.parent.crudModule.crudObj.isCrudAction&&"allDayEvents"!==e&&!h.parent.uiStateValues.isGroupAdaptive&&0===h.parent.crudModule.crudObj.sourceEvent.filter(function(e){return e.groupIndex===r}).length&&0===h.parent.crudModule.crudObj.targetEvent.filter(function(e){return e.groupIndex===r}).length&&(i=!1),h.slots=[];var l=h.dateRender[parseInt(r.toString(),10)],p=h.getRenderedDates(l)||l;h.slots.push(l.map(function(e){return+e}));for(var c=0,d=l.length;c<d&&l[parseInt(c.toString(),10)]<=p[p.length-1];c++){h.renderedEvents=[];var u=new Date(l[parseInt(c.toString(),10)].getTime()),m=S(l[parseInt(c.toString(),10)],1),f=h.filterEvents(u,m,n,h.resources[parseInt(r.toString(),10)]);if(i)for(var v=0;v<f.length;v++){var g=f[v];if(h.parent.resourceBase&&h.setValues(g,r),"allDayEvents"===e)h.renderAllDayEvents(g,c,r,a,!1,o,s);else if(h.isAllDayAppointment(g))h.allDayEvents.push(t.extend({},g,null,!0));else{if(h.parent.eventSettings.enableMaxHeight&&h.getOverlapIndex(g,c,!1,r)>0)continue;h.renderNormalEvents(g,c,r,a)}h.cssClass=null,h.groupOrder=null}else for(var y=0;y<f.length;y++){var b=f[y];h.isAllDayAppointment(b)&&h.allDayEvents.push(t.extend({},b,null,!0))}a+=1}},h=this,p=0;p<r.length;p++)l(r[p])},i.prototype.getStartCount=function(){return this.parent.virtualScrollModule&&this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.timeScale.enable?parseInt(this.element.querySelector("."+t9).getAttribute("id").split("-").slice(-1)[0],10):0},i.prototype.getDayIndex=function(e,t,i){var n=this;if(!this.parent.activeViewOptions.group.byDate)return i;if(this.parent.activeViewOptions.group.byDate&&!this.parent.activeViewOptions.group.hideNonWorkingDays){var r=this.parent.resourceBase.lastResourceLevel[0].renderDates.indexOf(this.dateRender[parseInt(t.toString(),10)][parseInt(e.toString(),10)]);return this.resources.length*r+t}for(var a=0,s=this.parent.activeView.colLevels[0],o=this.dateRender[parseInt(t.toString(),10)][parseInt(e.toString(),10)].getTime(),l=[],h=0;h<s.length&&(l=this.parent.resourceBase.resourceDateTree[parseInt(h.toString(),10)],o!==s[parseInt(h.toString(),10)].date.getTime());h++)a+=s[parseInt(h.toString(),10)].colSpan;var p=l.findIndex(function(e){return e.groupOrder.toString()===n.resources[parseInt(t.toString(),10)].groupOrder.toString()});return p<0?a:a+p},i.prototype.setValues=function(e,t){this.parent.activeViewOptions.group.resources.length>0?(this.cssClass=this.resources[parseInt(t.toString(),10)].cssClass,this.groupOrder=this.resources[parseInt(t.toString(),10)].groupOrder):this.cssClass=this.parent.resourceBase.getCssClass(e)},i.prototype.getResourceList=function(){return Array.apply(null,{length:this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive?this.resources.length:1}).map(function(e,t){return t})},i.prototype.createAppointmentElement=function(e,i,n,r){var a,s=this.parent.eventFields,o=e[s.subject]||this.parent.eventSettings.fields.subject.default||this.parent.localeObj.getConstant("addTitle"),l=t.createElement("div",{className:ip,attrs:{"data-id":"Appointment_"+e[s.id],"data-guid":e.Guid,role:"button",tabindex:"0","aria-disabled":this.parent.eventBase.getReadonlyAttribute(e),"aria-label":this.parent.getAnnouncementString(e)}});e[this.fields.isReadonly]&&t.addClass([l],"e-read-only");var h=t.createElement("div",{className:im});if(l.appendChild(h),this.parent.activeViewOptions.group.resources.length>0){var p=this.parent.uiStateValues.isGroupAdaptive?this.parent.uiStateValues.groupIndex:r;l.setAttribute("data-group-index",p.toString())}if(t.isNullOrUndefined(this.parent.activeViewOptions.eventTemplate)){var c=t.createElement("div",{className:nS});if(this.parent.sanitize(o,c),i){if(e[s.isAllDay])a=[c];else{a=[];var d=t.createElement("div",{className:iy+(this.parent.isAdaptive?" "+tT:""),innerHTML:this.parent.getTimeString(e[s.startTime])}),u=t.createElement("div",{className:iy+(this.parent.isAdaptive?" "+tT:""),innerHTML:this.parent.getTimeString(e[s.endTime])});t.addClass([c],"e-text-center"),n.isLeft||a.push(d),a.push(c),n.isRight||a.push(u)}}else{var m=this.parent.getTimeString(e[s.startTime])+" - "+this.parent.getTimeString(e[s.endTime]),f=t.createElement("div",{className:iy+(this.parent.isAdaptive?" "+tT:""),innerHTML:m}),v=t.createElement("div",{className:nO});this.parent.sanitize(e[s.location]||this.parent.eventSettings.fields.location.default||"",v),a=[c,f,v]}}else{var g=this.parent.element.id+"_"+this.parent.activeViewOptions.eventTemplateName+"eventTemplate",y=this.parent.uiStateValues.isGroupAdaptive?this.parent.uiStateValues.groupIndex:r,b="eventTemplate"+(this.isResourceEventTemplate?"_"+y:"");a=this.parent.getAppointmentTemplate()(e,this.parent,b,g,!1)}if(t.append(a,h),!(this.parent.isAdaptive||t.isNullOrUndefined(e[s.recurrenceRule])&&t.isNullOrUndefined(e[s.recurrenceID]))){var D=e[s.id]===e[s.recurrenceID]?iY:i_,w=t.createElement("div",{className:tw+" "+D});i?h.appendChild(w):l.appendChild(w)}return this.parent.eventBase.renderSpannedIcon(i?h:l,n),t.isNullOrUndefined(this.cssClass)||t.addClass([l],this.cssClass),this.applyResourceColor(l,e,"backgroundColor",this.groupOrder),this.renderResizeHandler(l,n,e[this.fields.isReadonly]),l},i.prototype.createMoreIndicator=function(e,i,n){var r=n+i,a=e[parseInt(r.toString(),10)];if(a.childElementCount<=0){var s=t.createElement("div",{className:iQ,id:iQ+"-"+r.toString()}),o=t.createElement("div",{className:i1,attrs:{tabindex:"0","data-index":r.toString(),"data-count":"1"},innerHTML:"+1&nbsp;"+(this.parent.isAdaptive?"":this.parent.localeObj.getConstant("more"))});s.appendChild(o),a.appendChild(s),t.EventHandler.add(o,"click",this.rowExpandCollapse,this)}else{var l=a.querySelector("."+i1),h=parseInt(l.getAttribute("data-count"),10)+1;l.setAttribute("data-count",h.toString()),l.innerHTML="+"+this.parent.globalize.formatNumber(h)+"&nbsp;"+(this.parent.isAdaptive?"":this.parent.localeObj.getConstant("more"))}},i.prototype.isSpannedEvent=function(e,i,n){var r=C(this.dateRender[parseInt(n.toString(),10)][parseInt(i.toString(),10)]),a=this.getRenderedDates(this.dateRender[parseInt(n.toString(),10)])||[r];0===a.filter(function(e){return e.getDay()===i}).length&&(r=C(a[0]));var s=this.parent.eventFields,o=x(r,this.startHour,this.endHour),l=t.extend({},e,null,!0);l.isSpanned={isBottom:!1,isTop:!1},e[s.startTime].getTime()<o.startHour.getTime()&&(l[s.startTime]=o.startHour,l.isSpanned.isTop=!0),e[s.endTime].getTime()>o.endHour.getTime()&&(l[s.endTime]=o.endHour,l.isSpanned.isBottom=!0);var h=this.updateEventMinimumDuration(o,l[s.startTime],l[s.endTime]);return l[s.startTime]=h.startDate,l[s.endTime]=h.endDate,l},i.prototype.isWorkDayAvailable=function(e,t){if(this.parent.activeViewOptions.group.hideNonWorkingDays&&this.resources.length>0){var i=this.resources[parseInt(e.toString(),10)].resourceData[this.resources[parseInt(e.toString(),10)].resource.workDaysField]||this.parent.activeViewOptions.workDays;return i&&i.indexOf(t.getDay())>=0}return!0},i.prototype.renderAllDayEvents=function(e,i,n,r,a,s,o){var l=this,h=this.getRenderedDates(this.dateRender[parseInt(n.toString(),10)])||this.dateRender[parseInt(n.toString(),10)];this.parent.activeViewOptions.group.byDate&&(this.slots[0]=[this.dateRender[parseInt(n.toString(),10)][parseInt(i.toString(),10)].getTime()],h=[this.dateRender[parseInt(n.toString(),10)][parseInt(i.toString(),10)]]);var p=this.splitEvent(e,h)[0],c=new Date(p[this.parent.eventFields.startTime].getTime()),d=new Date(p[this.parent.eventFields.endTime].getTime()),u=0,m=1,f=h[0].getTime()<=c.getTime()&&S(h.slice(-1)[0],1).getTime()>=c.getTime();if(c<=d&&f&&this.isWorkDayAvailable(n,c)){var v=[];if(this.renderedAllDayEvents[parseInt(n.toString(),10)]&&(v=this.renderedAllDayEvents[parseInt(n.toString(),10)].filter(function(t){return t.Guid===e.Guid}),this.parent.activeViewOptions.group.byDate&&(v=v.filter(function(e){return e[l.parent.eventFields.startTime]>=h[parseInt(i.toString(),10)]&&e[l.parent.eventFields.endTime]<=S(new Date(+h[parseInt(i.toString(),10)]),1)}))),0===v.length){var g=p.data.count,y=this.getOverlapIndex(p,i,!0,n);p.Index=y,this.allDayLevel=this.allDayLevel<y?y:this.allDayLevel;var b=p.data.isRight?0:"Day"===this.parent.currentView?4:7;g>=0&&(u=100*g-b),t.isNullOrUndefined(this.renderedAllDayEvents[parseInt(n.toString(),10)])&&(this.renderedAllDayEvents[parseInt(n.toString(),10)]=[]),this.renderedAllDayEvents[parseInt(n.toString(),10)].push(t.extend({},p,null,!0));var D,w=[].slice.call(this.element.querySelector("."+tk).children),C=this.getDayIndex(i,n,r),T=this.element.querySelector("."+iK+":nth-child("+(C+1)+")");D=a?this.parent.inlineModule.createInlineAppointmentElement(e):this.createAppointmentElement(e,!0,p.data,n),t.addClass([D],iX);var E=t.extend({},p.data,null,!0);e.data=E,this.parent.trigger(e6,{data:e,element:D,cancel:!1},function(i){if(!i.cancel){if(T.appendChild(D),m+=(0===y?s:s+y*o)+1,t.setStyleAttribute(D,{width:u+"%",top:t.formatUnit(m)}),y>1){l.moreEvents.push(D);for(var n=0;n<g;n++)l.createMoreIndicator(w,n,C)}l.allDayElement[0].setAttribute("data-count",l.allDayLevel.toString());var r=4+(!l.parent.uiStateValues.expand&&l.allDayLevel>2?3*o:(l.allDayLevel+1)*o);l.setAllDayRowHeight(r),l.addOrRemoveClass(),l.wireAppointmentEvents(D,e)}})}}},i.prototype.renderNormalEvents=function(e,i,n,r,a){var s=this.isSpannedEvent(e,i,n),o=s[this.fields.startTime],l=s[this.fields.endTime],h=0,p=x(C(new Date(this.dateRender[parseInt(n.toString(),10)][parseInt(i.toString(),10)].getTime())),this.startHour,this.endHour),c=this.isValidEvent(e,o,l,p);if(!(o.getTime()<this.parent.minDate.getTime()||l.getTime()>this.parent.maxDate.getTime())&&o<=l&&c&&this.isWorkDayAvailable(n,o)){var d=this.getHeight(o,l);o.getTime()>p.startHour.getTime()&&(h=this.getTopValue(o,i,n));var u=this.getOverlapIndex(s,i,!1,n);s.Index=u,this.overlapList.push(s),this.overlapList.length>1?(t.isNullOrUndefined(this.overlapEvents[parseInt(u.toString(),10)])&&(this.overlapEvents[parseInt(u.toString(),10)]=[]),this.overlapEvents[parseInt(u.toString(),10)].push(s)):(this.overlapEvents=[],this.overlapEvents.push([s]));var m={index:u,left:"0%",width:this.getEventWidth(),day:r,dayIndex:i,record:s,resource:n},f=this.adjustOverlapElements(m);f.appWidth,t.isNullOrUndefined(this.renderedEvents[parseInt(n.toString(),10)])&&(this.renderedEvents[parseInt(n.toString(),10)]=[]),this.renderedEvents[parseInt(n.toString(),10)].push(t.extend({},s,null,!0));var v=void 0;v=a?this.parent.inlineModule.createInlineAppointmentElement(e):this.createAppointmentElement(e,!1,s.isSpanned,n),t.setStyleAttribute(v,{width:this.parent.eventSettings.enableMaxHeight?"100%":f.appWidth,height:d+"px",top:h+"px"});var g=d-40-15*v.querySelectorAll("."+iP).length,y=v.querySelector("."+nS);!this.parent.isAdaptive&&y&&(y.style.maxHeight=t.formatUnit(g));var b=this.getDayIndex(i,n,r),D={};D[this.fields.startTime]=e[this.fields.startTime],D[this.fields.endTime]=e[this.fields.endTime],s.data=D,this.appendEvent(s,v,b,f.appLeft),this.wireAppointmentEvents(v,e)}},i.prototype.getEventWidth=function(){var e=(("Day"===this.parent.currentView?97:94)-this.overlapEvents.length)/this.overlapEvents.length;return(e<0?0:e)+"%"},i.prototype.getEventLeft=function(e,t){var i=(parseFloat(e)+1)*t;return(i>99?99:i)+"%"},i.prototype.getTopValue=function(e,t,i){var n=x(C(this.dateRender[parseInt(i.toString(),10)][parseInt(t.toString(),10)]),this.startHour,this.endHour).startHour,r=60*(e.getHours()-n.getHours())+(e.getMinutes()-n.getMinutes());return this.parent.activeViewOptions.timeScale.enable?r*this.cellHeight*this.slotCount/this.interval:0},i.prototype.getOverlapIndex=function(e,i,n,r){var a=this,s=this.parent.eventFields,o=[],l=-1;if(this.overlapEvents=[],n){if(!t.isNullOrUndefined(this.renderedAllDayEvents[parseInt(r.toString(),10)])){var h=C(new Date(this.dateRender[parseInt(r.toString(),10)][parseInt(i.toString(),10)].getTime()));o=this.renderedAllDayEvents[parseInt(r.toString(),10)].filter(function(e){return C(e[s.startTime]).getTime()<=h.getTime()&&C(e[s.endTime]).getTime()>=h.getTime()}),this.parent.activeViewOptions.group.resources.length>0&&(o=this.filterEventsByResource(this.resources[parseInt(r.toString(),10)],o))}}else{var p=t.isNullOrUndefined(this.renderedEvents[parseInt(r.toString(),10)])?[]:this.renderedEvents[parseInt(r.toString(),10)],c=[],d=e[s.startTime],u=e[s.endTime];this.overlapList=p.filter(function(e){return e[s.endTime]>d&&e[s.startTime]<=u||e[s.startTime]>=u&&e[s.endTime]<=d||e[s.endTime].getTime()===e[s.startTime].getTime()&&e[s.startTime].getTime()===d.getTime()&&e[s.endTime]<u}),this.parent.activeViewOptions.group.resources.length>0&&(this.overlapList=this.filterEventsByResource(this.resources[parseInt(r.toString(),10)],this.overlapList)),this.overlapList.forEach(function(e){var t=p.filter(function(t){return t[s.endTime]>e[s.startTime]&&t[s.startTime]<=e[s.endTime]});a.parent.activeViewOptions.group.resources.length>0&&(t=a.filterEventsByResource(a.resources[parseInt(r.toString(),10)],t));var i=t.filter(function(e){return -1===a.overlapList.indexOf(e)});i.length>0&&(c=c.concat(i))});for(var m=0;m<c.length-1;m++)for(var f=m+1;f<c.length;f++)c[parseInt(m.toString(),10)][s.id]===c[parseInt(f.toString(),10)][s.id]&&(c.splice(f,1),f--);this.overlapList=this.overlapList.concat(c);for(var v=0,g=o=this.overlapList;v<g.length;v++){var y=g[v],b=y.Index;t.isNullOrUndefined(this.overlapEvents[parseInt(b.toString(),10)])?this.overlapEvents[parseInt(b.toString(),10)]=[y]:this.overlapEvents[parseInt(b.toString(),10)].push(y)}}if(n||(o=o.filter(function(t){return t[s.startTime]===e[s.startTime]&&t[s.endTime]>e[s.endTime]||t[s.endTime]>e[s.startTime]&&t[s.startTime]<e[s.endTime]||t[s.endTime]===e[s.startTime]&&t[s.startTime]===e[s.endTime]||t[s.startTime].getTime()===e[s.startTime].getTime()&&t[s.endTime].getTime()===e[s.endTime].getTime()||t[s.startTime].getTime()===e[s.startTime].getTime()&&t[s.endTime].getTime()<e[s.endTime].getTime()||t[s.endTime].getTime()>e[s.endTime].getTime()})),o.length>0){var D=o.map(function(e){return e.Index});l=D.length>0?this.getSmallestMissingNumber(D):0}return -1===l?0:l},i.prototype.adjustOverlapElements=function(e){for(var i={appWidth:e.width,appLeft:e.left},n=0,r=this.overlapEvents.length;n<r;n++)if(!t.isNullOrUndefined(this.overlapEvents[parseInt(n.toString(),10)]))for(var a=0,s=this.overlapEvents[parseInt(n.toString(),10)].length;a<s;a++){var o=this.getDayIndex(e.dayIndex,e.resource,e.day),l=this.element.querySelector("#e-appointment-wrapper-"+o);if(l&&l.childElementCount>0){var h=this.overlapEvents[parseInt(n.toString(),10)][parseInt(a.toString(),10)].Guid;if(l.querySelectorAll('div[data-guid="'+h+'"]').length>0&&h!==e.record.Guid){var p=l.querySelector('div[data-guid="'+h+'"]');parseFloat(e.width)<=parseFloat(p.style.width)&&(this.parent.enableRtl?p.style.right=this.getEventLeft(e.width,n):p.style.left=this.getEventLeft(e.width,n),p.style.width=parseFloat(e.width)+"%"),i.appWidth=p.style.width}else{var c=e.width;t.isNullOrUndefined(this.overlapEvents[n-1])&&(c=this.getEventWidth()),i.appWidth=c,i.appLeft=this.getEventLeft(c,e.index)}}}return i},i.prototype.setAllDayRowHeight=function(e){var i=this.parent.element.querySelector("."+tA);"auto"!==this.parent.height&&this.parent.enableAllDayScroll||t.addClass([i],ri);var n=this.parent.element.querySelector("."+tk);if(n.style.height="",this.parent.uiStateValues.expand&&"auto"!==this.parent.height&&this.parent.enableAllDayScroll)n.style.height=e/12+"em",this.parent.eventBase.allDayExpandScroll(i);else{for(var r=0,a=this.allDayElement;r<a.length;r++)a[r].style.height=e/12+"em";t.removeClass([i],rt)}},i.prototype.addOrRemoveClass=function(){var e=this;this.moreEvents.filter(function(i){!e.parent.uiStateValues.expand&&e.allDayLevel>2?(t.addClass([i],iZ),i.setAttribute("tabindex","-1")):(t.removeClass([i],iZ),i.setAttribute("tabindex","0"))});var i=this.element.querySelector("."+iJ);this.parent.uiStateValues.expand?(t.removeClass([i],i$),t.addClass([i],i0)):(t.removeClass([i],i0),t.addClass([i],i$)),this.allDayLevel>2?t.removeClass([i],tT):t.addClass([i],tT),[].slice.call(this.element.querySelectorAll("."+iQ)).forEach(function(i){!e.parent.uiStateValues.expand&&e.allDayLevel>2?t.removeClass([i],tT):t.addClass([i],tT)})},i.prototype.getEventHeight=function(){var e=t.createElement("div",{className:ip,styles:"visibility:hidden"});this.element.querySelector("."+iK+":first-child").appendChild(e);var i=e.offsetHeight;return t.remove(e),i},i.prototype.rowExpandCollapse=function(){var e,t=this.element.querySelector("."+iJ);this.parent.uiStateValues.expand=t.classList.contains(i$),this.parent.uiStateValues.expand?(t.setAttribute("title",this.parent.localeObj.getConstant("collapseAllDaySection")),t.setAttribute("aria-label","Collapse section"),e=(this.allDayLevel+1)*this.getEventHeight()+4):(t.setAttribute("title",this.parent.localeObj.getConstant("expandAllDaySection")),t.setAttribute("aria-label","Expand section"),e=3*this.getEventHeight()+4,this.parent.element.querySelector("."+tA).scrollTop=0),this.setAllDayRowHeight(e),this.animation.animate(this.allDayElement[0]),this.addOrRemoveClass(),this.animation.animate(t)},i.prototype.animationUiUpdate=function(){this.parent.notify(to,{})},i.prototype.destroy=function(){!this.parent||this.parent&&this.parent.isDestroyed||(this.removeEventListener(),this.allDayElement=null,this.renderedAllDayEvents=null,this.renderedEvents=null,this.slotCount=null,this.interval=null,this.startHour=null,this.endHour=null,this.element=null,this.fields=null,this.animation=null,e.prototype.destroy.call(this))},i}(rM),rA=(ev=function(e,t){return(ev=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}ev(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),rN=function(e){function i(t){var i=e.call(this,t)||this;return i.renderedEvents=[],i.monthHeaderHeight=0,i.moreIndicatorHeight=19,i.renderType="day",i.element=i.parent.activeView.getPanel(),i.fields=i.parent.eventFields,i.maxHeight=i.parent.eventSettings.enableMaxHeight&&!i.parent.eventSettings.enableIndicator&&!i.parent.rowAutoHeight,i.withIndicator=i.parent.eventSettings.enableMaxHeight&&i.parent.eventSettings.enableIndicator&&!i.parent.rowAutoHeight,i.maxOrIndicator=i.maxHeight||i.withIndicator,i.moreIndicatorHeight=i.parent.rowAutoHeight&&i.parent.eventSettings.ignoreWhitespace?0:i.moreIndicatorHeight,i.addEventListener(),i}return rA(i,e),i.prototype.removeEventWrapper=function(e){if(e.length>0)for(var i=0,n=e="Month"!==this.parent.currentView&&(this.parent.activeView.isTimelineView()||this.parent.activeViewOptions.timeScale.enable)?[e[0]]:e;i<n.length;i++){var r=n[i];r.parentElement&&r.parentElement.parentNode&&t.remove(r.parentElement)}},i.prototype.renderAppointments=function(){this.parent.dragAndDropModule&&this.parent.dragAndDropModule.setDragArea(),this.isResourceEventTemplate=this.parent.isSpecificResourceEvents();var e=this.parent.element.querySelector("."+iw);this.parent.rowAutoHeight&&(this.parent.uiStateValues.top=e.scrollTop,this.parent.uiStateValues.left=e.scrollLeft);var i=[].slice.call(this.element.querySelectorAll("."+t9));if(this.parent.crudModule&&this.parent.crudModule.crudObj.isCrudAction)for(var n=0,r=this.parent.crudModule.crudObj.sourceEvent.length;n<r;n++){var a=[].slice.call(this.element.querySelectorAll('.e-appointment-wrapper [data-group-index="'+this.parent.crudModule.crudObj.sourceEvent[parseInt(n.toString(),10)].groupIndex+'"]'));if(this.removeEventWrapper(a),this.parent.crudModule.crudObj.targetEvent[parseInt(n.toString(),10)]&&this.parent.crudModule.crudObj.sourceEvent[parseInt(n.toString(),10)].groupIndex!==this.parent.crudModule.crudObj.targetEvent[parseInt(n.toString(),10)].groupIndex){var s=[].slice.call(this.element.querySelectorAll('.e-appointment-wrapper [data-group-index="'+this.parent.crudModule.crudObj.targetEvent[parseInt(n.toString(),10)].groupIndex+'"]'));this.removeEventWrapper(s)}}else for(var o=0;o<i.length;o++){var l=i[o];t.remove(l)}if(this.removeHeightProperty(tx),this.element.querySelector("."+tM)){if("Month"===this.parent.currentView){var h=t.createElement("div",{className:t9}),p=this.parent.element.querySelector("."+tM);p.appendChild(h),this.monthHeaderHeight=h.offsetTop-p.offsetTop,p.removeChild(h)}this.eventHeight=c(this.element,ip);var d=e.scrollTop;if(this.parent.rowAutoHeight&&this.parent.virtualScrollModule&&!this.parent.virtualScrollModule.isHorizontalScroll&&!t.isNullOrUndefined(this.parent.currentAction)&&(e.scrollTop=e.scrollTop-1),this.parent.activeViewOptions.group.resources.length>0?(this.renderResourceEvents(),this.parent.virtualScrollModule&&this.parent.virtualScrollModule.updateFocusedWorkCell()):this.renderEventsHandler(this.parent.activeView.renderDates,this.parent.activeViewOptions.workDays),this.parent.rowAutoHeight){this.updateBlockElements();var u={cssProperties:this.parent.getCssProperties(),module:this.parent.getModuleName(),isPreventScrollUpdate:!0,scrollPosition:{left:this.parent.uiStateValues.left,top:this.parent.uiStateValues.top}};if(this.parent.virtualScrollModule&&!this.parent.virtualScrollModule.isHorizontalScroll&&(this.parent.currentAction?(e.scrollTop=d,this.parent.currentAction=null):this.parent.virtualScrollModule.updateVirtualScrollHeight()),this.parent.enablePersistence||this.parent.notify(to,{}),this.parent.notify(tp,u),"Month"===this.parent.currentView&&this.parent.showWeekNumber){var m=[].slice.call(this.parent.element.querySelectorAll(".e-content-wrap table tr td:first-child"));[].slice.call(this.parent.element.querySelectorAll("."+is)).forEach(function(e,i){var n=m[parseInt(i.toString(),10)].offsetHeight;t.setStyleAttribute(e,{height:n+"px"})}),this.parent.element.querySelector("."+ia).scrollTop=this.parent.element.querySelector("."+iw).scrollTop}}this.parent.renderTemplates()}},i.prototype.renderEventsHandler=function(e,i,n){this.renderedEvents=[];var r,a,s=0;if(n?(s=n.groupIndex,this.cssClass=n.cssClass,this.groupOrder=n.groupOrder,r=this.parent.eventBase.filterEventsByResource(n,this.parent.eventsProcessed),a=this.parent.eventBase.filterEventsByResource(n,this.parent.blockProcessed),this.workCells=[].slice.call(this.element.querySelectorAll("."+tM+'[data-group-index="'+s+'"]'))):(r=this.parent.eventsProcessed,a=this.parent.blockProcessed,this.workCells=[].slice.call(this.element.querySelectorAll("."+tM))),this.sortByDateTime(r),this.sortByDateTime(a),"Month"===this.parent.currentView&&this.parent.rowAutoHeight&&0===this.parent.activeViewOptions.group.resources.length){var o=[].slice.call(this.parent.element.querySelectorAll(".e-content-wrap table tr td:first-child")),l=this.parent.element.querySelector("."+tx).clientHeight/o.length;o.forEach(function(e){t.setStyleAttribute(e,{height:l+"px"})})}var h=this.workCells[this.parent.activeView.isTimelineView()?0:this.workCells.length-1].getBoundingClientRect();this.cellWidth=h.width,this.cellHeight=h.height,this.dateRender=e;var p=this.getRenderedDates(e);this.getSlotDates(i||this.parent.activeViewOptions.workDays),this.processBlockEvents(a,s,n);for(var c=[],d=0,u=r;d<u.length;d++){var m=u[d];this.parent.resourceBase&&!n&&(this.cssClass=this.parent.resourceBase.getCssClass(m)),c=c.concat(this.splitEvent(m,p||this.dateRender))}for(var f=0;f<this.slots.length;f++){this.renderedEvents=[];for(var v=this.slots[parseInt(f.toString(),10)],g=S(new Date(v[v.length-1]),1),y=0,b=this.filterEvents(new Date(v[0]),g,c);y<b.length;y++){var D=b[y];if(this.maxHeight){var w="Month"===this.parent.currentView?D[this.fields.startTime]:this.getStartTime(D,D.data);if(this.getIndex(w)>0)continue}this.updateIndicatorIcon(D),this.renderEvents(D,s,r)}}this.cssClass=null,this.groupOrder=null},i.prototype.processBlockEvents=function(e,i,n){for(var r=0;r<e.length;r++){var a=e[r];this.parent.resourceBase&&!n&&(this.cssClass=this.parent.resourceBase.getCssClass(a));var s=[];if("day"!==this.renderType||a[this.fields.isAllDay])s.push(a);else{var o,l=t.extend({},a,null,!0),h=this.isSameDate(l[this.fields.startTime],l[this.fields.endTime]);l.isBlockIcon=h,!h&&T(l[this.fields.startTime])>0&&((o=t.extend({},a,null,!0))[this.fields.endTime]=S(C(new Date(a[this.fields.startTime]+"")),1),o.isBlockIcon=!0,l[this.fields.startTime]=o[this.fields.endTime],s.push(o)),!(h=this.isSameDate(l[this.fields.startTime],l[this.fields.endTime]))&&T(l[this.fields.endTime])>0&&((o=t.extend({},a,null,!0))[this.fields.startTime]=C(new Date(a[this.fields.endTime]+"")),o.isBlockIcon=!0,s.push(o),l[this.fields.endTime]=o[this.fields.startTime]),s.push(l)}for(var p=0;p<s.length;p++)for(var c=s[p],d=0,u=this.splitEvent(c,this.dateRender);d<u.length;d++){var m=u[d];this.renderBlockEvents(m,i,!!c.isBlockIcon)}}},i.prototype.isSameDate=function(e,t){return new Date(+e).setHours(0,0,0,0)===new Date(+t).setHours(0,0,0,0)},i.prototype.renderBlockEvents=function(e,i,n){var r=e.data,a=this.getStartTime(e,r),s=this.getEndTime(e,r),o=this.parent.getIndexOfDate(this.dateRender,C(new Date(a.getTime())));if(!(o<0||a>s)){var l=this.getCellTd(o),h=this.getPosition(a,s,e[this.fields.isAllDay],o);if(n)this.renderBlockIndicator(l,h,i);else{var p=r.count,c=this.getEventWidth(a,s,e[this.fields.isAllDay],p);c=c<=0?this.cellWidth:c;var d=this.parent.enableRtl?0:h,u=this.parent.enableRtl?h:0,m=this.cellHeight-this.monthHeaderHeight,f=this.getRowTop(i),v=this.createBlockAppointmentElement(e,i,this.isResourceEventTemplate);t.setStyleAttribute(v,{width:c+"px",height:m+"px",left:d+"px",right:u+"px",top:f+"px"}),this.renderEventElement(e,v,l)}}},i.prototype.renderBlockIndicator=function(e,i,n){var r=t.createElement("div",{className:"e-icons "+id});t.isNullOrUndefined(e.querySelector("."+id))&&e.appendChild(r)},i.prototype.getStartTime=function(e,t){return e[this.fields.startTime]},i.prototype.getEndTime=function(e,t){return e[this.fields.endTime]},i.prototype.getCellTd=function(e){return this.workCells[parseInt(e.toString(),10)]},i.prototype.getEventWidth=function(e,t,i,n){return n*this.cellWidth-1},i.prototype.getPosition=function(e,t,i,n){return 0},i.prototype.getRowTop=function(e){return 0},i.prototype.updateIndicatorIcon=function(e){if(-1!==this.parent.currentView.indexOf("Timeline")&&"TimelineMonth"!==this.parent.currentView&&!e[this.fields.isAllDay]){var t=e.data,i=this.parent.activeView.getStartHour(),n=this.parent.activeView.getEndHour(),r=x(e[this.fields.startTime],i,n),a=x(e[this.fields.endTime],i,n),s=t[this.fields.startTime],o=t[this.fields.endTime];if(t.isLeft=t.isLeft||s.getTime()<r.startHour.getTime(),t.isRight=t.isRight||o.getTime()>a.endHour.getTime(),C(s).getTime()!==C(o).getTime()){var l=r.startHour,h=a.endHour,p=new Date(C(s));if(p.setHours(h.getHours(),h.getMinutes(),h.getSeconds()),t.isLeft=t.isLeft||s.getTime()>=(l.getDate()===r.endHour.getDate()?p.getTime():S(p,1).getTime()),o.getTime()!==C(o).getTime()){var c=new Date(C(o));t.isRight=t.isRight||o.getTime()<=c.setHours(l.getHours(),l.getMinutes(),l.getSeconds())}}}},i.prototype.renderResourceEvents=function(){var e=this.parent.uiStateValues.isGroupAdaptive?[this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]]:this.parent.resourceBase.renderedResources;if(this.parent.crudModule&&this.parent.crudModule.crudObj.isCrudAction){for(var t=0,i=this.parent.crudModule.crudObj.sourceEvent.length;t<i;t++){var n=this.parent.crudModule.crudObj.sourceEvent[parseInt(t.toString(),10)];if(this.renderEventsHandler(n.renderDates,n.workDays,n),this.parent.crudModule.crudObj.sourceEvent[parseInt(t.toString(),10)].groupIndex!==this.parent.crudModule.crudObj.targetEvent[parseInt(t.toString(),10)].groupIndex){var r=this.parent.crudModule.crudObj.targetEvent[parseInt(t.toString(),10)];this.renderEventsHandler(r.renderDates,r.workDays,r)}}this.parent.crudModule.crudObj.isCrudAction=!1}else for(var a=0;a<e.length;a++){var s=e[a];this.renderEventsHandler(s.renderDates,s.workDays,s)}},i.prototype.getSlotDates=function(e){this.slots=[];for(var t=this.dateRender.map(function(e){return+e}),i=!this.parent.activeViewOptions.showWeekend||this.parent.activeViewOptions.group.byDate&&this.parent.activeViewOptions.group.hideNonWorkingDays?e.length:7;t.length>0;)this.slots.push(t.splice(0,i))},i.prototype.createAppointmentElement=function(e,i,n){void 0===n&&(n=!1);var r=e[this.fields.subject]||this.parent.eventSettings.fields.subject.default||this.parent.localeObj.getConstant("addTitle"),a=t.extend({},e,e.data,!0),s={"data-id":"Appointment_"+e[this.fields.id],role:"button",tabindex:"0","aria-disabled":this.parent.eventBase.getReadonlyAttribute(e),"aria-label":this.parent.getAnnouncementString(a,r)};n||(s["data-guid"]=e.Guid),this.parent.activeViewOptions.group.resources.length>0&&(s["data-group-index"]=i.toString());var o=t.createElement("div",{className:ip,attrs:s});t.isNullOrUndefined(this.cssClass)||t.addClass([o],this.cssClass),e[this.fields.isReadonly]&&t.addClass([o],"e-read-only");var l=t.createElement("div",{className:im});o.appendChild(l);var h,p=e.data,c=this.getEventData(e);if(t.isNullOrUndefined(this.parent.activeViewOptions.eventTemplate)){var d=e[this.fields.location]||this.parent.eventSettings.fields.location.default||"",u=t.createElement("div",{className:nS});this.parent.sanitize(r+(d?"; "+d:""),u);var m=t.createElement("div",{className:iy+(this.parent.isAdaptive?" "+tT:""),innerHTML:this.parent.getTimeString(p[this.fields.startTime])}),f=t.createElement("div",{className:iy+(this.parent.isAdaptive?" "+tT:""),innerHTML:this.parent.getTimeString(p[this.fields.endTime])});if("Month"===this.parent.currentView)e[this.fields.isAllDay]?(h=[u],t.addClass([u],"e-text-center")):!(p.count<=1)||p.isLeft||p.isRight?(h=[],t.addClass([u],"e-text-center"),p.isLeft||h.push(m),h.push(u),p.isRight||h.push(f)):h=[m,u];else{var v=void 0;if(e[this.fields.isAllDay])v=[u,t.createElement("div",{className:iy,innerHTML:this.parent.localeObj.getConstant("allDay")})];else{var g=this.parent.getTimeString(p[this.fields.startTime])+" - "+this.parent.getTimeString(p[this.fields.endTime]),y=t.createElement("div",{className:iy+(this.parent.isAdaptive?" "+tT:""),innerHTML:g}),b=t.createElement("div",{className:nO});this.parent.sanitize(d,b),v=[u,y,b]}var D=t.createElement("div",{className:"e-inner-wrap"});t.append(v,D),h=[D]}}else{var w=this.parent.element.id+"_"+this.parent.activeViewOptions.eventTemplateName+"eventTemplate",C="eventTemplate"+(this.isResourceEventTemplate?"_"+i:"");h=this.parent.getAppointmentTemplate()(c,this.parent,C,w,!1)}return t.append(h,l),this.appendEventIcons(e,l),this.renderResizeHandler(o,e.data,e[this.fields.isReadonly]),o},i.prototype.appendEventIcons=function(e,i){var n=e.data;if(!t.isNullOrUndefined(e[this.fields.recurrenceRule])||!t.isNullOrUndefined(e[this.fields.recurrenceID])){var r=e[this.fields.id]===e[this.fields.recurrenceID]?iY:i_;i.appendChild(t.createElement("div",{className:tw+" "+r+(this.parent.isAdaptive?" "+tT:"")}))}if(n.isLeft){var a=t.createElement("div",{className:iP+" "+tw+" e-left-icon"});t.prepend([a],i)}if(n.isRight){var s=t.createElement("div",{className:iP+" "+tw+" e-right-icon"});t.append([s],i)}},i.prototype.renderEvents=function(e,i,n){var r=e[this.fields.startTime],a=e[this.fields.endTime],s=this.parent.getIndexOfDate(this.dateRender,C(r));if(!(s<0||r.getTime()<this.parent.minDate.getTime()||a.getTime()>this.parent.maxDate.getTime())){var o=this.getIndex(r);e.Index=o;var l=e.data.count;if(r.getTime()<=a.getTime()){var h=l*this.cellWidth-5,p=this.workCells[parseInt(s.toString(),10)],c=o*(this.eventHeight+0),d=this.monthHeaderHeight+(o+1)*(this.eventHeight+0)+this.moreIndicatorHeight,u=this.maxOrIndicator?o<1:this.cellHeight>d;if(this.parent.rowAutoHeight||u){this.renderedEvents.push(t.extend({},e,null,!0));var m=void 0;if(m=this.inlineValue?this.parent.inlineModule.createInlineAppointmentElement():this.createAppointmentElement(e,i),this.applyResourceColor(m,e,"backgroundColor",this.groupOrder),this.wireAppointmentEvents(m,e),t.setStyleAttribute(m,{width:h+"px",top:c+"px"}),this.renderEventElement(e,m,p),this.parent.rowAutoHeight){var f=p.parentElement.firstElementChild;this.updateCellHeight(f,d)}}else for(var v=0;v<l;v++)if(this.workCells[s+v]){var g=this.workCells[s+v].querySelector("."+i1);if(g){var y=parseInt(g.getAttribute("data-count"),10)+1;g.setAttribute("data-count",y.toString()),g.innerHTML=this.getMoreIndicatorText(y)}else{var b=new Date(this.dateRender[s+v].getTime()),D=S(this.dateRender[s+v],1),w=this.workCells[s+v].getAttribute("data-group-index"),T=this.getMoreIndicatorElement(1,b,D);t.isNullOrUndefined(w)||T.setAttribute("data-group-index",w),T.style.top=this.cellHeight-this.monthHeaderHeight-this.moreIndicatorHeight+"px",T.style.width=this.cellWidth-2+"px",this.renderElement(this.workCells[s+v],T),t.EventHandler.add(T,"click",this.moreIndicatorClick,this)}}}}},i.prototype.updateCellHeight=function(e,i){i>e.offsetHeight&&t.setStyleAttribute(e,{height:i+"px"})},i.prototype.updateBlockElements=function(){for(var e=0,i=[].slice.call(this.element.querySelectorAll("."+ic));e<i.length;e++){var n=i[e],r=t.closest(n,"tr");this.monthHeaderHeight=n.offsetParent.offsetTop-r.offsetTop,n.style.height=r.offsetHeight-1-this.monthHeaderHeight+"px";var a=r.firstElementChild,s=Math.round(n.offsetWidth/a.offsetWidth);n.style.width=a.offsetWidth*s+"px"}},i.prototype.getFilteredEvents=function(e,i,n,r){var a;if(t.isNullOrUndefined(n))a=this.filterEvents(e,i);else{var s=this.parent.resourceBase.lastResourceLevel[parseInt(n,10)];a=this.filterEvents(e,i,t.isNullOrUndefined(r)?void 0:r,s)}return a},i.prototype.getOverlapEvents=function(e,t){for(var i=[],n=C(e).getTime(),r=0;r<t.length;r++){var a=t[r];C(a[this.fields.startTime]).getTime()<=n&&C(a[this.fields.endTime]).getTime()>=n&&i.push(a)}return i},i.prototype.getIndex=function(e){var t=-1,i=this.renderedEvents;if(i.length>0){var n=this.getOverlapEvents(e,i).map(function(e){return e.Index});t=n.length>0?this.getSmallestMissingNumber(n):0}return -1===t?0:t},i.prototype.moreIndicatorClick=function(e){var i=this,n=t.closest(e.target,"."+i1),r=new Date(parseInt(n.getAttribute("data-start-date"),10)),a=new Date(parseInt(n.getAttribute("data-end-date"),10)),s=n.getAttribute("data-group-index"),o={cancel:!1,event:e,element:n,isPopupOpen:!0,startTime:r,endTime:a,viewName:this.parent.getNavigateView()};s&&(o.groupIndex=parseInt(s,10)),this.parent.trigger(eZ,o,function(t){if(!t.cancel){if(t.isPopupOpen){var n=i.getFilteredEvents(r,a,s),o={date:r,event:n,element:e.target};i.parent.quickPopup.moreEventClick(o,a,s)}else i.parent.setProperties({selectedDate:r},!0),i.parent.changeView(t.viewName,e)}})},i.prototype.renderEventElement=function(e,t,i){var n=this,r=t.classList.contains(ic)?"blockEvent":"event",a=t.classList.contains(ip),s={data:this.getEventData(e),element:t,cancel:!1,type:r};this.parent.trigger(e6,s,function(e){e.cancel?n.renderedEvents.pop():n.renderElement(i,t,a)})},i.prototype.getEventData=function(e){var i=t.extend({},e,null,!0);return i[this.fields.startTime]=e.data[this.fields.startTime],i[this.fields.endTime]=e.data[this.fields.endTime],i},i.prototype.renderElement=function(e,i,n){void 0===n&&(n=!1),this.maxOrIndicator&&n&&this.setMaxEventHeight(i,e);var r=e.querySelector("."+t9);if(r)r.appendChild(i);else{var a=t.createElement("div",{className:t9});a.appendChild(i),e.appendChild(a)}},i.prototype.getMoreIndicatorElement=function(e,i,n){return t.createElement("div",{className:i1,innerHTML:this.getMoreIndicatorText(e),attrs:{tabindex:"0","data-count":e.toString(),"data-start-date":i.getTime().toString(),"data-end-date":n.getTime().toString()}})},i.prototype.getMoreIndicatorText=function(e){return"+"+this.parent.globalize.formatNumber(e)+"&nbsp;"+(this.parent.isAdaptive?"":this.parent.localeObj.getConstant("more"))},i.prototype.removeHeightProperty=function(e){for(var t=0,i=[].slice.call(this.element.querySelectorAll("."+e+" tbody tr"));t<i.length;t++)i[t].firstElementChild.style.height=""},i.prototype.setMaxEventHeight=function(e,i){var n=H(i.querySelector("."+iV)),r=i.offsetHeight-n-(this.maxHeight?0:this.moreIndicatorHeight);t.setStyleAttribute(e,{height:r+"px","align-items":"center"})},i.prototype.destroy=function(){this.element=null,this.fields=null,this.maxHeight=null,this.withIndicator=null,this.maxOrIndicator=null,this.moreIndicatorHeight=null,this.removeEventListener(),e.prototype.destroy.call(this)},i}(rM),rP=(eg=function(e,t){return(eg=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}eg(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),rH=function(e){function i(t,i){var n=e.call(this,t)||this;n.startHour=n.parent.activeView.getStartHour(),n.endHour=n.parent.activeView.getEndHour(),n.slotCount=n.parent.activeViewOptions.timeScale.slotCount,n.interval=n.parent.activeViewOptions.timeScale.interval,n.day=0,n.rowIndex=0,n.cellTops=[],n.renderType=i,n.eventContainers=[].slice.call(n.element.querySelectorAll("."+ih));var r=[].slice.call(n.element.querySelectorAll("."+tx+" tbody tr"));return n.dayLength=0===r.length?0:r[0].children.length,n.content=n.parent.element.querySelector("."+tx),n}return rP(i,e),i.prototype.getSlotDates=function(){if(this.slots=[],this.slots.push(this.parent.activeView.renderDates.map(function(e){return+e})),this.parent.activeViewOptions.headerRows.length>0&&"Hour"!==this.parent.activeViewOptions.headerRows.slice(-1)[0].option){this.renderType="day";var e=this.content.querySelector("."+tM);this.cellWidth=e.getBoundingClientRect().width/+(e.getAttribute("colspan")||1),this.slotsPerDay=1}else this.slotsPerDay=this.dayLength/this.dateRender.length},i.prototype.getOverlapEvents=function(e,t){var i=[];if("day"===this.renderType)for(var n=0;n<t.length;n++)C((a=t[n])[this.fields.startTime]).getTime()<=C(new Date(e.getTime())).getTime()&&C(a[this.fields.endTime]).getTime()>=C(new Date(e.getTime())).getTime()&&i.push(a);else for(var r=0;r<t.length;r++){var a,s=(a=t[r]).data;s.trimStartTime.getTime()<=e.getTime()&&s.trimEndTime.getTime()>e.getTime()&&i.push(a)}return i},i.prototype.getSortComparerIndex=function(e,t){var i=-1,n=this.renderedEvents;if(n.length>0){var r=this.getOverlapSortComparerEvents(e,t,n).map(function(e){return e.Index});i=r.length>0?this.getSmallestMissingNumber(r):0}return -1===i?0:i},i.prototype.getOverlapSortComparerEvents=function(e,t,i){for(var n=[],r=0;r<i.length;r++){var a=i[r];if("day"===this.renderType)C(a[this.fields.startTime]).getTime()<=C(new Date(e.getTime())).getTime()&&C(a[this.fields.endTime]).getTime()>=C(new Date(e.getTime())).getTime()&&n.push(a);else{var s=a.data;(s.trimStartTime.getTime()<=e.getTime()&&e.getTime()<s.trimEndTime.getTime()||e.getTime()<=s.trimStartTime.getTime()&&s.trimStartTime.getTime()<t.getTime())&&n.push(a)}}return n},i.prototype.renderResourceEvents=function(){this.removeHeightProperty(tK);var e=this.parent.uiStateValues.isGroupAdaptive?[this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]]:this.parent.resourceBase.renderedResources;if(this.parent.crudModule&&this.parent.crudModule.crudObj.isCrudAction){for(var t=0,i=this.parent.crudModule.crudObj.sourceEvent.length;t<i;t++){var n=this.parent.crudModule.crudObj.sourceEvent[parseInt(t.toString(),10)];if(this.rowIndex=n.groupIndex,this.renderEventsHandler(this.parent.activeView.renderDates,this.parent.activeViewOptions.workDays,n),this.parent.crudModule.crudObj.targetEvent[parseInt(t.toString(),10)]&&this.parent.crudModule.crudObj.sourceEvent[parseInt(t.toString(),10)].groupIndex!==this.parent.crudModule.crudObj.targetEvent[parseInt(t.toString(),10)].groupIndex){var r=this.parent.crudModule.crudObj.targetEvent[parseInt(t.toString(),10)];this.rowIndex=r.groupIndex,this.renderEventsHandler(this.parent.activeView.renderDates,this.parent.activeViewOptions.workDays,r)}}this.parent.crudModule.crudObj.isCrudAction=!1}else for(t=0;t<e.length;t++)this.rowIndex=t,this.renderEventsHandler(this.parent.activeView.renderDates,this.parent.activeViewOptions.workDays,e[parseInt(t.toString(),10)])},i.prototype.renderEvents=function(e,i,n){var r=e[this.fields.startTime],a=e[this.fields.endTime];if(!(r.getTime()<this.parent.minDate.getTime()||a.getTime()>this.parent.maxDate.getTime())){var s=e.data;r=this.getStartTime(e,s),a=this.getEndTime(e,s);var o=x(e[this.fields.startTime],this.startHour,this.endHour),l=this.updateEventMinimumDuration(o,r,a);if(r=l.startDate,a=l.endDate,this.day=this.parent.getIndexOfDate(this.dateRender,C(new Date(r.getTime()))),!(this.day<0)){var h=this.getCellTd(),p=t.isNullOrUndefined(this.parent.eventSettings.sortComparer)?this.getIndex(r):this.getSortComparerIndex(r,a);e.Index=p;var c=this.eventHeight,d=s.count,u=t.extend({},e,null,!0);u[this.fields.startTime]=s[this.fields.startTime],u[this.fields.endTime]=s[this.fields.endTime];var m=x(C(new Date(this.dateRender[this.day].getTime())),this.startHour,this.endHour),f=!0;if(f=!(!this.isDayProcess()&&!u[this.fields.isAllDay])||this.isValidEvent(u,r,a,m),r<=a&&f){var v=this.getEventWidth(r,a,e[this.fields.isAllDay],d);v="day"===this.renderType?v-2:v;var g=0,y=0,b=this.getPosition(r,a,e[this.fields.isAllDay],this.day);v=v<=0?this.cellWidth:v,this.renderedEvents.push(t.extend({},e,null,!0)),t.isNullOrUndefined(this.cellTops[parseInt(i.toString(),10)])&&(this.cellTops[parseInt(i.toString(),10)]=this.getRowTop(i));var D=this.cellTops[parseInt(i.toString(),10)],w=D+(this.maxHeight?0:2)+p*(c+2);g=this.parent.enableRtl?0:b,y=this.parent.enableRtl?b:0;var T=(p+1)*(c+2)+this.moreIndicatorHeight,E=this.maxOrIndicator?p<1:this.cellHeight>T;if(this.parent.rowAutoHeight||E){var O=void 0;if(O=t.isNullOrUndefined(this.inlineValue)?this.createAppointmentElement(e,i):this.parent.inlineModule.createInlineAppointmentElement(),this.applyResourceColor(O,e,"backgroundColor",this.groupOrder),t.setStyleAttribute(O,{width:v+"px",left:g+"px",right:y+"px",top:w+"px"}),this.wireAppointmentEvents(O,e),this.parent.rowAutoHeight){var k=this.parent.element.querySelector("."+iw),M=k.getBoundingClientRect().width,V=k.offsetHeight===k.clientHeight&&k.offsetWidth===k.clientWidth;this.renderEventElement(e,O,h);var I=this.getFirstChild(i);this.updateCellHeight(I,T),V&&(k.offsetWidth>k.clientWidth||M!==k.getBoundingClientRect().width)&&this.adjustAppointments(M)}else this.renderEventElement(e,O,h)}else for(var A=0;A<d;A++){var N=h.querySelector("."+i1),P=this.parent.enableRtl?y:g;P=Math.floor(P/this.cellWidth)*this.cellWidth;var H=this.interval/this.slotCount,R=new Date("TimelineMonth"===this.parent.activeViewOptions.option||"day"===this.renderType||0!==A?this.dateRender[this.day+A].getTime():r),F=S(this.dateRender[this.day+A],1);if("TimelineMonth"===this.parent.activeViewOptions.option||"day"===this.renderType){var L=this.getPosition(R,F,e[this.fields.isAllDay],this.day+A);this.renderTimelineMoreIndicator(r,R,F,c,H,i,n,D,g,y,h,N,P,L)}else for(var B=(U(a)-U(r))/tf*this.slotCount/this.interval,j=0;j<B&&(R=new Date(0===j?R.getTime():R.getTime()+6e4*H),!((F=new Date(R.getTime()+6e4*H)).getTime()>a.getTime()));j++){var W=this.getPosition(R,F,!1,this.day+A);if(P>W)break;P=W,this.renderTimelineMoreIndicator(r,R,F,c,H,i,n,D,g,y,h,N,P,W)}}}this.parent.renderTemplates()}}},i.prototype.renderTimelineMoreIndicator=function(e,i,n,r,a,s,o,l,h,p,c,d,u,m){if(h=this.parent.enableRtl?p=m:m,u=Math.floor((u=this.parent.enableRtl?p:h)/this.cellWidth)*this.cellWidth,c&&t.isNullOrUndefined(d)||!this.isAlreadyAvail(u,c)){var f="TimelineMonth"===this.parent.activeViewOptions.option||"day"===this.renderType?new Date(+e):i,v=new Date(f.setMinutes(Math.floor(f.getMinutes()/a)*a)),g=new Date(v.getTime()+6e4*a),y=void 0;this.parent.activeViewOptions.group.resources.length>0&&!t.isNullOrUndefined(s)&&(y=s.toString());var b=this.getFilterEvents(i,n,v,g,y,o),D=this.cellHeight-this.moreIndicatorHeight;r=this.withIndicator?D-2:r;var w=Math.floor(D/(r+2)),C=b.length-w<=0?1:b.length-w,T=void 0;T="day"===this.renderType?this.getMoreIndicatorElement(C,i,n):this.getMoreIndicatorElement(C,v,g),t.isNullOrUndefined(y)||T.setAttribute("data-group-index",y),T.style.top=l+D+"px",T.style.width=this.cellWidth+"px",T.style.left=Math.floor(h/this.cellWidth)*this.cellWidth+"px",T.style.right=Math.floor(p/this.cellWidth)*this.cellWidth+"px",this.renderElement(c,T),t.EventHandler.add(T,"click",this.moreIndicatorClick,this)}},i.prototype.updateCellHeight=function(e,i){if(i>(""===e.style.height?this.cellHeight:parseInt(e.style.height,10))){if(t.setStyleAttribute(e,{height:i+"px"}),this.parent.activeViewOptions.group.resources.length>0){var n=this.parent.element.querySelector("."+tK+' tbody td[data-group-index="'+e.getAttribute("data-group-index")+'"]');n&&t.setStyleAttribute(n,{height:i+"px"})}var r=this.parent.element.querySelector(".e-month-header-wrapper table tr:nth-child("+(e.parentElement.rowIndex+1)+") td");r&&t.setStyleAttribute(r,{height:i+"px"})}},i.prototype.adjustAppointments=function(e){var t=this,i=this.parent.element.querySelector("."+tx+" tbody tr");this.cellWidth=this.workCells[0].getBoundingClientRect().width;var n=this.cellWidth*i.children.length/(e/100);[].slice.call(this.parent.element.querySelectorAll("."+ip)).forEach(function(e){t.parent.enableRtl&&"0px"!==e.style.right?e.style.right=parseFloat(e.style.right)/100*n+"px":"0px"!==e.style.left&&(e.style.left=parseFloat(e.style.left)/100*n+"px"),e.style.width=parseFloat(e.style.width)/100*n+"px"})},i.prototype.getFirstChild=function(e){var t="."+tx+" tbody td",i="";return this.parent.activeViewOptions.group.resources.length>0&&(i='[data-group-index="'+e.toString()+'"]'),this.parent.element.querySelector(t+i)},i.prototype.updateBlockElements=function(){for(var e=0,t=[].slice.call(this.element.querySelectorAll("."+ic));e<t.length;e++){var i=t[e],n=parseInt(i.getAttribute("data-group-index"),10),r=this.getFirstChild(n);i.style.height=r.offsetHeight+"px";var a=Math.round(i.offsetWidth/r.offsetWidth);i.style.width=r.offsetWidth*a+"px"}for(var s=0,o=[].slice.call(this.element.querySelectorAll("."+id));s<o.length;s++)n=parseInt((i=o[s]).getAttribute("data-group-index"),10),i.style.top=this.getRowTop(n)+this.getFirstChild(n).offsetHeight-18+"px"},i.prototype.getStartTime=function(e,t){var i=e[this.fields.startTime],n=x(i,this.startHour,this.endHour);return i=this.isDayProcess()?e[this.fields.startTime]:n.startHour.getTime()>=t[this.fields.startTime]?n.startHour:n.endHour.getTime()<=t[this.fields.startTime]?this.getNextDay(n.startHour,t):t[this.fields.startTime],t.trimStartTime=e[this.fields.isAllDay]?n.startHour:t[this.fields.startTime],i},i.prototype.getNextDay=function(e,t){for(var i,n=1;n<=this.dateRender.length;n++)if(i=S(e,n),-1!==this.parent.getIndexOfDate(this.dateRender,C(new Date(e.getTime()))))return t.count=t.count-1,i;return i},i.prototype.getEndTime=function(e,t){var i=e[this.fields.endTime],n=x(i,this.startHour,this.endHour);return this.isDayProcess()?i=t[this.fields.endTime]:(i=t[this.fields.endTime],(n.endHour.getTime()<=t[this.fields.endTime]||e[this.fields.isAllDay])&&(i=n.endHour),n.startHour.getTime()>=t[this.fields.endTime].getTime()&&!e[this.fields.isAllDay]&&(i=this.getPreviousDay(n.startHour,n.endHour,t))),t.trimEndTime=e[this.fields.isAllDay]?n.endHour:t[this.fields.endTime],i},i.prototype.getPreviousDay=function(e,t,i){for(var n=1;n<=this.dateRender.length;n++){var r=S(t,-n);if(-1!==this.parent.getIndexOfDate(this.dateRender,C(new Date(e.getTime())))){(r=C(new Date(r.getTime()))).setHours(t.getHours(),t.getMinutes(),t.getSeconds());var a=i.count,s=i[this.fields.endTime];return i.count=0!==s.getHours()||0!==s.getMinutes()?a-1:a,r}}return i[this.fields.endTime]},i.prototype.getEventWidth=function(e,t,i,n){return"day"===this.renderType||i?n*this.slotsPerDay*this.cellWidth:this.isSameDay(e,t)?this.getSameDayEventsWidth(e,t):this.getSpannedEventsWidth(e,t,n)},i.prototype.getSameDayEventsWidth=function(e,t){return(U(t)-U(e))/tf*(this.cellWidth*this.slotCount)/this.interval},i.prototype.getSpannedEventsWidth=function(e,t,i){var n,r=i*this.slotsPerDay*this.cellWidth,a=x(C(new Date(e.getTime())),this.startHour,this.endHour),s=this.getSameDayEventsWidth(a.startHour,e);if(-1===this.parent.getIndexOfDate(this.dateRender,C(new Date(t.getTime()))))n=0;else{var o=x(C(new Date(t.getTime())),this.startHour,this.endHour);n=this.getSameDayEventsWidth(t,o.endHour),n=this.slotsPerDay*this.cellWidth===n?0:n}var l=s+n;return r>l?r-l:r-s},i.prototype.isSameDay=function(e,t){return this.parent.getIndexOfDate(this.dateRender,C(new Date(e.getTime())))===this.parent.getIndexOfDate(this.dateRender,C(new Date(t.getTime())))},i.prototype.getAppointmentLeft=function(e,t,i){var n=this.isSameDay(t,e.startHour)?(U(t)-U(e.startHour))/(tf*this.interval)*this.slotCount:0;return 0===i?n:Math.round((U(e.endHour)-U(e.startHour))/tf/this.interval*this.slotCount)*i+n},i.prototype.getPosition=function(e,t,i,n){if("day"===this.renderType||i)return n*this.slotsPerDay*this.cellWidth;var r=x(C(new Date(this.dateRender[parseInt(n.toString(),10)].getTime())),this.startHour,this.endHour);return(r.endHour.getTime()<=t.getTime()&&r.startHour.getTime()>=e.getTime()?this.getAppointmentLeft(r,r.startHour,n):r.endHour.getTime()<=t.getTime()?this.getAppointmentLeft(r,e,n):r.startHour.getTime()>=e.getTime()?this.getAppointmentLeft(r,r.startHour,n):this.getAppointmentLeft(r,e,n))*this.cellWidth},i.prototype.getFilterEvents=function(e,t,i,n,r,a){return"day"===this.renderType?this.getFilteredEvents(e,t,r,a):this.getFilteredEvents(i,n,r,a)},i.prototype.isAlreadyAvail=function(e,t){for(var i=[].slice.call(t.querySelectorAll("."+i1)),n=0;n<i.length;n++){var r=void 0;if(i&&(r=this.parent.enableRtl?i[parseInt(n.toString(),10)].style.right:i[parseInt(n.toString(),10)].style.left),parseInt(r,10)===Math.floor(e))return!0}return!1},i.prototype.getRowTop=function(e){return this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive?this.parent.element.querySelector("."+iw+' tbody td[data-group-index="'+e.toString()+'"]').offsetTop:0},i.prototype.getCellTd=function(){var e=this.parent.uiStateValues.isGroupAdaptive?0:this.rowIndex;return this.eventContainers[parseInt(e.toString(),10)]},i.prototype.renderBlockIndicator=function(e,i,n){if(!(this.parent.headerRows.length>0&&("Hour"!==this.parent.headerRows[this.parent.headerRows.length-1].option||"Date"!==this.parent.headerRows[this.parent.headerRows.length-1].option)||(i=Math.floor(i/this.cellWidth)*this.cellWidth+this.cellWidth-22,this.isAlreadyAvail(i,e)))){var r=t.createElement("div",{className:"e-icons "+id});this.parent.activeViewOptions.group.resources.length>0&&r.setAttribute("data-group-index",n.toString()),this.parent.enableRtl?r.style.right=i+"px":r.style.left=i+"px",r.style.top=this.getRowTop(n)+this.cellHeight-18+"px",this.renderElement(e,r)}},i.prototype.setMaxEventHeight=function(e,i){t.setStyleAttribute(e,{height:this.cellHeight-(this.maxHeight?0:2)-(this.maxHeight?0:this.moreIndicatorHeight)+"px"})},i.prototype.isDayProcess=function(){return"TimelineMonth"===this.parent.currentView||!this.parent.activeViewOptions.timeScale.enable||this.parent.activeViewOptions.headerRows.length>0&&"Hour"!==this.parent.activeViewOptions.headerRows.slice(-1)[0].option},i.prototype.destroy=function(){this.renderType=null,this.eventContainers=null,this.dayLength=null,this.content=null,e.prototype.destroy.call(this),this.parent=null},i}(rN),rR=function(){function e(e){this.parent=e,this.parent.on(te,this.inlineEdit,this)}return e.prototype.inlineEdit=function(e){if(this.parent.quickPopup&&this.parent.quickPopup.quickPopupHide(),"Cell"===e.type){var t=this.parent.element.querySelector("."+nn);t&&t.classList.contains(tI)&&this.parent.quickPopup.morePopup.hide(),this.removeInlineAppointmentElement(),this.cellEdit(e)}else this.parent.element.querySelector("."+n9)!==e.element.querySelector("."+n9)&&this.removeInlineAppointmentElement(),this.eventEdit(e)},e.prototype.cellEdit=function(e){var t=this.generateEventData(),i=e.element.cellIndex,n=this.getEventDaysCount(t);n>1&&(n=Math.round(n),i-=--n);var r=C(new Date(""+t[this.parent.eventFields.startTime])).getTime(),a=C(new Date(""+t[this.parent.eventFields.endTime])).getTime(),s=e.groupIndex||0,o="Day"===this.parent.currentView||"Week"===this.parent.currentView||"WorkWeek"===this.parent.currentView;if(this.parent.activeViewOptions.timeScale.enable&&o){var l=t[this.parent.eventFields.startTime].getDay();this.createVerticalViewInline(t,l,s,i)}else"Month"===this.parent.currentView||!this.parent.activeViewOptions.timeScale.enable&&o?this.createMonthViewInline(t,s,r,a):this.createTimelineViewInline(t,r,a,s);var h=this.parent.element.querySelector("."+n9);h&&h.focus()},e.prototype.eventEdit=function(e){var i,n=e.element.querySelector("."+n9);if(n)i=n.value;else{var r=e.element.querySelector("."+nS);if(t.isNullOrUndefined(r)?i=e.data[this.parent.eventFields.subject]:(t.addClass([r],tT),i=r.innerText),n=t.createElement("input",{className:n9,attrs:{value:i}}),t.closest(e.element,"."+nn))e.element.insertBefore(n,r);else if(["Agenda","MonthAgenda"].indexOf(this.parent.currentView)>-1){var a=e.element.querySelector("."+iv);t.isNullOrUndefined(a)&&(a=t.createElement("div",{className:iv}),e.element.prepend(a)),a.insertBefore(n,a.firstChild)}else e.element.querySelector(".e-appointment-details").prepend(n);n.focus()}n.setSelectionRange(i.length,i.length)},e.prototype.createVerticalViewInline=function(e,t,i,n){var r,a=this.getEventDaysCount(e),s=new rI(this.parent);s.initializeValues();var o=s.dateRender[parseInt(i.toString(),10)].map(function(e){return e.getDay()}).indexOf(t);if(a>=1){s.allDayElement=[].slice.call(this.parent.element.querySelectorAll("."+tO)),(r=s.slots).push.apply(r,this.parent.activeView.renderDates.map(function(e){return+e}));var l=[].slice.call(this.parent.element.querySelectorAll("."+iX)),h=0;l.length>0&&(h=Math.floor(this.parent.element.querySelector("."+tk).getBoundingClientRect().height/l[0].offsetHeight)-1),s.allDayLevel=h;var p=c(this.parent.element.querySelector("."+iK),ip),d=s.allDayElement.length>0?s.allDayElement[0].offsetTop:0;s.renderAllDayEvents(e,o,i,n,this.parent.allowInline,d,p)}else s.renderNormalEvents(e,o,i,n,this.parent.allowInline)},e.prototype.createMonthViewInline=function(e,t,i,n){var r=this.getEventDaysCount(e),a=this.parent.eventBase.cloneEventObject(e,i,n,r,!1,!1),s=new rN(this.parent);s.dateRender=this.parent.activeView.renderDates,s.inlineValue=this.parent.allowInline;var o=this.parent.activeView.renderDates,l=this.parent.activeViewOptions.workDays,h="."+tM;if(this.parent.activeViewOptions.group.resources.length>0){h+='[data-group-index="'+t+'"]';var p=this.parent.resourceBase.lastResourceLevel[parseInt(t.toString(),10)];o=p.renderDates,l=p.workDays}s.dateRender=o,s.workCells=[].slice.call(this.parent.element.querySelectorAll(h)),s.cellWidth=s.workCells[0].offsetWidth,s.cellHeight=s.workCells[0].offsetHeight,s.eventHeight=c(this.parent.monthModule.element||s.element,ip),s.getSlotDates(l);for(var d=s.getRenderedDates(o),u=0,m=s.splitEvent(a,d||o);u<m.length;u++){var f=m[u];s.renderEvents(f,t)}this.parent.element.querySelector("."+n9).focus()},e.prototype.createTimelineViewInline=function(e,t,i,n){var r=this.getEventDaysCount(e),a=this.parent.eventBase.cloneEventObject(e,t,i,r,!1,!1),s=new rH(this.parent,this.parent.activeViewOptions.timeScale.enable?"hour":"day");s.dateRender=this.parent.activeView.renderDates,s.eventContainers=[].slice.call(this.parent.element.querySelectorAll("."+ih));var o=this.parent.element.querySelector("."+tM);s.inlineValue=this.parent.allowInline,s.cellWidth=o.offsetWidth,s.cellHeight=o.offsetHeight;var l=0===this.parent.element.querySelectorAll("."+tx+" tbody tr").length?0:this.parent.element.querySelectorAll("."+tx+" tbody tr")[0].children.length;s.slotsPerDay=l/s.dateRender.length,s.eventHeight=c(s.element,ip),s.renderEvents(a,n)},e.prototype.getEventDaysCount=function(e){var t=e[this.parent.eventFields.startTime];return Math.abs(e[this.parent.eventFields.endTime].getTime()-t.getTime())/tm},e.prototype.generateEventData=function(e){var t=this.parent.element.querySelector("."+n9),i=t?t.value:e?e.innerHTML:"",n={};return n[this.parent.eventFields.id]=this.parent.eventBase.getEventMaxID(),n[this.parent.eventFields.subject]=i,n[this.parent.eventFields.startTime]=this.parent.activeCellsData.startTime,n[this.parent.eventFields.endTime]=this.parent.activeCellsData.endTime,n[this.parent.eventFields.isAllDay]=this.parent.activeCellsData.isAllDay,this.parent.eventWindow.setDefaultValueToObject(n),this.parent.resourceBase&&this.parent.resourceBase.setResourceValues(n,this.parent.activeCellsData.groupIndex),n},e.prototype.documentClick=function(){var e=this.parent.element.querySelector("."+n9);e&&""!==e.value?this.inlineCrudActions(e):this.removeInlineAppointmentElement()},e.prototype.inlineCrudActions=function(e){if(t.closest(e,"."+n7)){var i=this.generateEventData(e);this.parent.addEvent(i)}else{var n=t.closest(e,"."+ip),r=this.parent.getEventDetails(n);r[this.parent.eventFields.subject]=e.value;var a=void 0;r[this.parent.eventFields.id]===r[this.parent.eventFields.recurrenceID]&&(a="EditOccurrence",r[this.parent.eventFields.id]=this.parent.eventBase.getEventMaxID()),this.parent.saveEvent(r,a)}this.removeInlineAppointmentElement()},e.prototype.createInlineAppointmentElement=function(e){var i=t.createElement("div",{className:ip+" "+n7}),n=t.createElement("div",{className:im});i.appendChild(n);var r=t.createElement("input",{className:n9});return n.appendChild(r),e&&this.parent.eventBase.applyResourceColor(i,e,"backgroundColor"),i},e.prototype.removeInlineAppointmentElement=function(){var e=[].slice.call(this.parent.element.querySelectorAll("."+n7));e.length>0&&e.forEach(function(e){return t.remove(e)});var i=this.parent.element.querySelector("."+n9);if(i){var n=t.closest(i,"."+ip).querySelector("."+nS);t.isNullOrUndefined(n)||t.removeClass([n],tT),t.remove(i)}},e.prototype.destroy=function(){this.parent.off(te,this.inlineEdit)},e}(),rF=function(){function e(){}return e.prototype.renderFormValidator=function(e,t,i,n){var r=this;this.element=i,this.formObj=new o.FormValidator(e,{locale:n,customPlacement:function(e,t){r.errorPlacement(e,t)},rules:t,validationComplete:function(e){r.validationComplete(e)},focusout:function(e){r.focusOut(e)}})},e.prototype.focusOut=function(e){var t=e.relatedTarget;t&&(t.classList.contains("e-dlg-closeicon-btn")||t.classList.contains("e-close")||t.classList.contains(tO)||t.classList.contains(tP)||t.classList.contains(i9)||t.classList.contains(tM)||t.classList.contains(nH))?this.ignoreError=!0:this.ignoreError=!1},e.prototype.validationComplete=function(e){var t=this.element.querySelector("#"+e.inputName+"_Error");t&&(t.style.display="failure"===e.status?"":"none")},e.prototype.errorPlacement=function(e,i){var n=i.getAttribute("for"),r=this.element.querySelector("#"+n+"_Error");r||this.ignoreError||this.createTooltip(e,i,n,""),t.isNullOrUndefined(r)||(r.querySelector(".e-error").innerHTML=i.innerHTML)},e.prototype.createTooltip=function(e,i,n,r){var a,s,o=e.getBoundingClientRect();this.element.classList.contains(nK)?(a=this.element,s=this.element.getBoundingClientRect()):s=(a=this.element.querySelector(".e-schedule-dialog .e-dlg-content")).getBoundingClientRect();var l=t.createElement("div",{className:"e-tooltip-wrap e-popup "+nz,id:n+"_Error",styles:"display:"+r+";top:"+(o.bottom-s.top+a.scrollTop+9)+"px;left:"+(o.left-s.left+a.scrollLeft+o.width/2)+"px;"}),h=t.createElement("div",{className:"e-tip-content"});h.appendChild(i);var p=t.createElement("div",{className:"e-arrow-tip e-tip-top"});p.appendChild(t.createElement("div",{className:"e-arrow-tip-outer e-tip-top"})),p.appendChild(t.createElement("div",{className:"e-arrow-tip-inner e-tip-top"})),l.appendChild(h),l.appendChild(p),a.appendChild(l),l.style.left=parseInt(l.style.left,10)-l.offsetWidth/2+"px"},e.prototype.destroyToolTip=function(){if(this.element)for(var e=0,i=[].slice.call(this.element.querySelectorAll("."+nz));e<i.length;e++){var n=i[e];t.remove(n)}this.formObj&&this.formObj.element&&this.formObj.reset()},e.prototype.destroy=function(){this.formObj&&this.formObj.element&&!this.formObj.isDestroyed&&this.formObj.destroy(),this.formObj=null,this.element=null},e}(),rU=function(){function e(e){this.isMultipleEventSelect=!1,this.isCrudAction=!1,this.parent=e,this.l10n=this.parent.localeObj,this.fieldValidator=new rF,this.render(),this.addEventListener()}return e.prototype.render=function(){this.renderQuickPopup(),this.renderMorePopup(),this.renderQuickDialog()},e.prototype.renderQuickPopup=function(){var e=t.createElement("div",{className:nK+" e-popup-close",attrs:{role:"dialog"}});this.parent.isAdaptive?(document.body.appendChild(e),t.addClass([e],tb)):this.parent.element.appendChild(e),this.quickPopup=new i.Popup(e,{targetType:this.parent.isAdaptive?"container":"relative",enableRtl:this.parent.enableRtl,open:this.quickPopupOpen.bind(this),close:this.quickPopupClose.bind(this),hideAnimation:this.parent.isAdaptive?{name:"ZoomOut"}:{name:"FadeOut",duration:150},showAnimation:this.parent.isAdaptive?{name:"ZoomIn"}:{name:"FadeIn",duration:150},collision:this.parent.isAdaptive?{X:"fit",Y:"fit"}:this.parent.enableRtl?{X:"flip",Y:"fit"}:{X:"none",Y:"fit"},position:this.parent.isAdaptive||this.parent.enableRtl?{X:"left",Y:"top"}:{X:"right",Y:"top"},viewPortElement:this.parent.isAdaptive?document.body:this.parent.element,zIndex:this.parent.isAdaptive?1004:3})},e.prototype.renderMorePopup=function(){var e='<div class="'+nr+'"><div class="e-more-event-header"><div class="'+no+'" title="'+this.l10n.getConstant("close")+'" tabindex="0"></div><div class="'+na+'"><div class="e-header-day"></div><div class="'+ns+" "+iM+'" tabindex="0"></div></div></div></div>',n=t.createElement("div",{className:nn+" e-popup-close",innerHTML:e});this.parent.isAdaptive?(document.body.appendChild(n),t.addClass([n],tb)):this.parent.element.appendChild(n),this.morePopup=new i.Popup(n,{targetType:this.parent.isAdaptive?"container":"relative",enableRtl:this.parent.enableRtl,hideAnimation:{name:"ZoomOut",duration:300},showAnimation:{name:"ZoomIn",duration:300},open:this.morePopupOpen.bind(this),close:this.morePopupClose.bind(this),collision:this.parent.isAdaptive?{X:"fit",Y:"fit"}:this.parent.enableRtl?{X:"flip",Y:"fit"}:{X:"flip",Y:"flip"},viewPortElement:this.parent.isAdaptive?document.body:this.parent.element,zIndex:this.parent.isAdaptive?1002:2});var r=this.morePopup.element.querySelector("."+no);this.renderButton("e-round",tw+" "+nq,!1,r,this.closeClick),t.EventHandler.add(this.morePopup.element.querySelector("."+ns),"click",this.navigationClick,this)},e.prototype.renderQuickDialog=function(){var e=[{buttonModel:{cssClass:"e-quick-alertok e-flat",isPrimary:!0},click:this.dialogButtonClick.bind(this)},{buttonModel:{cssClass:"e-quick-alertcancel e-flat",isPrimary:!1},click:this.dialogButtonClick.bind(this)},{buttonModel:{cssClass:"e-quick-dialog-cancel e-disable e-flat",isPrimary:!1},click:this.dialogButtonClick.bind(this)}];if(this.parent.eventSettings.editFollowingEvents){var n={buttonModel:{cssClass:"e-quick-alertfollowing e-flat",isPrimary:!1},click:this.dialogButtonClick.bind(this)};e.splice(1,0,n)}this.quickDialog=new i.Dialog({animationSettings:{effect:"Zoom"},buttons:e,cssClass:"e-quick-dialog",closeOnEscape:!0,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,beforeClose:this.beforeQuickDialogClose.bind(this),isModal:!0,position:{X:"center",Y:"center"},showCloseIcon:!0,target:document.body,visible:!1,width:"auto"});var r=t.createElement("div",{id:this.parent.element.id+"QuickDialog"});this.parent.element.appendChild(r),this.quickDialog.appendTo(r);var a=this.quickDialog.element.querySelector("."+nv);a&&(a.setAttribute("aria-label",this.l10n.getConstant("occurrence")),a.setAttribute("aria-label",a.innerHTML));var s=this.quickDialog.element.querySelector("."+ng);s&&(s.setAttribute("aria-label",this.l10n.getConstant("series")),s.setAttribute("aria-label",s.innerHTML)),this.quickDialog.element.querySelector(".e-dlg-closeicon-btn")&&this.quickDialog.element.querySelector(".e-dlg-closeicon-btn").setAttribute("title",this.l10n.getConstant("close"))},e.prototype.renderButton=function(e,i,n,r,a){new s.Button({cssClass:e,disabled:n,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,iconCss:i}).appendTo(r),t.EventHandler.add(r,"click",a,this),t.removeClass([r],tw)},e.prototype.quickDialogClass=function(e){var i=[np,nc,nm,nf,nb,tT],n=this.quickDialog.element.querySelector("."+nv),r=this.quickDialog.element.querySelector("."+ng),a=this.quickDialog.element.querySelector("."+ny);switch(t.removeClass([n,r],i),t.addClass([this.quickDialog.element.querySelector("."+nf)],tT),this.parent.eventSettings.editFollowingEvents&&(t.addClass([a],tT),t.removeClass([this.quickDialog.element],nu)),e){case"Recurrence":t.addClass([n],np),t.addClass([r],nc),this.parent.eventSettings.editFollowingEvents&&(t.removeClass([a],tT),t.addClass([this.quickDialog.element],nu),t.addClass([a],nd));break;case"Delete":t.addClass([n],nm),t.addClass([r],nf);break;case"Alert":t.addClass([n],[nv,nb]),t.addClass([r],[ng,tT])}},e.prototype.applyFormValidation=function(){var e=this.quickPopup.element.querySelector("."+nw),t={};t[this.parent.eventSettings.fields.subject.name]=this.parent.eventSettings.fields.subject.validation,this.fieldValidator.renderFormValidator(e,t,this.quickPopup.element,this.parent.locale)},e.prototype.openRecurrenceAlert=function(){var e=this.quickDialog.element.querySelector("."+nv);e&&(e.innerHTML=this.l10n.getConstant("Delete"===this.parent.currentAction?"deleteEvent":"editEvent"),e.setAttribute("aria-label",e.innerHTML));var t=this.quickDialog.element.querySelector("."+ny);t&&(t.innerHTML=this.l10n.getConstant("editFollowingEvent"),t.setAttribute("aria-label",t.innerHTML));var i=this.quickDialog.element.querySelector("."+ng);i&&(i.innerHTML=this.l10n.getConstant("Delete"===this.parent.currentAction?"deleteSeries":"editSeries"),i.setAttribute("aria-label",i.innerHTML)),this.quickDialog.content=this.l10n.getConstant("editContent"),this.quickDialog.header=this.l10n.getConstant("Delete"===this.parent.currentAction?"deleteTitle":"editTitle"),this.quickDialogClass("Recurrence"),this.showQuickDialog("RecurrenceAlert")},e.prototype.openRecurrenceValidationAlert=function(e){this.quickDialogClass("Alert");var i,n=this.quickDialog.element.querySelector("."+nv);n.innerHTML=this.l10n.getConstant("ok"),n.setAttribute("aria-label",n.innerHTML);var r=this.quickDialog.element.querySelector("."+ng);switch(r.innerHTML=this.l10n.getConstant("cancel"),r.setAttribute("aria-label",r.innerHTML),this.quickDialog.header=this.l10n.getConstant("alert"),e){case"wrongPattern":t.addClass([r],tT),this.quickDialog.content=this.l10n.getConstant("wrongPattern");break;case"createError":t.addClass([r],tT),this.quickDialog.content=this.l10n.getConstant("createError");break;case"sameDayAlert":t.addClass([r],tT),this.quickDialog.content=this.l10n.getConstant("sameDayAlert");break;case"seriesChangeAlert":i=this.quickDialog.element.querySelector("."+nf),t.removeClass([r,i],tT),this.quickDialog.content=this.l10n.getConstant("seriesChangeAlert"),n.innerHTML=this.l10n.getConstant("yes"),r.innerHTML=this.l10n.getConstant("no"),i.innerHTML=this.l10n.getConstant("cancel");break;case"occurrenceAlert":t.addClass([r],tT),this.quickDialog.content=this.l10n.getConstant("occurenceAlert")}(!this.parent.enableRecurrenceValidation&&"wrongPattern"===e||this.parent.enableRecurrenceValidation)&&this.showQuickDialog("RecurrenceValidationAlert")},e.prototype.openDeleteAlert=function(){if(!this.parent.activeViewOptions.readonly){var e=this.quickDialog.element.querySelector("."+nv);e&&(e.innerHTML=this.l10n.getConstant("delete"),e.setAttribute("aria-label",e.innerHTML));var t=this.quickDialog.element.querySelector("."+ng);t&&(t.innerHTML=this.l10n.getConstant("cancel"),t.setAttribute("aria-label",t.innerHTML)),this.quickDialog.content=this.parent.activeEventData.event.length>1?this.l10n.getConstant("deleteMultipleContent"):this.l10n.getConstant("deleteContent"),this.quickDialog.header=this.parent.activeEventData.event.length>1?this.l10n.getConstant("deleteMultipleEvent"):this.l10n.getConstant("deleteEvent"),this.quickDialogClass("Delete"),this.showQuickDialog("DeleteAlert")}},e.prototype.openValidationError=function(e,t){this.quickDialog.header=this.l10n.getConstant("alert"),this.quickDialog.content=this.l10n.getConstant(e);var i=this.quickDialog.element.querySelector("."+nv);i&&(i.innerHTML=this.l10n.getConstant("ok"),i.setAttribute("aria-label",i.innerHTML));var n=this.quickDialog.element.querySelector("."+ng);n&&(n.innerHTML=this.l10n.getConstant("cancel"),i.setAttribute("aria-label",n.innerHTML)),this.quickDialogClass("Alert"),this.showQuickDialog("ValidationAlert",t)},e.prototype.showQuickDialog=function(e,i){var n=this;this.quickDialog.dataBind();var r={type:e,cancel:!1,element:this.quickDialog.element,data:t.extend({},i||this.parent.activeEventData.event,null,!0)};this.parent.trigger(e5,r,function(e){e.cancel||n.quickDialog.show()})},e.prototype.createMoreEventList=function(e,i,n){var r=this,a=this.parent.eventFields,s=t.createElement("div",{className:nl}),o=t.createElement("div",{className:nh});if(0===e.length)o=t.createElement("div",{className:nl,innerHTML:this.l10n.getConstant("emptyContainer")});else for(var l=function(e){var s=e[a.subject]||h.parent.eventSettings.fields.subject.default||h.parent.localeObj.getConstant("addTitle"),l=t.createElement("div",{className:ip,attrs:{"data-id":""+e[a.id],"data-guid":e.Guid,role:"button",tabindex:"0","aria-disabled":h.parent.eventBase.getReadonlyAttribute(e),"aria-label":h.parent.getAnnouncementString(e)}});e[a.isReadonly]&&t.addClass([l],"e-read-only");var p=void 0;if(t.isNullOrUndefined(h.parent.activeViewOptions.eventTemplate))l.appendChild(t.createElement("div",{className:nS})),h.parent.sanitize(s,l.firstElementChild);else{var c=h.parent.element.id+"_"+h.parent.activeViewOptions.eventTemplateName+"eventTemplate";p=h.parent.getAppointmentTemplate()(e,h.parent,"eventTemplate",c,!1),t.append(p,l)}if(t.isNullOrUndefined(n)||l.setAttribute("data-group-index",n),!t.isNullOrUndefined(e[a.recurrenceRule])){var d=e[a.id]===e[a.recurrenceID]?iY:i_;l.appendChild(t.createElement("div",{className:tw+" "+d}))}var u={data:t.extend({},e,null,!0),element:l,cancel:!1};h.parent.trigger(e6,u,function(t){if(!t.cancel){o.appendChild(l);var n=r.parent.isAdaptive||"Year"===r.parent.currentView;r.parent.eventBase.wireAppointmentEvents(l,e,n),r.parent.eventBase.applyResourceColor(l,e,"backgroundColor",i)}})},h=this,p=0;p<e.length;p++)l(e[p]);return s.appendChild(o),s},e.prototype.tapHoldEventPopup=function(e){var i=t.closest(e.target,"."+ip);this.isMultipleEventSelect=!1,this.parent.selectedElements=[],this.isMultipleEventSelect=!0,this.parent.eventBase.getSelectedEventElements(i),this.parent.activeEventData=this.parent.eventBase.getSelectedEvents();var n=i.getAttribute("data-guid"),r=this.parent.eventBase.getEventByGuid(n);if(!t.isNullOrUndefined(r)){var a=r[this.parent.eventFields.subject]||this.l10n.getConstant("noTitle"),s='<div class="e-multiple-event-popup"><div class="'+i6+'"><button class="e-close" title="'+this.l10n.getConstant("close")+'"></button><div class="'+nS+'">'+a+'</div><button class="e-edit" title="'+this.l10n.getConstant("edit")+'"></button><button class="e-delete" title="'+this.l10n.getConstant("delete")+'"></button></div></div>';this.quickPopup.element.innerHTML=s;var o=this.quickPopup.element.querySelector("."+nW);this.renderButton("e-flat e-round e-small",tw+" "+nq,!1,o,this.closeClick);var l=this.parent.activeViewOptions.readonly||r[this.parent.eventFields.isReadonly],h=!this.parent.eventSettings.allowEditing||l,p=!this.parent.eventSettings.allowDeleting||l,c=this.quickPopup.element.querySelector("."+nU);c&&this.renderButton("e-flat e-round e-small",tw+" "+nL,h,c,this.editClick);var d=this.quickPopup.element.querySelector("."+nB);d&&this.renderButton("e-flat e-round e-small",tw+" "+nj,p,d,this.deleteClick),this.beforeQuickPopupOpen(i,this.parent.eventBase.getPageCoordinates(e))}},e.prototype.isCellBlocked=function(e){var t={};if(t[this.parent.eventFields.startTime]=this.parent.activeCellsData.startTime,t[this.parent.eventFields.endTime]=this.parent.activeCellsData.endTime,t[this.parent.eventFields.isAllDay]=this.parent.activeCellsData.isAllDay,this.parent.activeViewOptions.group.resources.length>0){var i=parseInt((e.element instanceof Array?e.element[0]:e.element).getAttribute("data-group-index"),10);this.parent.resourceBase.setResourceValues(t,isNaN(i)?null:i)}return this.parent.eventBase.isBlockRange(t)},e.prototype.cellClick=function(e){var i=new Date(e.startTime.getTime());if(this.parent.showQuickInfo&&this.parent.eventSettings.allowAdding&&"MonthAgenda"!==this.parent.currentView&&!this.isCellBlocked(e)&&this.parent.isMinMaxDate(new Date(i.setHours(0,0,0,0)))){var n=t.isNullOrUndefined(e.event)?e.element:e.event.target;if(this.parent.isAdaptive){this.quickPopupHide();var r=this.parent.element.querySelector("."+iR);t.isNullOrUndefined(r)&&(r=t.createElement("div",{className:iR,innerHTML:'<div class="e-title">+ '+this.l10n.getConstant("newEvent")+"</div>"}));var a=t.closest(n,"."+tM+",."+tO);a&&a.appendChild(r)}else{var s=t.closest(n,"."+tM+",."+tO+",."+tP);if(!t.isNullOrUndefined(s)&&!n.classList.contains(i1)){if(this.quickPopup.relateTo===s&&this.quickPopup.element.classList.contains(tI)){var l=this.quickPopup.element.querySelector("."+nS);l&&l.focus()}else{this.quickPopup.element&&this.destroyPopupButtons("quickPopup");var h={};h[this.parent.eventFields.startTime]=this.parent.activeCellsData.startTime,h[this.parent.eventFields.endTime]=this.parent.activeCellsData.endTime,h[this.parent.eventFields.isAllDay]=this.parent.activeCellsData.isAllDay;var p=t.createElement("div",{className:i2});p.appendChild(this.getPopupHeader("Cell",h)),p.appendChild(this.getPopupContent("Cell",e,h)),p.appendChild(this.getPopupFooter("Cell",h)),this.quickPopup.element.setAttribute("aria-label",this.l10n.getConstant("newEvent"));var c=p.querySelector("."+nS);c&&o.Input.createInput({element:c,properties:{placeholder:this.l10n.getConstant("addTitle")}}),t.isNullOrUndefined(this.parent.eventSettings.fields.subject.default)||(c.value=this.parent.eventSettings.fields.subject.default);var d=p.querySelector("."+nW);d&&this.renderButton("e-flat e-round e-small",tw+" "+nq,!1,d,this.popupClose);var u=p.querySelector("."+i9);u&&this.renderButton("e-flat","",!1,u,this.detailsClick);var m=p.querySelector("."+i7);m&&this.renderButton("e-flat e-primary","",this.parent.activeViewOptions.readonly,m,this.saveClick),this.morePopup&&this.morePopup.hide(),this.quickPopup.content=p,this.quickPopup.relateTo=s,this.quickPopup.dataBind(),this.beforeQuickPopupOpen(s,this.parent.eventBase.getPageCoordinates(e.event))}}}}else this.quickPopupHide()},e.prototype.isSameEventClick=function(e){if(this.quickPopup.relateTo===t.closest(e.element,"."+ip)&&this.quickPopup.element.classList.contains(tI)){var i=this.quickPopup.element.querySelector("."+nU);if(i&&i.focus(),!this.parent.isAdaptive){var n=this.quickPopup.element.querySelector("."+ne);n&&n.focus()}return!0}return!1},e.prototype.isQuickTemplate=function(e){return"Both"===this.parent.quickInfoTemplates.templateType||this.parent.quickInfoTemplates.templateType===e},e.prototype.eventClick=function(e){if(this.parent.eventTooltip&&this.parent.eventTooltip.close(),this.parent.showQuickInfo){if(this.parent.isAdaptive&&this.isMultipleEventSelect)this.updateTapHoldEventPopup(t.closest(e.element,"."+ip));else{var i=this.isSameEventClick(e);if(this.parent.selectedElements=[],i)return;this.quickPopup.element&&this.destroyPopupButtons("quickPopup");var n=e.event,r=t.createElement("div",{className:i3});r.appendChild(this.getPopupHeader("Event",n)),r.appendChild(this.getPopupContent("Event",e,n)),r.appendChild(this.getPopupFooter("Event",n)),this.quickPopup.element.setAttribute("aria-label",this.l10n.getConstant("editEvent"));var a=this.parent.activeViewOptions.readonly||n[this.parent.eventFields.isReadonly],s=!this.parent.eventSettings.allowEditing||a,o=!this.parent.eventSettings.allowDeleting||a,l=r.querySelector("."+nU),h="e-flat e-round e-small";l&&this.renderButton(h,tw+" "+nL,s,l,this.editClick);var p=r.querySelector("."+nB);p&&this.renderButton(h,tw+" "+nj,o,p,this.deleteClick);var c=r.querySelector("."+nW);c&&this.renderButton(h,tw+" "+nq,!1,c,this.popupClose);var d=r.querySelector("."+ne);d&&this.renderButton("e-flat e-primary","",s,d,this.editClick);var u=r.querySelector("."+nt);u&&this.renderButton("e-flat","",o,u,this.deleteClick),this.morePopup&&!t.closest(e.element,"."+nh)&&this.morePopup.hide(),this.quickPopup.content=r,this.quickPopup.relateTo=this.parent.isAdaptive?document.body:t.closest(e.element,"."+ip),this.quickPopup.dataBind(),this.beforeQuickPopupOpen(e.element,this.parent.eventBase.getPageCoordinates(e.originalEvent))}}},e.prototype.getPopupHeader=function(e,i){var n=t.createElement("div",{className:i6});if(this.isQuickTemplate(e)&&this.parent.quickInfoTemplates.header){var r=t.extend({},i,{elementType:e.toLowerCase()},!0),a=this.parent.element.id,s=[].slice.call(this.parent.getQuickInfoTemplatesHeader()(r,this.parent,"header",a+"_headerTemplate",!1));t.append([].slice.call(s),n)}else{var o=void 0,l=void 0;switch(e){case"Cell":o='<div class="'+i4+'"><button class="'+nW+'" title="'+this.l10n.getConstant("close")+'"></button></div>';break;case"Event":l=this.getFormattedString(i),o='<div class="'+i4+'"><button class="e-edit e-icons" title="'+this.l10n.getConstant("edit")+'"></button><button class="e-delete e-icons" title="'+this.l10n.getConstant("delete")+'"></button><button class="e-close" title="'+this.l10n.getConstant("close")+'"></button></div><div class="'+iv+'"><div class="'+nS+" "+ni+'" title="'+(l.eventSubject?l.eventSubject.replaceAll('"',"'"):l.eventSubject)+'"></div></div >'}var h=t.createElement("div",{innerHTML:o});if("Event"===e){var p=h.querySelector("."+nS);this.parent.sanitize(l.eventSubject,p)}t.append([].slice.call(h.childNodes),n)}return n},e.prototype.getPopupContent=function(e,i,n){var r=t.createElement("div",{className:"e-popup-content"});if(this.isQuickTemplate(e)&&this.parent.quickInfoTemplates.content){var a=t.extend({},n,{elementType:e.toLowerCase()},!0),s=this.parent.element.id,o=[].slice.call(this.parent.getQuickInfoTemplatesContent()(a,this.parent,"content",s+"_contentTemplate",!1));t.append([].slice.call(o),r)}else{var l=void 0,h=void 0,p=void 0,c=this.getResourceText(i,e.toLowerCase());switch(e){case"Cell":h=this.getFormattedString(n),l='<table class="e-popup-table"><tbody><tr><td><form class="'+nw+'" onsubmit="return false;"><input class="'+nS+' e-field" type="text" name="'+this.parent.eventFields.subject+'" /></form></td></tr><tr><td><div class="'+iI+'"><div class="'+n1+" "+tw+'"></div><div class="'+i8+" "+ni+'">'+h.details+"</div></div>"+(this.parent.activeViewOptions.group.resources.length>0?'<div class="e-resource"><div class="'+n$+" "+tw+' "></div><div class="'+n0+" "+ni+'"></div></div>':"")+"</td></tr></tbody></table>";break;case"Event":l='<div class="'+iI+'"><div class="'+n1+" "+tw+'"></div><div class="e-date-time-wrapper '+ni+'"><div class="'+i8+" "+ni+'">'+(p=this.getFormattedString(n)).details+"</div>",n[this.parent.eventFields.recurrenceRule]&&(l+='<div class="e-recurrence-summary '+ni+'">'+this.getRecurrenceSummary(n)+"</div>"),l+="</div></div>",n[this.parent.eventFields.location]&&(l+='<div class="'+nO+'"><div class="e-location-icon '+tw+'"></div><div class="'+nk+" "+ni+'"></div></div>'),(n[this.parent.eventFields.startTimezone]||n[this.parent.eventFields.endTimezone])&&(l+='<div class="'+nT+'"><div class="e-time-zone-icon '+tw+'"></div><div class="e-time-zone-details '+ni+'">'+this.getTimezone(n)+"</div></div>"),n[this.parent.eventFields.description]&&(l+='<div class="'+nV+'"><div class="e-description-icon '+tw+'"></div><div class="'+nI+" "+ni+'"></div></div>'),this.parent.resourceCollection.length>0&&(l+='<div class="e-resource"><div class="'+n$+" "+tw+'"></div><div class="'+n0+" "+ni+'"></div></div>')}var d=t.createElement("div",{innerHTML:l});if(n[this.parent.eventFields.location]){var u=d.querySelector("."+nk);t.isNullOrUndefined(u)||this.parent.sanitize(n[this.parent.eventFields.location],u)}if(n[this.parent.eventFields.description]){var m=d.querySelector("."+nI);t.isNullOrUndefined(m)||this.parent.sanitize(n[this.parent.eventFields.description],m)}if(c){var f=d.querySelector("."+n0);t.isNullOrUndefined(f)||this.parent.sanitize(c,f)}t.append([].slice.call(d.childNodes),r)}return r},e.prototype.getPopupFooter=function(e,i){var n=t.createElement("div",{className:i5});if(this.isQuickTemplate(e)&&this.parent.quickInfoTemplates.footer){var r=t.extend({},i,{elementType:e.toLowerCase()},!0),a=this.parent.element.id,s=[].slice.call(this.parent.getQuickInfoTemplatesFooter()(r,this.parent,"footer",a+"_footerTemplate",!1));t.append([].slice.call(s),n)}else{var o=void 0;switch(e){case"Cell":o='<button class="'+i9+" "+ni+'" title="'+this.l10n.getConstant("moreDetails")+'">'+this.l10n.getConstant("moreDetails")+'</button><button class="'+i7+" "+ni+'" title="'+this.l10n.getConstant("save")+'">'+this.l10n.getConstant("save")+"</button>";break;case"Event":o=this.parent.isAdaptive?"":'<button class="'+ne+" "+ni+'" title="'+this.l10n.getConstant("edit")+'">'+this.l10n.getConstant("edit")+'</button><button class="'+nt+" "+ni+'" title="'+this.l10n.getConstant("delete")+'">'+this.l10n.getConstant("delete")+"</button>"}var l=t.createElement("div",{innerHTML:o});t.append([].slice.call(l.childNodes),n)}return n},e.prototype.getResourceText=function(e,i){if(0===this.parent.resourceCollection.length)return null;var n="";if(0===this.parent.activeViewOptions.group.resources.length){var r=this.parent.resourceBase.resourceCollection.slice(-1)[0],a=r.dataSource;if("event"===i)for(var s=e.event,o=0,l=a;o<l.length;o++)(function(e){var t=s[r.field];if(t instanceof Array){if(t.indexOf(e[r.idField])>-1){var i=t[t.indexOf(e[r.idField])],o=a.filter(function(e){return e[r.idField]===i})[0];n+=""===n?o[r.textField]:", "+o[r.textField]}}else e[r.idField]===t&&(n=e[r.textField].toString())})(l[o]);else n=a[0][r.textField].toString()}else if("event"===i){s=e.event,a=void 0;for(var h,p=this.parent.resourceBase.resourceCollection.length-1;p>=0;p--)if(a=s[this.parent.resourceBase.resourceCollection[parseInt(p.toString(),10)].field],!t.isNullOrUndefined(a)){h=this.parent.resourceBase.resourceCollection[parseInt(p.toString(),10)];break}Array.isArray(a)||(a=[a]);var c=[],d=h.dataSource;a.forEach(function(e){var t,i=P(d,h.idField,e);i>-1&&(t=d[parseInt(i.toString(),10)][h.textField]),t&&c.push(t)}),n=c.join(", ")}else{var u=t.isNullOrUndefined(e.groupIndex)?0:e.groupIndex,m=this.parent.resourceBase.lastResourceLevel[parseInt(u.toString(),10)];n=m.resourceData[m.resource.textField]}return n},e.prototype.getFormattedString=function(e){var t=this.parent.eventFields,i=e[t.subject]||this.l10n.getConstant("noTitle"),n=e[t.startTime],r=e[t.endTime],a=this.getDateFormat(n,"long"),s=e[t.isAllDay]&&0===r.getHours()&&0===r.getMinutes()?this.getDateFormat(S(new Date(r.getTime()),-1),"long"):this.getDateFormat(r,"long"),o=this.parent.getTimeString(n),l=this.parent.getTimeString(r),h="",p=r.getDate()!==n.getDate()&&(r.getTime()-n.getTime())/36e5<24?1:0;return e[t.isAllDay]?(h=a+" ("+this.l10n.getConstant("allDay")+")",(U(r)-U(n))/tm>1&&(h+="&nbsp;-&nbsp;"+s+" ("+this.l10n.getConstant("allDay")+")")):h=(U(r)-U(n))/tm>=1||p>0?a+" ("+o+")&nbsp;-&nbsp;"+s+" ("+l+")":a+" ("+o+"&nbsp;-&nbsp;"+l+")",{eventSubject:i,details:h}},e.prototype.moreEventClick=function(e,i,n){var r,a=this;this.quickPopupHide(!0);var s=this.morePopup.element.querySelector("."+nl);s&&t.remove(s);var o=e.date.getTime().toString(),l=t.closest(e.element,"."+i1+",."+tM),h=this.parent.globalize.formatDate(e.date,{format:"E",calendar:this.parent.getCalendarMode()});this.morePopup.element.querySelector(".e-header-day").innerHTML=j(h,"single");var p=this.morePopup.element.querySelector("."+ns);p.innerHTML=this.getDateFormat(e.date,"d"),p.setAttribute("data-date",o),p.setAttribute("data-end-date",i.getTime().toString()),t.isNullOrUndefined(n)||(p.setAttribute("data-group-index",n),r=this.parent.resourceBase.lastResourceLevel[parseInt(n,10)].groupOrder);var c=this.createMoreEventList(e.event,r,n);if(this.morePopup.element.querySelector("."+nr).appendChild(c),t.removeClass(this.morePopup.element.querySelector("."+na).childNodes,tU),C(e.date).getTime()===C(this.parent.getCurrentTime()).getTime()&&t.addClass(this.morePopup.element.querySelector("."+na).childNodes,tU),!this.parent.isAdaptive){if(-1!==this.parent.currentView.indexOf("Timeline")){var d=l.getAttribute("data-group-index"),u=new Date(parseInt(l.getAttribute("data-start-date"),10));u.setHours(u.getHours(),u.getMinutes(),0);var m=u.getTime().toString();if(t.isNullOrUndefined(d))this.morePopup.relateTo=this.parent.element.querySelector("."+iw+' tbody tr td[data-date="'+m+'"]');else if(this.morePopup.relateTo=this.parent.element.querySelector("."+iw+' tbody tr td[data-group-index="'+d+'"][data-date="'+m+'"]'),t.isNullOrUndefined(this.morePopup.relateTo))for(var f=[].slice.call(this.parent.element.querySelectorAll("."+iw+' tbody tr td[data-group-index="'+d+'"]')),v=0;v<f.length;v++)f[parseInt(v.toString(),10)].getAttribute("data-date")<m&&(this.morePopup.relateTo=f[parseInt(v.toString(),10)])}else this.morePopup.relateTo=t.closest(l,"."+tM)}this.parent.renderTemplates(function(){var t={type:"EventContainer",cancel:!1,element:a.morePopup.element,data:e};a.parent.trigger(e5,t,function(e){e.cancel||a.morePopup.show()})})},e.prototype.saveClick=function(e){this.applyFormValidation(),this.dialogEvent=e,this.isCrudAction=!0,this.quickPopupHide()},e.prototype.detailsClick=function(e){var i=this.quickPopup.element.querySelector("."+nS);i&&""!==i.value&&t.extend(this.parent.activeCellsData,{subject:i.value}),this.dialogEvent=e,this.isCrudAction=!1,this.fieldValidator.destroyToolTip(),this.quickPopupHide(),this.parent.eventWindow.openEditor(this.parent.activeCellsData,"Add")},e.prototype.editClick=function(e){this.dialogEvent=e,this.quickPopupHide(!0);var i=this.parent.activeEventData.event;this.parent.currentAction="EditSeries",t.isNullOrUndefined(i[this.parent.eventFields.recurrenceRule])?this.parent.eventWindow.openEditor(i,this.parent.currentAction):(this.parent.currentAction="EditOccurrence",this.openRecurrenceAlert())},e.prototype.deleteClick=function(e){this.dialogEvent=e,this.quickPopupHide(!0),this.parent.currentAction="Delete",this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule]?this.openRecurrenceAlert():this.openDeleteAlert()},e.prototype.updateMoreEventContent=function(){if(!this.morePopup.element.classList.contains("e-popup-close")){var e=this.morePopup.element.querySelector("."+nl);e&&t.remove(e);var i,n,r=this.morePopup.element.querySelector("."+ns),a=new Date(parseInt(r.getAttribute("data-date"),10)),s=new Date(parseInt(r.getAttribute("data-end-date"),10)),o=r.getAttribute("data-group-index");t.isNullOrUndefined(o)||(n=(i=this.parent.resourceBase.lastResourceLevel[parseInt(o,10)]).groupOrder);var l=this.parent.eventBase.filterEvents(a,s,this.parent.eventsProcessed,i),h=this.createMoreEventList(l,n,o);this.morePopup.element.querySelector("."+nr).appendChild(h)}},e.prototype.closeClick=function(e){this.dialogEvent=e,"Year"===this.parent.currentView&&this.parent.activeCellsData&&this.parent.activeCellsData.element&&this.parent.selectCell(this.parent.activeCellsData.element),this.quickPopupHide(),this.morePopup.hide()},e.prototype.dialogButtonClick=function(e){this.dialogEvent=e,this.quickDialog.hide();var t=e.target,i=this.quickDialog.element.querySelector("."+ng),n=this.parent.activeEventData.event;if(t.classList.contains(np))switch(this.parent.currentAction="Delete"===this.parent.currentAction?"DeleteOccurrence":"EditOccurrence",this.parent.currentAction){case"EditOccurrence":this.parent.eventWindow.openEditor(n,this.parent.currentAction);break;case"DeleteOccurrence":this.parent.crudModule.deleteEvent(n,this.parent.currentAction)}else if(t.classList.contains(nd))switch(this.parent.currentAction="Delete"===this.parent.currentAction?"DeleteFollowingEvents":"EditFollowingEvents",this.parent.currentAction){case"EditFollowingEvents":this.parent.eventWindow.openEditor(n,this.parent.currentAction);break;case"DeleteFollowingEvents":this.parent.crudModule.deleteEvent(n,this.parent.currentAction)}else if(t.classList.contains(nc))switch(this.parent.currentAction="Delete"===this.parent.currentAction?"DeleteSeries":"EditSeries",this.parent.currentAction){case"EditSeries":this.parent.eventWindow.openEditor(this.parent.eventBase.getParentEvent(n,!0),this.parent.currentAction);break;case"DeleteSeries":this.parent.crudModule.deleteEvent(n,this.parent.currentAction)}else t.classList.contains(nm)?this.parent.crudModule.deleteEvent(n,this.parent.currentAction):!i.classList.contains(tT)&&(t.classList.contains(nv)||t.classList.contains(ng)&&!i.classList.contains(nf))&&(this.parent.uiStateValues.isIgnoreOccurrence=t.classList.contains(ng),this.parent.eventWindow.eventSave(e,this.l10n.getConstant("ok")))},e.prototype.updateTapHoldEventPopup=function(e){var i=this.parent.eventBase.getSelectedEventElements(e);if(this.parent.activeEventData=this.parent.eventBase.getSelectedEvents(),i.length>0){var n=this.parent.eventBase.getEventByGuid(i[0].getAttribute("data-guid")),r=1===i.length?n[this.parent.eventFields.subject]||this.l10n.getConstant("noTitle"):"("+i.length+")&nbsp;"+this.l10n.getConstant("selectedItems");this.quickPopup.element.querySelector("."+nS).innerHTML=r,i.length>1?t.addClass([this.quickPopup.element.querySelector("."+nL)],n_):t.removeClass([this.quickPopup.element.querySelector("."+nL)],n_)}else this.parent.selectedElements=[],this.quickPopupHide()},e.prototype.getTimezone=function(e){var t="";return t+=e[this.parent.eventFields.startTimezone]||"",t+=(""===t?"":" - ")+(e[this.parent.eventFields.endTimezone]||"")},e.prototype.getRecurrenceSummary=function(e){var t=this.parent.eventWindow.getRecurrenceEditorInstance();if(t){var i=t.getRuleSummary(e[this.parent.eventFields.recurrenceRule]);return i.charAt(0).toUpperCase()+i.slice(1)}return""},e.prototype.getDateFormat=function(e,t){return j(this.parent.globalize.formatDate(e,{skeleton:t,calendar:this.parent.getCalendarMode()}),"single")},e.prototype.getDataFromTarget=function(e){if(e.classList.contains(ip))return this.parent.activeEventData.event;var t={startTime:this.parent.activeCellsData.startTime,endTime:this.parent.activeCellsData.endTime,isAllDay:this.parent.activeCellsData.isAllDay,groupIndex:this.parent.activeCellsData.groupIndex},i=this.parent.activeCellsData;return this.parent.eventWindow.convertToEventData(i,t),t},e.prototype.beforeQuickDialogClose=function(e){var i=this,n={event:e.event||this.dialogEvent,type:t.isNullOrUndefined(this.parent.activeEventData.event)?"ValidationAlert":t.isNullOrUndefined(this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule])?"DeleteAlert":"RecurrenceAlert",cancel:!1,data:this.parent.activeEventData.event,element:this.quickDialog.element};this.parent.trigger(e8,n,function(e){e.cancel||i.parent.eventBase.focusElement(!0)})},e.prototype.beforeQuickPopupOpen=function(e,n){var r=this;this.parent.renderTemplates(function(){var a=r.quickPopup.element.querySelector("."+i3),s=r.parent.isAdaptive?a?"ViewEventInfo":"EditEventInfo":"QuickInfo",o={type:s,cancel:!1,data:t.extend({},r.getDataFromTarget(e),null,!0),target:e,element:r.quickPopup.element};r.parent.trigger(e5,o,function(o){if(o.cancel)r.quickPopupHide(),r.destroyPopupButtons("quickPopup"),o.element.classList.contains(tI)&&r.quickPopupClose(),R(r.quickPopup.element),r.isMultipleEventSelect=!1;else{var l=r.quickPopup.element.style.display;if(r.quickPopup.element.style.display="block",r.parent.isAdaptive)r.quickPopup.element.removeAttribute("style"),r.quickPopup.element.style.display="block",r.quickPopup.element.style.height=t.formatUnit("EditEventInfo"===s?65:window.innerHeight);else{var h=r.parent.virtualScrollModule&&r.parent.virtualScrollModule.isHorizontalScroll&&!t.isNullOrUndefined(t.closest(e,"."+tx)),p=r.parent.element.querySelector("."+iw+" table");r.quickPopup.offsetX=h&&!r.parent.enableRtl?m(p)+10:10,r.quickPopup.offsetY=r.parent.virtualScrollModule&&!r.parent.virtualScrollModule.isHorizontalScroll?r.quickPopup.offsetY:0,r.quickPopup.collision={X:r.parent.enableRtl?"flip":"none",Y:"fit"},r.quickPopup.position={X:r.parent.enableRtl?"left":"right",Y:r.parent.enableRtl?"bottom":"top"},r.quickPopup.dataBind(),r.quickPopup.refreshPosition(null,!0);var c=i.isCollide(r.quickPopup.element,r.parent.element);if(c.indexOf(r.parent.enableRtl?"left":"right")>-1&&(r.quickPopup.offsetX=-e.offsetWidth-10-r.quickPopup.element.offsetWidth,h&&!r.parent.enableRtl&&(r.quickPopup.offsetX=m(p)+r.quickPopup.offsetX),r.quickPopup.dataBind(),r.quickPopup.refreshPosition(null,!0),i.isCollide(r.quickPopup.element,r.parent.element).indexOf("left")>-1&&(r.quickPopup.position={X:"center",Y:"center"},r.quickPopup.collision={X:"fit",Y:"fit"},r.quickPopup.offsetX=-r.quickPopup.element.offsetWidth/2,r.quickPopup.dataBind())),r.parent.virtualScrollModule&&!r.parent.virtualScrollModule.isHorizontalScroll&&(c.indexOf("top")>-1||c.indexOf("bottom")>-1)){var d=u(p);r.quickPopup.offsetY=d,r.quickPopup.dataBind(),r.quickPopup.refreshPosition(null,!0)}if("center"===r.quickPopup.position.X&&"center"===r.quickPopup.position.Y&&!t.isNullOrUndefined(n)&&n.clientX&&n.clientY){var f=n.clientX,v=n.clientY,g=e.getBoundingClientRect(),y=n.offsetY||Math.ceil(v-g.y),b=r.quickPopup.offsetY,D=i.isCollide(r.quickPopup.element,e),w=r.quickPopup.element.getBoundingClientRect(),C=document.elementFromPoint(f,v);(D.indexOf("top")>-1||D.indexOf("bottom")>-1||t.closest(C,"."+nK))&&(w.top<=v&&v<=w.top+w.height?(r.quickPopup.offsetY=b-w.height-10,r.quickPopup.dataBind(),(D=i.isCollide(r.quickPopup.element,r.parent.element)).indexOf("top")>-1&&(r.quickPopup.offsetY=b+y+10,r.quickPopup.dataBind())):i.isCollide(r.quickPopup.element,r.parent.element).indexOf("bottom")>-1&&(r.quickPopup.offsetY=b-y-Math.ceil(w.height)-10,r.quickPopup.dataBind()))}}a&&r.applyEventColor(),r.quickPopup.element.style.display=l,r.quickPopup.dataBind(),r.quickPopup.show()}})})},e.prototype.applyEventColor=function(){var e="";e="Agenda"===this.parent.currentView||"MonthAgenda"===this.parent.currentView?this.parent.enableRtl?"border-right-color":"border-left-color":"background-color";var t=this.parent.activeEventData.element.style[e];if(""!==t){var i=this.quickPopup.element.querySelector("."+i6),n=this.quickPopup.element.querySelector("."+i5);n&&n.offsetParent&&(i=this.quickPopup.element.querySelector("."+nS))&&(i.style.borderLeftColor=t,t="rgba("+t.match(/\d+/g).join()+",0.3)"),i&&(i.style.backgroundColor=t)}},e.prototype.quickPopupOpen=function(){if(this.parent.isAdaptive)this.quickPopup.element.style.top="0px";else if(this.quickPopup.element.querySelector("."+i2)){var e=this.quickPopup.element.querySelector("."+nS);e&&e.focus()}else{var t=this.quickPopup.element.querySelector("."+ne);t&&t.focus();var i=this.quickPopup.element.querySelector("."+nU);i&&i.focus()}},e.prototype.quickPopupClose=function(){this.parent.eventBase.focusElement(),this.quickPopup.relateTo="."+tM,this.fieldValidator.destroyToolTip(),this.quickPopup.element.querySelectorAll(".e-formvalidator").length&&this.fieldValidator.destroy(),this.destroyPopupButtons("quickPopup"),R(this.quickPopup.element)},e.prototype.morePopupOpen=function(){if(this.parent.isAdaptive)return this.morePopup.element.style.top="0px",this.morePopup.element.style.left="0px",void(this.morePopup.element.style.height=t.formatUnit(window.innerHeight));this.morePopup.element.querySelector("."+ns).focus(),this.morePopup.refreshPosition()},e.prototype.morePopupClose=function(){var e=this.parent.element.querySelector("."+nh);e&&t.remove(e)},e.prototype.popupClose=function(e){this.dialogEvent=e,this.isCrudAction=!1,this.quickPopupHide(!0)},e.prototype.quickPopupHide=function(e){var t=this;if(this.quickPopup.element.classList.contains(tI)){var i,n=this.quickPopup.element.querySelector("."+i2);if(n){var r=this.quickPopup.element.querySelector(".e-formvalidator");if(this.isCrudAction&&r&&!r.ej2_instances[0].validate())return;var a=this.parent.eventFields,s=this.parent.eventWindow.getObjectFromFormData(nK);this.parent.eventWindow.setDefaultValueToObject(s),s[a.id]=this.parent.eventBase.getEventMaxID(),s[a.startTime]=this.parent.activeCellsData.startTime,s[a.endTime]=this.parent.activeCellsData.endTime,s[a.isAllDay]=this.parent.activeCellsData.isAllDay,this.parent.resourceBase&&this.parent.resourceBase.setResourceValues(s),i=s}else i=this.parent.activeEventData.event;var o=this.quickPopup.element.querySelector("."+i3),l={event:this.dialogEvent,type:this.parent.isAdaptive?o?"ViewEventInfo":"EditEventInfo":"QuickInfo",cancel:!1,data:i,element:this.quickPopup.element,target:n?this.parent.activeCellsData.element:this.parent.activeEventData.element};this.parent.trigger(e8,l,function(i){if(!i.cancel&&t.quickPopup.element.classList.contains("e-popup-open")){if(n&&t.isCrudAction&&(t.parent.currentAction="Add",t.parent.crudModule.addEvent(i.data)),e){var r=t.quickPopup.hideAnimation;t.quickPopup.hideAnimation=null,t.quickPopup.hide(),t.quickPopup.hideAnimation=r}else t.quickPopup.hide();t.isMultipleEventSelect=!1,t.isCrudAction=!1}})}},e.prototype.navigationClick=function(e){var i=t.closest(e.target,"."+iM);if(!t.isNullOrUndefined(i)){var n=this.parent.getDateFromElement(e.currentTarget);t.isNullOrUndefined(n)||(this.closeClick(e),this.parent.setProperties({selectedDate:n},!0),this.parent.changeView(this.parent.getNavigateView(),e))}},e.prototype.documentClick=function(e){var i=e.event.target,n="."+nK+",."+tP+",."+tO+",."+tM+",."+ip+",.e-popup",r=this.parent.element.querySelector("."+nK);(r&&r.childElementCount>0&&!t.closest(i,n)||!t.closest(i,n))&&(this.quickPopupHide(),this.parent.removeNewEventElement());var a=this.parent.element.querySelector("."+n9);a&&a!==i&&this.parent.allowInline&&this.parent.inlineModule.documentClick(),t.closest(i,"."+ip+",."+tP)&&this.parent.removeNewEventElement(),t.closest(i,"."+nn)||!i.classList||i.classList.contains(i1)||t.closest(i,"."+tI)||t.closest(i,"."+tM)||this.morePopup.hide()},e.prototype.onClosePopup=function(e){t.isNullOrUndefined(e)||(this.dialogEvent=e),this.quickPopupHide(),(t.isNullOrUndefined(e)||!t.isNullOrUndefined(e)&&"escape"!==e.action||this.parent.inlineModule&&this.parent.element.querySelector("."+n7))&&this.parent.eventBase.focusElement()},e.prototype.addEventListener=function(){this.parent.on(eK,this.cellClick,this),this.parent.on(e3,this.eventClick,this),this.parent.on(td,this.documentClick,this),this.parent.on(ta,this.updateMoreEventContent,this)},e.prototype.removeEventListener=function(){this.parent.off(eK,this.cellClick),this.parent.off(e3,this.eventClick),this.parent.off(td,this.documentClick),this.parent.off(ta,this.updateMoreEventContent)},e.prototype.destroyPopupButtons=function(e){for(var t="quickPopup"===e?this.quickPopup:this.morePopup,i=0,n=[].slice.call(t.element.querySelectorAll(".e-control.e-btn"));i<n.length;i++){var r=n[i].ej2_instances[0];r&&r.destroy()}},e.prototype.refreshQuickDialog=function(){this.destroyQuickDialog(),this.renderQuickDialog()},e.prototype.refreshQuickPopup=function(){this.destroyQuickPopup(),this.renderQuickPopup()},e.prototype.refreshMorePopup=function(){this.destroyMorePopup(),this.renderMorePopup()},e.prototype.destroyQuickDialog=function(){this.quickDialog.element&&(this.quickDialog.destroy(),t.remove(this.quickDialog.element),this.quickDialog=null)},e.prototype.destroyQuickPopup=function(){this.quickPopup.element&&(this.destroyPopupButtons("quickPopup"),this.quickPopup.destroy(),t.remove(this.quickPopup.element),this.quickPopup=null)},e.prototype.destroyMorePopup=function(){this.morePopup.element&&(this.destroyPopupButtons("morePopup"),this.morePopup.destroy(),t.remove(this.morePopup.element),this.morePopup=null)},e.prototype.destroy=function(){this.quickPopup.element.querySelectorAll(".e-formvalidator").length&&this.fieldValidator.destroy(),this.removeEventListener(),this.destroyQuickPopup(),this.destroyMorePopup(),this.destroyQuickDialog(),this.dialogEvent=null,this.parent=null,this.l10n=null,this.isCrudAction=null,this.fieldValidator=null,this.isMultipleEventSelect=null},e}(),rL=function(){function e(e){this.parent=e,this.tooltipObj=new i.Tooltip({animation:{close:{effect:"FadeOut"}},content:"No title",position:"BottomRight",offsetY:10,mouseTrail:!this.parent.isAdaptive,showTipPointer:!1,cssClass:this.parent.cssClass+" e-schedule-event-tooltip",target:this.getTargets(),beforeRender:this.onBeforeRender.bind(this),beforeClose:this.onTooltipClose.bind(this),enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer}),this.tooltipObj.appendTo(this.parent.element)}return e.prototype.getTargets=function(){var e=[];return this.parent.activeViewOptions.group.headerTooltipTemplate&&e.push("."+t$),this.parent.eventSettings.enableTooltip&&e.push("."+ip),e.join(",")},e.prototype.onBeforeRender=function(e){if(t.isNullOrUndefined(e.target.getAttribute("data-tooltip-id"))){if(e.target.classList.contains(t$)&&this.parent.activeViewOptions.group.resources.length>0){var i=void 0;if(this.parent.activeView.isTimelineView()){var n=parseInt(e.target.getAttribute("data-group-index"),10);i=this.parent.resourceBase.lastResourceLevel[parseInt(n.toString(),10)]}else{var r=e.target.parentNode.sectionRowIndex,a=e.target.cellIndex;i=this.parent.activeView.getColumnLevels()[parseInt(r.toString(),10)][parseInt(a.toString(),10)]}var s={resource:i.resource,resourceData:i.resourceData},o=t.createElement("div"),l=this.parent.element.id+"_headerTooltipTemplate",h=[].slice.call(this.parent.getHeaderTooltipTemplate()(s,this.parent,"headerTooltipTemplate",l,!1));return t.append(h,o),this.setContent(o),void this.parent.renderTemplates()}var p=this.parent.eventBase.getEventByGuid(e.target.getAttribute("data-guid"));if(!t.isNullOrUndefined(p)){if(t.isNullOrUndefined(this.parent.eventSettings.tooltipTemplate)){var c=this.parent.globalize,d=this.parent.eventFields,u=new Date(""+p[d.startTime]),m=new Date(""+p[d.endTime]);m=0===m.getHours()&&0===m.getMinutes()?new Date(m.setMilliseconds(-1e3)):m;var f=C(new Date(""+u)),v=C(new Date(""+m)),g=p[d.subject]||this.parent.eventSettings.fields.subject.default||this.parent.localeObj.getConstant("addTitle"),y=t.isNullOrUndefined(p[d.location])?"":p[d.location],b="",D="",w="";b=c.formatDate(u,{type:"date",skeleton:"MMMd",calendar:this.parent.getCalendarMode()}),D=c.formatDate(u,{type:"date",skeleton:"medium",calendar:this.parent.getCalendarMode()}),w=c.formatDate(m,{type:"date",skeleton:"medium",calendar:this.parent.getCalendarMode()}),b=j(b,"single"),D=j(D,"single"),w=j(w,"single");var T=this.parent.getTimeString(u),E=this.parent.getTimeString(m),S='<div><div class="e-subject">'+g+'</div><div class="e-location">'+y+'</div><div class="e-details">'+(f.getTime()===v.getTime()?j(c.formatDate(u,{type:"date",skeleton:"long",calendar:this.parent.getCalendarMode()}),"single"):f.getFullYear()===v.getFullYear()?b+" - "+w:D+" - "+w)+'</div><div class="e-all-day">'+(p[d.isAllDay]?this.parent.localeObj.getConstant("allDay"):T+" - "+E)+"</div></div>";this.setContent(t.initializeCSPTemplate(function(){return S}))}else o=t.createElement("div"),l=this.parent.element.id+"_tooltipTemplate",h=[].slice.call(this.parent.getEventTooltipTemplate()(p,this.parent,"tooltipTemplate",l,!1)),t.append(h,o),this.setContent(o);this.parent.renderTemplates()}}},e.prototype.onTooltipClose=function(e){e.element&&(t.removeClass([e.element],tI),t.addClass([e.element],"e-popup-close")),this.parent.resetTemplates(["tooltipTemplate","headerTooltipTemplate"])},e.prototype.setContent=function(e){this.tooltipObj.setProperties({content:e},!0)},e.prototype.close=function(){this.tooltipObj.close()},e.prototype.destroy=function(){this.tooltipObj.destroy(),t.addClass([this.parent.element],"e-control"),this.tooltipObj=null,this.parent=null},e}(),rB=(ey=function(e,t){return(ey=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}ey(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),rj=function(e,t,i,n){var r,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(s=(a<3?r(s):a>3?r(t,i,s):r(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},rW="e-input-wrapper",rq="e-input-wrapper-side",rz="e-repeat-element",rY="e-repeat-interval",r_="e-days",rG="e-non-week",rK="e-year-expander",rX="e-year-expander-element",rZ="e-month-expander",rQ="e-month-expander-element",rJ="e-month-expander-checkbox-wrapper",r$="e-form-left",r0="e-form-right",r1="e-month-day",r2="e-month-expander-wrapper",r3="e-end-on-element",r6="e-end-on-date",r4="e-end-on-count",r5="e-recurrence-count",r8="e-hide-recurrence-element",r9="e-primary",r7="e-recurrence-table",ae="e-repeat-content",at="monthly",ai={none:"",daily:"days",weekly:"weeks",monthly:"months",yearly:"years"},an={sun:"SU",mon:"MO",tue:"TU",wed:"WE",thu:"TH",fri:"FR",sat:"SA"},ar=[r_,rG,"e-end-on","e-interval",rK,rZ],aa=[rG],as=[r_,rK],ao=[r_],al=[r_,rG,rK,rZ],ah=[r6,r4],ap=[r6],ac=[r4],ad=function(e){function i(t,i){var n=e.call(this,t,i)||this;return n.defaultLocale={none:"None",daily:"Daily",weekly:"Weekly",monthly:"Monthly",month:"Month",yearly:"Yearly",never:"Never",until:"Until",count:"Count",first:"First",second:"Second",third:"Third",fourth:"Fourth",last:"Last",repeat:"Repeat",repeatEvery:"Repeat every",on:"Repeat On",end:"End",onDay:"Day",days:"Day(s)",weeks:"Week(s)",months:"Month(s)",years:"Year(s)",every:"every",summaryTimes:"time(s)",summaryOn:"on",summaryUntil:"until",summaryRepeat:"Repeats",summaryDay:"day(s)",summaryWeek:"week(s)",summaryMonth:"month(s)",summaryYear:"year(s)",monthWeek:"Month Week",monthPosition:"Month Position",monthExpander:"Month Expander",yearExpander:"Year Expander",repeatInterval:"Repeat Interval"},n.renderStatus=!1,n.dayButtons=[],n.monthButtons=[],n}return rB(i,e),i.prototype.startState=function(e,t,i){this.showFormElement(),this.updateForm(e),this.freshOnEndForm(),this.updateEndOnForm(t),this.selectMonthDay(i),this.updateUntilDate(i),this.onMonthDay.setProperties({checked:!0})},i.prototype.preRender=function(){this.localeObj=new t.L10n(this.getModuleName(),this.defaultLocale,this.locale),this.calendarUtil=ed(this.calendarMode)},i.prototype.applyCustomClass=function(e){e&&t.addClass([this.element],e.split(" "))},i.prototype.initialize=function(){t.addClass([this.element],"e-"+this.getModuleName()),this.renderComponent(),t.isNullOrUndefined(this.value)||""===this.value?(t.isNullOrUndefined(this.repeatType.value)||(this.startState(this.repeatType.value.toString().toUpperCase(),this.endTypes[0],this.startDate),this.updateForm(this.repeatType.value.toString())),this.selectedType>0&&this.setProperties({value:this.getRecurrenceRule()},!1)):this.setRecurrenceRule(this.value),this.applyCustomClass(this.cssClass)},i.prototype.triggerChangeEvent=function(){var e=this;if(this.renderStatus){var t=this.getRecurrenceRule();this.trigger("change",{value:t},function(t){return e.setProperties({value:t.value},!1)})}},i.prototype.resetDayButton=function(){[].slice.call(this.element.querySelectorAll(".e-days button")).forEach(function(e){return t.removeClass([e],["e-active",r9])})},i.prototype.daySelection=function(e){this.resetDayButton();var i=[0,1,2,3,4,5,6];this.rotateArray(i,this.firstDayOfWeek);var n=this.element.querySelector('.e-days button[data-index="'+i.indexOf(e)+'"]');n&&t.addClass([n],["e-active",r9])},i.prototype.rtlClass=function(e){e?t.addClass([this.element],"e-rtl"):t.removeClass([this.element],"e-rtl")},i.prototype.updateUntilDate=function(e){var t=new Date(e.getTime());t.setDate(t.getDate()+60),this.untilDateObj.setProperties({value:t})},i.prototype.selectMonthDay=function(e){this.monthDate.setProperties({value:this.calendarUtil.getDate(e)}),this.monthWeekDays.setProperties({value:an[["sun","mon","tue","wed","thu","fri","sat"][e.getDay()]]}),this.monthValue.setProperties({value:""+this.calendarUtil.getMonth(e)}),this.monthWeekPos.setProperties({value:this.getDayPosition(e)}),this.daySelection(e.getDay())},i.prototype.updateForm=function(e){var i=this;this.repeatType.setProperties({value:e});var n=this.element.querySelector(".e-end-on");switch("daily"===e?t.classList(n,[r$],[r0]):t.classList(n,[r0],[r$]),e){case"none":ar.forEach(function(e){return t.addClass([i.element.querySelector("."+e)],r8)});break;case"weekly":aa.forEach(function(e){return t.addClass([i.element.querySelector("."+e)],r8)});break;case at:as.forEach(function(e){return t.addClass([i.element.querySelector("."+e)],r8)});break;case"yearly":ao.forEach(function(e){return t.addClass([i.element.querySelector("."+e)],r8)});break;case"daily":al.forEach(function(e){return t.addClass([i.element.querySelector("."+e)],r8)})}},i.prototype.updateEndOnForm=function(e){var i=this;switch(this.endType.setProperties({value:e}),e){case"never":ah.forEach(function(e){return t.addClass([i.element.querySelector("."+e)],r8)});break;case"until":ac.forEach(function(e){return t.addClass([i.element.querySelector("."+e)],r8)});break;case"count":ap.forEach(function(e){return t.addClass([i.element.querySelector("."+e)],r8)})}},i.prototype.freshOnEndForm=function(){var e=this;ah.forEach(function(i){var n=e.element.querySelector("."+i);n&&t.removeClass([n],r8)})},i.prototype.showFormElement=function(){var e=this;ar.forEach(function(i){var n=e.element.querySelector("."+i);n&&t.removeClass([n],r8)})},i.prototype.renderDropdowns=function(){var e=this,t=this;this.repeatType=new l.DropDownList({dataSource:this.getRepeatData(),floatLabelType:"Always",enableRtl:this.enableRtl,index:this.selectedType,fields:{text:"text",value:"value"},placeholder:this.localeObj.getConstant("repeat"),htmlAttributes:{title:this.localeObj.getConstant("repeat")},change:function(i){t.setProperties({selectedType:e.frequencies.indexOf(i.value)},!1),t.element.querySelector("."+ae).innerHTML=t.localeObj.getConstant(ai[i.value]),t.showFormElement(),t.updateForm(i.value),t.resetFormValues(),t.triggerChangeEvent()}}),this.repeatType.appendTo(this.element.querySelector("."+rz)),this.endType=new l.DropDownList({dataSource:this.getEndData(),popupWidth:this.getPopupWidth(),enableRtl:this.enableRtl,index:1,fields:{text:"text",value:"value"},change:function(e){t.freshOnEndForm(),t.updateEndOnForm(e.value),t.resetFormValues(),t.triggerChangeEvent()}}),this.endType.appendTo(this.element.querySelector("."+r3));var i=function(i){return new l.DropDownList({dataSource:i,popupWidth:e.getPopupWidth(),enableRtl:e.enableRtl,fields:{text:"text",value:"value"},index:1,change:function(e){t.onWeekDay.setProperties({checked:!0}),t.resetFormValues(),t.triggerChangeEvent()}})};this.monthWeekPos=i(this.getMonthPosData()),this.monthWeekPos.appendTo(this.element.querySelector(".e-month-pos")),this.monthWeekDays=i(this.getDayData("wide")),this.monthWeekDays.appendTo(this.element.querySelector(".e-month-week")),this.monthValue=new l.DropDownList({dataSource:this.getMonthData(),fields:{text:"text",value:"value"},enableRtl:this.enableRtl,index:7,change:function(e){t.resetFormValues(),t.triggerChangeEvent()}}),this.monthValue.appendTo(this.element.querySelector("."+rX))},i.prototype.setDefaultValue=function(){for(var e=0,t=[].slice.call(this.element.querySelectorAll(".e-control .e-numerictextbox"));e<t.length;e++){var i=t[e].ej2_instances[0];i.element.classList.contains(rY)?(i.value=1,i.dataBind()):i.element.classList.contains(r5)&&(i.value=10,i.dataBind())}},i.prototype.resetFormValues=function(){for(var e=0,t=[].slice.call(this.element.querySelectorAll('.e-control [type="text"]'));e<t.length;e++){var i=t[e],n=void 0;if(i.classList.contains("e-datepicker"))(n=i.ej2_instances[0]).value?(n.value=n.value,n.dataBind()):this.updateUntilDate(this.startDate);else if(i.classList.contains("e-dropdownlist"))(n=i.ej2_instances[0]).index=n.index||0,n.dataBind();else if(i.classList.contains("e-numerictextbox")){var r=void 0;r=(n=i.ej2_instances[0]).element.classList.contains(rY)?1:n.element.classList.contains(r5)?10:this.startDate.getDate(),n.value=n.value||r,n.dataBind()}}},i.prototype.getPopupWidth=function(){return t.Browser.isDevice?"100%":"auto"},i.prototype.renderDatePickers=function(){var e=this;this.untilDateObj=new r.DatePicker({firstDayOfWeek:this.firstDayOfWeek,enableRtl:this.enableRtl,locale:this.locale,min:this.minDate,max:this.maxDate,format:t.isNullOrUndefined(this.dateFormat)?this.getFormat("dateFormats"):this.dateFormat,change:function(t){t.value&&e.triggerChangeEvent()}}),this.untilDateObj.appendTo(this.element.querySelector(".e-until-date"))},i.prototype.getFormat=function(e){return"en"===this.locale||"en-US"===this.locale?t.getValue(e+".short",t.getDefaultDateObject(this.getCalendarMode())):t.getValue("main."+this.locale+".dates.calendars."+this.getCalendarMode()+"."+e+".short",t.cldrData)},i.prototype.dayButtonRender=function(){for(var e=this,i=this,n=0,r=[].slice.call(this.element.querySelectorAll(".e-days button"));n<r.length;n++){var a=r[n],o=new s.Button({isToggle:!0,enableRtl:this.enableRtl},a);this.dayButtons.push(o),t.EventHandler.add(a,"click",function(n){var r=[].slice.call(e.element.querySelectorAll(".e-days button."+r9)),a=n.target;a.classList.contains(r9)?r.length>1&&(t.removeClass([a],r9),i.triggerChangeEvent()):(t.addClass([a],r9),i.triggerChangeEvent())})}},i.prototype.radioButtonRender=function(){var e=this;this.onMonthDay=new s.RadioButton({label:this.localeObj.getConstant("onDay"),enableRtl:this.enableRtl,name:"monthType",value:"day",change:function(){e.resetFormValues(),e.triggerChangeEvent()}}),this.onMonthDay.appendTo(this.element.querySelector("."+rQ)),this.monthButtons.push(this.onMonthDay),this.onWeekDay=new s.RadioButton({label:this.localeObj.getConstant("monthExpander"),cssClass:"e-month-type",name:"monthType",enableRtl:this.enableRtl,value:"daypos",change:function(){e.resetFormValues(),e.triggerChangeEvent()}}),this.onWeekDay.appendTo(this.element.querySelector("."+r2)),this.monthButtons.push(this.onWeekDay)},i.prototype.numericTextboxRender=function(){var e=this;this.recurrenceCount=new o.NumericTextBox({value:10,format:"#",enableRtl:this.enableRtl,min:1,max:999,change:function(){e.triggerChangeEvent()}}),this.recurrenceCount.appendTo(this.element.querySelector("."+r5)),this.monthDate=new o.NumericTextBox({value:1,format:"#",enableRtl:this.enableRtl,min:1,max:31,change:function(){e.onMonthDay.setProperties({checked:!0}),e.triggerChangeEvent()}}),this.monthDate.appendTo(this.element.querySelector("."+r1)),this.repeatInterval=new o.NumericTextBox({value:1,format:"#",min:1,max:999,enableRtl:this.enableRtl,floatLabelType:"Always",placeholder:this.localeObj.getConstant("repeatEvery"),change:function(){e.triggerChangeEvent()}}),this.repeatInterval.appendTo(this.element.querySelector("."+rY))},i.prototype.renderComponent=function(){this.setTemplate(),this.renderDropdowns(),this.renderDatePickers(),this.dayButtonRender(),this.radioButtonRender(),this.numericTextboxRender()},i.prototype.rotateArray=function(e,t){for(var i,n=0;n<t;n++)i=e.shift(),e.push(i)},i.prototype.getEndData=function(){var e=this,t=[];return this.endTypes.forEach(function(i){t.push({text:e.localeObj.getConstant(i),value:i})}),t},i.prototype.getDayPosition=function(e){var t=new Date(e.getTime()),i=new Date(e.getTime()),n=e.getDay(),r=[];for(t=this.calendarUtil.getMonthStartDate(t),i=this.calendarUtil.getMonthEndDate(i);t<i;)t.getDay()===n&&r.push(t.getTime()),t.setDate(t.getDate()+1);return r.indexOf(e.getTime())===r.length-1?-1:r.indexOf(e.getTime())+1},i.prototype.getRepeatData=function(){var e=[],t=this;return this.frequencies.forEach(function(i){var n="none"===i?"never":i;e.push({text:t.localeObj.getConstant(n),value:i})}),e},i.prototype.getMonthPosData=function(){var e={first:1,second:2,third:3,fourth:4,last:-1},t=this,i=[];return["first","second","third","fourth","last"].forEach(function(n){i.push({text:t.localeObj.getConstant(n),value:e[""+n]})}),i},i.prototype.getDayData=function(e){var i,n=["sun","mon","tue","wed","thu","fri","sat"],r=[];if(this.rotateArray(n,this.firstDayOfWeek),"en"===this.locale||"en-US"===this.locale){var a="days.stand-alone.";i=t.getValue(a+e,t.getDefaultDateObject(this.getCalendarMode()))}else a="main."+this.locale+".dates.calendars."+this.getCalendarMode()+".days.stand-alone."+e,i=t.getValue(a,t.cldrData);for(var s=0;s<n.length;s++){var o=n[s],l=t.getValue(o,i);r.push({text:"narrow"===e?l:j(l,"single"),value:an[""+o]})}return r},i.prototype.getMonthData=function(){var e,i=[];if("en"===this.locale||"en-US"===this.locale){var n="months.stand-alone.wide";e=t.getValue(n,t.getDefaultDateObject(this.getCalendarMode()))}else n="main."+this.locale+".dates.calendars."+this.getCalendarMode()+".months.stand-alone.wide",e=t.getValue(n,t.cldrData);for(var r=0,a=Object.keys(e);r<a.length;r++){var s=a[r];i.push({text:j(t.getValue(s,e),"single"),value:s})}return i},i.prototype.setTemplate=function(){var e=this.getDayData("narrow"),t=this.getDayData("wide");this.element.innerHTML='<div class="e-editor"><div class="'+rW+" "+r$+'"><input type="text" tabindex="0" class="'+rz+'"label="'+rz.substr(2)+'" /></div><div class="'+rW+" e-interval "+r0+'"><table  class="'+r7+' e-repeat-content-wrapper"  role="none"><tr><td><input type="text" tabindex="0" id="'+this.element.id+"_"+rY+'" class="'+rY+'"title="'+this.localeObj.getConstant("repeatEvery")+'" /></td><td><span class="'+ae+'"></span></td></tr></table></div><div class="'+rq+" "+r_+" "+r$+'"><div class=e-week-expander-label>'+this.localeObj.getConstant("on")+'</div><button type="button" class="e-round" data-index="0" title="'+t[0].text+'">'+e[0].text+'</button><button type="button" class="e-round" data-index="1" title="'+t[1].text+'">'+e[1].text+'</button><button type="button" class="e-round" data-index="2" title="'+t[2].text+'">'+e[2].text+'</button><button type="button" class="e-round" data-index="3" title="'+t[3].text+'">'+e[3].text+'</button><button type="button" class="e-round" data-index="4" title="'+t[4].text+'">'+e[4].text+'</button><button type="button" class="e-round" data-index="5" title="'+t[5].text+'">'+e[5].text+'</button><button type="button" class="e-round" data-index="6" title="'+t[6].text+'">'+e[6].text+'</button></div><div class="'+rq+" "+rG+" "+r$+'"><div class=e-month-expander-label>'+this.localeObj.getConstant("on")+'</div><div class="'+rK+'"><input class="'+rX+'" type="text" tabindex="0" title="'+this.localeObj.getConstant("yearExpander")+'"/></div><div class="'+rZ+'"><table class="'+r7+' e-month-expand-wrapper" role="none"><tr><td><div class="'+rW+" "+rJ+'"><input class="'+rQ+'"title="'+this.localeObj.getConstant("monthExpander")+'" type="radio"></div></td><td colspan="2"><div class="'+rW+' e-monthday-element"><input type="text" tabindex="0" id="'+this.element.id+"_"+r1+'" class="'+r1+'"title="'+this.localeObj.getConstant("on")+'" /></div></td></tr><tr><td><div class="'+rW+" "+rJ+'" style="min-width: 30px;margin-bottom:18px;"><input class="'+r2+'"title="'+this.localeObj.getConstant("monthExpander")+'" type="radio"></div></td><td><div class="'+rW+' e-week-position" ><input type="text" tabindex="0" class="e-month-pos"title="'+this.localeObj.getConstant("monthPosition")+'" /></div></td><td><div class="'+rW+' e-day-position"><input type="text" tabindex="0" class="e-month-week"title="'+this.localeObj.getConstant("monthWeek")+'" /></div></td></tr></table></div></div><div class="'+rq+" e-end-on "+r0+'"><div class=e-end-on-label>'+this.localeObj.getConstant("end")+'</div><div class="'+rW+' e-end-on-left"><input type="text" tabindex="0" class="'+r3+'"title="'+this.localeObj.getConstant("end")+'" /></div><div class="'+rW+" "+r6+'" ><input type="text" tabindex="0" class="e-until-date"title="'+this.localeObj.getConstant("until")+'" /></div><div class="'+rW+" "+r4+'"><input type="text" tabindex="0" id="'+this.element.id+"_"+r5+'" class="'+r5+'"title="'+this.localeObj.getConstant("count")+'" /></div></div></div></div>'},i.prototype.getSelectedDaysData=function(){var e="BYDAY=",t=[].slice.call(this.element.querySelectorAll(".e-days button."+r9)),i=["SU","MO","TU","WE","TH","FR","SA"];this.rotateArray(i,this.firstDayOfWeek);for(var n=0;n<t.length;n++)e+=i[parseInt(t[parseInt(n.toString(),10)].getAttribute("data-index"),10)]+(n===t.length-1?"":",");return e+";"},i.prototype.getSelectedMonthData=function(){return this.onWeekDay.checked?"BYDAY="+this.monthWeekDays.value+";BYSETPOS="+this.monthWeekPos.value+";":"BYMONTHDAY="+this.monthDate.value+";"},i.prototype.getIntervalData=function(){return"INTERVAL="+this.repeatInterval.value+";"},i.prototype.getEndOnCount=function(){return"COUNT="+this.recurrenceCount.value+";"},i.prototype.getYearMonthRuleData=function(){return"BYMONTH="+this.monthValue.value+";"},i.prototype.updateWeekButton=function(e){var t=["SU","MO","TU","WE","TH","FR","SA"];this.rotateArray(t,this.firstDayOfWeek);for(var i=0,n=this.dayButtons;i<n.length;i++){var r=n[i],a=parseInt(r.element.getAttribute("data-index"),10);-1!==e.indexOf(t[parseInt(a.toString(),10)])?r.setProperties({isPrimary:!0}):r.setProperties({isPrimary:!1})}},i.prototype.updateMonthUI=function(){if(this.ruleObject.monthDay.length)this.monthDate.setProperties({value:this.ruleObject.monthDay[0]}),this.onMonthDay.setProperties({checked:!0});else{this.onWeekDay.setProperties({checked:!0}),this.monthWeekPos.setProperties({value:this.ruleObject.setPosition});for(var e=0,t=Object.keys(an);e<t.length;e++)if(an[""+t[e]]===this.ruleObject.day[0]){this.monthWeekDays.setProperties({value:this.ruleObject.day[0]});break}}},i.prototype.updateUI=function(e,t){switch(this.repeatInterval.setProperties({value:this.ruleObject.interval}),t){case"until":this.untilDateObj.setProperties({value:this.ruleObject.until});break;case"count":this.recurrenceCount.setProperties({value:this.ruleObject.count})}switch(e){case"weekly":this.updateWeekButton(this.ruleObject.day);break;case"yearly":this.monthValue.setProperties({index:this.ruleObject.month[0]-1}),this.updateMonthUI();break;case at:this.updateMonthUI()}},i.prototype.getUntilData=function(){return this.untilDateObj.value?"UNTIL="+eu(this.untilDateObj.value)+";":""},i.prototype.destroyComponents=function(){this.recurrenceCount.isDestroyed||(this.recurrenceCount.destroy(),this.recurrenceCount=null),this.monthDate.isDestroyed||(this.monthDate.destroy(),this.monthDate=null),this.repeatInterval.isDestroyed||(this.repeatInterval.destroy(),this.repeatInterval=null),this.untilDateObj.isDestroyed||(this.untilDateObj.destroy(),this.untilDateObj=null),this.repeatType.isDestroyed||(this.repeatType.destroy(),this.repeatType=null),this.endType.isDestroyed||(this.endType.destroy(),this.endType=null),this.monthWeekPos.isDestroyed||(this.monthWeekPos.destroy(),this.monthWeekPos=null),this.monthWeekDays.isDestroyed||(this.monthWeekDays.destroy(),this.monthWeekDays=null),this.monthValue.isDestroyed||(this.monthValue.destroy(),this.monthValue=null),this.onMonthDay.isDestroyed||(this.onMonthDay.destroy(),this.onMonthDay=null),this.onWeekDay.isDestroyed||(this.onWeekDay.destroy(),this.onWeekDay=null),this.dayButtons.forEach(function(e){e.isDestroyed||e.destroy()}),this.dayButtons=[],this.monthButtons.forEach(function(e){e.isDestroyed||e.destroy()}),this.monthButtons=[]},i.prototype.resetFields=function(){this.startState("none",this.endTypes[0],this.startDate),this.setDefaultValue()},i.prototype.updateRuleUntilDate=function(e){if(this.untilDateObj.value&&e){var t=this.untilDateObj.value,i=new Date(t.getFullYear(),t.getMonth(),t.getDate(),e.getHours(),e.getMinutes(),e.getMilliseconds());this.untilDateObj.setProperties({value:i})}},i.prototype.getCalendarMode=function(){return this.calendarMode.toLowerCase()},i.prototype.getRuleSummary=function(e){return void 0===e&&(e=this.getRecurrenceRule()),W(e,this.localeObj,this.locale,this.calendarMode)},i.prototype.getRecurrenceDates=function(e,i,n,r,a){return a=t.isNullOrUndefined(a)?this.startDate:a,z(e,i,n,this.firstDayOfWeek,r,a,this.calendarMode)},i.prototype.getRecurrenceRule=function(){var e="FREQ=";switch(this.repeatType.value){case"daily":e+="DAILY;";break;case"weekly":e+="WEEKLY;"+this.getSelectedDaysData();break;case at:e+="MONTHLY;"+this.getSelectedMonthData();break;case"yearly":e+="YEARLY;"+this.getSelectedMonthData()+this.getYearMonthRuleData();break;case"none":return""}switch(e+=this.getIntervalData(),this.endType.value){case"until":e+=this.getUntilData();break;case"count":e+=this.getEndOnCount()}return e},i.prototype.setRecurrenceRule=function(e,t){if(void 0===t&&(t=this.startDate),e){this.renderStatus=!1,this.ruleObject=ep(e);var i=this.ruleObject.count?"count":this.ruleObject.until?"until":"never";switch(this.ruleObject.freq){case"DAILY":this.startState("daily",i,t),this.updateUI("daily",i);break;case"WEEKLY":this.startState("weekly",i,t),this.updateUI("weekly",i);break;case"MONTHLY":this.startState(at,i,t),this.updateUI(at,i);break;case"YEARLY":this.startState("yearly",i,t),this.updateUI("yearly",i)}this.renderStatus=!0,this.triggerChangeEvent()}else this.repeatType.setProperties({value:"none"})},i.prototype.detachInputs=function(){for(var e=0,i=[].slice.call(this.element.querySelectorAll("input"));e<i.length;e++){var n=i[e];t.detach(n)}},i.prototype.destroy=function(){if(!this.isDestroyed){this.destroyComponents(),e.prototype.destroy.call(this);var i=["e-"+this.getModuleName()];for(this.cssClass&&(i=i.concat(this.cssClass.split(" "))),t.removeClass([this.element],i),this.detachInputs();this.element.firstElementChild;)this.element.removeChild(this.element.firstElementChild)}},i.prototype.getModuleName=function(){return"recurrenceeditor"},i.prototype.getPersistData=function(){return this.addOnPersist([])},i.prototype.render=function(){this.initialize(),this.rtlClass(this.enableRtl),this.renderStatus=!0,this.renderComplete()},i.prototype.onPropertyChanged=function(e,i){for(var n=0,r=Object.keys(e);n<r.length;n++)switch(r[n]){case"startDate":this.selectMonthDay(e.startDate),this.updateUntilDate(e.startDate),this.endType.setProperties({index:0});break;case"enableRtl":this.rtlClass(e.enableRtl);break;case"cssClass":i.cssClass&&t.removeClass([this.element],i.cssClass.split(" ")),e.cssClass&&t.addClass([this.element],e.cssClass.split(" "));break;case"selectedType":this.repeatType.setProperties({index:this.selectedType});break;case"minDate":this.untilDateObj.setProperties({minDate:this.minDate});break;case"maxDate":this.untilDateObj.setProperties({maxDate:this.maxDate});break;case"value":this.getRecurrenceRule()!==this.value&&this.setRecurrenceRule(this.value);break;case"calendarMode":this.calendarMode=e.calendarMode,this.calendarUtil=ed(e.calendarMode);break;case"locale":case"frequencies":case"firstDayOfWeek":case"endTypes":this.refresh();break;case"dateFormat":this.untilDateObj.setProperties({format:e.dateFormat})}},rj([t.Property(["none","daily","weekly","monthly","yearly"])],i.prototype,"frequencies",void 0),rj([t.Property(["never","until","count"])],i.prototype,"endTypes",void 0),rj([t.Property(0)],i.prototype,"firstDayOfWeek",void 0),rj([t.Property(new Date)],i.prototype,"startDate",void 0),rj([t.Property()],i.prototype,"dateFormat",void 0),rj([t.Property("Gregorian")],i.prototype,"calendarMode",void 0),rj([t.Property()],i.prototype,"cssClass",void 0),rj([t.Property()],i.prototype,"value",void 0),rj([t.Property(new Date(1900,0,1))],i.prototype,"minDate",void 0),rj([t.Property(new Date(2099,11,31))],i.prototype,"maxDate",void 0),rj([t.Property(0)],i.prototype,"selectedType",void 0),rj([t.Event()],i.prototype,"change",void 0),i=rj([t.NotifyPropertyChanges],i)}(t.Component),au="e-field",am="e-recurrence-container",af="e-hide",av=function(){function e(e){this.parent=e,this.l10n=this.parent.localeObj,this.fields=this.parent.eventFields,this.eventWindowTime={startTime:new Date,endTime:new Date},this.renderEventWindow()}return e.prototype.renderEventWindow=function(){this.element=t.createElement("div",{id:this.parent.element.id+"_dialog_wrapper"}),this.parent.element.appendChild(this.element);var e={animationSettings:{effect:"Zoom"},content:this.getEventWindowContent(),cssClass:nD,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,height:this.parent.isAdaptive?"100%":"auto",minHeight:"300px",isModal:!0,showCloseIcon:!this.parent.isAdaptive,target:document.body,visible:!1,width:"500px",beforeOpen:this.onBeforeOpen.bind(this),beforeClose:this.onBeforeClose.bind(this)};this.parent.isAdaptive?(e.cssClass=nD+" "+tb,this.parent.editorHeaderTemplate||(e.header='<div class="e-title-header"><div class="e-back-icon e-icons"></div><div class="e-title-text">'+this.l10n.getConstant("newEvent")+'</div><div class="e-save-icon e-icons"></div></div>')):(this.parent.editorFooterTemplate||this.renderDialogButtons(e),this.parent.editorHeaderTemplate||(e.header='<div class="e-title-text">'+this.l10n.getConstant("newEvent")+"</div>")),this.dialogObject=new i.Dialog(e,this.element),this.dialogObject.element.querySelector(".e-dlg-closeicon-btn")&&this.dialogObject.element.querySelector(".e-dlg-closeicon-btn").setAttribute("title",this.l10n.getConstant("close")),this.addEventHandlers(),t.addClass([this.element.parentElement],nD+"-container"),t.EventHandler.add(this.dialogObject.element,"keydown",this.preventEventSave,this),this.applyFormValidation()},e.prototype.renderDialogButtons=function(e){e.buttons=[{buttonModel:{content:this.l10n.getConstant("deleteButton"),cssClass:nt,disabled:!this.parent.eventSettings.allowDeleting||this.parent.readonly},click:this.eventDelete.bind(this)},{buttonModel:{content:this.l10n.getConstant("saveButton"),cssClass:"e-primary "+nR,isPrimary:!0,disabled:!this.parent.eventSettings.allowAdding||this.parent.readonly},click:this.eventSave.bind(this)},{buttonModel:{cssClass:nH,content:this.l10n.getConstant("cancelButton")},click:this.dialogClose.bind(this)}]},e.prototype.addEventHandlers=function(){var e=this.element.querySelector(".e-back-icon"),i=this.element.querySelector(".e-save-icon");!this.parent.isAdaptive||t.isNullOrUndefined(e)||t.isNullOrUndefined(i)||(t.EventHandler.add(e,"click",this.dialogClose,this),t.EventHandler.add(i,"click",this.eventSave,this))},e.prototype.refresh=function(){this.destroy(!0),this.renderEventWindow()},e.prototype.refreshRecurrenceEditor=function(){if(this.recurrenceEditor){var e=this.recurrenceEditor.element;this.recurrenceEditor.destroy(),this.createRecurrenceEditor(e)}},e.prototype.setRecurrenceEditor=function(e){this.parent.editorTemplate&&(this.recurrenceEditor=e)},e.prototype.openEditor=function(e,i,n,r){if(this.parent.currentAction=i,this.parent.removeNewEventElement(),this.parent.quickPopup&&this.parent.quickPopup.quickPopupHide(!0),this.parent.inlineModule.removeInlineAppointmentElement(),"Add"===i){var a={};this.cellClickAction=!n,this.parent.activeCellsData=e;var s=e;this.cellClickAction?this.convertToEventData(s,a):(this.parent.activeCellsData={startTime:s.startTime||s[this.fields.startTime],endTime:s.endTime||s[this.fields.endTime],isAllDay:s.isAllDay||s[this.fields.isAllDay],element:s.element,groupIndex:s.groupIndex},a=s),e=a}switch(t.isNullOrUndefined(this.parent.editorHeaderTemplate)||(this.parent.resetTemplates(["editorHeaderTemplate"]),this.parent.isAdaptive&&!this.parent.editorFooterTemplate?this.dialogObject.header=this.createAdaptiveHeaderElement(e):this.dialogObject.header=this.getDialogHeader(e)),t.isNullOrUndefined(this.parent.editorFooterTemplate)||(this.parent.resetTemplates(["editorFooterTemplate"]),this.dialogObject.footerTemplate=this.getDialogFooter(e)),t.isNullOrUndefined(this.parent.editorHeaderTemplate)&&t.isNullOrUndefined(this.parent.editorFooterTemplate)||(this.dialogObject.dataBind(),this.addEventHandlers()),t.isNullOrUndefined(this.parent.editorTemplate)||this.renderFormElements(this.element.querySelector(".e-schedule-form"),e),!this.parent.isAdaptive&&t.isNullOrUndefined(this.parent.editorTemplate)&&t.removeClass([this.dialogObject.element.querySelector(".e-recurrenceeditor")],tT),this.recurrenceEditor&&(this.recurrenceEditor.firstDayOfWeek=this.parent.activeViewOptions.firstDayOfWeek),i){case"Add":this.onCellDetailsUpdate(e,r);break;case"Save":case"EditOccurrence":case"EditSeries":case"EditFollowingEvents":"EditOccurrence"===i&&!this.parent.isAdaptive&&t.isNullOrUndefined(this.parent.editorTemplate)&&t.addClass([this.dialogObject.element.querySelector(".e-recurrenceeditor")],tT),this.cellClickAction=!1,this.onEventDetailsUpdate(e)}},e.prototype.setDialogContent=function(){this.dialogObject.content=this.getEventWindowContent(),this.dialogObject.dataBind(),this.applyFormValidation()},e.prototype.setDialogHeader=function(){t.isNullOrUndefined(this.parent.editorHeaderTemplate)?this.parent.isAdaptive?this.dialogObject.header='<div class="e-title-header"><div class="e-back-icon e-icons"></div><div class="e-title-text">'+this.l10n.getConstant("newEvent")+'</div><div class="e-save-icon e-icons"></div></div>':this.dialogObject.header='<div class="e-title-text">'+this.l10n.getConstant("newEvent")+"</div>":(this.parent.resetTemplates(["editorHeaderTemplate"]),this.parent.isAdaptive&&!this.parent.editorFooterTemplate?this.dialogObject.header=this.createAdaptiveHeaderElement():this.dialogObject.header=this.getDialogHeader()),this.dialogObject.dataBind(),this.addEventHandlers()},e.prototype.setDialogFooter=function(){t.isNullOrUndefined(this.parent.editorFooterTemplate)?!this.parent.isAdaptive&&t.isNullOrUndefined(this.parent.editorFooterTemplate)?this.renderDialogButtons(this.dialogObject):this.parent.isAdaptive&&t.isNullOrUndefined(this.parent.editorFooterTemplate)&&(this.dialogObject.footerTemplate=null):(this.parent.resetTemplates(["editorFooterTemplate"]),this.dialogObject.footerTemplate=this.getDialogFooter()),this.dialogObject.dataBind()},e.prototype.createAdaptiveHeaderElement=function(e){var i=t.createElement("div",{className:"e-title-header"}),n=t.createElement("div",{className:"e-back-icon e-icons"});i.appendChild(n);var r=this.getDialogHeader(e);i.appendChild(r);var a=t.createElement("div",{className:"e-save-icon e-icons"});return i.appendChild(a),i},e.prototype.getDialogHeader=function(e){var i=[],n=this.parent.element.id+"_editorHeaderTemplate",r=document.createElement("div");return i=[].slice.call(this.parent.getEditorHeaderTemplate()(e||{},this.parent,"editorHeaderTemplate",n,!1)),t.append(i,r),r},e.prototype.getDialogFooter=function(e){var i=[],n=this.parent.element.id+"_editorFooterTemplate",r=document.createElement("div");return i=[].slice.call(this.parent.getEditorFooterTemplate()(e||{},this.parent,"editorFooterTemplate",n,!1)),t.append(i,r),r},e.prototype.preventEventSave=function(e){this.parent&&!this.parent.allowKeyboardInteraction&&"Enter"===e.code&&(this.isEnterKey=!0)},e.prototype.onBeforeOpen=function(e){var i=this,n=this.eventData[this.fields.endTime].getTime(),r={type:"Editor",data:this.eventData,cancel:!1,element:this.element,target:this.cellClickAction?this.parent.activeCellsData.element:this.parent.activeEventData.element};this.cellClickAction&&(r.duration=this.getSlotDuration());var s=this.getInstance(nR);s&&(s.disabled=!(this.cellClickAction?this.parent.eventSettings.allowAdding:this.parent.eventSettings.allowEditing),s.dataBind());var o=this.getInstance(nt);o&&(o.disabled=!this.parent.eventSettings.allowDeleting,o.dataBind());var l=new a.Deferred;return this.parent.trigger(e5,r,function(r){if(e.cancel=r.cancel,i.duration=i.cellClickAction?r.duration:null,i.eventData[i.fields.endTime].getTime()!==n||i.cellClickAction||0!==i.eventData[i.fields.endTime].getHours()||0!==i.eventData[i.fields.endTime].getMinutes()||(i.eventData=t.extend({},i.eventData,null,!0),i.trimAllDay(i.eventData)),i.refreshDateTimePicker(i.duration),i.cellClickAction&&r.duration!==i.getSlotDuration()&&t.isNullOrUndefined(i.parent.editorTemplate)){var a=i.getInstance(nx),s=i.getInstance(nM);s.value=new Date(a.value.getTime()+tf*r.duration),s.dataBind()}i.parent.editorTemplate&&i.element.querySelector(".e-recurrenceeditor")&&!i.recurrenceEditor&&(i.recurrenceEditor=i.getInstance("e-recurrenceeditor")),l.resolve(e)}),l},e.prototype.onBeforeClose=function(e){var t=this;e.isInteracted&&(this.isCrudAction=!1);var i={type:"Editor",event:e.event||this.dialogEvent,data:this.eventCrudData,cancel:!1,element:this.element,target:this.cellClickAction?this.parent.activeCellsData.element:this.parent.activeEventData.element},n=new a.Deferred;return this.parent.trigger(e8,i,function(i){e.cancel=i.cancel,i.cancel||(t.isCrudAction&&(e.cancel=t.processCrudActions(i.data),t.isCrudAction=e.cancel),t.isCrudAction||(t.resetForm(),t.parent.eventBase.focusElement(!0),t.eventCrudData=null)),n.resolve(e)}),n},e.prototype.getEventWindowContent=function(){var e=t.createElement("div",{className:"e-form-container"}),i=t.createElement("form",{id:this.parent.element.id+"EditForm",className:nw,attrs:{onsubmit:"return false;"}});return this.renderFormElements(i),e.appendChild(i),e},e.prototype.renderFormElements=function(e,i){var n=this;if(t.isNullOrUndefined(this.parent.editorTemplate))e.appendChild(this.getDefaultEventWindowContent());else{if(i){this.fieldValidator&&(this.fieldValidator.destroy(),this.fieldValidator=null),this.recurrenceEditor&&(this.recurrenceEditor.destroy(),this.recurrenceEditor=null),this.destroyComponents();for(var r=0,a=[].slice.call(e.children);r<a.length;r++){var s=a[r];t.remove(s)}this.parent.resetTemplates(["editorTemplate"])}var o=this.parent.element.id+"_editorTemplate",l=[].slice.call(this.parent.getEditorTemplate()(i||{},this.parent,"editorTemplate",o,!1));t.append(l,e),this.parent.renderTemplates(function(){n.element&&n.applyFormValidation()})}},e.prototype.getDefaultEventWindowContent=function(){var e=this.createDivElement("e-dialog-parent"),i=this.createDivElement("e-title-location-row");e.appendChild(i),i.appendChild(this.renderTextBox(nS)),i.querySelector("."+nS).setAttribute("title",this.parent.editorTitles.subject),i.appendChild(this.renderTextBox(nO)),i.querySelector("."+nO).setAttribute("title",this.parent.editorTitles.location);var n=this.createDivElement("e-start-end-row");e.appendChild(n),n.appendChild(this.renderDateTimePicker(nx,this.onTimeChange.bind(this))),n.querySelector("."+nx).setAttribute("title",this.parent.editorTitles.startTime),n.appendChild(this.renderDateTimePicker(nM)),n.querySelector(".e-end").setAttribute("title",this.parent.editorTitles.endTime);var r=this.createDivElement("e-all-day-time-zone-row");e.appendChild(r),r.appendChild(this.renderCheckBox(nC)),r.appendChild(this.renderCheckBox(nT));var a=this.createDivElement(nA);e.appendChild(a),a.appendChild(this.renderDropDown(nN)),a.appendChild(this.renderDropDown(nP));var o=this.createDivElement("e-repeat-parent-row");e.appendChild(o);var l=this.renderCheckBox(nE),h=t.createElement("span",{className:am}),p=t.createElement("button",{className:"e-recurrence-edit-button",attrs:{type:"button",title:this.l10n.getConstant("editRecurrence")}});if(this.buttonObj=new s.Button({iconCss:"e-recurrence-edit e-icons",cssClass:"e-medium "+this.parent.cssClass}),h.appendChild(p),this.buttonObj.appendTo(p),l.appendChild(h),o.appendChild(l),this.parent.isAdaptive?t.EventHandler.add(p,"click",this.loadRecurrenceEditor,this):this.createRecurrenceEditor(e),this.parent.resourceCollection.length>0){for(var c=this.createDivElement("e-resources-row"),d=0,u=this.parent.resourceBase.resourceCollection;d<u.length;d++){var m=u[d];c.appendChild(this.renderResourceDetails(m))}e.appendChild(c)}var f=this.createDivElement(nV+"-row");f.appendChild(this.renderTextBox(nV)),f.querySelector("."+nV).setAttribute("title",this.parent.editorTitles.description),e.appendChild(f);var v=t.createElement("button",{attrs:{type:"hidden",title:"submit",style:"display:none"}});return e.appendChild(v),e},e.prototype.createRecurrenceEditor=function(e){var i=t.createElement("div",{id:this.parent.element.id+"_recurrence_editor"});e.appendChild(i),this.recurrenceEditor=this.renderRecurrenceEditor(),this.recurrenceEditor.appendTo(i),this.updateMinMaxDateToEditor()},e.prototype.createDivElement=function(e){return t.createElement("div",{className:e})},e.prototype.createInputElement=function(e,i,n){return t.createElement(n||"input",{className:e,attrs:{type:"text",name:i,value:"",id:i,title:""===this.l10n.getConstant(i.charAt(0).toLowerCase()+i.slice(1))?i:this.l10n.getConstant(i.charAt(0).toLowerCase()+i.slice(1))}})},e.prototype.getSlotDuration=function(){return this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount},e.prototype.renderDateTimePicker=function(e,i){var n=this.createDivElement(e+"-container"),a=this.getFieldName(e),s=this.createInputElement(e+" "+au,a);return n.appendChild(s),new r.DateTimePicker({change:i,firstDayOfWeek:this.parent.activeViewOptions.firstDayOfWeek,calendarMode:this.parent.calendarMode,min:this.parent.minDate,max:new Date(new Date(+this.parent.maxDate).setHours(23,59,59)),cssClass:this.parent.cssClass,enableRtl:this.parent.enableRtl,locale:this.parent.locale,floatLabelType:"Always",timeFormat:this.parent.activeViewOptions.timeFormat,format:(t.isNullOrUndefined(this.parent.dateFormat)?this.getFormat("dateFormats"):this.parent.dateFormat)+" "+this.parent.activeViewOptions.timeFormat,placeholder:this.getFieldLabel(e),step:this.getSlotDuration(),width:"100%"}).appendTo(s),n},e.prototype.refreshDateTimePicker=function(e){for(var t=0,i=[].slice.call(this.element.querySelectorAll(".e-start,.e-end"));t<i.length;t++){var n=i[t].ej2_instances[0];n.firstDayOfWeek=this.parent.activeViewOptions.firstDayOfWeek,n.timeFormat=this.parent.activeViewOptions.timeFormat,n.step=e||this.getSlotDuration(),n.dataBind()}},e.prototype.onTimeChange=function(){var e=this.getInstance(nx);if(e.element.parentElement.classList.contains("e-input-focus")){var i=this.getInstance(nM),n=0;this.cellClickAction?(n=tf*this.duration,this.eventWindowTime.startTime=e.value):n=this.eventData[this.fields.endTime].getTime()-this.eventData[this.fields.startTime].getTime();var r=t.isNullOrUndefined(e.value)?null:new Date(e.value.getTime()+n);this.cellClickAction&&(this.eventWindowTime.endTime=r),i.value=r,i.dataBind()}this.recurrenceEditor&&this.recurrenceEditor.updateRuleUntilDate(this.eventWindowTime.startTime)},e.prototype.renderResourceDetails=function(e){var i=e.field,n="e-"+i,r=e.title,a=this.createDivElement(n+"-container e-resources"),s=this.createInputElement(n+" "+au,i);a.appendChild(s);var o=function(t){return'<div class="e-resource-template"><div class="e-resource-color" style="background-color:'+t[e.colorField]+'"></div><div class="e-resource-text">'+t[e.textField]+"</div></div>"};return(t.initializeCSPTemplate(o,e),e.allowMultiple)?new l.MultiSelect({enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,cssClass:this.parent.cssClass||"",dataSource:e.dataSource,change:this.onMultiselectResourceChange.bind(this),itemTemplate:o,fields:{text:e.textField,value:e.idField},htmlAttributes:{title:r,name:i},floatLabelType:"Always",placeholder:r,popupHeight:"230px",popupWidth:"447px",mode:"Box"}).appendTo(s):new l.DropDownList({cssClass:this.parent.cssClass||"",change:this.onDropdownResourceChange.bind(this),dataSource:e.dataSource,enableRtl:this.parent.enableRtl,fields:{text:e.textField,value:e.idField},htmlAttributes:{title:r,name:i},floatLabelType:"Always",placeholder:r,popupHeight:"230px",popupWidth:"447px",itemTemplate:o}).appendTo(s),a},e.prototype.renderDropDown=function(e){var t=this,i=this.getFieldName(e),n=this.createDivElement(e+"-container"),r=this.createInputElement(e+" "+au,i);return n.appendChild(r),new l.DropDownList({allowFiltering:!0,change:this.onTimezoneChange.bind(this),cssClass:this.parent.cssClass||"",dataSource:this.parent.timezoneDataSource,enableRtl:this.parent.enableRtl,fields:{text:"Text",value:"Value"},filterBarPlaceholder:this.parent.localeObj.getConstant("searchTimezone"),noRecordsTemplate:this.parent.localeObj.getConstant("noRecords"),filtering:function(e){var i=new a.Query;i=""!==e.text?i.where("Text","contains",e.text,!0):i,e.updateData(t.parent.timezoneDataSource,i)},htmlAttributes:{title:this.getFieldLabel(e),name:i},floatLabelType:"Always",placeholder:this.getFieldLabel(e),popupHeight:"230px"}).appendTo(r),n},e.prototype.onMultiselectResourceChange=function(e){if(e.value&&this.parent.activeViewOptions.group.byGroupID&&!(this.parent.resourceCollection.length<=1)){for(var i=this.parent.resourceBase.resourceCollection,n=e.element.getAttribute("name")||this.getColumnName(e.element),r=0;r<i.length;r++)if(i[parseInt(r.toString(),10)].field===n&&r<i.length-1){for(var a=this.createInstance(r),s=[],o=function(n){var a=i[r+1],o=a.dataSource.filter(function(t){return t[a.groupIDField]===e.value[parseInt(n.toString(),10)]})[0],h=t.isNullOrUndefined(o)?null:o[i[r+1].groupIDField],p=l.filterDatasource(r,h);s=s.concat(p)},l=this,h=0;h<e.value.length;h++)o(h);a.dataSource=s,a.dataBind()}}},e.prototype.createInstance=function(e){var t=this.parent.resourceBase.resourceCollection[e+1],i=this.element.querySelector(".e-"+t.field).ej2_instances[0];return i.clear(),i},e.prototype.onDropdownResourceChange=function(e){if(e.value&&!(this.parent.resourceCollection.length<=1)&&this.parent.activeViewOptions.group.byGroupID){for(var t=e.element.getAttribute("name")||this.getColumnName(e.element),i=this.parent.resourceBase.resourceCollection,n=0;n<i.length;n++)if(n<i.length-1&&i[parseInt(n.toString(),10)].field===t){var r=this.createInstance(n),a=e.itemData[i[parseInt(n.toString(),10)].idField];r.dataSource=this.filterDatasource(n,a),r.dataBind();var s=r.dataSource.length>0?r.dataSource[0][i[n+1].idField]:null;r.value=i[n+1].allowMultiple?[s]:s,r.dataBind()}}},e.prototype.filterDatasource=function(e,t){var i=this.parent.resourceBase.resourceCollection[e+1];return i.dataSource.filter(function(e){return e[i.groupIDField]===t})},e.prototype.onTimezoneChange=function(e){if((e.element.getAttribute("name")||this.getColumnName(e.element))===this.parent.eventFields.startTimezone){var t=this.getInstance(nN),i=this.getInstance(nP);i.value=t.value,i.dataBind()}},e.prototype.renderCheckBox=function(e){var t=this.createDivElement(e+"-container"),i=this.getFieldName(e),n=this.createInputElement(e+" "+au,i);t.appendChild(n);var r=new s.CheckBox({change:this.onChange.bind(this),cssClass:e+" "+this.parent.cssClass,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,label:this.getFieldLabel(e)});return r.appendTo(n),n.setAttribute("name",i),"Repeat"===i&&(this.repeatStatus=r),t},e.prototype.renderTextBox=function(e){var t=this.createDivElement(e+"-container"),i=this.getFieldName(e),n=e===nV?"textarea":"input",r=this.createInputElement(e+" "+au,i,n);return t.appendChild(r),o.Input.createInput({element:r,floatLabelType:"Always",properties:{enableRtl:this.parent.enableRtl,placeholder:this.getFieldLabel(e)}}),t},e.prototype.getFieldName=function(e){var t="";switch(e){case nS:t=this.fields.subject;break;case nO:t=this.fields.location;break;case nx:t=this.fields.startTime;break;case nM:t=this.fields.endTime;break;case nV:t=this.fields.description;break;case nC:t=this.fields.isAllDay;break;case nN:t=this.fields.startTimezone;break;case nP:t=this.fields.endTimezone;break;case nT:t="Timezone";break;case nE:t="Repeat"}return t},e.prototype.getFieldLabel=function(e){var t="";switch(e){case nS:t=this.parent.editorTitles.subject;break;case nO:t=this.parent.editorTitles.location;break;case nV:t=this.parent.editorTitles.description;break;case nx:t=this.parent.editorTitles.startTime;break;case nM:t=this.parent.editorTitles.endTime;break;case nN:t=this.parent.editorTitles.startTimezone;break;case nP:t=this.parent.editorTitles.endTimezone;break;case nE:t=this.parent.editorTitles.recurrenceRule;break;case nC:t=this.parent.editorTitles.isAllDay;break;case nT:t=this.l10n.getConstant("timezone")}return t},e.prototype.onChange=function(e){if(e.event&&e.event.target){var i=t.closest(e.event.target,".e-all-day,.e-time-zone,.e-repeat");i.classList.contains(nC)?this.onAllDayChange(e.checked):i.classList.contains(nT)?this.timezoneChangeStyle(e.checked):i.classList.contains(nE)&&this.onRepeatChange(e.checked)}},e.prototype.renderRepeatDialog=function(){var e=t.createElement("div");this.repeatDialogObject=new i.Dialog({header:this.l10n.getConstant("recurrence"),visible:!1,content:'<div class="e-rec-editor"></div>',closeOnEscape:!0,width:"90%",buttons:[{click:this.repeatSaveDialog.bind(this),buttonModel:{content:this.l10n.getConstant("save"),cssClass:"e-save",isPrimary:!0}},{click:this.repeatCancelDialog.bind(this),buttonModel:{cssClass:"e-cancel",content:this.l10n.getConstant("cancel")}}],target:this.element,animationSettings:{effect:"Zoom"},enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,isModal:!0,cssClass:"e-recurrence-dialog",open:this.repeatOpenDialog.bind(this)}),this.element.appendChild(e),this.repeatDialogObject.appendTo(e),this.createRecurrenceEditor(this.repeatDialogObject.element.querySelector(".e-rec-editor"))},e.prototype.loadRecurrenceEditor=function(){this.repeatDialogObject.show(),this.recurrenceEditor&&this.repeatRule&&this.recurrenceEditor.setRecurrenceRule(this.repeatRule)},e.prototype.onRepeatChange=function(e){if(e)this.repeatDialogObject||this.renderRepeatDialog(),this.recurrenceEditor.setProperties({startDate:this.repeatStartDate,selectedType:0}),this.loadRecurrenceEditor();else{this.repeatDialogObject&&this.repeatDialogObject.hide(),this.repeatRule="",this.recurrenceEditor&&(this.recurrenceEditor.setRecurrenceRule(this.repeatRule),this.updateRepeatLabel(this.repeatRule));var i=this.element.querySelector("."+am);t.addClass([i],af)}},e.prototype.repeatSaveDialog=function(){this.repeatRule=this.recurrenceEditor.getRecurrenceRule();var e=this.element.querySelector("."+am);this.recurrenceEditor.getRecurrenceRule()?t.removeClass([e],af):(t.addClass([e],af),this.repeatStatus.setProperties({checked:!1})),this.updateRepeatLabel(this.repeatRule),this.closeRepeatDialog()},e.prototype.closeRepeatDialog=function(){this.repeatDialogObject.hide()},e.prototype.repeatCancelDialog=function(){this.closeRepeatDialog(),this.recurrenceEditor&&this.recurrenceEditor.setRecurrenceRule(this.repeatTempRule),this.repeatTempRule||this.repeatStatus.setProperties({checked:!1})},e.prototype.repeatOpenDialog=function(){this.repeatTempRule=this.recurrenceEditor.getRecurrenceRule()},e.prototype.onCellDetailsUpdate=function(e,i){if(this.parent.eventSettings.allowAdding){this.parent.isAdaptive&&i&&!this.repeatDialogObject&&this.renderRepeatDialog(),this.element.querySelector("."+nw).removeAttribute("data-id"),t.isNullOrUndefined(this.parent.editorHeaderTemplate)&&(this.element.querySelector(".e-title-text").innerHTML=this.l10n.getConstant("newEvent")),e.Timezone=!1,this.repeatStartDate=e[this.fields.startTime],this.repeatRule="",t.isNullOrUndefined(this.parent.eventSettings.fields.subject.default)||(e[this.fields.subject]=this.parent.eventSettings.fields.subject.default),t.isNullOrUndefined(this.parent.eventSettings.fields.location.default)||(e[this.fields.location]=this.parent.eventSettings.fields.location.default),t.isNullOrUndefined(this.parent.eventSettings.fields.description.default)||(e[this.fields.description]=this.parent.eventSettings.fields.description.default),this.showDetails(e),e[this.fields.recurrenceRule]&&this.recurrenceEditor&&(this.recurrenceEditor.setRecurrenceRule(e[this.fields.recurrenceRule],e[this.fields.startTime]),this.repeatRule=e[this.fields.recurrenceRule]);var n=this.element.querySelector("."+nt);if(n&&t.addClass([n],tT),this.recurrenceEditor&&(this.recurrenceEditor.setProperties({startDate:e[this.fields.startTime],selectedType:t.isNullOrUndefined(i)?t.isNullOrUndefined(e[this.fields.recurrenceRule])?0:this.recurrenceEditor.selectedType:i}),this.repeatRule=this.recurrenceEditor.value),this.parent.isAdaptive&&t.isNullOrUndefined(this.parent.editorTemplate)){var r=this.element.querySelector("."+am);e[this.fields.recurrenceRule]||i?(t.removeClass([r],af),this.repeatStatus.setProperties({checked:!0})):(t.addClass([r],af),this.repeatStatus.setProperties({checked:!1})),this.updateRepeatLabel(this.repeatRule)}else{var a=this.element.querySelector("."+nR);this.disableButton(a,!1)}this.dialogObject.show()}},e.prototype.convertToEventData=function(e,t){e.subject&&(t[this.fields.subject]=e.subject),t[this.fields.startTime]=e.startTime,t[this.fields.endTime]=e.endTime,t[this.fields.isAllDay]=e.isAllDay,e.RecurrenceRule&&(t[this.fields.recurrenceRule]=e.RecurrenceRule),(this.parent.resourceCollection.length>0||this.parent.activeViewOptions.group.resources.length>0)&&this.parent.resourceBase.setResourceValues(t)},e.prototype.applyFormValidation=function(){var e=this.element.querySelector("."+nw);if(e){var i=function(e){return e&&Object.keys(e).length>0?e:void 0},n={},r=i(this.parent.eventSettings.fields.subject.validation);t.isNullOrUndefined(r)||(n[this.parent.eventSettings.fields.subject.name]=r);var a=i(this.parent.eventSettings.fields.location.validation);t.isNullOrUndefined(a)||(n[this.parent.eventSettings.fields.location.name]=a);var s=i(this.parent.eventSettings.fields.startTime.validation);t.isNullOrUndefined(s)||(n[this.parent.eventSettings.fields.startTime.name]=s);var o=i(this.parent.eventSettings.fields.endTime.validation);t.isNullOrUndefined(o)||(n[this.parent.eventSettings.fields.endTime.name]=o);var l=i(this.parent.eventSettings.fields.description.validation);t.isNullOrUndefined(l)||(n[this.parent.eventSettings.fields.description.name]=l),this.fieldValidator=new rF,this.fieldValidator.renderFormValidator(e,n,this.element,this.parent.locale)}},e.prototype.showDetails=function(e){this.eventData=e;var i=t.extend({},e,null,!0);this.cellClickAction&&(!this.cellClickAction||t.isNullOrUndefined(this.parent.editorTemplate))||0!==i[this.fields.endTime].getHours()||0!==i[this.fields.endTime].getMinutes()||this.trimAllDay(i);for(var n=this.getFormElements(nD),r=Object.keys(i),a=0;a<n.length;a++){var s=n[a],o=s.name||this.getColumnName(s);t.isNullOrUndefined(o)||""===o||(-1!==r.indexOf(o)?this.setValueToElement(s,i[""+o]):this.setDefaultValueToElement(s))}if(t.isNullOrUndefined(this.parent.editorTemplate)){this.onAllDayChange(i[this.fields.isAllDay]);var l=this.getInstance(nT+"."+au);t.isNullOrUndefined(i[this.fields.startTimezone])&&t.isNullOrUndefined(i[this.fields.endTimezone])||(l.checked=!0,l.dataBind()),this.timezoneChangeStyle(l.checked),delete i.Timezone}},e.prototype.getColumnName=function(e){var i=e.getAttribute("data-name")||"";if(""===i){var n=!1,r="";e.classList.contains("e-dropdownlist")?(r="e-ddl",n=!0):e.classList.contains("e-multiselect")?(r="e-multiselect",n=!0):e.classList.contains("e-datetimepicker")?r="e-datetimepicker":e.classList.contains("e-datepicker")?r="e-datepicker":e.classList.contains("e-checkbox")&&(r="e-checkbox");var a=n?"."+r+":not(.e-control)":"."+r,s=t.closest(e,a)||e.querySelector("."+r);if(s){var o=s.querySelector("[name]");o&&(i=o.name)}}return i},e.prototype.onAllDayChange=function(e){var i,n=this.getInstance(nx),r=this.getInstance(nM),a=this.element.querySelector(".e-time-zone-container");e?(i=t.isNullOrUndefined(this.parent.dateFormat)?this.getFormat("dateFormats"):this.parent.dateFormat,t.addClass(this.element.querySelectorAll(".e-time-icon"),nF),t.addClass([a],tT),this.element.querySelector("."+nA)&&t.removeClass([this.element.querySelector("."+nA)],tC)):(i=t.isNullOrUndefined(this.parent.dateFormat)?this.getFormat("dateFormats")+" "+this.parent.activeViewOptions.timeFormat:this.parent.dateFormat+" "+this.parent.activeViewOptions.timeFormat,t.removeClass(this.element.querySelectorAll(".e-time-icon"),nF),t.removeClass([a],tT),this.element.querySelector(".e-checkbox-wrapper .e-time-zone").checked&&t.addClass([this.element.querySelector("."+nA)],tC)),n.format=r.format=i,this.cellClickAction&&this.updateDateTime(e,n,r),n.dataBind(),r.dataBind(),t.isNullOrUndefined(this.recurrenceEditor)||this.recurrenceEditor.updateRuleUntilDate(n.value)},e.prototype.updateDateTime=function(e,t,i){var n,r;if(e){if(n=C(new Date(this.eventWindowTime.startTime.getTime())),this.parent.activeCellsData.isAllDay){var a=S(new Date(this.eventWindowTime.endTime.getTime()),-1).getTime();r=+this.eventWindowTime.startTime>a?this.eventWindowTime.endTime:new Date(a)}else r=C(new Date(this.eventWindowTime.endTime.getTime()))}else{var s=this.parent.activeCellsData.startTime;if((n=new Date(this.eventWindowTime.startTime.getTime())).setHours(s.getHours(),s.getMinutes(),s.getSeconds()),this.parent.activeCellsData.isAllDay){var o=this.parent.getStartEndTime(this.parent.workHours.start);n.setHours(o.getHours(),o.getMinutes(),o.getSeconds()),(r=new Date(n.getTime())).setMilliseconds(tf*this.getSlotDuration())}else(r=new Date(n.getTime())).setMilliseconds(this.parent.activeCellsData.endTime.getTime()-this.parent.activeCellsData.startTime.getTime())}this.eventWindowTime={startTime:new Date(n.getTime()),endTime:new Date(r.getTime())},t.value=n,i.value=r,t.dataBind(),i.dataBind()},e.prototype.getFormat=function(e){return"en"===this.parent.locale||"en-US"===this.parent.locale?t.getValue(e+".short",t.getDefaultDateObject(this.parent.getCalendarMode())):t.getValue("main."+this.parent.locale+".dates.calendars."+this.parent.getCalendarMode()+"."+e+".short",t.cldrData)},e.prototype.onEventDetailsUpdate=function(e){if(this.parent.eventSettings.allowEditing){if(!this.parent.isAdaptive&&t.isNullOrUndefined(this.parent.editorFooterTemplate)&&t.removeClass([this.element.querySelector("."+nt)],tT),t.isNullOrUndefined(this.parent.editorHeaderTemplate)&&(this.element.querySelector(".e-title-text").innerHTML=this.l10n.getConstant("editEvent")),this.element.querySelector("."+nw).setAttribute("data-id",e[this.fields.id].toString()),t.isNullOrUndefined(this.parent.editorTemplate)){e=t.extend({},e,null,!0);var i=this.getInstance(nT+"."+au),n=void 0;e[this.fields.startTimezone]||e[this.fields.endTimezone]?(n=!0,this.parent.eventBase.timezoneConvert(e)):n=!1,e.Timezone=n,i.checked=n,i.dataBind()}if(this.showDetails(e),e[this.fields.recurrenceRule]&&this.recurrenceEditor?this.recurrenceEditor.setRecurrenceRule(e[this.fields.recurrenceRule],e[this.fields.startTime]):!this.parent.isAdaptive&&this.recurrenceEditor&&(this.recurrenceEditor.setProperties({startDate:e[this.fields.startTime]}),this.recurrenceEditor.setRecurrenceRule("")),this.repeatStartDate=e[this.fields.startTime],this.repeatRule="",e[this.fields.recurrenceRule]&&(this.recurrenceEditor&&this.recurrenceEditor.setRecurrenceRule(e[this.fields.recurrenceRule],e[this.fields.startTime]),this.repeatRule=e[this.fields.recurrenceRule]),this.parent.isAdaptive&&t.isNullOrUndefined(this.parent.editorTemplate)){var r=this.element.querySelector("."+am);e[this.fields.recurrenceRule]?(t.removeClass([r],af),this.repeatStatus.setProperties({checked:!0})):(t.addClass([r],af),this.repeatStatus.setProperties({checked:!1})),this.updateRepeatLabel(this.repeatRule)}var a=this.parent.readonly||e[this.fields.isReadonly];if(this.parent.isAdaptive){var s=this.element.querySelector(".e-save-icon");s&&(a?t.addClass([s],n3):t.removeClass([s],n3))}else{var o=this.element.querySelector("."+nR),l=this.element.querySelector("."+nt);this.disableButton(o,a),this.disableButton(l,a)}this.dialogObject.show()}},e.prototype.disableButton=function(e,t){e&&(e.ej2_instances[0].disabled=t)},e.prototype.renderRecurrenceEditor=function(){return new ad({calendarMode:this.parent.calendarMode,cssClass:this.parent.cssClass,dateFormat:this.parent.dateFormat,enableRtl:this.parent.enableRtl,firstDayOfWeek:this.parent.activeViewOptions.firstDayOfWeek,locale:this.parent.locale})},e.prototype.updateMinMaxDateToEditor=function(){var e=this.element.querySelector(".e-start"),t=this.element.querySelector(".e-end");if(e&&t){var i=e.ej2_instances[0],n=t.ej2_instances[0];i.min=this.parent.minDate,i.max=this.parent.maxDate,n.min=this.parent.minDate,n.max=this.parent.maxDate,i.dataBind(),n.dataBind()}if(this.recurrenceEditor){var r=this.recurrenceEditor.element.querySelector(".e-until-date");if(r){var a=r.ej2_instances[0];a.min=this.parent.minDate,a.max=this.parent.maxDate,a.dataBind()}}},e.prototype.updateRepeatLabel=function(e){this.parent.isAdaptive&&!this.repeatDialogObject&&this.renderRepeatDialog();var t=e?this.l10n.getConstant("repeats")+" "+this.recurrenceEditor.getRuleSummary(e):this.l10n.getConstant("repeat");this.repeatStatus.setProperties({label:t})},e.prototype.dialogClose=function(e){this.isEnterKey?this.isEnterKey=!1:(this.dialogEvent=e,this.isCrudAction=!1,this.parent.activeEventData={event:void 0,element:void 0},this.parent.currentAction=null,this.dialogObject.hide())},e.prototype.resetForm=function(){this.fieldValidator.destroyToolTip(),this.resetFormFields(),this.parent.isAdaptive||!this.recurrenceEditor||this.recurrenceEditor.isDestroyed||this.recurrenceEditor.resetFields()},e.prototype.timezoneChangeStyle=function(e){var i=this.element.querySelector("."+nA),n=this.parent.tzModule.getLocalTimezoneName();if(e){t.addClass([i],tC);var r=this.getInstance(nN),a=this.getInstance(nP),s=r.dataSource;r.value&&this.parent.timezone||s.some(function(e){return e.Value===n})||(s.push({Value:n,Text:n}),r.dataSource=s,a.dataSource=s,r.dataBind(),a.dataBind()),r.value=r.value||this.parent.timezone||n,a.value=a.value||this.parent.timezone||n,r.dataBind(),a.dataBind()}else t.removeClass([i],tC)},e.prototype.resetFormFields=function(){for(var e=0,i=this.getFormElements(nD);e<i.length;e++){var n=i[e],r=n.name||this.getColumnName(n);t.isNullOrUndefined(r)||""===r||this.setDefaultValueToElement(n)}},e.prototype.eventSave=function(e,t){if(this.isEnterKey)this.isEnterKey=!1;else{var i=this.element.querySelector("."+nw);if(!i||!i.classList.contains("e-formvalidator")||i.ej2_instances[0].validate()){var n=this.getEventDataFromEditor();this.processEventValidation(n.tempData,t)||(this.eventCrudData=n.eventData,this.dialogEvent=e,this.isCrudAction=!0,this.dialogObject.hide())}}},e.prototype.getEventDataFromEditor=function(){var e=t.extend({},this.getObjectFromFormData(nD));e.Timezone||(e[this.fields.startTimezone]=null,e[this.fields.endTimezone]=null),delete e.Timezone,delete e.Repeat,this.setDefaultValueToObject(e),e[this.fields.recurrenceRule]=this.recurrenceEditor?this.recurrenceEditor.getRecurrenceRule()||null:void 0;var i=t.extend({},e,null,!0);return e[this.fields.isAllDay]&&(e[this.fields.startTime]=t.isNullOrUndefined(e[this.fields.startTime])?null:C(new Date(e[this.fields.startTime].getTime())),e[this.fields.endTime]=t.isNullOrUndefined(e[this.fields.endTime])?null:S(C(new Date(e[this.fields.endTime].getTime())),1)),{eventData:e,tempData:i}},e.prototype.processEventValidation=function(e,i){var n;if(t.isNullOrUndefined(this.parent.editorTemplate)){if(!e[this.fields.startTime]||!e[this.fields.endTime])return this.parent.quickPopup.openValidationError("invalidDateError"),!0;if(e[this.fields.startTime]>e[this.fields.endTime])return this.parent.quickPopup.openValidationError("startEndError"),!0}if(this.recurrenceEditor&&this.recurrenceEditor.value&&""!==this.recurrenceEditor.value){"EditOccurrence"!==this.parent.currentAction&&(n=this.recurrenceValidation(e[this.fields.startTime],e[this.fields.endTime],i));var r=!0;if("seriesChangeAlert"===n&&this.parent.uiStateValues.isIgnoreOccurrence&&(r=!1),!t.isNullOrUndefined(n)&&r&&(!this.parent.enableRecurrenceValidation&&"wrongPattern"===n||this.parent.enableRecurrenceValidation))return this.parent.quickPopup.openRecurrenceValidationAlert(n),!0}return!1},e.prototype.processCrudActions=function(e){var i=this;this.parent.uiStateValues.isBlock=!1;var n=this.getResourceData(e),r=(this.parent.activeViewOptions.group.resources.length>0||this.parent.resourceCollection.length>0)&&!this.parent.activeViewOptions.group.allowGroupEdit&&!t.isNullOrUndefined(n),a=this.getEventIdFromForm();if(t.isNullOrUndefined(a))this.parent.currentAction="Add",r?this.resourceSaveEvent(e,this.parent.currentAction):(e[this.fields.id]=this.parent.eventBase.getEventMaxID(),this.parent.addEvent(e));else{var s="string"===this.parent.eventBase.getEventIDType()?a:parseInt(a,10),o=this.parent.eventsData.filter(function(e){return e[i.fields.id]===s})[0];if(t.isNullOrUndefined(o)&&(o=this.parent.blockData.filter(function(e){return e[i.fields.id]===s})[0]),(e=t.extend({},o,e))[this.fields.isReadonly])return!1;var l=void 0;if(!t.isNullOrUndefined(o[this.fields.recurrenceRule])){if(l=this.parent.currentAction,e.Guid=this.parent.activeEventData.event.Guid,"EditOccurrence"===this.parent.currentAction&&(e[this.fields.recurrenceID]?(s=e[this.fields.recurrenceID],l=null):(e[this.fields.id]=this.parent.eventBase.getEventMaxID(),e.Guid=this.parent.activeEventData.event.Guid),this.parent.enableRecurrenceValidation&&this.editOccurrenceValidation(s,e)))return!0;"EditSeries"===this.parent.currentAction||e[this.fields.id]!==o[this.fields.id]?e[this.fields.recurrenceID]=o[this.fields.id]:"EditFollowingEvents"===this.parent.currentAction&&(e[this.fields.id]=this.parent.eventBase.getEventMaxID(),e[this.fields.followingID]=o[this.fields.id])}r?this.resourceSaveEvent(e,"Save",l):this.parent.saveEvent(e,l)}return this.parent.uiStateValues.isBlock},e.prototype.getResourceData=function(e){var i=null;return t.isNullOrUndefined(this.parent.resourceBase)||t.isNullOrUndefined(this.parent.resourceBase.resourceCollection)||!(this.parent.resourceBase.resourceCollection.length>0)||(i=e[this.parent.resourceBase.resourceCollection.slice(-1)[0].field]),i},e.prototype.getObjectFromFormData=function(e){for(var i={},n=0,r=this.getFormElements(e);n<r.length;n++){var a=r[n],s=a.name||this.getColumnName(a);t.isNullOrUndefined(s)||""===s||(i[""+s]=this.getValueFromElement(a))}return i},e.prototype.setDefaultValueToObject=function(e){t.isNullOrUndefined(e[this.fields.subject])||(e[this.fields.subject]=e[this.fields.subject]||this.parent.eventSettings.fields.subject.default||this.l10n.getConstant("addTitle")),t.isNullOrUndefined(e[this.fields.location])||(e[this.fields.location]=e[this.fields.location]||this.parent.eventSettings.fields.location.default),t.isNullOrUndefined(e[this.fields.description])||(e[this.fields.description]=e[this.fields.description]||this.parent.eventSettings.fields.description.default)},e.prototype.recurrenceValidation=function(e,i,n){var r,a=this.recurrenceEditor,s=this.getInstance("e-repeat-interval.e-numerictextbox").value;if(n!==this.l10n.getConstant("ok")){var o=this.parent.activeEventData.event,l=[];if(("EditSeries"===this.parent.currentAction||"EditFollowingEvents"===this.parent.currentAction)&&!t.isNullOrUndefined(o)){var h=o[this.parent.eventFields.startTime],p=this.parent.eventBase.getSeriesEvents(this.eventData,h);if(p.length>0)l=this.parent.eventBase.getEditedOccurrences(p,h);else{var c=this.parent.eventBase.getEventById(o[this.parent.eventFields.id]);l=this.parent.eventBase.getEditedOccurrences([c],h)}"EditSeries"!==this.parent.currentAction||t.isNullOrUndefined(this.eventData[this.parent.eventFields.recurrenceException])||l.push(this.eventData)}if(l.length>0&&(r="seriesChangeAlert"),"until"===this.getInstance("e-end-on-left .e-ddl .e-dropdownlist").value&&this.getInstance("e-end-on-date .e-datepicker").value<e&&(r="wrongPattern"),t.isNullOrUndefined(r)){var d=a.value.split(";")[1].split("=")[1].split(","),u={SU:0,MO:1,TU:2,WE:3,TH:4,FR:5,SA:6},m=[],f=[],v=void 0;switch(a.value.split(";")[0].split("=")[1]){case"DAILY":(i.getTime()-e.getTime())/36e5>24*s&&(r="createError");break;case"WEEKLY":d=a.value.split(";")[1].split("=")[1].split(",");for(var g=0;g<d.length*(s+1);g++)m[parseInt(g.toString(),10)]=d.length>g?u[d[parseInt(g.toString(),10)]]:m[g-d.length]+7*s;for(g=1,v=m.sort(function(e,t){return e-t});g<v.length;g++)f.push(v[parseInt(g.toString(),10)]-v[g-1]);((i.getTime()-e.getTime())/36e5>=24*Math.min.apply(Math,f)||t.isNullOrUndefined(s))&&(r="createError");break;case"MONTHLY":i.getTime()>=new Date(+e).setMonth(e.getMonth()+s)&&(r="createError");break;case"YEARLY":i.getTime()>=new Date(+e).setFullYear(e.getFullYear()+s)&&(r="createError")}}}else i.getTime()>=new Date(+e).setMonth(e.getMonth()+s)&&(r="createError"),t.isNullOrUndefined(r)&&this.parent.quickPopup.quickDialog.hide();return t.isNullOrUndefined(s)&&(r="createError"),r},e.prototype.getRecurrenceIndex=function(e,t){for(var i,n=0;n<e.length;n++)if(t[this.fields.startTime].valueOf()===e[parseInt(n.toString(),10)][this.fields.startTime].valueOf()){i=n;break}return i},e.prototype.trimAllDay=function(e){if(e[this.fields.isAllDay]){var t=S(new Date(+e[this.fields.endTime]),-1).getTime();e[this.fields.endTime]=+e[this.fields.startTime]>t?e[this.fields.endTime]:new Date(t)}},e.prototype.editOccurrenceValidation=function(e,i,n){var r=this;void 0===n&&(n=this.eventData);var a=this.parent.getOccurrencesByID(e);this.parent.eventsData.filter(function(t){return t[r.fields.recurrenceID]===e}).map(function(e){return a.push(t.extend({},e))}),i=t.extend({},i),this.trimAllDay(i);for(var s=0;s<a.length;s++){var o=a[s];this.trimAllDay(o)}this.parent.eventBase.sortByTime(a);var l=this.getRecurrenceIndex(a,n);if(t.isNullOrUndefined(l))return!1;var h,p,c=new Date(+i[this.fields.startTime]),d=new Date(+i[this.fields.endTime]);l!==a.length-1&&(h=new Date(+a[l+1][this.fields.startTime]),p=new Date(+a[l+1][this.fields.endTime]));var u=new Date(+a[a.length-1][this.fields.endTime]);if(0===l){if(!t.isNullOrUndefined(a[l+1])){if(!(h.getTime()>=d.getTime())&&C(u).getTime()>=C(c).getTime()||C(u).getTime()<C(c).getTime())return this.parent.quickPopup.openRecurrenceValidationAlert("occurrenceAlert"),!0;if(!(C(c).getTime()<C(h).getTime()))return this.parent.quickPopup.openRecurrenceValidationAlert("sameDayAlert"),!0}return!1}var m=new Date(+a[l-1][this.fields.startTime]),f=new Date(+a[l-1][this.fields.endTime]);if(l===a.length-1){if(C(new Date(+a[a.length-1-l][this.fields.startTime])).getTime()>C(c).getTime())return this.parent.quickPopup.openRecurrenceValidationAlert("occurrenceAlert"),!0;if(!(f.getTime()<=c.getTime()&&C(c).getTime()>C(m).getTime()))return this.parent.quickPopup.openRecurrenceValidationAlert("sameDayAlert"),!0}else{if(!(C(m).getTime()<C(c).getTime()||C(new Date(+a[0][this.fields.startTime])).getTime()>C(c).getTime())||!(C(h).getTime()>C(c).getTime()||u.getTime()<c.getTime()))return this.parent.quickPopup.openRecurrenceValidationAlert("sameDayAlert"),!0;if(!(f.getTime()<=c.getTime()&&h.getTime()>=d.getTime())||C(p).getTime()<C(c).getTime()||C(m).getTime()>C(d).getTime()||!(C(c).getTime()<C(h).getTime()))return this.parent.quickPopup.openRecurrenceValidationAlert("occurrenceAlert"),!0}return!1},e.prototype.resourceSaveEvent=function(e,i,n){var r=this,a=this.parent.resourceBase.resourceCollection.slice(-1)[0],s=e[a.field];s=s instanceof Array?s.reverse():[s].reverse();for(var o=this.parent.resourceBase.lastResourceLevel,l=[],h=function(h){var c=t.extend({},e,null,!0);c[p.fields.id]=p.parent.eventBase.getEventMaxID();var d=[],u=function(){if("Save"===i&&h===s.length-1){if(d.length>0){d[0][r.fields.id]=e[r.fields.id];for(var t=1;t<d.length;t++)d[parseInt(t.toString(),10)][r.fields.id]=r.parent.eventBase.getEventMaxID(h),l.push(d[parseInt(t.toString(),10)]),r.parent.saveEvent(d[0],n)}else c[r.fields.id]=e[r.fields.id],r.parent.saveEvent(c,n)}else if(d.length>0)for(var a=0;a<d.length;a++)d[parseInt(a.toString(),10)][r.fields.id]=r.parent.eventBase.getEventMaxID(a),l.push(d[parseInt(a.toString(),10)]);else c[r.fields.id]=r.parent.eventBase.getEventMaxID(h),l.push(c)};if(p.parent.activeViewOptions.group.byGroupID&&!t.isNullOrUndefined(o)){var m=a.dataSource,f=p.parent.resourceCollection,v=void 0;if((v=f.length>1?P(m,a.idField,s[parseInt(h.toString(),10)],c,f):P(m,a.idField,s[parseInt(h.toString(),10)]))<0)return{value:void 0};for(var g=m[parseInt(v.toString(),10)][a.groupIDField],y=o.filter(function(e){return e.resourceData[a.idField]===s[parseInt(h.toString(),10)]}).filter(function(e){return e.resourceData[a.groupIDField]===g})[0].groupOrder,b=0;b<p.parent.resourceBase.resourceCollection.length;b++){var D=p.parent.resourceBase.resourceCollection[parseInt(b.toString(),10)].field;c[""+D]=y[parseInt(b.toString(),10)]instanceof Array?y[parseInt(b.toString(),10)][0]:y[parseInt(b.toString(),10)]}u()}else{for(v=0;v<p.parent.resourceBase.resourceCollection.length-1;v++)if(c[""+(D=p.parent.resourceBase.resourceCollection[parseInt(v.toString(),10)].field)]instanceof Array&&c[""+D].length>1)for(var w=0;w<c[""+D].length;w++){var C=t.extend({},c,null,!0);C[""+D]=e[""+D][parseInt(w.toString(),10)],C[a.field]=s[parseInt(h.toString(),10)],d.push(C)}else if(0===d.length)c[""+D]=e[""+D]instanceof Array?e[""+D][0]:e[""+D],c[a.field]=s[parseInt(h.toString(),10)];else for(var T=0;T<d.length;T++)d[parseInt(T.toString(),10)][""+D]=e[""+D]instanceof Array?e[""+D][0]:e[""+D];c[a.field]=s[parseInt(h.toString(),10)],u()}},p=this,c=0;c<s.length;c++){var d=h(c);if("object"==typeof d)return d.value}if(l.length>0){for(var u=0;u<l.length;u++){var m=l[u];m[this.fields.recurrenceException]=null,m[this.fields.recurrenceID]=null}this.parent.addEvent(l)}},e.prototype.getEventIdFromForm=function(){return this.element.querySelector("."+nw).getAttribute("data-id")},e.prototype.getFormElements=function(e){return e===nD?[].slice.call(this.element.querySelectorAll("."+au)):[].slice.call(this.parent.element.querySelectorAll("."+e+" ."+au))},e.prototype.getValueFromElement=function(e){return e.classList.contains("e-datepicker")?e.ej2_instances[0].value:e.classList.contains("e-datetimepicker")?e.ej2_instances[0].value:e.classList.contains("e-dropdownlist")?e.ej2_instances[0].value:e.classList.contains("e-multiselect")?e.ej2_instances[0].value:e.classList.contains("e-checkbox")?e.ej2_instances[0].checked:"checkbox"===e.type?e.checked:this.parent.enableHtmlSanitizer?t.SanitizeHtmlHelper.sanitize(e.value):e.value},e.prototype.setValueToElement=function(e,t){if(e.classList.contains("e-datepicker"))(i=e.ej2_instances[0]).value=t,i.dataBind();else if(e.classList.contains("e-datetimepicker"))(i=e.ej2_instances[0]).element.classList.contains(nx)?this.eventWindowTime.startTime=new Date(""+t):this.eventWindowTime.endTime=new Date(""+t),i.value=t,i.dataBind();else if(e.classList.contains("e-dropdownlist"))(i=e.ej2_instances[0]).value=t,i.dataBind();else if(e.classList.contains("e-multiselect"))(i=e.ej2_instances[0]).value=[],i.value=t instanceof Array?t:[t],i.dataBind();else if(e.classList.contains("e-checkbox")){var i;(i=e.ej2_instances[0]).checked=t,i.dataBind()}else"checkbox"!==e.type?e.value=t||"":e.checked=t},e.prototype.setDefaultValueToElement=function(e){if(e.classList.contains("e-datepicker"))(t=e.ej2_instances[0]).value=this.parent.getCurrentTime(),t.dataBind();else if(e.classList.contains("e-datetimepicker")){var t=e.ej2_instances[0],i=this.parent.getCurrentTime();this.eventWindowTime={startTime:i,endTime:i},t.value=i,t.dataBind()}else e.classList.contains("e-dropdownlist")?((t=e.ej2_instances[0]).value=null,t.dataBind()):e.classList.contains("e-multiselect")?((t=e.ej2_instances[0]).value=[],t.dataBind()):e.classList.contains("e-checkbox")?((t=e.ej2_instances[0]).checked=!1,t.dataBind()):"checkbox"===e.type?e.checked=!1:e.value=""},e.prototype.getInstance=function(e){var t=this.element.querySelector("."+e);return t?t.ej2_instances[0]:null},e.prototype.eventDelete=function(e){if(this.isEnterKey)this.isEnterKey=!1;else{switch(this.parent.currentAction){case"EditOccurrence":t.isNullOrUndefined(this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule])?this.parent.currentAction="Delete":this.parent.currentAction="DeleteOccurrence";break;case"EditSeries":this.parent.currentAction="DeleteSeries";break;case"Save":this.parent.currentAction="Delete";break;case"EditFollowingEvents":t.isNullOrUndefined(this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule])||(this.parent.currentAction="DeleteFollowingEvents")}this.dialogEvent=e,this.isCrudAction=!1,this.dialogObject.hide(),this.parent.quickPopup.openDeleteAlert()}},e.prototype.getRecurrenceEditorInstance=function(){return this.parent.isAdaptive&&!this.repeatDialogObject&&this.renderRepeatDialog(),this.recurrenceEditor},e.prototype.destroyComponents=function(){for(var e=0,t=this.getFormElements(nD);e<t.length;e++){var i=t[e],n=void 0;i.classList.contains("e-datetimepicker")?n=i.ej2_instances:i.classList.contains("e-datepicker")?n=i.ej2_instances:i.classList.contains("e-checkbox")?n=i.ej2_instances:i.classList.contains("e-dropdownlist")?n=i.ej2_instances:i.classList.contains("e-multiselect")?n=i.ej2_instances:i.classList.contains("e-numerictextbox")&&(n=i.ej2_instances),n&&n[0]&&n[0].destroy()}this.buttonObj&&this.buttonObj.destroy()},e.prototype.detachComponents=function(){for(var e=0,i=this.getFormElements(nD);e<i.length;e++){var n=i[e];t.detach(n)}},e.prototype.destroy=function(e){if(this.parent&&!this.parent.isDestroyed&&this.parent.resetTemplates(["editorTemplate","editorHeaderTemplate","editorFooterTemplate"]),this.destroyComponents(),this.recurrenceEditor&&(this.recurrenceEditor.destroy(),t.detach(this.recurrenceEditor.element),this.recurrenceEditor=null),this.fieldValidator&&(this.fieldValidator.destroy(),this.fieldValidator=null),this.repeatDialogObject&&(this.repeatDialogObject.destroy(),this.repeatDialogObject=null),this.detachComponents(),this.dialogObject){if(this.dialogObject.element){var i=this.dialogObject.element.querySelector("form");R(i),t.detach(i),t.EventHandler.remove(this.dialogObject.element,"keydown",this.preventEventSave)}this.dialogObject.destroy(),this.dialogObject=null}this.element&&(t.remove(this.element),this.element=null),e||(this.l10n=null,this.parent=null,this.fields=null,this.buttonObj=null,this.repeatStatus=null,this.eventWindowTime=null,this.dialogEvent=null)},e}(),ag=function(){function e(e){this.translateY=0,this.itemSize=60,this.bufferCount=3,this.renderedLength=0,this.averageRowHeight=0,this.startIndex=0,this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){!this.parent||this.parent&&this.parent.isDestroyed||this.parent.on(th,this.virtualScrolling,this)},e.prototype.removeEventListener=function(){!this.parent||this.parent&&this.parent.isDestroyed||this.parent.off(th,this.virtualScrolling)},e.prototype.getRenderedCount=function(){this.setItemSize();var e=this.isHorizontalScroll?this.parent.element.clientWidth:this.parent.element.clientHeight;return this.renderedLength=Math.ceil(e/this.itemSize)+this.bufferCount,this.renderedLength},e.prototype.renderVirtualTrack=function(e){var i=t.createElement("div",{className:iC});if(this.isHorizontalScroll){var n=this.parent.activeView.colLevels[this.parent.activeView.colLevels.length-1].length;i.style.width=n*this.itemSize+"px"}else i.style.height=this.parent.resourceBase.expandedResources.length*this.itemSize+"px";e.appendChild(i)},e.prototype.updateVirtualScrollHeight=function(){var e=this.parent.element.querySelector("."+iC),t=this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length-1].groupIndex;if(this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length-1].groupIndex!==t){var i=this.parent.element.querySelector("."+tx);this.renderedLength=i.querySelector("tbody").children.length,e.style.height=i.offsetHeight+(this.parent.resourceBase.expandedResources.length-this.renderedLength)*i.offsetHeight/this.renderedLength+"px"}else e.style.height="";this.averageRowHeight=e.offsetHeight/this.parent.resourceBase.expandedResources.length},e.prototype.updateVirtualTrackHeight=function(e){var t=this.parent.resourceBase.renderedResources.length;if(t!==this.getRenderedCount()){e.style.height=this.parent.element.querySelector(".e-content-wrap").clientHeight+"px";var i=this.parent.element.querySelector("."+tG),n=this.parent.element.querySelector("."+iw),r=this.parent.element.querySelector("."+tz);this.translateY=0,this.setTranslate(i,n,r)}else{var a=this.parent.resourceBase.renderedResources[t-1].groupIndex,s=t+(this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length-1].groupIndex-a);s=s>this.parent.resourceBase.expandedResources.length?this.parent.resourceBase.expandedResources.length:s,e.style.height=s*this.itemSize+"px"}},e.prototype.setItemSize=function(){this.isHorizontalScroll?this.itemSize=d(this.parent.activeView.element,tM)||this.itemSize:this.itemSize=c(this.parent.activeView.element,tM)||this.itemSize},e.prototype.renderEvents=function(){this.setTabIndex();var e=this.triggerScrollEvent(tn);if(this.parent.activeViewOptions&&this.parent.activeViewOptions.enableLazyLoading&&this.parent.crudModule)return e.length>0?(this.parent.crudModule.refreshProcessedData(!0,e),void this.parent.hideSpinner()):void this.parent.crudModule.refreshDataManager();this.parent.crudModule&&this.parent.crudModule.refreshProcessedData(!0),"Month"!==this.parent.currentView&&this.parent.notify(to,{}),this.parent.hideSpinner()},e.prototype.virtualScrolling=function(){var e=this;this.parent.quickPopup&&(this.parent.quickPopup.quickPopupHide(),this.parent.quickPopup.morePopup.hide());var i=this.parent.element.querySelector("."+iw);if(this.isHorizontalScroll)this.horizontalScrolling(i);else{var n=this.parent.element.querySelector("."+tG),r=this.parent.element.querySelector("."+tz),a=this.parent.element.querySelector("."+t6),s=this.parent.element.querySelector("."+tx);t.addClass([i],"e-transition"),this.renderedLength=n.querySelector("tbody").children.length;var o=parseInt(n.querySelector("tbody td").getAttribute("data-group-index"),10),l=this.parent.rowAutoHeight?s.offsetHeight-i.offsetHeight:this.bufferCount*this.itemSize,h=[];if(i.scrollTop-this.translateY<0?h=this.upScroll(i,o):i.scrollTop-this.translateY>l&&(h=this.downScroll(i,o)),!t.isNullOrUndefined(h)&&h.length>0){this.triggerScrollEvent(ti);var p=this.parent.getSelectedCells();this.focusedEle=p[p.length-1]||this.focusedEle,this.updateContent(n,i,r,h),this.setTranslate(n,i,r,a),this.parent.dragAndDropModule&&"drag"===this.parent.dragAndDropModule.actionObj.action&&this.parent.dragAndDropModule.navigationWrapper(),window.clearTimeout(this.timeValue),this.timeValue=window.setTimeout(function(){e.renderEvents()},250)}}},e.prototype.horizontalScrolling=function(e){var i=this,n=[],r=this.bufferCount*this.itemSize;if(Math.abs(e.scrollLeft)-Math.abs(this.translateY)<0?n=this.leftScroll(e):Math.abs(e.scrollLeft)-Math.abs(this.translateY)>r&&(n=this.rightScroll(e)),!t.isNullOrUndefined(n)&&n.length>0){if(this.parent.resourceBase.expandedResources.length!==n.length||this.parent.resourceBase.expandedResources[0]!==n[0]||this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length-1]!==n[n.length-1]){this.triggerScrollEvent(ti);var a=this.parent.activeView.colLevels.slice(0);this.updateHorizontalContent(e,n),t.setStyleAttribute(e.querySelector("table"),{transform:"translateX("+this.translateY+"px)"}),this.parent.activeView.colLevels=a,this.parent.dragAndDropModule&&"drag"===this.parent.dragAndDropModule.actionObj.action&&this.parent.dragAndDropModule.navigationWrapper()}window.clearTimeout(this.timeValue),this.timeValue=window.setTimeout(function(){i.renderEvents()},250)}},e.prototype.triggerScrollEvent=function(e){var i=this,n=[];if(!this.parent.activeView)return n;var r={startDate:this.parent.activeView.startDate(),endDate:this.parent.activeView.endDate(),startIndex:this.parent.resourceBase.renderedResources[0].groupIndex,endIndex:this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length-1].groupIndex,resourceData:this.parent.resourceBase.renderedResources.map(function(e){return e.resourceData}),name:e};return this.parent.trigger(e,r,function(r){e===ti?i.parent.showSpinner():e===tn&&!t.isNullOrUndefined(r.eventData)&&r.eventData.length>0&&(n=r.eventData)}),n},e.prototype.upScroll=function(e,t){var i=0;i=~~(e.scrollTop/this.itemSize)+Math.ceil(e.clientHeight/this.itemSize)-this.renderedLength,this.parent.rowAutoHeight&&(i=i>t?t-this.bufferCount:i),i=i>0?i:0;var n=this.getBufferCollection(i,i+this.renderedLength);if(this.parent.resourceBase.renderedResources=n,0===t)this.translateY=e.scrollTop;else{var r=this.parent.rowAutoHeight?this.averageRowHeight:this.itemSize;r=r>0?r:this.itemSize,this.translateY=e.scrollTop-this.bufferCount*r>0?e.scrollTop-this.bufferCount*r:0}return n},e.prototype.downScroll=function(e,t){if(this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length-1].groupIndex===this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length-1].groupIndex)return null;var i=0;i=~~(e.scrollTop/this.itemSize),this.parent.rowAutoHeight&&(i=(i=~~((e.scrollTop-this.translateY)/this.averageRowHeight)+t)>t+this.bufferCount?i:t+this.bufferCount);var n=i+this.renderedLength;n=n>this.parent.resourceBase.expandedResources.length?i+(this.parent.resourceBase.expandedResources.length-i):n;var r=this.getBufferCollection(n-this.renderedLength,n);return this.translateY=e.scrollTop,r},e.prototype.leftScroll=function(e){var t=0;return t=(t=~~(Math.abs(e.scrollLeft)/this.itemSize)+Math.ceil(e.clientWidth/this.itemSize)-this.renderedLength)>0?t:0,this.getCollection(t,t+this.renderedLength)},e.prototype.rightScroll=function(e){var t=this.parent.activeView.colLevels[this.parent.activeView.colLevels.length-1],i=~~(Math.abs(e.scrollLeft)/this.itemSize)+this.renderedLength;return i=i>t.length-1?t.length-1:i,this.getCollection(i-this.renderedLength,i)},e.prototype.getCollection=function(e,t){this.translateY=e*this.itemSize;var i=this.getResCollection(e,t);return this.parent.enableRtl&&(this.translateY=-this.translateY),i},e.prototype.getResCollection=function(e,t){var i=this.parent.activeView.colLevels[this.parent.activeView.colLevels.length-1],n=[],r={startIndex:0,endIndex:0};if(this.parent.activeViewOptions.group.byDate){if(i[parseInt(e.toString(),10)].date.getTime()===this.parent.resourceBase.expandedResources[0].date.getTime()&&i[parseInt(t.toString(),10)].date.getTime()===this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length-1].date.getTime())return this.parent.resourceBase.expandedResources;n=this.getByDateCollection(i[parseInt(e.toString(),10)],i[parseInt(t.toString(),10)],r),this.setRenderedDates(n)}else{if(i[parseInt(e.toString(),10)].groupIndex===this.parent.resourceBase.expandedResources[0].groupIndex&&i[parseInt(t.toString(),10)].groupIndex===this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length-1].groupIndex)return this.parent.resourceBase.expandedResources;n=this.getByIdCollection(i[parseInt(e.toString(),10)],i[parseInt(t.toString(),10)],r)}return"Month"!==this.parent.currentView&&(this.startIndex=r.startIndex,n=i.slice(r.startIndex,r.endIndex)),this.translateY=r.startIndex*this.itemSize,n},e.prototype.getByDateCollection=function(e,t,i){var n=this.parent.activeView.colLevels[0].filter(function(i){return e.date.getTime()<=i.date.getTime()&&i.date.getTime()<=t.date.getTime()});return this.setStartEndIndex(this.parent.activeView.colLevels[0],n[0],n[n.length-1],i),n},e.prototype.getByIdCollection=function(e,t,i){var n=this.parent.resourceBase.lastResourceLevel.filter(function(i){return e.groupIndex<=i.groupIndex&&i.groupIndex<=t.groupIndex});return this.parent.resourceBase.renderedResources=n,this.setStartEndIndex(this.parent.resourceBase.lastResourceLevel,n[0],n[n.length-1],i),n},e.prototype.setStartEndIndex=function(e,t,i,n){var r=0;e.filter(function(e){t===e?n.startIndex=r:i===e&&(n.endIndex=r+e.colSpan),r+=e.colSpan}),t===i&&(n.endIndex=n.startIndex+i.colSpan)},e.prototype.updateContent=function(e,i,n,r){var a=e.querySelector("tbody").children.length;document.activeElement&&document.activeElement.classList.contains(t$)&&(this.isResourceCell=!0,this.parent.element.focus());for(var s=0;s<a;s++)t.remove(e.querySelector("tbody tr")),t.remove(i.querySelector("tbody tr")),t.remove(n.querySelector("div"));this.parent.resourceBase.renderedResources=r;var o=this.parent.resourceBase.getContentRows(r,!0),l=this.parent.activeView.getContentRows(),h=this.parent.activeView.getEventRows(r.length);t.append(o,e.querySelector("tbody")),t.append(l,i.querySelector("tbody")),t.append(h,n)},e.prototype.updateHorizontalContent=function(e,i){this.parent.resourceBase.expandedResources=i;var n=this.parent.getSelectedCells();this.focusedEle=n[n.length-1]||this.focusedEle;for(var r=e.querySelectorAll("tbody tr").length,a=0;a<r;a++)t.remove(e.querySelector("tbody tr"));if("Month"===this.parent.currentView){this.parent.activeViewOptions.group.byDate?this.parent.activeView.colLevels[0]=i:this.parent.activeView.colLevels[this.parent.activeView.colLevels.length-2]=i;var s=this.parent.activeView.getContentRows();t.append(s,e.querySelector("tbody"))}else{var o=[].slice.call(e.querySelector("colgroup").children);for(a=0;a<o.length;a++)t.remove(o[parseInt(a.toString(),10)]);this.parent.activeView.colLevels[this.parent.activeView.colLevels.length-1]=i,s=this.parent.activeView.getContentRows();var l=e.querySelector("table"),h=e.querySelector("thead"),p=e.querySelector("colgroup");i.forEach(function(){p.appendChild(t.createElement("col"))}),h.appendChild(this.parent.eventBase.createEventWrapper("",this.startIndex>0?this.startIndex:0)),this.parent.activeViewOptions.timeScale.enable&&h.appendChild(this.parent.eventBase.createEventWrapper("timeIndicator")),t.prepend([h],l),t.append(s,e.querySelector("tbody"))}},e.prototype.getBufferCollection=function(e,t){return this.parent.resourceBase.expandedResources.slice(e,t)},e.prototype.setTranslate=function(e,i,n,r){t.setStyleAttribute(e.querySelector("table"),{transform:"translateY("+this.translateY+"px)"}),t.setStyleAttribute(i.querySelector("table"),{transform:"translateY("+this.translateY+"px)"}),t.setStyleAttribute(n,{transform:"translateY("+this.translateY+"px)"}),t.isNullOrUndefined(r)||t.setStyleAttribute(r,{transform:"translateY("+this.translateY+"px)"})},e.prototype.updateFocusedWorkCell=function(){if(this.focusedEle){var e=parseInt(this.focusedEle.getAttribute("data-date"),10),t=parseInt(this.focusedEle.getAttribute("data-group-index"),10),i=this.parent.element.querySelector("."+tM+'[data-date="'+e+'"][data-group-index="'+t+'"]');i&&this.parent.addSelectedClass([i],i,!0),this.focusedEle=null}},e.prototype.setRenderedDates=function(e){if("Month"!==this.parent.currentView){var t=e.map(function(e){return e.date});this.parent.resourceBase.renderedResources.forEach(function(e){return e.renderDates=t})}else{var i=e.map(function(e){return e.date.getDay()}),n=this.parent.activeView.renderDates.filter(function(e){return i.indexOf(e.getDay())>=0});this.parent.resourceBase.renderedResources.forEach(function(e){return e.renderDates=n})}},e.prototype.setTabIndex=function(){var e=this.parent.element.querySelector("."+tG),t=[].slice.call(this.parent.element.querySelectorAll("."+t$));t&&e&&t.forEach(function(t){t.getBoundingClientRect().top>=e.getBoundingClientRect().top&&t.setAttribute("tabindex","0")});var i=this.parent.element.querySelector("."+t$+'[tabindex="0"]');this.isResourceCell&&i&&(i.focus(),this.isResourceCell=!1)},e.prototype.destroy=function(){this.removeEventListener(),this.focusedEle=null},e}(),ay=function(){function e(e){this.parent=e}return e.prototype.render=function(e,t){void 0===t&&(t=!0),this.initializeLayout(e),this.parent.activeView&&t&&this.parent.crudModule.refreshDataManager()},e.prototype.initializeLayout=function(e){switch(this.parent.activeView&&(this.parent.resetTemplates(["cellTemplate","eventTemplate","tooltipTemplate","majorSlotTemplate","minorSlotTemplate","headerTooltipTemplate","dateHeaderTemplate","dayHeaderTemplate","monthHeaderTemplate","headerIndentTemplate","resourceHeaderTemplate","cellHeaderTemplate","dateRangeTemplate"]),this.parent.activeView.removeEventListener(),this.parent.activeView.destroy()),e){case"Day":this.parent.activeView=this.parent.dayModule;break;case"Week":this.parent.activeView=this.parent.weekModule;break;case"WorkWeek":this.parent.activeView=this.parent.workWeekModule;break;case"Month":this.parent.activeView=this.parent.monthModule;break;case"Year":this.parent.activeView=this.parent.yearModule;break;case"Agenda":this.parent.activeView=this.parent.agendaModule;break;case"MonthAgenda":this.parent.activeView=this.parent.monthAgendaModule;break;case"TimelineDay":this.parent.activeView=this.parent.timelineViewsModule,this.parent.activeView.viewClass="e-timeline-day-view";break;case"TimelineWorkWeek":this.parent.activeView=this.parent.timelineViewsModule,this.parent.activeView.viewClass="e-timeline-work-week-view";break;case"TimelineWeek":this.parent.activeView=this.parent.timelineViewsModule,this.parent.activeView.viewClass="e-timeline-week-view";break;case"TimelineMonth":this.parent.activeView=this.parent.timelineMonthModule;break;case"TimelineYear":this.parent.activeView=this.parent.timelineYearModule}if(t.isNullOrUndefined(this.parent.activeView)){var i=this.parent.viewCollections[0].option;if(i)return this.parent.setProperties({currentView:i},!0),this.parent.headerModule&&(this.parent.headerModule.updateActiveView(),this.parent.headerModule.setCalendarView()),this.initializeLayout(i);throw Error("Inject required modules")}this.parent.activeView.viewIndex=this.parent.viewIndex,this.updateLabelText(e),this.parent.activeView.addEventListener(),this.parent.activeView.getRenderDates(),this.parent.uiStateValues.isGroupAdaptive=this.parent.activeViewOptions.group.resources.length>0&&(this.parent.enableAdaptiveUI&&!this.parent.isAdaptive||this.parent.isAdaptive&&this.parent.activeViewOptions.group.enableCompactView),this.parent.virtualScrollModule&&(this.parent.virtualScrollModule.destroy(),this.parent.virtualScrollModule=null),(-1===["Agenda","MonthAgenda","Year","TimelineYear"].indexOf(this.parent.currentView)||"TimelineYear"===this.parent.currentView&&"Vertical"===this.parent.activeViewOptions.orientation)&&this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&(this.parent.virtualScrollModule=new ag(this.parent),this.parent.activeView.isTimelineView()?this.parent.uiStateValues.top=0:(this.parent.virtualScrollModule.isHorizontalScroll=!0,this.parent.uiStateValues.left=0)),this.updateHeader(),this.parent.currentTimezoneDate=this.parent.getCurrentTime(),this.parent.activeView.renderLayout(tL),this.parent.renderTemplates(),this.parent.eventTooltip&&(this.parent.eventTooltip.destroy(),this.parent.eventTooltip=null),(this.parent.eventSettings.enableTooltip||this.parent.activeViewOptions.group.resources.length>0&&this.parent.activeViewOptions.group.headerTooltipTemplate)&&(this.parent.eventTooltip=new rL(this.parent))},e.prototype.updateHeader=function(){this.parent.headerModule&&(this.parent.headerModule.setDayOfWeek(this.parent.activeViewOptions.firstDayOfWeek),this.parent.activeViewOptions.readonly?t.addClass([this.parent.element],n5):this.parent.element.classList.contains(n5)&&t.removeClass([this.parent.element],n5),this.parent.headerModule.updateDateRange(),this.parent.headerModule.updateHeaderItems("remove"))},e.prototype.updateLabelText=function(e){var t=this.parent.activeView.getLabelText(e);this.parent.element.setAttribute("role","main"),this.parent.element.setAttribute("aria-label",t)},e}(),ab=(eb=function(e,t){return(eb=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}eb(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),aD=function(e,t,i,n){var r,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(s=(a<3?r(s):a>3?r(t,i,s):r(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},aw=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return ab(i,e),aD([t.Property(!0)],i.prototype,"highlight",void 0),aD([t.Property("09:00")],i.prototype,"start",void 0),aD([t.Property("18:00")],i.prototype,"end",void 0),i}(t.ChildProperty),aC=(eD=function(e,t){return(eD=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}eD(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),aT=function(e,t,i,n){var r,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(s=(a<3?r(s):a>3?r(t,i,s):r(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},aE=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return aC(i,e),aT([t.Property(!0)],i.prototype,"enable",void 0),aT([t.Property(60)],i.prototype,"interval",void 0),aT([t.Property(2)],i.prototype,"slotCount",void 0),aT([t.Property()],i.prototype,"minorSlotTemplate",void 0),aT([t.Property()],i.prototype,"majorSlotTemplate",void 0),i}(t.ChildProperty),aS=(ew=function(e,t){return(ew=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}ew(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),aO=function(e,t,i,n){var r,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(s=(a<3?r(s):a>3?r(t,i,s):r(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},ak=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return aS(i,e),aO([t.Property("Both")],i.prototype,"templateType",void 0),aO([t.Property()],i.prototype,"header",void 0),aO([t.Property()],i.prototype,"content",void 0),aO([t.Property()],i.prototype,"footer",void 0),i}(t.ChildProperty),ax=(eC=function(e,t){return(eC=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}eC(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),aM=function(e,t,i,n){var r,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(s=(a<3?r(s):a>3?r(t,i,s):r(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},aV=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return ax(i,e),aM([t.Property()],i.prototype,"option",void 0),aM([t.Property()],i.prototype,"template",void 0),i}(t.ChildProperty),aI=function(){function e(e){this.parent=e,this.crudObj={sourceEvent:null,targetEvent:null,isCrudAction:!1}}return e.prototype.getQuery=function(){var e=this.parent.activeView.startDate(),t=this.parent.activeView.endDate();return this.parent.dataModule.generateQuery(e,t)},e.prototype.getTable=function(){return this.parent.eventSettings.query?this.parent.eventSettings.query.clone().fromTable:null},e.prototype.refreshDataManager=function(){var e=this;if(this.parent.activeView){var t=this.parent.activeView.startDate(),i=this.parent.activeView.endDate();this.parent.dataModule.getData(this.parent.dataModule.generateQuery(t,i)).then(function(t){return e.dataManagerSuccess(t)}).catch(function(t){return e.dataManagerFailure(t)})}},e.prototype.dataManagerSuccess=function(e){var i=this;!this.parent||this.parent&&this.parent.isDestroyed||this.parent.trigger(e4,e,function(e){var n=t.extend([],e.result,null,!0);i.parent.eventsData=n.filter(function(e){return!e[i.parent.eventFields.isBlock]}),i.parent.blockData=n.filter(function(e){return e[i.parent.eventFields.isBlock]}),i.refreshProcessedData(),i.parent.dragAndDropModule&&"drag"===i.parent.dragAndDropModule.actionObj.action&&i.parent.dragAndDropModule.navigationWrapper(),i.parent.trigger("dataBound",null,function(){i.parent.hideSpinner(),i.parent.isPrinting&&i.parent.notify(tr,{})})})},e.prototype.dataManagerFailure=function(e){var t=this;!this.parent||this.parent&&this.parent.isDestroyed||this.parent.trigger(e0,{error:e},function(){return t.parent.hideSpinner()})},e.prototype.refreshProcessedData=function(e,i){if(void 0===e&&(e=!1),this.parent.dragAndDropModule&&(this.parent.dragAndDropModule.actionObj.action="",t.removeClass([this.parent.element],"e-event-action")),this.parent.activeViewOptions&&this.parent.activeViewOptions.eventTemplate){var n=["eventTemplate"];if(this.crudObj.isCrudAction&&-1===["Agenda","MonthAgenda","Year","TimelineYear"].indexOf(this.parent.currentView)){n=[];for(var r=0,a=this.crudObj.sourceEvent.length;r<a;r++)n.push("eventTemplate_"+this.crudObj.sourceEvent[parseInt(r.toString(),10)].groupIndex),this.crudObj.targetEvent[parseInt(r.toString(),10)]&&this.crudObj.sourceEvent[parseInt(r.toString(),10)].groupIndex!==this.crudObj.targetEvent[parseInt(r.toString(),10)].groupIndex&&n.push("eventTemplate_"+this.crudObj.targetEvent[parseInt(r.toString(),10)].groupIndex)}n.length>0&&this.parent.resetTemplates(n)}if(e)this.parent.notify(ta,{processedData:i?this.parent.eventBase.processData(i):this.parent.eventsProcessed});else{var s=this.parent.eventsData||[],o=this.parent.blockData||[],l=s.concat(o);this.parent.notify(ta,{processedData:this.parent.eventBase?this.parent.eventBase.processData(l):[]})}},e.prototype.refreshData=function(e){var i=this,n={requestType:e.requestType,cancel:!1,data:e.data,addedRecords:e.editParams.addedRecords,changedRecords:e.editParams.changedRecords,deletedRecords:e.editParams.deletedRecords};if(this.parent.dragAndDropModule&&this.parent.dragAndDropModule.actionObj&&this.parent.dragAndDropModule.actionObj.element&&(this.parent.dragAndDropModule.actionObj.element.style.display="none"),this.parent.resizeModule&&this.parent.resizeModule.actionObj&&this.parent.resizeModule.actionObj.element&&(this.parent.resizeModule.actionObj.element.style.display="none"),this.parent.isSpecificResourceEvents()&&("eventCreated"===e.requestType||"eventRemoved"===e.requestType)){this.crudObj.isCrudAction=!0,this.crudObj.sourceEvent=[];for(var r=this,a=0,s=e.data instanceof Array?0===e.data.length&&"eventRemoved"===e.requestType?e.editParams.deletedRecords:e.data:"string"!=typeof e.data&&"number"!=typeof e.data||"eventRemoved"!==e.requestType?[e.data]:e.editParams.deletedRecords;a<s.length;a++)(function(i){r.crudObj.isCrudAction=!("eventRemoved"===e.requestType&&!t.isNullOrUndefined(i.parent));var n=r.parent.eventBase.getGroupIndexFromEvent(i);n>-1&&0===r.parent.crudModule.crudObj.sourceEvent.filter(function(e){return e.groupIndex===n}).length&&r.crudObj.isCrudAction&&r.crudObj.sourceEvent.push(r.parent.resourceBase.lastResourceLevel[parseInt(n.toString(),10)])})(s[a]);this.crudObj.targetEvent=this.crudObj.sourceEvent}this.parent.dataModule.dataManager.dataSource.offline?this.parent.trigger(e$,n,function(e){e.cancel||i.refreshDataManager()}):e.promise.then(function(){!i.parent||i.parent&&i.parent.isDestroyed||i.parent.trigger(e$,n,function(e){e.cancel||i.refreshDataManager()})}).catch(function(e){!i.parent||i.parent&&i.parent.isDestroyed||i.parent.trigger(e0,{error:e})})},e.prototype.addEvent=function(e){var i=this;if(this.parent.eventSettings.allowAdding&&!this.parent.activeViewOptions.readonly){if(!this.isBlockEvent(e)&&this.parent.eventBase.isBlockRange(e))return void this.parent.quickPopup.openValidationError("blockAlert",e);var n=e instanceof Array?e:[e];if(0===n.length)return;this.parent.trigger(eJ,{requestType:"eventCreate",cancel:!1,data:n,addedRecords:n,changedRecords:[],deletedRecords:[]},function(e){if(!e.cancel){var n=i.parent.eventFields,r={addedRecords:[],changedRecords:[],deletedRecords:[]},a=void 0;if(e.addedRecords instanceof Array){for(var s=0,o=e.addedRecords;s<o.length;s++){var l=o[s];l=i.parent.eventBase.updateEventDateTime(l);var h=t.extend({},i.parent.eventBase.processTimezone(l,!0),null,!0);r.addedRecords.push(h)}a=i.parent.dataModule.dataManager.saveChanges(r,n.id,i.getTable(),i.getQuery())}else{var p=i.parent.eventBase.processTimezone(e.addedRecords,!0);r.addedRecords.push(p),a=i.parent.dataModule.dataManager.insert(p,i.getTable(),i.getQuery())}var c={requestType:"eventCreated",cancel:!1,data:e.addedRecords,promise:a,editParams:r};i.refreshData(c)}})}},e.prototype.saveEvent=function(e,i){var n=this;if(this.parent.eventSettings.allowEditing&&!this.parent.activeViewOptions.readonly){if("EditFollowingEvents"!==this.parent.currentAction&&!this.isBlockEvent(e)&&this.parent.eventBase.isBlockRange(e))return this.parent.quickPopup.openValidationError("blockAlert",e),void(this.parent.crudModule.crudObj.isCrudAction=!1);var r=e instanceof Array?e:[e];if(0===r.length)return;if(this.parent.currentAction=i,i)switch(i){case"Save":this.processSave(e);break;case"EditOccurrence":this.processOccurrences(e,i);break;case"EditFollowingEvents":this.processFollowSeries(e,i);break;case"EditSeries":this.processEntireSeries(e,i)}else this.parent.trigger(eJ,{requestType:"eventChange",cancel:!1,data:e,addedRecords:[],changedRecords:r,deletedRecords:[]},function(e){if(!e.cancel){var i=void 0,r=n.parent.eventFields,a={addedRecords:[],changedRecords:[],deletedRecords:[]};if(e.changedRecords instanceof Array){for(var s=0,o=e.changedRecords;s<o.length;s++){var l=o[s];l=n.parent.eventBase.updateEventDateTime(l);var h=t.extend({},n.parent.eventBase.processTimezone(l,!0),null,!0);a.changedRecords.push(h)}i=n.parent.dataModule.dataManager.saveChanges(a,r.id,n.getTable(),n.getQuery())}else{var p=n.parent.eventBase.processTimezone(e.changedRecords,!0);a.changedRecords.push(p),i=n.parent.dataModule.dataManager.update(r.id,p,n.getTable(),n.getQuery())}var c=t.extend({},e.changedRecords[e.changedRecords.length-1],null,!0);n.parent.eventBase.selectWorkCellByTime([n.parent.eventBase.processTimezone(c)]);var d={requestType:"eventChanged",cancel:!1,data:e.changedRecords,promise:i,editParams:a};n.refreshData(d)}})}},e.prototype.deleteEvent=function(e,t){var i=this;if(this.parent.eventSettings.allowDeleting&&!this.parent.activeViewOptions.readonly){this.parent.currentAction=t;var n=[];if(0===(n="string"==typeof e||"number"==typeof e?this.parent.eventsData.filter(function(t){return t[i.parent.eventFields.id]===e}):e instanceof Array?e:[e]).length)return;if(t)switch(t){case"Delete":this.processDelete(n);break;case"DeleteOccurrence":this.processOccurrences(n,t);break;case"DeleteFollowingEvents":this.processFollowSeries(n,t);break;case"DeleteSeries":this.processEntireSeries(n,t)}else{var r={requestType:"eventRemove",cancel:!1,data:e,addedRecords:[],changedRecords:[],deletedRecords:n};this.parent.trigger(eJ,r,function(e){if(!e.cancel){var t=void 0,n=i.parent.eventFields,r={addedRecords:[],changedRecords:[],deletedRecords:[]};e.deletedRecords.length>1?(r.deletedRecords=r.deletedRecords.concat(e.deletedRecords),t=i.parent.dataModule.dataManager.saveChanges(r,n.id,i.getTable(),i.getQuery())):(r.deletedRecords.push(e.deletedRecords[0]),t=i.parent.dataModule.dataManager.remove(n.id,e.deletedRecords[0],i.getTable(),i.getQuery())),i.parent.eventBase.selectWorkCellByTime(e.deletedRecords);var a={requestType:"eventRemoved",cancel:!1,data:e.deletedRecords,promise:t,editParams:r};i.refreshData(a)}})}}},e.prototype.processOccurrences=function(e,i){var n=this,r=[],a=!1;if(e instanceof Array)for(var s=0;s<e.length;s++){var o=e[s];r.push({occurrence:o,parent:this.getParentEvent(o)})}else r={occurrence:e,parent:this.getParentEvent(e)};var l={requestType:"EditOccurrence"===i?"eventChange":"eventRemove",cancel:!1,addedRecords:[],changedRecords:e instanceof Array?e:[e],deletedRecords:[]};l.data=r,this.parent.trigger(eJ,l,function(e){if(!e.cancel){for(var s=n.parent.eventFields,o={addedRecords:[],changedRecords:[],deletedRecords:[]},l=r instanceof Array?r:[r],h=0,p=e.changedRecords.length;h<p;h++)(function(t,r){var h=e.changedRecords[parseInt(t.toString(),10)],p=l[parseInt(t.toString(),10)].parent,c=p[s.recurrenceException],d=void 0,u=void 0;switch(i){case"EditOccurrence":d=n.parent.eventsProcessed.filter(function(e){return e.Guid===h.Guid})[0],(u=n.excludeDateCheck(d[s.startTime],c))!==p[s.recurrenceException]?(p[s.recurrenceException]=u,h[s.recurrenceException]=eu(d[s.startTime]),h[s.recurrenceID]=p[s.id],h[s.followingID]=null,o.changedRecords.push(n.parent.eventBase.processTimezone(p,!0)),o.addedRecords.push(n.parent.eventBase.processTimezone(h,!0))):o.changedRecords.push(n.parent.eventBase.processTimezone(h,!0));break;case"DeleteOccurrence":h[s.recurrenceException]||(p[s.recurrenceException]=n.excludeDateCheck(h[s.startTime],c),o.changedRecords.push(n.parent.eventBase.processTimezone(p,!0))),h[s.id]!==p[s.id]&&(o.deletedRecords.push(h),a=!0)}})(h);var c=n.parent.dataModule.dataManager.saveChanges(o,s.id,n.getTable(),n.getQuery()),d=t.extend({},e.changedRecords[e.changedRecords.length-1],null,!0);n.parent.eventBase.selectWorkCellByTime("EditOccurrence"===i?[n.parent.eventBase.processTimezone(d)]:[d]);var u={requestType:"EditOccurrence"===i?"eventChanged":"eventRemoved",cancel:!1,data:a?e.deletedRecords:e.changedRecords,promise:c,editParams:o};n.refreshData(u)}})},e.prototype.processFollowSeries=function(e,i){var n=this,r=[];if(e instanceof Array)for(var a=0;a<e.length;a++){var s=e[a];r.push({occurrence:s,parent:this.getParentEvent(s)})}else r={occurrence:e,parent:this.getParentEvent(e)};var o={requestType:"EditFollowingEvents"===i?"eventChange":"eventRemove",cancel:!1,addedRecords:[],changedRecords:e instanceof Array?e:[e],deletedRecords:[]};o.data=r,this.parent.trigger(eJ,o,function(e){if(!e.cancel){for(var a=n.parent.eventFields,s={addedRecords:[],changedRecords:[],deletedRecords:[]},o=r instanceof Array?r:[r],l=0,h=e.changedRecords.length;l<h;l++)(function(t,r){var l=e.changedRecords[parseInt(t.toString(),10)],h=o[parseInt(t.toString(),10)].parent,p=n.parent.eventBase.getEventCollections(h,l),c=void 0;switch(i){case"EditFollowingEvents":if(n.processRecurrenceRule(h,l),c=!n.parent.eventBase.isFollowingEvent(h,l),l[a.followingID]=c?null:h[a.id],l[a.recurrenceID]=null,s.addedRecords.push(n.parent.eventBase.processTimezone(l,!0)),s.changedRecords.push(n.parent.eventBase.processTimezone(h,!0)),!n.parent.uiStateValues.isIgnoreOccurrence){if(l[a.recurrenceException]=null,p.occurrence.length>0){var d=p.occurrence.slice(-1)[0][a.recurrenceRule];-1===d.indexOf("COUNT")&&(l[a.recurrenceRule]=d)}p.follow.length>0&&(l[a.recurrenceRule]=p.follow.slice(-1)[0][a.recurrenceRule],s.deletedRecords=s.deletedRecords.concat(p.follow)),c&&(p.occurrence=p.occurrence.filter(function(e){return e[a.recurrenceID]===h[a.id]})),s.deletedRecords=s.deletedRecords.concat(p.occurrence)}break;case"DeleteFollowingEvents":n.processRecurrenceRule(h,l[a.startTime]),s.changedRecords.push(n.parent.eventBase.processTimezone(h,!0)),s.deletedRecords=s.deletedRecords.concat(p.occurrence).concat(p.follow)}})(l);var p=n.parent.dataModule.dataManager.saveChanges(s,a.id,n.getTable(),n.getQuery()),c=t.extend({},e.changedRecords[e.changedRecords.length-1],null,!0);n.parent.eventBase.selectWorkCellByTime("EditFollowingEvents"===i?[n.parent.eventBase.processTimezone(c)]:[c]);var d={requestType:"EditFollowingEvents"===i?"eventChanged":"eventRemoved",cancel:!1,data:e.changedRecords,promise:p,editParams:s};n.refreshData(d)}})},e.prototype.processEntireSeries=function(e,i){var n=this,r=[],a=!1;if(e instanceof Array)for(var s=0;s<e.length;s++){var o=e[s];r.push(this.getParentEvent(o,!0))}else r=this.getParentEvent(e,!0);var l={requestType:"EditSeries"===i?"eventChange":"eventRemove",cancel:!1,addedRecords:[],changedRecords:e instanceof Array?e:[e],deletedRecords:[]};l.data=r,this.parent.trigger(eJ,l,function(e){if(!e.cancel){for(var s=n.parent.eventFields,o={addedRecords:[],changedRecords:[],deletedRecords:[]},l=r instanceof Array?r:[r],h=0,p=e.changedRecords.length;h<p;h++)(function(t,r){var h=e.changedRecords[parseInt(t.toString(),10)],p=l[parseInt(t.toString(),10)],c=n.parent.eventBase.getEventCollections(p),d=c.follow.concat(c.occurrence);switch(i){case"EditSeries":if(h[s.id]=p[s.id],h[s.recurrenceID]=null,h[s.followingID]=null,n.parent.uiStateValues.isIgnoreOccurrence&&h[s.recurrenceException]){var u=n.parent.eventsData.filter(function(e){return e[s.id]===h[s.id]});u.length>0&&(h[s.recurrenceRule]=u[0][s.recurrenceRule])}else h[s.recurrenceException]=null,o.deletedRecords=o.deletedRecords.concat(d);o.changedRecords.push(n.parent.eventBase.processTimezone(h,!0)),n.parent.uiStateValues.isIgnoreOccurrence=!1;break;case"DeleteSeries":o.deletedRecords=o.deletedRecords.concat(d.concat(p)),a=!0}})(h);var c=n.parent.dataModule.dataManager.saveChanges(o,s.id,n.getTable(),n.getQuery()),d=t.extend({},e.changedRecords[e.changedRecords.length-1],null,!0);n.parent.eventBase.selectWorkCellByTime("EditSeries"===i?[n.parent.eventBase.processTimezone(d)]:[d]);var u={requestType:"EditSeries"===i?"eventChanged":"eventRemoved",cancel:!1,data:a?e.deletedRecords:e.changedRecords,promise:c,editParams:o};n.refreshData(u)}})},e.prototype.processDelete=function(e){for(var i=this,n=[],r=0;r<e.length;r++){var a=e[r];a[this.parent.eventFields.recurrenceRule]?n.push({occurrence:a,parent:this.getParentEvent(a)}):n.push(a)}var s={requestType:"eventRemove",cancel:!1,addedRecords:[],changedRecords:[],deletedRecords:e};s.data=n,this.parent.trigger(eJ,s,function(e){if(!e.cancel){for(var r=i.parent.eventFields,a={addedRecords:[],changedRecords:[],deletedRecords:[]},s=0,o=e.deletedRecords.length;s<o;s++)(function(s,o){var l=t.isNullOrUndefined(e.deletedRecords[parseInt(s.toString(),10)][i.parent.eventFields.recurrenceRule]);if(!l){var h=n[parseInt(s.toString(),10)].parent,p=a.changedRecords.filter(function(e){return e[r.id]===h[r.id]}),c=e.deletedRecords[parseInt(s.toString(),10)][r.startTime];if(p.length>0){var d=p[0];d[r.recurrenceException]=i.excludeDateCheck(c,d[r.recurrenceException])}else h[r.recurrenceException]=i.excludeDateCheck(c,h[r.recurrenceException]);0===p.length&&a.changedRecords.push(i.parent.eventBase.processTimezone(h,!0)),l=e.deletedRecords[parseInt(s.toString(),10)][r.id]!==h[r.id]}l&&a.deletedRecords.push(e.deletedRecords[parseInt(s.toString(),10)])})(s);var l=i.parent.dataModule.dataManager.saveChanges(a,r.id,i.getTable(),i.getQuery());i.parent.eventBase.selectWorkCellByTime(e.deletedRecords);var h={requestType:"eventRemoved",cancel:!1,data:e.deletedRecords,promise:l,editParams:a};i.refreshData(h)}})},e.prototype.processSave=function(e){for(var i=this,n=e instanceof Array?e:[e],r=[],a=0;a<n.length;a++){var s=n[a];s[this.parent.eventFields.recurrenceRule]?r.push({occurrence:s,parent:this.getParentEvent(s)}):r.push(s)}var o={requestType:"eventChange",cancel:!1,addedRecords:[],changedRecords:n,deletedRecords:[]};o.data=r,this.parent.trigger(eJ,o,function(e){if(!e.cancel){for(var n=i.parent.eventFields,r={addedRecords:[],changedRecords:[],deletedRecords:[]},a=0,s=e.changedRecords;a<s.length;a++){var o=s[a];if(!t.isNullOrUndefined(o[n.recurrenceRule])&&t.isNullOrUndefined(o[n.recurrenceException])){var l=eu(o[n.startTime]),h=i.getParentEvent(o);h[n.recurrenceException]=t.isNullOrUndefined(h[n.recurrenceException])?l:h[n.recurrenceException].concat(","+l),o[n.id]=i.parent.getEventMaxID(),o[n.recurrenceException]=l,r.addedRecords.push(i.parent.eventBase.processTimezone(o,!0)),r.changedRecords.push(i.parent.eventBase.processTimezone(h,!0))}else r.changedRecords.push(i.parent.eventBase.processTimezone(o,!0))}var p=i.parent.dataModule.dataManager.saveChanges(r,n.id,i.getTable(),i.getQuery()),c=t.extend({},e.changedRecords[e.changedRecords.length-1],null,!0);i.parent.eventBase.selectWorkCellByTime([i.parent.eventBase.processTimezone(c)]);var d={requestType:"eventChanged",cancel:!1,data:e.changedRecords,promise:p,editParams:r};i.refreshData(d)}})},e.prototype.getParentEvent=function(e,t){void 0===t&&(t=!1);var i=this.parent.eventBase.getParentEvent(e,t)||e;return(i[this.parent.eventFields.startTimezone]||i[this.parent.eventFields.endTimezone])&&this.parent.eventBase.timezoneConvert(i),i},e.prototype.excludeDateCheck=function(e,i){var n=this.parent.timezone||this.parent.tzModule.getLocalTimezoneName();n&&(e=this.parent.tzModule.remove(new Date(+e.getTime()),n));var r=eu(e);return t.isNullOrUndefined(i)?i=r:-1===i.indexOf(r)&&(i=t.isNullOrUndefined(i)?r:i+","+r),i},e.prototype.processRecurrenceRule=function(e,t){var i,n=this.parent.eventFields,r=e[n.recurrenceRule];if(t instanceof Date)i=new Date(+t);else{i=new Date(+t[n.startTime]);var a=t[n.recurrenceRule];if(a){var s=e[n.startTime],o=z(s,a,"DeleteFollowingEvents"===this.parent.currentAction?t[n.recurrenceException]:null,this.parent.activeViewOptions.firstDayOfWeek),l=new Date(o.slice(-1)[0]);l.setHours(i.getHours(),i.getMinutes(),i.getSeconds()),i.setHours(s.getHours(),s.getMinutes(),s.getSeconds()),t[n.recurrenceRule]=this.getUpdatedRecurrenceRule(a,new Date(+l),!1)}}e[n.recurrenceRule]=this.getUpdatedRecurrenceRule(r,S(new Date(i.getTime()),-1),!0)},e.prototype.getUpdatedRecurrenceRule=function(e,t,i){for(var n="",r=0,a=e.split(";");r<a.length;r++){var s=a[r];if(""!==s){var o=s.split("=")[0],l=s.split("=")[1];"COUNT"!==o&&"UNTIL"!==o||(l=eu(t),s=s.replace(s,"UNTIL="+l)),n+=s+";"}}return i&&-1===n.indexOf("UNTIL")&&(n+="UNTIL="+eu(t)),n},e.prototype.isBlockEvent=function(e){for(var t=!1,i=0,n=e instanceof Array?e:[e];i<n.length;i++)t=n[i][this.parent.eventFields.isBlock]||!1;return t},e.prototype.destroy=function(){this.crudObj=null,this.parent=null},e}(),aA=function(){function e(e){this.parent=e,t.EventHandler.add(this.parent.element,"mouseover",this.onHover,this)}return e.prototype.cellMouseDown=function(e){this.isPreventAction(e)||this.parent.notify(tu,{event:e})},e.prototype.cellClick=function(e){var i=this;if(!this.isPreventAction(e)){var n=t.closest(e.target,".e-work-cells,.e-all-day-cells,.e-header-cells");if(!t.isNullOrUndefined(n)){if(t.isNullOrUndefined(t.closest(e.target,"."+iR))){var r=t.closest(e.target,"."+iM),a=this.parent.getNavigateView(),s=this.parent.currentView===a;if(t.isNullOrUndefined(r)||s||t.isNullOrUndefined(this.parent.viewOptions[a.charAt(0).toLowerCase()+a.slice(1)])){if(this.parent.activeViewOptions.readonly&&"MonthAgenda"!==this.parent.currentView)return void(this.parent.quickPopup&&this.parent.quickPopup.quickPopupHide());if(this.parent.isAdaptive&&(e.target.classList.contains(i1)||t.closest(e.target,"."+i1)))return;var o=n.classList.contains(tM)||n.classList.contains(tO);if(o&&e.shiftKey&&1===e.which&&this.parent.keyboardInteractionModule)return void this.parent.keyboardInteractionModule.onMouseSelection(e);this.parent.activeCellsData=this.parent.getCellDetails(n);var l=t.extend(this.parent.activeCellsData,{cancel:!1,event:e,name:"cellClick"});this.parent.trigger(eK,l,function(e){if(e.cancel)i.parent.quickPopup&&i.parent.quickPopup.quickPopupHide();else if(o&&i.parent.selectCell(n),i.parent.allowInline){var t={element:e.element,groupIndex:e.groupIndex,type:"Cell"};i.parent.notify(te,t)}else i.parent.notify(eK,e)})}else{var h=this.parent.getDateFromElement(n);t.isNullOrUndefined(h)||this.parent.isAdaptive||!this.parent.isMinMaxDate(h)||(this.parent.setProperties({selectedDate:h},!0),this.parent.changeView(this.parent.getNavigateView(),e))}}else this.parent.eventWindow.openEditor(this.parent.activeCellsData,"Add")}}},e.prototype.cellDblClick=function(e){var i=this,n=t.closest(e.target,".e-work-cells,.e-all-day-cells,.e-header-cells");if(!(this.parent.activeViewOptions.readonly||this.isPreventAction(e)||t.isNullOrUndefined(n))){var r=t.extend(this.parent.activeCellsData,{cancel:!1,event:e,name:"cellDoubleClick"});this.parent.trigger(eX,r,function(e){var t=new Date(e.startTime.getTime());i.parent.isMinMaxDate(new Date(t.setHours(0,0,0,0)))&&(e.cancel||i.parent.eventWindow.openEditor(i.parent.activeCellsData,"Add"))})}},e.prototype.onHover=function(e){var i=t.closest(e.target,".e-work-cells,.e-time-slots,.e-all-day-cells,.e-header-cells,.e-resource-cells,.e-appointment,.e-week-number,.e-month-header");i&&this.parent.trigger("hover",{element:i,event:e})},e.prototype.isPreventAction=function(e){if(t.closest(e.target,"."+iM))return!1;if(t.closest(e.target,"."+t9)&&!t.closest(e.target,"."+i1))return!0;var i=t.closest(e.target,"."+ip+",."+tY);return!t.isNullOrUndefined(i)||(i=t.closest(e.target,"."+tP),!(!this.parent.activeView.isTimelineView()||t.isNullOrUndefined(i)))},e.prototype.destroy=function(){t.EventHandler.remove(this.parent.element,"mouseover",this.onHover)},e}(),aN=(eT=function(e,t){return(eT=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}eT(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),aP=function(e,t,i,n){var r,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(s=(a<3?r(s):a>3?r(t,i,s):r(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},aH=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return aN(i,e),aP([t.Property()],i.prototype,"name",void 0),aP([t.Property()],i.prototype,"default",void 0),aP([t.Property()],i.prototype,"title",void 0),aP([t.Property({})],i.prototype,"validation",void 0),i}(t.ChildProperty),aR=(eE=function(e,t){return(eE=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}eE(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),aF=function(e,t,i,n){var r,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(s=(a<3?r(s):a>3?r(t,i,s):r(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},aU=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return aR(i,e),aF([t.Property("Id")],i.prototype,"id",void 0),aF([t.Property("IsBlock")],i.prototype,"isBlock",void 0),aF([t.Complex({name:"Subject"},aH)],i.prototype,"subject",void 0),aF([t.Complex({name:"StartTime"},aH)],i.prototype,"startTime",void 0),aF([t.Complex({name:"EndTime"},aH)],i.prototype,"endTime",void 0),aF([t.Complex({name:"StartTimezone"},aH)],i.prototype,"startTimezone",void 0),aF([t.Complex({name:"EndTimezone"},aH)],i.prototype,"endTimezone",void 0),aF([t.Complex({name:"Location"},aH)],i.prototype,"location",void 0),aF([t.Complex({name:"Description"},aH)],i.prototype,"description",void 0),aF([t.Complex({name:"IsAllDay"},aH)],i.prototype,"isAllDay",void 0),aF([t.Complex({name:"RecurrenceID"},aH)],i.prototype,"recurrenceID",void 0),aF([t.Complex({name:"RecurrenceRule"},aH)],i.prototype,"recurrenceRule",void 0),aF([t.Complex({name:"RecurrenceException"},aH)],i.prototype,"recurrenceException",void 0),aF([t.Property("IsReadonly")],i.prototype,"isReadonly",void 0),aF([t.Property("FollowingID")],i.prototype,"followingID",void 0),i}(t.ChildProperty),aL=(eS=function(e,t){return(eS=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}eS(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),aB=function(e,t,i,n){var r,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(s=(a<3?r(s):a>3?r(t,i,s):r(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},aj=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return aL(i,e),aB([t.Property()],i.prototype,"template",void 0),aB([t.Property([])],i.prototype,"dataSource",void 0),aB([t.Property()],i.prototype,"query",void 0),aB([t.Complex({},aU)],i.prototype,"fields",void 0),aB([t.Property(!1)],i.prototype,"enableTooltip",void 0),aB([t.Property("AllDayRow")],i.prototype,"spannedEventPlacement",void 0),aB([t.Property(1)],i.prototype,"minimumEventDuration",void 0),aB([t.Property()],i.prototype,"tooltipTemplate",void 0),aB([t.Property()],i.prototype,"resourceColorField",void 0),aB([t.Property(!1)],i.prototype,"editFollowingEvents",void 0),aB([t.Property(!0)],i.prototype,"allowAdding",void 0),aB([t.Property(!0)],i.prototype,"allowEditing",void 0),aB([t.Property(!0)],i.prototype,"allowDeleting",void 0),aB([t.Property(!1)],i.prototype,"enableMaxHeight",void 0),aB([t.Property(!1)],i.prototype,"enableIndicator",void 0),aB([t.Property(!1)],i.prototype,"ignoreWhitespace",void 0),aB([t.Property()],i.prototype,"sortComparer",void 0),aB([t.Property()],i.prototype,"includeFiltersInQuery",void 0),i}(t.ChildProperty),aW=(eO=function(e,t){return(eO=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}eO(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),aq=function(e,t,i,n){var r,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(s=(a<3?r(s):a>3?r(t,i,s):r(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},az=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return aW(i,e),aq([t.Property(!1)],i.prototype,"byDate",void 0),aq([t.Property(!0)],i.prototype,"byGroupID",void 0),aq([t.Property(!1)],i.prototype,"allowGroupEdit",void 0),aq([t.Property([])],i.prototype,"resources",void 0),aq([t.Property(!0)],i.prototype,"enableCompactView",void 0),aq([t.Property()],i.prototype,"headerTooltipTemplate",void 0),aq([t.Property(!1)],i.prototype,"hideNonWorkingDays",void 0),i}(t.ChildProperty),aY=(ek=function(e,t){return(ek=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}ek(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),a_=function(e,t,i,n){var r,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(s=(a<3?r(s):a>3?r(t,i,s):r(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},aG=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return aY(i,e),a_([t.Property()],i.prototype,"field",void 0),a_([t.Property()],i.prototype,"title",void 0),a_([t.Property()],i.prototype,"name",void 0),a_([t.Property(!1)],i.prototype,"allowMultiple",void 0),a_([t.Property([])],i.prototype,"dataSource",void 0),a_([t.Property()],i.prototype,"query",void 0),a_([t.Property("Id")],i.prototype,"idField",void 0),a_([t.Property("Text")],i.prototype,"textField",void 0),a_([t.Property("Expanded")],i.prototype,"expandedField",void 0),a_([t.Property("GroupID")],i.prototype,"groupIDField",void 0),a_([t.Property("Color")],i.prototype,"colorField",void 0),a_([t.Property("StartHour")],i.prototype,"startHourField",void 0),a_([t.Property("EndHour")],i.prototype,"endHourField",void 0),a_([t.Property("WorkDays")],i.prototype,"workDaysField",void 0),a_([t.Property("CssClass")],i.prototype,"cssClassField",void 0),i}(t.ChildProperty),aK=function(){function e(e){this.resourceCollection=[],this.leftPixel=25,this.resourceDateTree=[],this.parent=e}return e.prototype.renderResourceHeaderIndent=function(e){var i=t.createElement("td",{className:"e-resource-left-td"}),n=t.createElement("div",{className:t_});if(this.parent.activeViewOptions.headerIndentTemplate){var r={className:[i.className],type:"emptyCells"};this.parent.renderHeaderIndentTemplate(r,i)}else i.appendChild(n);this.parent.trigger(e2,{elementType:"emptyCells",element:i}),e.appendChild(i)},e.prototype.hideResourceRows=function(e){if(!(this.resourceCollection.length<=1||this.parent.virtualScrollModule))for(var i=this.lastResourceLevel.length,n=0;n<i;n++){var r=this.lastResourceLevel[parseInt(n.toString(),10)].resourceData,a=this.lastResourceLevel[parseInt(n.toString(),10)].resource;if(r.ClassName===tX&&!r[a.expandedField]&&!t.isNullOrUndefined(r[a.expandedField])){var s=[].slice.call(e.children).slice(n+1,n+(parseInt(r.Count,10)+1));t.addClass(s,n_)}}},e.prototype.createResourceColumn=function(){var e=this.resourceCollection,i=t.createElement("div",{className:tG}),n=this.parent.activeView.createTableLayout(tK);!this.parent.uiStateValues.isGroupAdaptive&&this.parent.rowAutoHeight&&this.parent.activeView.isTimelineView()&&this.parent.activeViewOptions.group.resources.length>0&&t.addClass([n],n6);var r=n.querySelector("tbody"),a=this.generateTreeData(!0);if(this.countCalculation(e.slice(0,-2),e.slice(0,-1)),this.renderedResources=this.lastResourceLevel,this.parent.virtualScrollModule){var s=this.parent.virtualScrollModule.getRenderedCount();this.setExpandedResources(),a=this.expandedResources.slice(0,s),this.renderedResources=a}return t.append(this.getContentRows(a),r),this.hideResourceRows(r),n.appendChild(r),i.appendChild(n),i},e.prototype.setRenderedResources=function(){var e=this.resourceCollection;this.generateTreeData(!0),this.countCalculation(e.slice(0,-2),e.slice(0,-1)),this.renderedResources=this.lastResourceLevel},e.prototype.setExpandedResources=function(){for(var e=[],i=0;i<this.lastResourceLevel.length;i++){var n=this.lastResourceLevel[parseInt(i.toString(),10)].resourceData,r=n.Count;e.push(this.lastResourceLevel[parseInt(i.toString(),10)]);var a=n[this.lastResourceLevel[parseInt(i.toString(),10)].resource.expandedField];t.isNullOrUndefined(a)||a||!(r>0)||(i+=r)}this.expandedResources=e},e.prototype.getContentRows=function(e,i){for(var n,r,a=[],s=this.resourceCollection,o=t.createElement("tr"),l=t.createElement("td",{attrs:{tabindex:i?"-1":"0"}}),h=0;h<e.length;h++){var p=l.cloneNode();if((r=P(s,"name",e[parseInt(h.toString(),10)].resource.name))===s.length-1?(t.extend(e[parseInt(h.toString(),10)].resourceData,{ClassName:"e-child-node"}),this.renderedResources[parseInt(h.toString(),10)].className=["e-child-node"]):(t.extend(e[parseInt(h.toString(),10)].resourceData,{ClassName:tX}),this.renderedResources[parseInt(h.toString(),10)].className=[tX]),n=r*this.leftPixel+"px",e[parseInt(h.toString(),10)].resourceData.ClassName===tX&&!t.isNullOrUndefined(e[parseInt(h.toString(),10)].resourceData.Count)&&e[parseInt(h.toString(),10)].resourceData.Count>0){var c=void 0;c=e[parseInt(h.toString(),10)].resourceData[s[parseInt(r.toString(),10)].expandedField]||t.isNullOrUndefined(e[parseInt(h.toString(),10)].resourceData[s[parseInt(r.toString(),10)].expandedField])?tQ:tZ;var d=t.createElement("div");t.addClass([d],[tJ,c]),this.setMargin(d,n),p.appendChild(d),this.resourceCollection.length>1&&t.EventHandler.add(d,"click",this.onTreeIconClick,this)}this.parent.activeView.setResourceHeaderContent(p,e[parseInt(h.toString(),10)],t_),p.setAttribute("data-group-index",e[parseInt(h.toString(),10)].groupIndex.toString()),p.setAttribute("aria-label",e[parseInt(h.toString(),10)].resourceData[e[parseInt(h.toString(),10)].resource.textField]+" resource"),this.parent.activeViewOptions.resourceHeaderTemplate||this.setMargin(p.querySelector("."+t_),n);var u=[t$,e[parseInt(h.toString(),10)].resourceData.ClassName];t.addClass([p],u);var m={elementType:"resourceHeader",element:p,groupIndex:e[parseInt(h.toString(),10)].groupIndex};this.parent.trigger(e2,m);var f=o.cloneNode();f.appendChild(p),a.push(f)}return a},e.prototype.setMargin=function(e,t){this.parent.enableRtl?e.style.marginRight=t:e.style.marginLeft=t},e.prototype.countCalculation=function(e,i){for(var n,r=0;r<e.length;r++){for(var s=e[e.length-(r+1)].dataSource,o=0;o<s.length;o++){var l=0;if(this.parent.activeViewOptions.group.byGroupID){var h=(new a.Query).where(i[i.length-1].groupIDField,"equal",s[parseInt(o.toString(),10)][e[e.length-(r+1)].idField]);n=new a.DataManager(i[i.length-1].dataSource).executeLocal(h)}else n=i[i.length-1].dataSource;for(var p=0;p<n.length;p++)l+=parseInt(n[parseInt(p.toString(),10)].Count,10);l+=parseInt(s[parseInt(o.toString(),10)].Count,10),t.extend(s[parseInt(o.toString(),10)],{Count:l})}i=i.slice(0,-1)}},e.prototype.onTreeIconClick=function(e){var i=this;this.parent.eventTooltip&&this.parent.eventTooltip.close();var n,r=e.target,a=parseInt(t.closest(r,"."+tX).parentElement.children[0].getAttribute("data-group-index"),10),s={cancel:!1,event:e,groupIndex:a,requestType:r.classList.contains(tQ)?"resourceCollapse":"resourceExpand"};this.parent.trigger(eJ,s,function(o){if(!o.cancel){r.classList.contains(tQ)?(t.classList(r,[tZ],[tQ]),n=!0):(t.classList(r,[tQ],[tZ]),n=!1);for(var l=0,h=[].slice.call(i.parent.element.querySelectorAll("."+ip+",."+i1));l<h.length;l++){var p=h[l];t.remove(p)}i.parent.virtualScrollModule?i.updateVirtualContent(a,n,e,r):i.updateContent(a,n);var c={cssProperties:i.parent.getCssProperties(),module:"scroll"};i.parent.notify(tp,c),s={cancel:!1,event:e,groupIndex:a,requestType:r.classList.contains(tQ)?"resourceExpanded":"resourceCollapsed"},i.parent.refreshEvents(!1),i.parent.trigger(e$,s)}})},e.prototype.updateContent=function(e,i){for(var n,r=[],a=[],s=[],o=this.lastResourceLevel[parseInt(e.toString(),10)].resourceData,l=[].slice.call(this.parent.element.querySelectorAll("."+tG+" tr")),h=[].slice.call(this.parent.element.querySelectorAll("."+iw+" tbody tr")),p=[].slice.call(this.parent.element.querySelectorAll("."+iw+" ."+ih)),c=0;c<o.Count;c++)r.push(l[e+c+1]),a.push(h[e+c+1]),s.push(p[e+c+1]);for(var d=this.lastResourceLevel,u=0;u<r.length;u++){var m=!0;if(n=r[parseInt(u.toString(),10)].children[0].classList.contains(tX),d[parseInt(e.toString(),10)].resourceData[d[parseInt(e.toString(),10)].resource.expandedField]=!i,i)n&&(f=r[parseInt(u.toString(),10)].querySelector("."+tJ))&&t.classList(f,[tZ],[tQ]),r[parseInt(u.toString(),10)].classList.contains(n_)||t.addClass([r[parseInt(u.toString(),10)],a[parseInt(u.toString(),10)],s[parseInt(u.toString(),10)]],n_);else{if(n){var f,v=r[parseInt(u.toString(),10)].rowIndex;d[parseInt(v.toString(),10)].resourceData[d[parseInt(v.toString(),10)].resource.expandedField]||t.isNullOrUndefined(d[parseInt(v.toString(),10)].resourceData[d[parseInt(v.toString(),10)].resource.expandedField])||(r.splice(u+1,parseInt(d[parseInt(v.toString(),10)].resourceData.Count,10)),a.splice(u+1,parseInt(d[parseInt(v.toString(),10)].resourceData.Count,10)),s.splice(u+1,parseInt(d[parseInt(v.toString(),10)].resourceData.Count,10)),m=!1),m&&(f=r[parseInt(u.toString(),10)].querySelector("."+tJ))&&t.classList(f,[tQ],[tZ])}r[parseInt(u.toString(),10)].classList.contains(n_)&&t.removeClass([r[parseInt(u.toString(),10)],a[parseInt(u.toString(),10)],s[parseInt(u.toString(),10)]],n_)}}},e.prototype.updateVirtualContent=function(e,i,n,r){this.lastResourceLevel[parseInt(e.toString(),10)].resourceData[this.lastResourceLevel[parseInt(e.toString(),10)].resource.expandedField]=!i,this.setExpandedResources();var a=this.parent.virtualScrollModule.getRenderedCount(),s=this.expandedResources.indexOf(this.renderedResources[0]);if(this.renderedResources=this.expandedResources.slice(s,s+a),this.renderedResources.length<a){var o=this.expandedResources.length-a;o=o>0?o:0,this.renderedResources=this.expandedResources.slice(o,this.expandedResources.length)}var l=this.parent.element.querySelector("."+iC);this.parent.virtualScrollModule.updateVirtualTrackHeight(l);var h=this.parent.element.querySelector("."+tG+" table"),p=this.parent.element.querySelector("."+iw+" table"),c=this.parent.element.querySelector("."+tz);this.parent.virtualScrollModule.updateContent(h,p,c,this.renderedResources);var d=this.parent.element.querySelector("."+t6);t.isNullOrUndefined(d)||(d.style.height=this.parent.element.querySelector("."+tx).offsetHeight+"px")},e.prototype.renderResourceHeader=function(){var e=t.createElement("div",{className:ie});if(e.innerHTML='<div class="'+ii+'"><div class="'+nX+'"><div class="e-icons e-icon-menu"></div></div><div class="'+nZ+'"></div></div>',"MonthAgenda"===this.parent.currentView){var i=this.parent.activeView.getPanel().querySelector("."+iw);i.insertBefore(e,i.querySelector("."+il))}else this.parent.element.insertBefore(e,this.parent.element.querySelector("."+tE));this.renderResourceHeaderText(),t.EventHandler.add(e.querySelector(".e-icon-menu"),"click",this.menuClick,this)},e.prototype.renderResourceTree=function(){this.popupOverlay=t.createElement("div",{className:nQ});var e=t.createElement("div",{className:nJ+" e-popup-close"});if("MonthAgenda"===this.parent.currentView){var r=this.parent.activeView.getPanel().querySelector("."+il);r.insertBefore(e,r.children[0]),r.appendChild(this.popupOverlay)}else this.parent.element.querySelector("."+tE).appendChild(e),this.parent.element.querySelector("."+tE).appendChild(this.popupOverlay);var a=t.createElement("div",{className:"e-resource-tree"});e.appendChild(a),this.treeViewObj=new n.TreeView({cssClass:this.parent.cssClass,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,fields:{dataSource:[].slice.call(this.generateTreeData()),id:"resourceId",text:"resourceName",child:"resourceChild"},nodeTemplate:this.parent.resourceHeaderTemplate,nodeClicked:this.resourceClick.bind(this),created:this.resourceTreeCreated.bind(this)}),this.treeViewObj.root=this.parent.root?this.parent.root:this.parent,this.treeViewObj.appendTo(a),this.treeViewObj.expandAll(),this.treePopup=new i.Popup(e,{targetType:"relative",actionOnScroll:"none",content:this.treeViewObj.element,relateTo:this.parent.element.querySelector("."+tE),enableRtl:this.parent.enableRtl,hideAnimation:{name:"SlideLeftOut",duration:500},showAnimation:{name:"SlideLeftIn",duration:500},viewPortElement:this.parent.element.querySelector("."+("MonthAgenda"===this.parent.currentView?il:tE))}),this.parent.on(td,this.documentClick,this)},e.prototype.resourceTreeCreated=function(){this.parent.activeViewOptions.resourceHeaderTemplate&&this.parent.portals&&this.treeViewObj.portals&&(this.parent.portals=this.parent.portals.concat(this.treeViewObj.portals),this.parent.renderTemplates())},e.prototype.generateTreeData=function(e){for(var i=this,n=[],r=[],a=0,s=this,o=0,l=this.resourceTreeLevel.length;o<l;o++)(function(o,l){var h=function(n,s,o){var l,p,c=i.resourceCollection[parseInt(s.toString(),10)];e?(p={type:"resourceHeader",resource:n.resource,resourceData:n.resourceData,groupIndex:a,groupOrder:n.groupOrder},r.push(p),a++):l={resourceId:o,resourceName:n.resourceData[c.textField],resource:n.resource,resourceData:n.resourceData},n.child.length>0&&!e&&(l.resourceChild=[]);for(var d=1,u=0,m=n.child;u<m.length;u++){var f=m[u];e?h(f,s+1,o+"-"+d):l.resourceChild.push(h(f,s+1,o+"-"+d)),d+=1}return e&&t.extend(p.resourceData,{Count:d-1}),l};e?h(s.resourceTreeLevel[parseInt(o.toString(),10)],0,(o+1).toString()):n.push(h(s.resourceTreeLevel[parseInt(o.toString(),10)],0,(o+1).toString()))})(o);return e?(this.lastResourceLevel=r,r):n},e.prototype.renderResourceHeaderText=function(){for(var e=this.lastResourceLevel[this.parent.uiStateValues.groupIndex],i=[],n=function(n,a){var s=r.resourceCollection[parseInt(n.toString(),10)],o=s.dataSource.filter(function(t){return t[s.idField]===e.groupOrder[parseInt(n.toString(),10)]}),l=t.createElement("div",{className:ig});r.parent.sanitize(o[0][s.textField],l),i.push(l);var h=t.createElement("div",{className:"e-icons e-icon-next"});i.push(h)},r=this,a=0,s=e.groupOrder.length;a<s;a++)n(a);i.pop();var o=("MonthAgenda"===this.parent.currentView?this.parent.activeView.getPanel():this.parent.element).querySelector("."+nZ);R(o);for(var l=0;l<i.length;l++){var h=i[l];o.appendChild(h)}1===this.lastResourceLevel.length&&t.addClass([this.parent.element.querySelector("."+nX)],tT)},e.prototype.menuClick=function(e){if(this.parent.element.querySelector("."+nJ).classList.contains(tI))this.treePopup.hide(),t.removeClass([this.popupOverlay],tC);else{var i=[].slice.call(this.treeViewObj.element.querySelectorAll(".e-list-item:not(.e-has-child)"));t.removeClass(i,"e-active"),t.addClass([i[this.parent.uiStateValues.groupIndex]],"e-active"),this.treePopup.show(),t.addClass([this.popupOverlay],tC)}},e.prototype.selectResourceByIndex=function(e){this.lastResourceLevel&&e>-1&&e<this.lastResourceLevel.length&&this.triggerEvents(e)},e.prototype.resourceClick=function(e){if(!e.node.classList.contains("e-has-child")){this.treePopup.hide(),t.removeClass([this.popupOverlay],tC);var i=[].slice.call(this.treeViewObj.element.querySelectorAll(".e-list-item:not(.e-has-child)")).indexOf(e.node);this.triggerEvents(i,e),e.event.preventDefault()}},e.prototype.triggerEvents=function(e,t){var i=this,n={cancel:!1,event:t?t.event:null,groupIndex:e,requestType:"resourceChange"};this.parent.trigger(eJ,n,function(e){e.cancel||(i.parent.uiStateValues.groupIndex=e.groupIndex,i.parent.renderModule.render(i.parent.currentView),n={cancel:!1,event:t?t.event:null,groupIndex:i.parent.uiStateValues.groupIndex,requestType:"resourceChanged"},i.parent.trigger(e$,n))})},e.prototype.documentClick=function(e){if(!t.closest(e.event.target,"."+nJ)){var i=this.parent.element.querySelector("."+nJ);i&&i.classList.contains(tI)&&(this.treePopup.hide(),t.removeClass([this.popupOverlay],tC))}},e.prototype.bindResourcesData=function(e){var t=this;this.parent.showSpinner();for(var i=[],n=0,r=this.parent.resources;n<r.length;n++){var a=r[n],s=new ro(this.parent,a.dataSource,a.query);i.push(s.getData(s.generateQuery()))}Promise.all(i).then(function(i){return t.dataManagerSuccess(i,e)}).catch(function(e){return t.parent.crudModule.dataManagerFailure(e)})},e.prototype.dataManagerSuccess=function(e,t){if(!(!this.parent||this.parent&&this.parent.isDestroyed)){this.parent.resourceCollection=[];for(var i=0,n=e.length;i<n;i++){var r=this.parent.resources[parseInt(i.toString(),10)],a=this.getResourceModel(r,e[parseInt(i.toString(),10)].result);this.parent.resourceCollection.push(a)}this.refreshLayout(t)}},e.prototype.getResourceModel=function(e,t){return{field:e.field,title:e.title,name:e.name,allowMultiple:e.allowMultiple,dataSource:t||e.dataSource,idField:e.idField,textField:e.textField,groupIDField:e.groupIDField,colorField:e.colorField,startHourField:e.startHourField,endHourField:e.endHourField,workDaysField:e.workDaysField,expandedField:e.expandedField,cssClassField:e.cssClassField}},e.prototype.refreshLayout=function(e){!t.isNullOrUndefined(this.parent.uiStateValues.groupIndex)&&this.parent.enablePersistence||(this.parent.uiStateValues.groupIndex=0),this.parent.renderElements(e)},e.prototype.setResourceCollection=function(){var e=[];if(this.resourceCollection=[],this.colorIndex=null,this.parent.activeViewOptions.group.resources.length>0)for(var i=0,n=this.parent.activeViewOptions.group.resources;i<n.length;i++){var r=n[i],a=P(this.parent.resourceCollection,"name",r);a>=0&&e.push(this.parent.resourceCollection[parseInt(a.toString(),10)])}else this.parent.resourceCollection.length>0&&(e=this.parent.resourceCollection);for(var s=0,o=0,l=e;o<l.length;o++){r=l[o];var h=this.getResourceModel(r);r.name===this.parent.eventSettings.resourceColorField&&(this.colorIndex=s),s++,this.resourceCollection.push(h)}t.isNullOrUndefined(this.colorIndex)&&(this.colorIndex=this.resourceCollection.length-1)},e.prototype.generateResourceLevels=function(e,t){var i=this,n=this.resourceCollection,r=[],a=[],s=function(t,n,o,l,h){var p=[],c=t[0];if(c){var d=void 0;if(l&&i.parent.activeViewOptions.group.byGroupID){var u=l[o.idField];d=c.dataSource.filter(function(e){return e[c.groupIDField]===u})}else d=c.dataSource;for(var m=0;m<d.length;m++){var f=[];h&&h.length>0&&(f=f.concat(h)),f.push(d[parseInt(m.toString(),10)][c.idField]);var v=s(t.slice(1),n+1,c,d[parseInt(m.toString(),10)],f);if(!(0===n&&0===v.length&&i.resourceCollection.length>1)){var g=[],y=i.parent.activeView.renderDates,b=void 0;if(!i.parent.activeViewOptions.group.byDate&&n+1===i.resourceCollection.length){var D=d[parseInt(m.toString(),10)][c.workDaysField],w=d[parseInt(m.toString(),10)][c.startHourField],C=d[parseInt(m.toString(),10)][c.endHourField];D&&D.length>0?(y=i.parent.activeView.getRenderDates(D),b=D,g=i.parent.activeView.getDateSlots(y,D)):(b=i.parent.activeViewOptions.workDays,g=e);var T=i.generateCustomHours(g,w,C,f);a=a.concat(T)}var E=d[parseInt(m.toString(),10)][c.cssClassField],S={type:"resourceHeader",className:["e-resource-cells"],resourceLevelIndex:n,groupOrder:f,resource:c,resourceData:d[parseInt(m.toString(),10)],colSpan:i.parent.activeViewOptions.group.byDate?1:g.length,renderDates:y,workDays:b,cssClass:E,child:v};p.push(S)}}return r[parseInt(n.toString(),10)]||(r[parseInt(n.toString(),10)]=[]),p.length>0&&r[parseInt(n.toString(),10)].push(p),p}return[]};return this.resourceTreeLevel=s(n,0),t?[]:this.generateHeaderLevels(r,a,e)},e.prototype.generateCustomHours=function(e,i,n,r){for(var a=t.extend([],e,null,!0),s=0;s<a.length;s++){var o=a[s];i&&(o.startHour=this.parent.getStartEndTime(i)),n&&(o.endHour=this.parent.getStartEndTime(n)),r&&(o.groupOrder=r)}return a},e.prototype.generateHeaderLevels=function(e,i,n){for(var r,a=[],s=e.length-1;s>=0;s--)for(var o=0,l=0,h=e[parseInt(s.toString(),10)];l<h.length;l++)for(var p=0,c=h[l];p<c.length;p++){var d=c[p];if(e[s+1]&&e[s+1].length>0){var u=e[parseInt((s+1).toString(),10)][parseInt(o.toString(),10)];if(!u)continue;for(var m=0,f=0;f<u.length;f++){var v=u[f];(!this.parent.activeViewOptions.group.byGroupID||this.parent.activeViewOptions.group.byGroupID&&v.resourceData[v.resource.groupIDField]===d.resourceData[d.resource.idField])&&(m+=v.colSpan)}d.colSpan=m}d.groupIndex=o,o++,a[d.resourceLevelIndex]=a[d.resourceLevelIndex]||[],a[d.resourceLevelIndex].push(d)}if(this.lastResourceLevel=a.slice(-1)[0]||[],!this.parent.activeViewOptions.group.byDate){for(var g=0,y=0,b=this.lastResourceLevel;y<b.length;y++){var D=b[y];for(s=0;s<D.colSpan;s++)i[parseInt(g.toString(),10)].groupIndex=D.groupIndex,g++}return a.push(i),a}var w=[],C=t.extend([],a,null,!0),T=[];if(this.parent.activeViewOptions.group.hideNonWorkingDays){for(var E=[],S=0,O=function(e){k.resourceDateTree[parseInt(S.toString(),10)]=[];for(var i=[],n=function(n){var r=k.lastResourceLevel[parseInt(n.toString(),10)].resourceData[k.lastResourceLevel[parseInt(n.toString(),10)].resource.workDaysField];if(r||(r=k.parent.activeViewOptions.workDays),-1!==r.indexOf(e.date.getDay())){var a=t.extend({},k.lastResourceLevel[parseInt(n.toString(),10)],null,!0);a.date=e.date,k.lastResourceLevel[parseInt(n.toString(),10)].workDays=r,a.startHour=k.parent.getStartEndTime(a.resourceData[a.resource.startHourField])||e.startHour,a.endHour=k.parent.getStartEndTime(a.resourceData[a.resource.endHourField])||e.endHour,k.resourceDateTree[parseInt(S.toString(),10)].push(a);for(var s=function(r){if(i[parseInt(r.toString(),10)]||(i[parseInt(r.toString(),10)]=[]),r===a.groupOrder.length-1){E[parseInt(n.toString(),10)]||(E[parseInt(n.toString(),10)]=[]);var s=a.renderDates.filter(function(t){return t.getDay()===e.date.getDay()});return E[parseInt(n.toString(),10)]=E[parseInt(n.toString(),10)].concat(s),i[parseInt(r.toString(),10)].push(a),"continue"}var o=C[parseInt(r.toString(),10)].filter(function(e){return e.resourceData[e.resource.idField]===a.groupOrder[parseInt(r.toString(),10)]});if(o&&o.length>0){var l=i[parseInt(r.toString(),10)].filter(function(e){return e.resourceData[e.resource.idField]===a.groupOrder[parseInt(r.toString(),10)]});if(l&&l.length>0)l[0].colSpan+=1;else{var h=t.extend({},o[0],null,!0);h.colSpan=1,i[parseInt(r.toString(),10)].push(h)}}},o=0;o<a.groupOrder.length;o++)s(o)}},r=0;r<k.lastResourceLevel.length;r++)n(r);if(i.length>0){for(var a=0;a<C.length;a++)w[parseInt(a.toString(),10)]||(w[parseInt(a.toString(),10)]=[]),w[parseInt(a.toString(),10)]=w[parseInt(a.toString(),10)].concat(i[parseInt(a.toString(),10)]);e.colSpan=i[i.length-1].length,T.push(e)}S++},k=this,x=0;x<n.length;x++)O(r=n[x]);return this.resourceDateTree=this.resourceDateTree.filter(function(e){return e.length>0}),this.lastResourceLevel.forEach(function(e,t){E[parseInt(t.toString(),10)]&&(e.renderDates=E[parseInt(t.toString(),10)].sort(function(e,t){return e.getTime()-t.getTime()}))}),w.unshift(T),w}for(var M=0,V=0,I=C[0];V<I.length;V++)M+=I[V].colSpan;for(var A=0;A<n.length;A++){(r=n[A]).colSpan=M,T.push(r);for(var N=t.extend([],C,null,!0),P=0,H=N.length;P<H;P++){if(P===N.length-1)for(var R=0,F=N[parseInt(P.toString(),10)];R<F.length;R++){var U=F[R];U.date=r.date,U.workDays=r.workDays,U.startHour=this.parent.getStartEndTime(U.resourceData[U.resource.startHourField])||r.startHour,U.endHour=this.parent.getStartEndTime(U.resourceData[U.resource.endHourField])||r.endHour}w[parseInt(P.toString(),10)]||(w[parseInt(P.toString(),10)]=[]),w[parseInt(P.toString(),10)]=w[parseInt(P.toString(),10)].concat(N[parseInt(P.toString(),10)])}}return w.unshift(T),w},e.prototype.setResourceValues=function(e,i){var n=this,r=function(t,i,r){n.resourceCollection[parseInt(t.toString(),10)].allowMultiple&&n.parent.activeViewOptions.group.allowGroupEdit?e[""+i]=[r]:e[""+i]=r};if(void 0===i&&(i=this.parent.uiStateValues.isGroupAdaptive?this.parent.uiStateValues.groupIndex:this.parent.activeCellsData.groupIndex),this.parent.activeViewOptions.group.resources.length>0&&!t.isNullOrUndefined(i))for(var a=this.lastResourceLevel[parseInt(i.toString(),10)].groupOrder,s=0;s<this.resourceCollection.length;s++)r(s,this.resourceCollection[parseInt(s.toString(),10)].field,a[parseInt(s.toString(),10)]);else if(this.parent.resourceCollection.length>0)for(s=0;s<this.resourceCollection.length;s++){var o=this.resourceCollection[parseInt(s.toString(),10)].dataSource[0];o&&r(s,this.resourceCollection[parseInt(s.toString(),10)].field,o[this.resourceCollection[parseInt(s.toString(),10)].idField])}},e.prototype.getResourceColor=function(e,i){var n=!t.isNullOrUndefined(i)&&this.colorIndex>i.length-1?i.length-1:this.colorIndex,r=this.resourceCollection[parseInt(n.toString(),10)];if(!(t.isNullOrUndefined(i)&&this.parent.activeViewOptions.group.allowGroupEdit&&r.allowMultiple)){var a=t.isNullOrUndefined(i)?e[r.field]:i[parseInt(n.toString(),10)],s=this.filterData(r.dataSource,r.idField,a);return s.length>0?s[0][r.colorField]:void 0}},e.prototype.getCssClass=function(e){var t=this.resourceCollection.slice(-1)[0];if(!this.parent.activeViewOptions.group.allowGroupEdit||!t.allowMultiple){var i=this.filterData(t.dataSource,t.idField,e[t.field]);return i.length>0?i[0][t.cssClassField]:void 0}},e.prototype.getResourceRenderDates=function(){var e=[].concat.apply([],this.lastResourceLevel.map(function(e){return e.renderDates})).filter(function(e,t,i){return i.map(function(e){return e.getTime()}).indexOf(e.getTime())===t});return e.sort(function(e,t){return e.getTime()-t.getTime()}),e},e.prototype.filterData=function(e,t,i){return e.filter(function(e){return e[""+t]===i})},e.prototype.getResourceData=function(e,i,n){if(this.parent.activeViewOptions.group.allowGroupEdit){for(var r={},a=0;a<n.length;a++)for(var s=n[a],o=this.lastResourceLevel[parseInt(s.toString(),10)].groupOrder,l=0,h=o.length;l<h;l++){var p=this.resourceCollection[parseInt(l.toString(),10)].field;t.isNullOrUndefined(r[""+p])&&(r[""+p]=[]),r[""+p].push(o[parseInt(l.toString(),10)])}e=t.extend(e,r)}else{l=0;for(var c=this.resourceCollection.length;l<c;l++)this.lastResourceLevel[parseInt(i.toString(),10)]&&(e[this.resourceCollection[parseInt(l.toString(),10)].field]=this.lastResourceLevel[parseInt(i.toString(),10)].groupOrder[parseInt(l.toString(),10)])}},e.prototype.addResource=function(e,t,i){for(var n=e instanceof Array?e:[e],r=function(e){if(e.name===t)return n.forEach(function(t,n){return new a.DataManager({json:e.dataSource}).insert(t,null,null,i+n)}),"break"},s=0,o=this.parent.resourceCollection;s<o.length&&"break"!==r(o[s]);s++);this.refreshLayout(!0)},e.prototype.removeResource=function(e,t){for(var i=e instanceof Array?e:[e],n=function(e){if(e.name===t)return i.forEach(function(t){return new a.DataManager({json:e.dataSource}).remove(e.idField,t)}),"break"},r=0,s=this.parent.resourceCollection;r<s.length&&"break"!==n(s[r]);r++);this.refreshLayout(!0)},e.prototype.getIndexFromResourceId=function(e,i,n,r,a){if(i=i||this.parent.resourceCollection.slice(-1)[0].name,t.isNullOrUndefined(n)&&(n=this.resourceCollection.filter(function(e){return e.name===i})[0],t.isNullOrUndefined(n)))return null;var s=n.dataSource.filter(function(t){return r&&t[n.idField]===e?t[n.groupIDField]===r[""+a]?t[n.idField]===e:null:t[n.idField]===e})[0];return this.lastResourceLevel.map(function(e){return e.resourceData}).indexOf(s)},e.prototype.resourceExpand=function(e,t,i){var n=this.parent.resourceCollection.filter(function(e){return e.name===t?e:null})[0],r=0,a=n.dataSource.filter(function(t){return t[n.idField]===e})[0];r=this.parent.activeViewOptions.group.byGroupID?this.lastResourceLevel.map(function(e){return e.resourceData}).indexOf(a):this.getIndexFromResourceId(e,t,n);var s=this.parent.element.querySelector("."+tG+' [data-group-index="'+r+'"] .'+tJ);s&&(s.classList.contains(tZ)&&!i?s.click():s.classList.contains(tQ)&&i&&s.click())},e.prototype.resourceScroll=function(e,t){if(!(this.parent.isAdaptive||["Agenda","MonthAgenda"].indexOf(this.parent.currentView)>-1)){var i=t||this.parent.resourceCollection.slice(-1)[0].name,n=this.parent.resourceCollection.length-1,r=this.parent.resourceCollection.filter(function(e,t){return e.name===i?(n=t,e):null})[0],a=this.parent.element.querySelector("."+iw),s=0;if(this.parent.activeView.isTimelineView()){if(this.parent.activeViewOptions.group.byGroupID){var o,l=r.dataSource.filter(function(t){return t[r.idField]===e})[0];s=this.lastResourceLevel.map(function(e){return e.resourceData}).indexOf(l)}else s=this.getIndexFromResourceId(e,i,r);if(this.parent.virtualScrollModule){var h=Math.round(this.parent.element.querySelector("."+iC).offsetHeight/this.expandedResources.length);(this.parent.rowAutoHeight&&(a.scrollTop=0,this.parent.virtualScrollModule.virtualScrolling()),a.scrollTop=s*h-(this.parent.virtualScrollModule.bufferCount-1)*h,this.parent.virtualScrollModule.virtualScrolling(),this.parent.rowAutoHeight)?(o=this.parent.element.querySelector("."+tM+'[data-group-index="'+s+'"]'))&&!o.parentElement.classList.contains(n_)&&(a.scrollTop=a.scrollTop<o.offsetTop?o.offsetTop:a.scrollTop+o.offsetTop):a.scrollTop=s*h}else(o=this.parent.element.querySelector("."+tM+'[data-group-index="'+s+'"]'))&&!o.parentElement.classList.contains(n_)&&(a.scrollTop=o.offsetTop)}else{s=this.parent.activeViewOptions.group.byGroupID?i===this.parent.resourceCollection.slice(-1)[0].name?this.lastResourceLevel.map(function(e){return e.resourceData[r.idField]}).indexOf(e):r.dataSource.map(function(e){return e[r.idField]}).indexOf(e):this.getIndexFromResourceId(e,i,r);var p=this.parent.element.querySelector("."+iG+":nth-child("+(n+1)+")"),c=[].slice.call(p.children).map(function(e){return e.offsetLeft});a.scrollLeft=c[parseInt(s.toString(),10)]}}},e.prototype.destroy=function(){if(this.parent.off(td,this.documentClick),this.treeViewObj){if(this.treeViewObj.portals&&this.treeViewObj.portals.length>0){var e=this.treeViewObj.portals.map(function(e){return e.propName});e.length>0&&this.parent.resetTemplates(e)}this.treeViewObj.destroy(),this.treeViewObj=null}this.treePopup&&(this.treePopup.destroy(),this.treePopup=null,t.remove(this.parent.element.querySelector("."+nJ)),t.remove(this.parent.element.querySelector("."+nQ)));var i=this.parent.element.querySelector("."+ie);i&&t.remove(i)},e}(),aX=(ex=function(e,t){return(ex=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}ex(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),aZ=function(e,t,i,n){var r,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(s=(a<3?r(s):a>3?r(t,i,s):r(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},aQ=function(e){function n(t,i){return e.call(this,t,i)||this}return aX(n,e),n.prototype.render=function(){var e=[],n=[];if(e.push(ty),this.enableRtl?e.push("e-rtl"):n.push("e-rtl"),this.isAdaptive?e.push(tb):n.push(tb),this.allowMultiDrag?e.push(tD):n.push(tD),this.cssClass)for(var r=0,a=this.cssClass.split(" ");r<a.length;r++){var s=a[r];e.push(s)}t.classList(this.element,e,n),this.validateDate(),i.createSpinner({target:this.element}),this.scrollModule=new rr(this),this.scrollModule.setWidth(),this.scrollModule.setHeight(),this.renderModule=new ay(this),this.eventBase=new rM(this),this.workCellAction=new aA(this),this.allowKeyboardInteraction&&(this.keyboardInteractionModule=new rs(this)),this.inlineModule=new rR(this),this.initializeDataModule(),this.renderTableContainer(),this.activeViewOptions=this.getActiveViewOptions(),this.initializeResources(),this.wireEvents()},n.prototype.renderTableContainer=function(){this.element.querySelector("."+tE)||this.element.appendChild(this.createElement("div",{className:tE}))},n.prototype.renderTemplates=function(e){this.isReact?this.renderReactTemplates(e):e&&e()},n.prototype.resetTemplates=function(e){(this.isAngular||this.isReact)&&this.clearTemplate(e)},n.prototype.sanitize=function(e,i){this.enableHtmlSanitizer?i.innerText=t.SanitizeHtmlHelper.sanitize(e):i.innerHTML=e},n.prototype.initializeResources=function(e){void 0===e&&(e=!1),this.resources.length>0?(this.resourceBase=new aK(this),this.resourceBase.bindResourcesData(e)):(this.resourceBase=null,this.resourceCollection=[],this.renderElements(e))},n.prototype.destroyEditorWindow=function(){this.eventWindow&&(this.eventWindow.destroy(),this.eventWindow=null),this.eventWindow=new av(this)},n.prototype.renderElements=function(e){if(e)return this.initializeView(this.currentView),void this.eventWindow.refresh();this.destroyHeaderModule(),this.showHeaderBar&&(this.headerModule=new rn(this)),this.renderTableContainer(),(t.Browser.isDevice||t.Browser.isTouch)&&(this.scheduleTouchModule=new ra(this)),this.initializeView(this.currentView),this.destroyPopups(),this.isPrinting||this.initializePopups()},n.prototype.validateDate=function(e){void 0===e&&(e=this.selectedDate);var t=new Date(e instanceof Date?e.getTime():e),i=new Date(this.minDate instanceof Date?this.minDate.getTime():this.minDate),n=new Date(this.maxDate instanceof Date?this.maxDate.getTime():this.maxDate);if(!(i<=n))throw Error("minDate should be equal or less than maxDate");t<i&&(t=i),t>n&&(t=n),this.setProperties({selectedDate:new Date(""+t),minDate:new Date(""+i),maxDate:new Date(""+n)},!0),this.eventWindow&&this.eventWindow.updateMinMaxDateToEditor()},n.prototype.getViewIndex=function(e){for(var t=0;t<this.viewCollections.length;t++)if(this.viewCollections[parseInt(t.toString(),10)].option===e)return t;return -1},n.prototype.setViewOptions=function(e){void 0===e&&(e=!1),this.viewOptions={},this.viewCollections=[];var i,n,r=this.viewIndex,a=0;this.viewIndex=-1;for(var s=0,o=this.views;s<o.length;s++){var l=o[s],h="string"!=typeof l;"string"==typeof l?(i=l,this.currentView===i&&(n=i,this.viewIndex=a)):(i=l.option,l.isSelected&&(n=i,this.viewIndex=a));var p=t.extend({option:i},h?l:{}),c=i.charAt(0).toLowerCase()+i.slice(1);p.cellHeaderTemplateName=p.cellHeaderTemplate?p.option:"",p.dateHeaderTemplateName=p.dateHeaderTemplate?p.option:"",p.dateRangeTemplateName=p.dateRangeTemplate?p.option:"",p.cellTemplateName=p.cellTemplate?p.option:"",p.dayHeaderTemplateName=p.dayHeaderTemplate?p.option:"",p.monthHeaderTemplateName=p.monthHeaderTemplate?p.option:"",p.resourceHeaderTemplateName=p.resourceHeaderTemplate?p.option:"",p.headerIndentTemplateName=p.headerIndentTemplate?p.option:"",p.eventTemplateName=p.eventTemplate?p.option:"",t.isNullOrUndefined(p.firstDayOfWeek)||0!==p.firstDayOfWeek||delete p.firstDayOfWeek,t.isNullOrUndefined(p.interval)||1!==p.interval||delete p.interval,this.viewCollections.push(p),t.isNullOrUndefined(this.viewOptions[""+c])?this.viewOptions[""+c]=[p]:this.viewOptions[""+c].push(p),a++}if(!e&&n&&this.setProperties({currentView:n},!0),-1===this.viewIndex){var d=this.getViewIndex(this.currentView);this.viewIndex="string"==typeof this.views[0]||t.isNullOrUndefined(r)||-1===r?-1===d?0:d:r}},n.prototype.getActiveViewOptions=function(){var e={enable:this.timeScale.enable,interval:this.timeScale.interval,slotCount:this.timeScale.slotCount,majorSlotTemplate:this.timeScale.majorSlotTemplate,minorSlotTemplate:this.timeScale.minorSlotTemplate},i={byDate:!(this.viewCollections[this.viewIndex].option.indexOf("Year")>-1)&&this.group.byDate,byGroupID:this.group.byGroupID,allowGroupEdit:this.group.allowGroupEdit,resources:this.group.resources,headerTooltipTemplate:this.group.headerTooltipTemplate,enableCompactView:this.group.enableCompactView,hideNonWorkingDays:["Day","Week","WorkWeek","Month"].indexOf(this.currentView)>-1&&this.group.hideNonWorkingDays},n=this.viewCollections[this.viewIndex].workDays?[]:this.workDays,r={dateFormat:this.dateFormat,endHour:this.endHour,isSelected:!1,option:null,readonly:this.readonly,startHour:this.startHour,allowVirtualScrolling:!1,cellHeaderTemplate:this.cellHeaderTemplate,dayHeaderTemplate:this.dayHeaderTemplate,monthHeaderTemplate:this.monthHeaderTemplate,cellTemplate:this.cellTemplate,eventTemplate:this.eventSettings.template,dateHeaderTemplate:this.dateHeaderTemplate,dateRangeTemplate:this.dateRangeTemplate,resourceHeaderTemplate:this.resourceHeaderTemplate,headerIndentTemplate:this.headerIndentTemplate,firstMonthOfYear:this.firstMonthOfYear,firstDayOfWeek:this.firstDayOfWeek,workDays:n,monthsCount:this.monthsCount,showWeekend:this.showWeekend,showWeekNumber:this.showWeekNumber,displayName:null,interval:1,timeScale:e,timeFormat:this.internalTimeFormat,group:i,headerRows:this.headerRows,orientation:"Horizontal",numberOfWeeks:0,displayDate:null,enableLazyLoading:!1},a=this.viewCollections[this.viewIndex],s=t.extend(r,a,void 0,!0);return 0!==this.firstDayOfWeek&&a.firstDayOfWeek&&this.firstDayOfWeek!==a.firstDayOfWeek&&(s.firstDayOfWeek=this.firstDayOfWeek),s.displayDate&&(s.displayDate=new Date(s.displayDate instanceof Date?s.displayDate.getTime():s.displayDate)),s.enableLazyLoading&&!t.isNullOrUndefined(s.group.resources)&&s.group.resources.length>0&&(-1===["Agenda","MonthAgenda","Year","TimelineYear"].indexOf(s.option)||"TimelineYear"===s.option&&"Vertical"===s.orientation)&&(s.allowVirtualScrolling=!0),s},n.prototype.initializeDataModule=function(){this.eventFields={id:this.eventSettings.fields.id,isBlock:this.eventSettings.fields.isBlock,subject:this.eventSettings.fields.subject.name,startTime:this.eventSettings.fields.startTime.name,endTime:this.eventSettings.fields.endTime.name,startTimezone:this.eventSettings.fields.startTimezone.name,endTimezone:this.eventSettings.fields.endTimezone.name,location:this.eventSettings.fields.location.name,description:this.eventSettings.fields.description.name,isAllDay:this.eventSettings.fields.isAllDay.name,recurrenceID:this.eventSettings.fields.recurrenceID.name,recurrenceRule:this.eventSettings.fields.recurrenceRule.name,recurrenceException:this.eventSettings.fields.recurrenceException.name,isReadonly:this.eventSettings.fields.isReadonly,followingID:this.eventSettings.fields.followingID},this.setEditorTitles(),this.dataModule=new ro(this,this.eventSettings.dataSource,this.eventSettings.query),this.crudModule=new aI(this)},n.prototype.setEditorTitles=function(){this.editorTitles={subject:this.eventSettings.fields.subject.title||this.localeObj.getConstant("title"),startTime:this.eventSettings.fields.startTime.title||this.localeObj.getConstant("start"),endTime:this.eventSettings.fields.endTime.title||this.localeObj.getConstant("end"),isAllDay:this.eventSettings.fields.isAllDay.title||this.localeObj.getConstant("allDay"),startTimezone:this.eventSettings.fields.startTimezone.title||this.localeObj.getConstant("startTimezone"),endTimezone:this.eventSettings.fields.endTimezone.title||this.localeObj.getConstant("endTimezone"),location:this.eventSettings.fields.location.title||this.localeObj.getConstant("location"),description:this.eventSettings.fields.description.title||this.localeObj.getConstant("description"),recurrenceRule:this.eventSettings.fields.recurrenceRule.title||this.localeObj.getConstant("repeat")}},n.prototype.initializeView=function(e){this.showSpinner(),this.activeViewOptions=this.getActiveViewOptions(),this.resourceBase&&this.resourceBase.setResourceCollection(),this.initializeTemplates(),this.renderModule.render(e)},n.prototype.initializeTemplates=function(){this.cellHeaderTemplateFn=this.templateParser(this.activeViewOptions.cellHeaderTemplate),this.dayHeaderTemplateFn=this.templateParser(this.activeViewOptions.dayHeaderTemplate),this.monthHeaderTemplateFn=this.templateParser(this.activeViewOptions.monthHeaderTemplate),this.cellTemplateFn=this.templateParser(this.activeViewOptions.cellTemplate),this.dateHeaderTemplateFn=this.templateParser(this.activeViewOptions.dateHeaderTemplate),this.dateRangeTemplateFn=this.templateParser(this.activeViewOptions.dateRangeTemplate),this.majorSlotTemplateFn=this.templateParser(this.activeViewOptions.timeScale.majorSlotTemplate),this.minorSlotTemplateFn=this.templateParser(this.activeViewOptions.timeScale.minorSlotTemplate),this.appointmentTemplateFn=this.templateParser(this.activeViewOptions.eventTemplate),this.resourceHeaderTemplateFn=this.templateParser(this.activeViewOptions.resourceHeaderTemplate),this.headerIndentTemplateFn=this.templateParser(this.activeViewOptions.headerIndentTemplate),this.headerTooltipTemplateFn=this.templateParser(this.activeViewOptions.group.headerTooltipTemplate),this.eventTooltipTemplateFn=this.templateParser(this.eventSettings.tooltipTemplate),this.editorTemplateFn=this.templateParser(this.editorTemplate),this.editorHeaderTemplateFn=this.templateParser(this.editorHeaderTemplate),this.editorFooterTemplateFn=this.templateParser(this.editorFooterTemplate),this.quickInfoTemplatesHeaderFn=this.templateParser(this.quickInfoTemplates.header),this.quickInfoTemplatesContentFn=this.templateParser(this.quickInfoTemplates.content),this.quickInfoTemplatesFooterFn=this.templateParser(this.quickInfoTemplates.footer)},n.prototype.initializePopups=function(){this.eventWindow=new av(this),this.quickPopup=new rU(this)},n.prototype.getDayNames=function(e){var i,n=[],r="";"en"===this.locale||"en-US"===this.locale?(r="days.stand-alone.",i=t.getValue(r+e,t.getDefaultDateObject(this.getCalendarMode()))):(r="main."+this.locale+".dates.calendars."+this.getCalendarMode()+".days.format."+e,i=t.getValue(r,t.cldrData));for(var a=0,s=Object.keys(i);a<s.length;a++){var o=s[a];n.push(t.getValue(o,i))}return n},n.prototype.setCldrTimeFormat=function(){t.isNullOrUndefined(this.timeFormat)?"en"===this.locale||"en-US"===this.locale?this.internalTimeFormat=t.getValue("timeFormats.short",t.getDefaultDateObject(this.getCalendarMode())):this.internalTimeFormat=t.getValue("main."+this.locale+".dates.calendars."+this.getCalendarMode()+".timeFormats.short",t.cldrData):this.internalTimeFormat=this.timeFormat},n.prototype.getCalendarMode=function(){return this.calendarMode.toLowerCase()},n.prototype.getTimeString=function(e){return this.globalize.formatDate(e,{format:this.activeViewOptions.timeFormat,type:"time",calendar:this.getCalendarMode()}).toLocaleUpperCase()},n.prototype.getDateTime=function(e){return new Date(e instanceof Date?e.getTime():e)},n.prototype.setCalendarMode=function(){"Islamic"===this.calendarMode?this.calendarUtil=new rh:this.calendarUtil=new rl},n.prototype.changeView=function(e,i,n,r){var a=this;if(t.isNullOrUndefined(r)&&(r=this.getViewIndex(e)),!(!n&&r===this.viewIndex&&this.currentView===e||r<0)){var s=this.activeViewOptions?this.activeViewOptions.option:this.currentView,o={requestType:"viewNavigate",cancel:!1,event:i};this.trigger(eJ,o,function(t){if(t.cancel)a.currentView=s;else{var n={action:"view",cancel:!1,currentDate:a.selectedDate,previousView:s,currentView:e,viewIndex:r};a.trigger(e1,n,function(t){if(t.cancel)a.currentView=s;else{var n=["Day","Week","WorkWeek"].indexOf(e)>-1&&0>["Day","Week","WorkWeek"].indexOf(s);a.uiStateValues.isInitial=n||e.indexOf("Timeline")>-1||e.indexOf("Year")>-1,a.uiStateValues.top=e.indexOf("Timeline")>-1&&0>s.indexOf("Timeline")?0:a.uiStateValues.top,a.viewIndex=t.viewIndex,a.setProperties({currentView:e},!0),a.headerModule&&(a.headerModule.updateActiveView(),a.headerModule.setCalendarDate(a.selectedDate),a.headerModule.setCalendarView()),a.initializeView(a.currentView),a.animateLayout(),o={requestType:"viewNavigate",cancel:!1,event:i},a.trigger(e$,o)}})}})}},n.prototype.changeDate=function(e,t){var i=this,n={requestType:"dateNavigate",cancel:!1,event:t};this.trigger(eJ,n,function(r){if(!r.cancel){var a={action:"date",cancel:!1,previousDate:i.selectedDate,currentDate:e};i.trigger(e1,a,function(e){e.cancel||(i.uiStateValues.isInitial=i.activeView.isTimelineView()&&"TimelineYear"!==i.currentView,i.validateDate(e.currentDate),i.headerModule&&i.headerModule.setCalendarDate(e.currentDate),"MonthAgenda"===i.currentView&&i.monthAgendaModule&&(i.monthAgendaModule.monthAgendaDate=new Date(""+i.selectedDate)),i.initializeView(i.currentView),i.animateLayout(),n={requestType:"dateNavigate",cancel:!1,event:t},i.trigger(e$,n))})}})},n.prototype.isMinMaxDate=function(e){return void 0===e&&(e=this.selectedDate),e.getTime()>=this.minDate.getTime()&&e.getTime()<=this.maxDate.getTime()},n.prototype.isSelectedDate=function(e){return e.setHours(0,0,0,0)===new Date(""+this.selectedDate).setHours(0,0,0,0)},n.prototype.getCurrentTime=function(e){return void 0===e&&(e=new Date),this.timezone?this.tzModule.convert(e,this.tzModule.getLocalTimezoneName(),this.timezone):e},n.prototype.getNavigateView=function(){return this.activeView.isTimelineView()?"TimelineMonth"===this.currentView||"TimelineYear"===this.currentView?"TimelineDay":"Agenda":"Day"},n.prototype.animateLayout=function(){this.activeView.element&&new t.Animation({duration:600,name:"FadeIn",timingFunction:"easeIn"}).animate(this.activeView.element)},n.prototype.requiredModules=function(){var e=[];this.setViewOptions(!0);for(var t=0,i=Object.keys(this.viewOptions);t<i.length;t++){var n=i[t];n="timelineDay"===n||"timelineWeek"===n||"timelineWorkWeek"===n?"timelineViews":n,e.push({member:n,args:[this]})}return this.allowDragAndDrop&&e.push({member:"dragAndDrop",args:[this]}),this.allowResizing&&e.push({member:"resize",args:[this]}),e.push({member:"excelExport",args:[this]}),e.push({member:"iCalendarExport",args:[this]}),e.push({member:"iCalendarImport",args:[this]}),e.push({member:"print",args:[this]}),e},n.prototype.preRender=function(){this.isAdaptive=t.Browser.isDevice||B(),this.globalize=new t.Internationalization(this.locale),this.tzModule=new rp,(this&&t.isNullOrUndefined(this.uiStateValues)||!this.enablePersistence)&&(this.uiStateValues={expand:!1,isInitial:!0,left:0,top:0,isGroupAdaptive:!1,isIgnoreOccurrence:!1,groupIndex:0,action:!1,isBlock:!1,isCustomMonth:!0,isPreventTimezone:!1}),this.currentTimezoneDate=this.getCurrentTime(),this.activeCellsData={startTime:new Date(this.currentTimezoneDate),endTime:new Date(this.currentTimezoneDate),isAllDay:!1},this.activeEventData={event:void 0,element:void 0},this.getDefaultLocale(),this.localeObj=new t.L10n(this.getModuleName(),this.defaultLocale,this.locale),this.setCldrTimeFormat(),this.setCalendarMode(),this.eventsData=[],this.eventsProcessed=[],this.blockData=[],this.blockProcessed=[],this.resourceCollection=[],this.currentAction=null,this.selectedElements=[],this.setViewOptions()},n.prototype.getDefaultLocale=function(){this.defaultLocale={day:"Day",week:"Week",workWeek:"Work Week",month:"Month",year:"Year",agenda:"Agenda",weekAgenda:"Week Agenda",workWeekAgenda:"Work Week Agenda",monthAgenda:"Month Agenda",today:"Today",noEvents:"No events",emptyContainer:"There are no events scheduled on this day.",allDay:"All day",start:"Start",end:"End",more:"more",close:"Close",cancel:"Cancel",noTitle:"(No Title)",delete:"Delete",deleteEvent:"Delete Event",deleteMultipleEvent:"Delete Multiple Events",selectedItems:"Items selected",deleteSeries:"Entire Series",edit:"Edit",editSeries:"Entire Series",editEvent:"Edit Event",createEvent:"Create",subject:"Subject",addTitle:"Add title",moreDetails:"More Details",save:"Save",editContent:"How would you like to change the appointment in the series?",deleteContent:"Are you sure you want to delete this event?",deleteMultipleContent:"Are you sure you want to delete the selected events?",newEvent:"New Event",title:"Title",location:"Location",description:"Description",timezone:"Timezone",startTimezone:"Start Timezone",endTimezone:"End Timezone",repeat:"Repeat",saveButton:"Save",cancelButton:"Cancel",deleteButton:"Delete",recurrence:"Recurrence",wrongPattern:"The recurrence pattern is not valid.",seriesChangeAlert:"Do you want to cancel the changes made to specific instances of this series and match it to the whole series again?",createError:"The duration of the event must be shorter than how frequently it occurs. Shorten the duration, or change the recurrence pattern in the recurrence event editor.",sameDayAlert:"Two occurrences of the same event cannot occur on the same day.",occurenceAlert:"Cannot reschedule an occurrence of the recurring appointment if it skips over a later occurrence of the same appointment.",editRecurrence:"Edit Recurrence",repeats:"Repeats",alert:"Alert",startEndError:"The selected end date occurs before the start date.",invalidDateError:"The entered date value is invalid.",blockAlert:"Events cannot be scheduled within the blocked time range.",ok:"Ok",yes:"Yes",no:"No",occurrence:"Occurrence",series:"Series",previous:"Previous",next:"Next",timelineDay:"Timeline Day",timelineWeek:"Timeline Week",timelineWorkWeek:"Timeline Work Week",timelineMonth:"Timeline Month",timelineYear:"Timeline Year",editFollowingEvent:"Following Events",deleteTitle:"Delete Event",editTitle:"Edit Event",beginFrom:"Begin From",endAt:"Ends At",expandAllDaySection:"Expand-all-day-section",collapseAllDaySection:"Collapse-all-day-section",searchTimezone:"Search Timezone",noRecords:"No records found"}},n.prototype.wireEvents=function(){t.EventHandler.add(window,"resize",this.onScheduleResize,this),t.EventHandler.add(window,"orientationchange",this.onScheduleResize,this),t.EventHandler.add(document,t.Browser.touchStartEvent,this.onDocumentClick,this)},n.prototype.removeSelectedClass=function(){for(var e=this.getSelectedCells(),i=0;i<e.length;i++){var n=e[i];"Year"!==this.currentView&&n.setAttribute("aria-selected","false"),n.removeAttribute("tabindex")}t.removeClass(e,ir),this.keyboardInteractionModule&&this.keyboardInteractionModule.selectedCells.length>0&&(this.keyboardInteractionModule.selectedCells=[])},n.prototype.addSelectedClass=function(e,i,n){if("Year"!==this.currentView)for(var r=0;r<e.length;r++)e[r].setAttribute("aria-selected","true");t.addClass(e,ir),i&&(i.setAttribute("tabindex","0"),i.focus({preventScroll:n||!1}))},n.prototype.selectCell=function(e){this.removeSelectedClass(),this.addSelectedClass([e],e)},n.prototype.getAllDayRow=function(){return this.element.querySelector("."+tk)},n.prototype.getContentTable=function(){return this.activeView.element.querySelector("."+tx+" tbody")},n.prototype.getTableRows=function(){return[].slice.call(this.element.querySelectorAll("."+tx+" tbody tr:not(."+n_+")"))},n.prototype.getWorkCellElements=function(){return[].slice.call(this.element.querySelectorAll("."+tM))},n.prototype.getIndexOfDate=function(e,t){return e.map(Number).indexOf(+t)},n.prototype.isAllDayCell=function(e){return!(!(["Month","TimelineMonth","TimelineYear","MonthAgenda"].indexOf(this.currentView)>-1||e.classList.contains(tO)||e.classList.contains(tP))&&this.activeViewOptions.timeScale.enable)||!!(this.activeView.isTimelineView()&&this.activeViewOptions.headerRows.length>0&&"Hour"!==this.activeViewOptions.headerRows.slice(-1)[0].option)},n.prototype.getDateFromElement=function(e){var i;if(t.isNullOrUndefined(e)||(i=e.getAttribute("data-date")),!t.isNullOrUndefined(i)){var n=parseInt(i,10);return new Date(n)}},n.prototype.getTargetElement=function(e,t,i){var n,r=document.elementFromPoint(t,i);return r&&(n=r.closest(e)),n?[n]:null},n.prototype.getCellHeaderTemplate=function(){return this.cellHeaderTemplateFn},n.prototype.getDayHeaderTemplate=function(){return this.dayHeaderTemplateFn},n.prototype.getMonthHeaderTemplate=function(){return this.monthHeaderTemplateFn},n.prototype.getCellTemplate=function(){return this.cellTemplateFn},n.prototype.getDateHeaderTemplate=function(){return this.dateHeaderTemplateFn},n.prototype.getDateRangeTemplate=function(){return this.dateRangeTemplateFn},n.prototype.getMajorSlotTemplate=function(){return this.majorSlotTemplateFn},n.prototype.getMinorSlotTemplate=function(){return this.minorSlotTemplateFn},n.prototype.getAppointmentTemplate=function(){return this.appointmentTemplateFn},n.prototype.getEventTooltipTemplate=function(){return this.eventTooltipTemplateFn},n.prototype.getHeaderTooltipTemplate=function(){return this.headerTooltipTemplateFn},n.prototype.getEditorTemplate=function(){return this.editorTemplateFn},n.prototype.getEditorHeaderTemplate=function(){return this.editorHeaderTemplateFn},n.prototype.getEditorFooterTemplate=function(){return this.editorFooterTemplateFn},n.prototype.getQuickInfoTemplatesHeader=function(){return this.quickInfoTemplatesHeaderFn},n.prototype.getQuickInfoTemplatesContent=function(){return this.quickInfoTemplatesContentFn},n.prototype.getQuickInfoTemplatesFooter=function(){return this.quickInfoTemplatesFooterFn},n.prototype.getResourceHeaderTemplate=function(){return this.resourceHeaderTemplateFn},n.prototype.getHeaderIndentTemplate=function(){return this.headerIndentTemplateFn},n.prototype.getCssProperties=function(){return{border:this.enableRtl?"borderLeftWidth":"borderRightWidth",padding:this.enableRtl?"paddingLeft":"paddingRight",rtlBorder:this.enableRtl?"borderRightWidth":"borderLeftWidth",rtlPadding:this.enableRtl?"paddingRight":"paddingLeft"}},n.prototype.removeNewEventElement=function(){var e=this.element.querySelector("."+iR);t.isNullOrUndefined(e)||t.remove(e)},n.prototype.getStartEndTime=function(e){if(!t.isNullOrUndefined(e)&&""!==e){var i=C(new Date(this.currentTimezoneDate)),n=e.split(":");return 2===n.length&&i.setHours(parseInt(n[0],10),parseInt(n[1],10),0),i}return null},n.prototype.onDocumentClick=function(e){this.notify(td,{event:e})},n.prototype.onScheduleResize=function(){t.isNullOrUndefined(this.activeView)||(this.isAdaptive||L())&&document.activeElement&&document.activeElement.classList.contains(nS)||(this.activeViewOptions.timeScale.enable&&this.activeView&&this.activeView.highlightCurrentTime(),this.quickPopup&&this.quickPopup.onClosePopup(),N(),"Month"===this.currentView||"Agenda"!==this.currentView&&"MonthAgenda"!==this.currentView&&!this.activeViewOptions.timeScale.enable||this.activeView.isTimelineView()?(this.activeView.resetColWidth(),this.notify(tp,{cssProperties:this.getCssProperties(),isPreventScrollUpdate:!0}),this.refreshEvents(!1)):this.notify(to,{}))},n.prototype.templateParser=function(e){if(e)try{return"function"==typeof e?t.compile(e):document.querySelectorAll(e).length?t.compile(document.querySelector(e).innerHTML.trim()):t.compile(e)}catch(i){return t.compile(e)}},n.prototype.getSelectedCells=function(){return[].slice.call(this.element.querySelectorAll("."+ir))},n.prototype.getAnnouncementString=function(e,t){this.quickPopup&&this.activeViewOptions.group.resources.length>0&&(i=this.quickPopup.getResourceText({event:e},"event")+'"s event - ');var i,n=t||e[this.eventFields.subject]||this.eventSettings.fields.subject.default,r=this.globalize.formatDate(e[this.eventFields.startTime],{type:"dateTime",skeleton:"full",calendar:this.getCalendarMode()}),a=this.globalize.formatDate(e[this.eventFields.endTime],{type:"dateTime",skeleton:"full",calendar:this.getCalendarMode()}),s=n+" "+this.localeObj.getConstant("beginFrom")+" "+r+" "+this.localeObj.getConstant("endAt")+" "+a;return i&&(s=i+" "+s),s},n.prototype.boundaryValidation=function(e,t){var i={left:!1,right:!1,top:!1,bottom:!1},n=this.element.querySelector("."+iw).getBoundingClientRect();return e<n.top+30+window.pageYOffset&&e>n.top+window.pageYOffset&&(i.top=!0),e>n.bottom-30+window.pageYOffset&&e<n.bottom+window.pageYOffset&&(i.bottom=!0),t<n.left+30+window.pageXOffset&&t>n.left+window.pageXOffset&&(i.left=!0),t>n.right-30+window.pageXOffset&&t<n.right+window.pageXOffset&&(i.right=!0),i},n.prototype.getWeekNumberContent=function(e){var t;if("FirstDay"===this.weekRule){var i=v(e.slice(-1)[0],this.firstDayOfWeek);t=this.globalize.formatNumber(b(i))}else if("FirstFourDayWeek"===this.weekRule){var n=D(r=f(e.slice(-1)[0],this.firstDayOfWeek),v(e.slice(-1)[0],this.firstDayOfWeek));t=this.globalize.formatNumber(b(n))}else if("FirstFullWeek"===this.weekRule){var r=f(e.slice(-1)[0],this.firstDayOfWeek);t=this.globalize.formatNumber(b(r))}return t},n.prototype.renderHeaderIndentTemplate=function(e,i){if(this.activeViewOptions.headerIndentTemplate){var n=this.element.id+"_"+this.activeViewOptions.headerIndentTemplateName+"headerIndentTemplate",r=[].slice.call(this.getHeaderIndentTemplate()(e,this,"headerIndentTemplate",n,!1));t.append(r,i)}},n.prototype.isSpecificResourceEvents=function(){return this.activeViewOptions.group.resources.length>0&&!this.activeViewOptions.group.allowGroupEdit&&!this.rowAutoHeight&&!this.virtualScrollModule&&this.activeViewOptions.group.byGroupID},n.prototype.unWireEvents=function(){t.EventHandler.remove(window,"resize",this.onScheduleResize),t.EventHandler.remove(window,"orientationchange",this.onScheduleResize),t.EventHandler.remove(document,t.Browser.touchStartEvent,this.onDocumentClick)},n.prototype.getModuleName=function(){return"schedule"},n.prototype.getPersistData=function(){return this.addOnPersist(["currentView","selectedDate","scrollTop","scrollLeft"])},n.prototype.onPropertyChanged=function(e,i){if(!this.isReact||!t.isNullOrUndefined(this.activeView)){for(var n={isRefresh:!1,isResource:!1,isDate:!1,isView:!1,isLayout:!1,isDataManager:!1},r=0,a=Object.keys(e);r<a.length;r++){var s=a[r];switch(s){case"views":this.setViewOptions(),this.headerModule&&this.headerModule.updateItems(),n.isView=!0;break;case"currentView":n.isView=!0;break;case"minDate":case"maxDate":case"selectedDate":n.isDate=!0;break;case"dateFormat":this.activeViewOptions=this.getActiveViewOptions(),this.headerModule&&this.headerModule.updateDateRange();break;case"showHeaderBar":this.destroyHeaderModule(),e.showHeaderBar&&(this.headerModule=new rn(this),this.headerModule.updateDateRange()),this.notify(tp,{cssProperties:this.getCssProperties()}),this.activeView.isTimelineView()&&this.refreshEvents(!1);break;case"workDays":JSON.stringify(i.workDays)!==JSON.stringify(e.workDays)&&(n.isLayout=!0);break;case"showWeekend":case"startHour":case"endHour":case"workHours":case"readonly":case"headerRows":case"showWeekNumber":case"rowAutoHeight":n.isLayout=!0;break;case"locale":case"calendarMode":this.globalize=new t.Internationalization(this.locale),this.localeObj=new t.L10n(this.getModuleName(),this.defaultLocale,this.locale),this.setCldrTimeFormat(),this.setCalendarMode(),n.isRefresh=!0;break;case"firstDayOfWeek":this.activeViewOptions.firstDayOfWeek=e.firstDayOfWeek,this.eventWindow&&this.eventWindow.refreshRecurrenceEditor(),n.isLayout=!0;break;case"showTimeIndicator":this.activeViewOptions.timeScale.enable&&this.activeView&&this.activeView.highlightCurrentTime();break;case"cellHeaderTemplate":this.activeViewOptions.cellHeaderTemplate=e.cellHeaderTemplate,this.cellHeaderTemplateFn=this.templateParser(this.activeViewOptions.cellHeaderTemplate),n.isLayout=!0;break;case"cellTemplate":this.activeViewOptions.cellTemplate=e.cellTemplate,this.cellTemplateFn=this.templateParser(this.activeViewOptions.cellTemplate),n.isLayout=!0;break;case"dateHeaderTemplate":this.activeViewOptions.dateHeaderTemplate=e.dateHeaderTemplate,this.dateHeaderTemplateFn=this.templateParser(this.activeViewOptions.dateHeaderTemplate),n.isLayout=!0;break;case"dateRangeTemplate":this.activeViewOptions.dateRangeTemplate=e.dateRangeTemplate,this.dateRangeTemplateFn=this.templateParser(this.activeViewOptions.dateRangeTemplate),this.headerModule&&this.headerModule.updateDateRange();break;case"dayHeaderTemplate":this.activeViewOptions.dayHeaderTemplate=e.dayHeaderTemplate,this.dayHeaderTemplateFn=this.templateParser(this.activeViewOptions.dayHeaderTemplate),n.isLayout=!0;break;case"monthHeaderTemplate":this.activeViewOptions.monthHeaderTemplate=e.monthHeaderTemplate,this.monthHeaderTemplateFn=this.templateParser(this.activeViewOptions.monthHeaderTemplate),n.isLayout=!0;break;case"resourceHeaderTemplate":this.activeViewOptions.resourceHeaderTemplate=e.resourceHeaderTemplate,this.resourceHeaderTemplateFn=this.templateParser(this.activeViewOptions.resourceHeaderTemplate),n.isLayout=!0;break;case"timezone":this.eventBase.timezonePropertyChange(i.timezone),this.headerModule.setCalendarTimezone();break;case"enableRtl":this.setRtlClass(),n.isRefresh=!0;break;default:this.extendedPropertyChange(s,e,i,n)}}this.propertyChangeAction(n)}},n.prototype.propertyChangeAction=function(e){e.isRefresh?this.refresh():e.isResource?this.initializeResources(!0):e.isView?this.changeView(this.currentView,null,!0):e.isDate?this.changeDate(this.selectedDate):e.isLayout?(this.activeCellsData=null,this.initializeView(this.currentView)):e.isDataManager&&this.crudModule&&(this.dragAndDropModule&&(this.dragAndDropModule.actionObj.action="",t.removeClass([this.element],iH)),this.crudModule.refreshDataManager())},n.prototype.allDayRowScrollUpdate=function(){var e=this.element.querySelector("."+tA),i=this.element.querySelector("."+tk);if("auto"!==this.height&&this.enableAllDayScroll)e.classList.contains(ri)&&t.removeClass([e],ri),this.eventBase.allDayExpandScroll(e);else if(t.addClass([e],ri),e.classList.contains(rt)&&t.removeClass([e],rt),this.uiStateValues.expand){var n=[].slice.call(this.element.querySelectorAll("."+tO));n[0].style.height=i.style.height?i.style.height:n[1].style.height}this.uiStateValues.expand||(i.style.height="")},n.prototype.extendedPropertyChange=function(e,i,n,r){switch(e){case"width":case"height":case"enableAllDayScroll":["Day","Week","WorkWeek"].indexOf(this.currentView)>-1&&this.allDayRowScrollUpdate(),this.notify(tc,{module:"scroll",properties:{width:i.width,height:i.height}});break;case"cssClass":n.cssClass&&t.removeClass([this.element],n.cssClass.split(" ")),i.cssClass&&t.addClass([this.element],i.cssClass.split(" "));break;case"hideEmptyAgendaDays":case"agendaDaysCount":this.activeViewOptions=this.getActiveViewOptions(),r.isView=!0;break;case"eventSettings":this.onEventSettingsPropertyChanged(i.eventSettings,n.eventSettings,r);break;case"allowKeyboardInteraction":this.keyboardInteractionModule&&(this.keyboardInteractionModule.destroy(),this.keyboardInteractionModule=null),i.allowKeyboardInteraction&&(this.keyboardInteractionModule=new rs(this));break;case"timezoneDataSource":this.eventWindow&&this.eventWindow.refresh();break;case"editorTemplate":t.isNullOrUndefined(this.editorTemplate)||(this.editorTemplateFn=this.templateParser(this.editorTemplate)),this.eventWindow&&this.eventWindow.setDialogContent();break;case"editorHeaderTemplate":t.isNullOrUndefined(this.editorHeaderTemplate)||(this.editorHeaderTemplateFn=this.templateParser(this.editorHeaderTemplate)),this.eventWindow&&this.eventWindow.setDialogHeader();break;case"editorFooterTemplate":t.isNullOrUndefined(this.editorFooterTemplate)||(this.editorFooterTemplateFn=this.templateParser(this.editorFooterTemplate)),this.eventWindow&&this.eventWindow.setDialogFooter();break;case"quickInfoTemplates":this.quickInfoTemplates.header&&(this.quickInfoTemplatesHeaderFn=this.templateParser(this.quickInfoTemplates.header)),this.quickInfoTemplates.content&&(this.quickInfoTemplatesContentFn=this.templateParser(this.quickInfoTemplates.content)),this.quickInfoTemplates.footer&&(this.quickInfoTemplatesFooterFn=this.templateParser(this.quickInfoTemplates.footer));break;case"group":this.onGroupSettingsPropertyChanged(i.group,n.group,r);break;case"resources":r.isResource=!0;break;case"timeScale":this.activeViewOptions.timeScale.interval=i.timeScale.interval||this.activeViewOptions.timeScale.interval,this.activeViewOptions.timeScale.slotCount=i.timeScale.slotCount||this.activeViewOptions.timeScale.slotCount,this.eventWindow&&this.eventWindow.refreshDateTimePicker(),r.isLayout=!0;break;case"allowDragAndDrop":case"allowResizing":case"eventDragArea":this.refreshEvents(!1);break;case"weekRule":r.isLayout=!0;break;case"firstMonthOfYear":this.activeViewOptions.firstMonthOfYear=i.firstMonthOfYear,this.viewIndex=this.activeView.viewIndex,r.isLayout=!0;break;case"monthsCount":this.activeViewOptions.monthsCount=i.monthsCount,this.viewIndex=this.activeView.viewIndex,r.isLayout=!0;break;case"timeFormat":this.internalTimeFormat=i.timeFormat||this.activeViewOptions.timeFormat,this.eventWindow&&this.eventWindow.refreshDateTimePicker(),r.isLayout=!0;break;case"enableAdaptiveUI":this.showHeaderBar&&this.headerModule&&(this.destroyHeaderModule(),this.headerModule=new rn(this),this.headerModule.updateDateRange()),r.isLayout=!0;break;case"headerIndentTemplate":this.activeViewOptions.headerIndentTemplate=i.headerIndentTemplate,this.headerIndentTemplateFn=this.templateParser(this.activeViewOptions.headerIndentTemplate),r.isLayout=!0}},n.prototype.setRtlClass=function(){this.enableRtl?t.addClass([this.element],"e-rtl"):t.removeClass([this.element],"e-rtl")},n.prototype.onGroupSettingsPropertyChanged=function(e,t,i){for(var n=0,r=Object.keys(e);n<r.length;n++)"headerTooltipTemplate"===r[n]?this.headerTooltipTemplateFn=this.templateParser(e.headerTooltipTemplate):(i.isLayout=!0,this.eventWindow&&this.eventWindow.refresh())},n.prototype.onEventSettingsPropertyChanged=function(e,t,i){for(var n=0,r=Object.keys(e);n<r.length;n++)switch(r[n]){case"dataSource":case"query":case"fields":case"includeFiltersInQuery":this.initializeDataModule(),i.isDataManager=!0;break;case"template":this.activeViewOptions.eventTemplate=e.template,this.appointmentTemplateFn=this.templateParser(this.activeViewOptions.eventTemplate),i.isDataManager=!0;break;case"enableTooltip":this.eventTooltip&&(this.eventTooltip.destroy(),this.eventTooltip=null),e.enableTooltip&&(this.eventTooltip=new rL(this));break;case"tooltipTemplate":this.eventTooltipTemplateFn=this.templateParser(this.eventSettings.tooltipTemplate);break;case"resourceColorField":this.resourceBase&&this.resourceBase.setResourceCollection(),i.isDataManager=!0;break;case"editFollowingEvents":this.quickPopup&&this.quickPopup.refreshQuickDialog();break;case"allowAdding":case"allowEditing":case"allowDeleting":this.showHeaderBar&&this.headerModule&&this.headerModule.updateAddIcon(),this.eventWindow&&this.eventWindow.refresh();break;case"spannedEventPlacement":case"minimumEventDuration":case"enableMaxHeight":case"enableIndicator":this.refreshEvents(!1);break;case"ignoreWhitespace":i.isLayout=!0}},n.prototype.destroyHeaderModule=function(){this.headerModule&&(this.headerModule.destroy(),this.headerModule=null)},n.prototype.destroyPopups=function(){this.quickPopup&&(this.quickPopup.destroy(),this.quickPopup=null),this.eventWindow&&(this.eventWindow.destroy(),this.eventWindow=null)},n.prototype.showSpinner=function(){i.showSpinner(this.element)},n.prototype.hideSpinner=function(){i.hideSpinner(this.element)},n.prototype.setWorkHours=function(e,i,n,r){var a=[];a=this.getWorkHourCells(e,i,n,r),t.addClass(a,tV)},n.prototype.resetWorkHours=function(e,i,n,r){if(void 0===e&&(e=this.activeView.renderDates),e&&i&&n){var a=this.getWorkHourCells(e,i,n,r);t.removeClass(a,tV)}else{var s=[].slice.call(this.element.querySelectorAll("."+tV));t.removeClass(s,tV)}},n.prototype.getWorkHourCells=function(e,i,n,r){if(["Agenda","MonthAgenda","Month","TimelineMonth"].indexOf(this.currentView)>-1)return[];var a=this.getStartEndTime(i),s=this.getStartEndTime(n),o=this.getContentTable();if(t.isNullOrUndefined(a)||t.isNullOrUndefined(s)||!o)return[];a.setMilliseconds(0),s.setMilliseconds(0);var l=this.activeView.getStartHour();a<l&&(a=l);var h=this.activeView.getEndHour();s>h&&(s=h);for(var p=this.activeViewOptions.timeScale.interval*tf/this.activeViewOptions.timeScale.slotCount,c=Math.round((a.getTime()-l.getTime())/p),d=Math.ceil((s.getTime()-l.getTime())/p),u=c,m=d,f=[],v=0;v<e.length;v++){var g=e[v];C(g=this.getDateTime(g));var y=this.activeView.renderDates;t.isNullOrUndefined(r)||!this.resourceBase||this.activeView.isTimelineView()||(y=this.resourceBase.lastResourceLevel[parseInt(r.toString(),10)].renderDates);var b=this.getIndexOfDate(y,g);if(b>=0){if(this.activeView.isTimelineView()){var D=Math.round((h.getTime()-l.getTime())/p);c=u+b*D,d=m+b*D}for(var w=c;w<d;w++)if(this.activeView.isTimelineView()){var T=t.isNullOrUndefined(r)?0:r;f.push(o.rows[parseInt(T.toString(),10)].cells[parseInt(w.toString(),10)])}else if(t.isNullOrUndefined(r))f.push(o.rows[parseInt(w.toString(),10)].cells[parseInt(b.toString(),10)]);else{var E="."+tM+'[data-group-index="'+r+'"]',S=[].slice.call(o.rows[parseInt(w.toString(),10)].querySelectorAll(E));f.push(S[parseInt(b.toString(),10)])}}}return f},n.prototype.getCellDetails=function(e){var i=e instanceof Array?e:[e],n=t.getElement(i[0]),r=t.getElement(i.slice(-1)[0]),a=this.getDateFromElement(n),s=this.getDateFromElement(r);if(!t.isNullOrUndefined(a)&&!t.isNullOrUndefined(s)){var o=this.activeView.isTimelineView()&&!t.isNullOrUndefined(r.getAttribute("colSpan"))&&this.headerRows.length>0,l=o?parseInt(r.getAttribute("colSpan"),10):1,h={startTime:a,endTime:s=!this.activeViewOptions.timeScale.enable||o||r.classList.contains(tO)||r.classList.contains(tP)?S(new Date(s.getTime()),l):this.activeView.getEndDateFromStartDate(s),isAllDay:this.isAllDayCell(n),element:e},p=n.getAttribute("data-group-index");return t.isNullOrUndefined(p)||(h.groupIndex=parseInt(p,10)),h}},n.prototype.getSelectedElements=function(){return this.keyboardInteractionModule&&this.keyboardInteractionModule.selectedCells.length>0?this.keyboardInteractionModule.selectedCells:this.getSelectedCells()},n.prototype.getResourceCollections=function(){return this.resourceCollection},n.prototype.setResourceCollections=function(e){this.setProperties({resources:e},!1)},n.prototype.changeCurrentView=function(e,t){var i=this.getViewIndex(e),n=e.charAt(0).toLowerCase()+e.slice(1),r=this.viewOptions[""+n];r&&(i=this.viewCollections.indexOf(r[t||0])),-1!==i&&i!==this.viewIndex&&this.changeView(e,null,null,i)},n.prototype.getCurrentViewIndex=function(){return this.viewIndex},n.prototype.getResourcesByIndex=function(e){if(this.resourceBase&&this.resourceBase.lastResourceLevel&&!(e<0)&&!(e>=this.resourceBase.lastResourceLevel.length)){var t=this.resourceBase.lastResourceLevel[parseInt(e.toString(),10)],i={};return this.resourceBase.setResourceValues(i,e),{resource:t.resource,resourceData:t.resourceData,groupData:i}}},n.prototype.expandResource=function(e,t){this.activeView.isTimelineView()&&this.resourceBase&&this.resourceCollection.length>1&&this.resourceBase.resourceExpand(e,t,!1)},n.prototype.collapseResource=function(e,t){this.activeView.isTimelineView()&&this.resourceBase&&this.resourceCollection.length>1&&this.resourceBase.resourceExpand(e,t,!0)},n.prototype.scrollTo=function(e,i){this.activeView.scrollToDate&&t.isNullOrUndefined(e)&&i?this.activeView.scrollToDate(i):this.activeView.scrollToHour&&this.activeView.scrollToHour(e,i)},n.prototype.scrollToResource=function(e,t){this.resourceBase&&this.resourceBase.lastResourceLevel&&this.resourceBase.resourceScroll(e,t)},n.prototype.exportToICalendar=function(e,t){if(!this.iCalendarExportModule)throw Error("Inject ICalendarExport module");this.iCalendarExportModule.initializeCalendarExport(e,t)},n.prototype.importICalendar=function(e){if(!this.iCalendarImportModule)throw Error("Inject ICalendarImport module");this.iCalendarImportModule.initializeCalendarImport(e)},n.prototype.addEvent=function(e){this.crudModule.addEvent(e)},n.prototype.generateEventOccurrences=function(e,t){return this.eventBase?this.eventBase.generateOccurrence(e,t):[]},n.prototype.exportToExcel=function(e){if(!this.excelExportModule)throw Error("Inject ExcelExport module");this.excelExportModule.initializeExcelExport(e)},n.prototype.print=function(e){if(!this.printModule)throw Error("Inject Print module");this.printModule.print(e)},n.prototype.saveEvent=function(e,t){this.crudModule.saveEvent(e,t)},n.prototype.deleteEvent=function(e,t){this.crudModule.deleteEvent(e,t)},n.prototype.getEvents=function(e,t,i){var n=[];return n=i?this.eventBase.getProcessedEvents():this.eventsData,e&&(e=this.getDateTime(e)),t&&(t=this.getDateTime(t)),n=this.eventBase.filterEventsByRange(n,e,t)},n.prototype.getBlockEvents=function(e,t,i){var n=[];return n=i?this.eventBase.getProcessedEvents(this.blockData):this.blockData,e&&(e=this.getDateTime(e)),t&&(t=this.getDateTime(t)),n=this.eventBase.filterEventsByRange(n,e,t)},n.prototype.getOccurrencesByID=function(e){return this.eventBase.getOccurrencesByID(e)},n.prototype.getOccurrencesByRange=function(e,t){return e=this.getDateTime(e),t=this.getDateTime(t),this.eventBase.getOccurrencesByRange(e,t)},n.prototype.getCurrentViewDates=function(){return this.activeView?this.activeView.renderDates:[]},n.prototype.setRecurrenceEditor=function(e){this.eventWindow.setRecurrenceEditor(e)},n.prototype.getEventMaxID=function(){return this.eventBase.getEventMaxID()},n.prototype.getDeletedOccurrences=function(e){return this.eventBase.getDeletedOccurrences(e)},n.prototype.getCurrentViewEvents=function(){return this.eventsProcessed},n.prototype.refreshEvents=function(e){void 0===e&&(e=!0),e?(this.dragAndDropModule&&(this.dragAndDropModule.actionObj.action="",t.removeClass([this.element],iH)),this.crudModule.refreshDataManager()):(this.uiStateValues&&(this.uiStateValues.isPreventTimezone=!0),this.crudModule&&this.crudModule.refreshProcessedData(),this.uiStateValues&&(this.uiStateValues.isPreventTimezone=!1))},n.prototype.refreshTemplates=function(e){switch(e?this.resetTemplates([e]):this.resetTemplates(),e){case"eventTemplate":this.appointmentTemplateFn=this.templateParser(this.activeViewOptions.eventTemplate),this.refreshEvents(!1);break;case"dateHeaderTemplate":this.dateHeaderTemplateFn=this.templateParser(this.activeViewOptions.dateHeaderTemplate),this.activeView.refreshHeader();break;case"dateRangeTemplate":this.dateRangeTemplateFn=this.templateParser(this.activeViewOptions.dateRangeTemplate),this.headerModule&&this.headerModule.refresh();break;case"resourceHeaderTemplate":this.resourceHeaderTemplateFn=this.templateParser(this.activeViewOptions.resourceHeaderTemplate),this.activeView.isTimelineView()?this.activeView.refreshResourceHeader():this.activeView.refreshHeader();break;case"quickInfoTemplates":this.quickPopup&&(this.quickPopup.destroy(),this.quickPopup=null),this.quickPopup=new rU(this),this.quickInfoTemplatesHeaderFn=this.templateParser(this.quickInfoTemplates.header),this.quickInfoTemplatesContentFn=this.templateParser(this.quickInfoTemplates.content),this.quickInfoTemplatesFooterFn=this.templateParser(this.quickInfoTemplates.footer);break;case"editorTemplate":this.destroyEditorWindow(),this.editorTemplateFn=this.templateParser(this.editorTemplate);break;case"editorHeaderTemplate":this.destroyEditorWindow(),this.editorHeaderTemplateFn=this.templateParser(this.editorHeaderTemplate);break;case"editorFooterTemplate":this.destroyEditorWindow(),this.editorFooterTemplateFn=this.templateParser(this.editorFooterTemplate);break;case"tooltipTemplate":case"headerTooltipTemplate":this.eventTooltip&&(this.eventTooltip.destroy(),this.eventTooltip=null),this.eventTooltip=new rL(this),this.eventTooltipTemplateFn=this.templateParser(this.eventSettings.tooltipTemplate),this.headerTooltipTemplateFn=this.templateParser(this.activeViewOptions.group.headerTooltipTemplate);break;default:this.initializeView(this.currentView)}},n.prototype.refreshLayout=function(){this.onScheduleResize(),this.headerModule&&this.headerModule.refresh(),this.eventWindow&&this.eventWindow.refresh()},n.prototype.getEventDetails=function(e){var i=(e=t.getElement(e)).getAttribute("data-guid");return i?this.eventBase.getEventByGuid(i):{}},n.prototype.isSlotAvailable=function(e,i,n){var r,a,s=this,o=this.activeEventData.event;if(e instanceof Date||"string"==typeof e?(r=e,a=i):(o=e,r=e[this.eventFields.startTime],a=e[this.eventFields.endTime],this.resourceBase&&(n=this.eventBase.getGroupIndexFromEvent(e))),t.isNullOrUndefined(r)||t.isNullOrUndefined(a))return!0;r=this.getDateTime(r),a=this.getDateTime(a);var l=this.eventBase.filterEvents(r,a);return!t.isNullOrUndefined(n)&&this.resourceBase&&this.resourceBase.lastResourceLevel.length>0&&(l=this.eventBase.filterEventsByResource(this.resourceBase.lastResourceLevel[parseInt(n.toString(),10)],l)),o&&(l=o.Guid?l.filter(function(e){return e.Guid!==o.Guid}):l.filter(function(e){return e[s.eventFields.id]!==o[s.eventFields.id]})),!(l.length>0)},n.prototype.openEditor=function(e,i,n,r){"Add"!==i||n?(e[this.eventFields.startTime]=this.getDateTime(e[this.eventFields.startTime]),e[this.eventFields.endTime]=this.getDateTime(e[this.eventFields.endTime])):(e.startTime=this.getDateTime(e.startTime),e.endTime=this.getDateTime(e.endTime),t.isNullOrUndefined(e.element)||(e.element=t.getElement(e.element))),this.currentAction=i,"Add"!==i&&(this.activeEventData.event=e),this.eventWindow.openEditor(e,i,n,r)},n.prototype.closeEditor=function(){this.eventWindow&&this.eventWindow.dialogClose()},n.prototype.openQuickInfoPopup=function(e){var i=this;if("Year"!==this.currentView&&!t.isNullOrUndefined(e)){if(t.isNullOrUndefined(e[this.eventFields.id])){if("Agenda"===this.currentView||"MonthAgenda"===this.currentView||t.isNullOrUndefined(this.activeView))return;var n={startTime:this.activeCellsData.startTime=this.getDateTime(e[this.eventFields.startTime]),endTime:this.activeCellsData.endTime=this.getDateTime(e[this.eventFields.endTime]),isAllDay:this.activeCellsData.isAllDay=!t.isNullOrUndefined(e[this.eventFields.isAllDay])&&e[this.eventFields.isAllDay]},r=this.activeView.getAdjustedDate(new Date(n.startTime));if(r){var a="."+tM+'[data-date="'+r.getTime()+'"]';this.activeViewOptions.group.resources.length>0&&!this.uiStateValues.isGroupAdaptive&&this.resourceBase&&this.eventBase&&(n.groupIndex=this.eventBase.getGroupIndexFromEvent(e),a="."+tM+'[data-date="'+r.getTime()+'"][data-group-index="'+n.groupIndex+'"]');var s=this.element.querySelector(a);s&&(s.focus(),n.element=s,this.notify(eK,n))}}else{var o=this.getCurrentViewEvents().filter(function(t){return e[i.eventFields.id]===t[i.eventFields.id]});if(o.length<=0)return;var l=o[0];if(e[this.eventFields.recurrenceRule]){var h=o.filter(function(t){return t[i.eventFields.startTime].getTime()===e[i.eventFields.startTime].getTime()});h.length>0&&(l=h[0])}var p=this.element.querySelector('div[data-guid="'+l.Guid+'"]');p&&(this.eventBase.removeSelectedAppointmentClass(),this.eventBase.addSelectedAppointments([p],!1),this.activeEventData={event:l,element:p},"Agenda"!==this.currentView&&"MonthAgenda"!==this.currentView||t.addClass([this.activeEventData.element],iS),this.notify(e3,this.activeEventData))}}},n.prototype.closeQuickInfoPopup=function(){this.quickPopup&&this.quickPopup.quickPopupHide(!0)},n.prototype.closeTooltip=function(){this.eventTooltip&&this.eventTooltip.close()},n.prototype.selectResourceByIndex=function(e){this.resourceBase&&this.uiStateValues.isGroupAdaptive&&this.resourceBase.selectResourceByIndex(e)},n.prototype.getIndexFromResourceId=function(e,t){return this.resourceBase?this.resourceBase.getIndexFromResourceId(e,t):null},n.prototype.addResource=function(e,t,i){this.resourceBase.addResource(e,t,i)},n.prototype.removeResource=function(e,t){this.resourceBase.removeResource(e,t)},n.prototype.destroy=function(){this.eventTooltip&&(this.eventTooltip.destroy(),this.eventTooltip=null),this.destroyPopups(),this.hideSpinner(),this.unWireEvents(),this.destroyHeaderModule(),this.eventBase&&(this.eventBase.destroy(),this.eventBase=null),this.workCellAction&&(this.workCellAction.destroy(),this.workCellAction=null),this.inlineModule&&(this.inlineModule.destroy(),this.inlineModule=null),this.keyboardInteractionModule&&(this.keyboardInteractionModule.destroy(),this.keyboardInteractionModule=null),this.scrollModule&&(this.scrollModule.destroy(),this.scrollModule=null),this.printModule&&this.printModule.destroy(),this.activeView&&(this.resetTemplates(),this.activeView.removeEventListener(),this.activeView.destroy(),this.activeView=null),this.scheduleTouchModule&&(this.scheduleTouchModule.destroy(),this.scheduleTouchModule=null),this.crudModule&&(this.crudModule.destroy(),this.crudModule=null),this.dataModule&&(this.dataModule.destroy(),this.dataModule=null),e.prototype.destroy.call(this);for(var i=0,n=["dayModule","weekModule","workWeekModule","monthModule","monthAgendaModule","yearModule","agendaModule","timelineViewsModule","timelineMonthModule","timelineYearModule","resizeModule","dragAndDropModule","excelExportModule","printModule","iCalendarExportModule","iCalendarImportModule","tzModule","eventsData","eventsProcessed","blockData","blockProcessed","uiStateValues","viewCollections","viewOptions","defaultLocale","localeObj","selectedElements","resourceCollection","editorTitles","eventFields","activeViewOptions","activeEventData","activeCellsData","renderModule"];i<n.length;i++)this[""+n[i]]=null;R(this.element);var r=[ty,"e-rtl",tb,tD];this.cssClass&&(r=r.concat(this.cssClass.split(" "))),t.removeClass([this.element],r)},aZ([t.Property("auto")],n.prototype,"width",void 0),aZ([t.Property("auto")],n.prototype,"height",void 0),aZ([t.Property(!0)],n.prototype,"showHeaderBar",void 0),aZ([t.Property(!0)],n.prototype,"showTimeIndicator",void 0),aZ([t.Property(!0)],n.prototype,"allowSwiping",void 0),aZ([t.Property("Week")],n.prototype,"currentView",void 0),aZ([t.Property(["Day","Week","WorkWeek","Month","Agenda"])],n.prototype,"views",void 0),aZ([t.Property(new Date)],n.prototype,"selectedDate",void 0),aZ([t.Property(new Date(1900,0,1))],n.prototype,"minDate",void 0),aZ([t.Property(new Date(2099,11,31))],n.prototype,"maxDate",void 0),aZ([t.Property()],n.prototype,"dateFormat",void 0),aZ([t.Property("Gregorian")],n.prototype,"calendarMode",void 0),aZ([t.Property(!0)],n.prototype,"showWeekend",void 0),aZ([t.Property(0)],n.prototype,"firstDayOfWeek",void 0),aZ([t.Property("FirstDay")],n.prototype,"weekRule",void 0),aZ([t.Property([1,2,3,4,5])],n.prototype,"workDays",void 0),aZ([t.Property(12)],n.prototype,"monthsCount",void 0),aZ([t.Property("00:00")],n.prototype,"startHour",void 0),aZ([t.Property("24:00")],n.prototype,"endHour",void 0),aZ([t.Property(null)],n.prototype,"timeFormat",void 0),aZ([t.Property(!0)],n.prototype,"enableHtmlSanitizer",void 0),aZ([t.Property(!1)],n.prototype,"enableAllDayScroll",void 0),aZ([t.Property(!1)],n.prototype,"enableAdaptiveUI",void 0),aZ([t.Property(!0)],n.prototype,"allowResizing",void 0),aZ([t.Complex({},aw)],n.prototype,"workHours",void 0),aZ([t.Complex({},aE)],n.prototype,"timeScale",void 0),aZ([t.Property(!0)],n.prototype,"allowKeyboardInteraction",void 0),aZ([t.Property(!0)],n.prototype,"allowDragAndDrop",void 0),aZ([t.Property()],n.prototype,"dateHeaderTemplate",void 0),aZ([t.Property()],n.prototype,"dateRangeTemplate",void 0),aZ([t.Property()],n.prototype,"cellHeaderTemplate",void 0),aZ([t.Property()],n.prototype,"dayHeaderTemplate",void 0),aZ([t.Property()],n.prototype,"monthHeaderTemplate",void 0),aZ([t.Property()],n.prototype,"cellTemplate",void 0),aZ([t.Property(!1)],n.prototype,"readonly",void 0),aZ([t.Property(!0)],n.prototype,"showQuickInfo",void 0),aZ([t.Property(!1)],n.prototype,"allowInline",void 0),aZ([t.Property(!0)],n.prototype,"allowMultiCellSelection",void 0),aZ([t.Property(!0)],n.prototype,"allowMultiRowSelection",void 0),aZ([t.Property(!1)],n.prototype,"quickInfoOnSelectionEnd",void 0),aZ([t.Property(!1)],n.prototype,"showWeekNumber",void 0),aZ([t.Property(!1)],n.prototype,"rowAutoHeight",void 0),aZ([t.Property(!1)],n.prototype,"allowMultiDrag",void 0),aZ([t.Property(0)],n.prototype,"firstMonthOfYear",void 0),aZ([t.Property()],n.prototype,"editorTemplate",void 0),aZ([t.Property()],n.prototype,"editorHeaderTemplate",void 0),aZ([t.Property()],n.prototype,"editorFooterTemplate",void 0),aZ([t.Complex({},ak)],n.prototype,"quickInfoTemplates",void 0),aZ([t.Property(7)],n.prototype,"agendaDaysCount",void 0),aZ([t.Property(!0)],n.prototype,"hideEmptyAgendaDays",void 0),aZ([t.Property(!0)],n.prototype,"enableRecurrenceValidation",void 0),aZ([t.Property()],n.prototype,"timezone",void 0),aZ([t.Complex({},aj)],n.prototype,"eventSettings",void 0),aZ([t.Property(rc)],n.prototype,"timezoneDataSource",void 0),aZ([t.Property()],n.prototype,"resourceHeaderTemplate",void 0),aZ([t.Property()],n.prototype,"headerIndentTemplate",void 0),aZ([t.Complex({},az)],n.prototype,"group",void 0),aZ([t.Collection([],aG)],n.prototype,"resources",void 0),aZ([t.Collection([],aV)],n.prototype,"headerRows",void 0),aZ([t.Property()],n.prototype,"cssClass",void 0),aZ([t.Property()],n.prototype,"eventDragArea",void 0),aZ([t.Event()],n.prototype,"created",void 0),aZ([t.Event()],n.prototype,"destroyed",void 0),aZ([t.Event()],n.prototype,"cellClick",void 0),aZ([t.Event()],n.prototype,"cellDoubleClick",void 0),aZ([t.Event()],n.prototype,"moreEventsClick",void 0),aZ([t.Event()],n.prototype,"hover",void 0),aZ([t.Event()],n.prototype,"select",void 0),aZ([t.Event()],n.prototype,"actionBegin",void 0),aZ([t.Event()],n.prototype,"actionComplete",void 0),aZ([t.Event()],n.prototype,"actionFailure",void 0),aZ([t.Event()],n.prototype,"navigating",void 0),aZ([t.Event()],n.prototype,"renderCell",void 0),aZ([t.Event()],n.prototype,"eventClick",void 0),aZ([t.Event()],n.prototype,"eventRendered",void 0),aZ([t.Event()],n.prototype,"dataBinding",void 0),aZ([t.Event()],n.prototype,"popupOpen",void 0),aZ([t.Event()],n.prototype,"popupClose",void 0),aZ([t.Event()],n.prototype,"dragStart",void 0),aZ([t.Event()],n.prototype,"drag",void 0),aZ([t.Event()],n.prototype,"dragStop",void 0),aZ([t.Event()],n.prototype,"resizeStart",void 0),aZ([t.Event()],n.prototype,"resizing",void 0),aZ([t.Event()],n.prototype,"resizeStop",void 0),aZ([t.Event()],n.prototype,"virtualScrollStart",void 0),aZ([t.Event()],n.prototype,"virtualScrollStop",void 0),aZ([t.Event()],n.prototype,"dataBound",void 0),n=aZ([t.NotifyPropertyChanges],n)}(t.Component),aJ=function(){function e(e){this.daysVariation=0,this.parent=e,this.actionObj={X:0,Y:0,groupIndex:0,cellWidth:0,cellHeight:0,slotInterval:0,interval:0,actionIndex:0,cloneElement:[],originalElement:[],action:null,isAllDay:null,excludeSelectors:null,index:0,navigationInterval:null,scrollInterval:null},this.scrollArgs={element:null,width:0,height:0},this.resizeEdges={left:!1,right:!1,top:!1,bottom:!1},this.scrollEdges={left:!1,right:!1,top:!1,bottom:!1}}return e.prototype.getChangedData=function(e){var i=this,n=t.extend({},this.actionObj.event,null,!0);if(n[this.parent.eventFields.startTime]=this.actionObj.start,n[this.parent.eventFields.endTime]=this.actionObj.end,t.isNullOrUndefined(this.actionObj.isAllDay)||(n[this.parent.eventFields.isAllDay]=this.actionObj.isAllDay),this.parent.activeViewOptions.group.resources.length>0){var r=this.getOriginalElement(this.actionObj.element);if(r){var a=r.map(function(e){return parseInt(e.getAttribute("data-group-index"),10)});if(-1===a.indexOf(this.actionObj.groupIndex)||!t.isNullOrUndefined(e)&&e.length>0){var s=parseInt(this.actionObj.clone.getAttribute("data-group-index"),10);(a=a.filter(function(e){return e!==s})).push(this.actionObj.groupIndex),e&&e.length>0?e.forEach(function(e){i.parent.resourceBase.getResourceData(e,i.actionObj.groupIndex,a)}):this.parent.resourceBase.getResourceData(n,this.actionObj.groupIndex,a)}}}return n},e.prototype.saveChangedData=function(e,t){void 0===t&&(t=!1),this.parent.activeEventData.event=this.actionObj.event,this.parent.currentAction="Save";var i,n=[e.data];t&&(n=e.selectedData);for(var r=0,a=n;r<a.length;r++){var s=a[r],o=!(this.parent.activeViewOptions.group.resources.length>0)||parseInt(this.actionObj.element.getAttribute("data-group-index"),10)===this.actionObj.groupIndex;if(+s[this.parent.eventFields.startTime]==+this.actionObj.event[this.parent.eventFields.startTime]&&+s[this.parent.eventFields.endTime]==+this.actionObj.event[this.parent.eventFields.endTime]&&o)return void(this.parent.crudModule.crudObj.isCrudAction=!1);if(s[this.parent.eventFields.recurrenceRule]){var l=s[this.parent.eventFields.recurrenceID]||s[this.parent.eventFields.id];if(s[this.parent.eventFields.id]===s[this.parent.eventFields.recurrenceID]&&(s[this.parent.eventFields.id]=this.parent.eventBase.getEventMaxID(),i="EditOccurrence"),this.parent.enableRecurrenceValidation&&this.parent.eventWindow.editOccurrenceValidation(l,s,this.actionObj.event))return}else i=null;(s[this.parent.eventFields.startTimezone]||s[this.parent.eventFields.endTimezone])&&this.parent.eventBase.timezoneConvert(s),this.parent.crudModule.saveEvent(s,i)}},e.prototype.calculateIntervalTime=function(e){var t=new Date(+e);return t.setMinutes(Math.floor(t.getMinutes()/this.actionObj.interval)*this.actionObj.interval),t},e.prototype.getContentAreaDimension=function(){var e=this.parent.element.querySelector("."+iw),t=[].slice.call(e.querySelector("tr").children);this.parent.activeView.isTimelineView()||!(this.parent.activeViewOptions.group.resources.length>0)||this.parent.isAdaptive||this.parent.enableAdaptiveUI||this.parent.virtualScrollModule||(t=this.getResourceElements(t));var i=t[0].getBoundingClientRect(),n=t.slice(-1)[0].getBoundingClientRect();return{bottom:e.scrollHeight-5,left:this.parent.enableRtl?n.left:i.left,right:this.parent.enableRtl?i.right:n.right,top:0,leftOffset:this.parent.enableRtl?n.right:i.right,rightOffset:this.parent.enableRtl?i.left:n.left}},e.prototype.getIndex=function(e){var t=[].slice.call(this.parent.getContentTable().querySelector("tr").children),i={minIndex:0,maxIndex:t.length-1};if("resize"===this.actionObj.action&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&!this.parent.activeView.isTimelineView()){var n=this.getResourceElements(t);i.minIndex=n[0].cellIndex,i.maxIndex=n.slice(-1)[0].cellIndex}return e<i.minIndex&&(e=i.minIndex),e>i.maxIndex&&(e=i.maxIndex),e},e.prototype.updateTimePosition=function(e,i){for(var n=0,r=0,a=this.actionObj.cloneElement;r<a.length;r++){var s=a[r].querySelector("."+iy);if(s){var o=this.actionObj.start,l=this.actionObj.end;i&&i.length>0&&(o=i[parseInt(n.toString(),10)][this.parent.eventFields.startTime],l=i[parseInt(n.toString(),10)][this.parent.eventFields.endTime]),s.innerHTML=this.parent.getTimeString(o)+" - "+this.parent.getTimeString(l)}n++}if(this.parent.activeViewOptions.timeScale.enable&&this.parent.isAdaptive&&"Month"!==this.parent.currentView&&"TimelineMonth"!==this.parent.currentView){var h=this.parent.element.querySelector("."+iU);if(!h){h=t.createElement("div",{className:iU});var p=this.parent.activeView.isTimelineView()?tA:t0;this.parent.element.querySelector("."+p).appendChild(h)}h.innerHTML=this.parent.getTimeString(e);var c=0;if(this.parent.activeView.isTimelineView()){if(this.parent.enableRtl){var d=parseInt(this.actionObj.clone.style.right,10);c="drag"===this.actionObj.action||this.resizeEdges.left?d+this.actionObj.clone.offsetWidth:d,h.style.right=t.formatUnit(c)}else{var u=parseInt(this.actionObj.clone.style.left,10);c="drag"===this.actionObj.action||this.resizeEdges.left?u:u+this.actionObj.clone.offsetWidth,h.style.left=t.formatUnit(c)}}else c="drag"===this.actionObj.action||this.resizeEdges.top?this.actionObj.clone.offsetTop:this.actionObj.clone.offsetTop+this.actionObj.clone.offsetHeight,h.style.top=t.formatUnit(c)}},e.prototype.getResourceElements=function(e){var t=this;return e.filter(function(e){return parseInt(e.getAttribute("data-group-index"),10)===t.actionObj.groupIndex})},e.prototype.getOriginalElement=function(e){var i,n=e.getAttribute("data-guid");if(e.offsetParent&&e.offsetParent.classList.contains(nr)||this.parent.activeView.isTimelineView()||"resize"!==this.actionObj.action&&this.parent.virtualScrollModule)i=[].slice.call(this.parent.element.querySelectorAll('[data-guid="'+n+'"]'));else{var r=t.closest(e,"tr");r&&(i=[].slice.call(r.querySelectorAll('[data-guid="'+n+'"]')))}return i},e.prototype.createCloneElement=function(e){var i=t.createElement("div",{innerHTML:e.outerHTML}).children[0],n=[iF];n.push("drag"===this.actionObj.action?"e-drag-clone":iB),"Month"!==this.parent.currentView&&"TimelineMonth"!==this.parent.currentView||n.push("e-month-event"),t.addClass([i],n),t.addClass([e],iH),t.isNullOrUndefined(e.parentElement)||e.parentElement.appendChild(i),i.style.width=t.formatUnit(i.offsetWidth-2);var r=document.querySelector(this.parent.eventDragArea);return this.parent.eventDragArea&&"drag"===this.actionObj.action&&r&&r.appendChild(i),t.setStyleAttribute(i,{border:"0px"}),i},e.prototype.removeCloneElementClasses=function(){var e=this.actionObj.originalElement;"Month"!==this.parent.currentView&&"TimelineYear"!==this.parent.currentView&&"Day"!==this.parent.currentView&&"Week"!==this.parent.currentView&&"WorkWeek"!==this.parent.currentView||(e=[].slice.call(this.parent.element.querySelectorAll("."+iH))),t.removeClass(e,iH)},e.prototype.removeCloneElement=function(){this.actionObj.originalElement=[];for(var e=0,i=[].slice.call(this.parent.element.querySelectorAll(".e-dynamic-clone"));e<i.length;e++){var n=i[e];t.remove(n)}for(var r=0,a=this.actionObj.cloneElement;r<a.length;r++){var s=a[r];t.isNullOrUndefined(s.parentNode)||t.remove(s)}this.actionObj.cloneElement=[];var o=this.parent.element.querySelector("."+iU);o&&t.remove(o)},e.prototype.getCursorElement=function(e){var t=this.parent.eventBase.getPageCoordinates(e);return document.elementFromPoint(t.clientX,t.clientY)},e.prototype.autoScroll=function(){var e=this.parent.element.querySelector("."+iw),t=e.offsetHeight<=e.scrollHeight,i=e.offsetWidth<=e.scrollWidth,n=t&&e.scrollTop>=0&&e.scrollTop+e.offsetHeight<=e.scrollHeight,r=i&&e.scrollLeft>=0&&e.scrollLeft+e.offsetWidth<=e.scrollWidth;if("resize"===this.actionObj.action&&this.scrollEdges.right&&e.scrollLeft+e.offsetWidth>e.scrollWidth){var a=[].slice.call(this.parent.getContentTable().querySelector("tr").children).length-1;r=Math.ceil((this.actionObj.clone.offsetLeft+this.actionObj.clone.offsetWidth)/this.actionObj.cellWidth)===a}n&&(this.scrollEdges.top||this.scrollEdges.bottom)&&(e.scrollTop+=this.scrollEdges.top?-this.actionObj.scroll.scrollBy:this.actionObj.scroll.scrollBy,"resize"===this.actionObj.action&&e.scrollHeight!==e.offsetHeight+e.scrollTop&&e.scrollTop>0&&(this.actionObj.Y+=this.scrollEdges.top?this.actionObj.scroll.scrollBy:-this.actionObj.scroll.scrollBy)),r&&(this.scrollEdges.left||this.scrollEdges.right)&&(e.scrollLeft+=this.scrollEdges.left?-this.actionObj.scroll.scrollBy:this.actionObj.scroll.scrollBy,"resize"===this.actionObj.action&&e.scrollWidth!==e.offsetWidth+e.scrollLeft&&e.scrollLeft>0&&(this.actionObj.X+=this.scrollEdges.left?this.actionObj.scroll.scrollBy:-this.actionObj.scroll.scrollBy))},e.prototype.autoScrollValidation=function(){if(!this.actionObj.scroll.enable)return!1;var e=this.parent.boundaryValidation(this.actionObj.pageY,this.actionObj.pageX);return this.scrollEdges=e,e.bottom||e.top||e.left||e.right},e.prototype.actionClass=function(e){"addClass"===e?t.addClass([this.parent.element],iH):t.removeClass([this.parent.element],iH)},e.prototype.updateScrollPosition=function(e){var i=this;this.scrollEventArgs=e,this.actionObj.scroll.enable&&t.isNullOrUndefined(this.actionObj.scrollInterval)&&(this.actionObj.scrollInterval=window.setInterval(function(){!i.autoScrollValidation()||i.actionObj.clone.classList.contains(iX)||i.parent.activeView.isTimelineView()&&i.parent.activeViewOptions.group.resources.length>0&&i.actionObj.groupIndex<0||(i.autoScroll(),"drag"===i.actionObj.action?i.parent.dragAndDropModule.updateDraggingDateTime(i.scrollEventArgs):i.parent.resizeModule.updateResizingDirection(i.scrollEventArgs))},this.actionObj.scroll.timeDelay))},e.prototype.updateOriginalElement=function(e){var i='[data-id="'+e.getAttribute("data-id")+'"]';this.parent.activeViewOptions.group.resources.length>0&&(i=i.concat('[data-group-index = "'+e.getAttribute("data-group-index")+'"]'));var n=[].slice.call(this.parent.element.querySelectorAll(i));t.addClass(n,iH);var r=[].slice.call(this.parent.element.querySelectorAll("."+iF));t.removeClass(r,iH)},e.prototype.getUpdatedEvent=function(e,t,i){var n=JSON.parse(JSON.stringify(i));return n[this.parent.eventFields.startTime]=e,n[this.parent.eventFields.endTime]=t,n},e.prototype.dynamicYearlyEventsRendering=function(e,i){if(void 0===i&&(i=!1),t.isNullOrUndefined(this.parent.eventDragArea)){var n,r=this.actionObj.cellWidth-7;i&&(this.resizeEdges.left||this.resizeEdges.right)&&(r=this.actionObj.cellWidth*e.count),i||"Horizontal"!==this.parent.activeViewOptions.orientation||0!==this.parent.activeViewOptions.group.resources.length||((n=this.yearEvent.isSpannedEvent(e,e[this.parent.eventFields.startTime]))[this.parent.eventFields.startTime].getTime()===n[this.parent.eventFields.endTime].getTime()&&(n.isSpanned.count=1),r=n.isSpanned.count*this.actionObj.cellWidth),i||"Vertical"!==this.parent.activeViewOptions.orientation||0===this.parent.activeViewOptions.group.resources.length||(r=(n=this.yearEvent.isSpannedEvent(e,e[this.parent.eventFields.startTime])).isSpanned.count*this.actionObj.cellWidth);var a=this.createAppointmentElement(this.actionObj.groupIndex,e[this.parent.eventFields.subject]);a.setAttribute("drag","true"),t.addClass([a],iF),t.setStyleAttribute(a,{width:r+"px",border:"0px","pointer-events":"none",position:"absolute",overflow:"hidden",padding:"3px"}),""!==this.actionObj.clone.style.backgroundColor&&t.setStyleAttribute(a,{backgroundColor:this.actionObj.clone.style.backgroundColor});var s=C(e[this.parent.eventFields.startTime]).getTime(),o="."+tM+'[data-date="'+s+'"]';this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&(o="."+tM+'[data-date="'+s+'"][data-group-index="'+this.actionObj.groupIndex+'"]');var l=this.parent.element.querySelector(o);if(!t.isNullOrUndefined(l)){if(i){var h=l.querySelector("."+iV),p=this.actionObj.cellHeight*e.count-(h?h.offsetHeight:0)-7;(this.resizeEdges.right||this.resizeEdges.left)&&(p=parseInt(this.actionObj.clone.style.height,10)),t.setStyleAttribute(a,{height:p+"px"})}this.renderDynamicElement(l,a,!0),this.actionObj.cloneElement.push(a)}}},e.prototype.renderDynamicElement=function(e,i,n){if(void 0===n&&(n=!1),e.querySelector("."+t9))e.querySelector("."+t9).appendChild(i);else{var r=t.createElement("div",{className:t9});r.appendChild(i),e.appendChild(r)}},e.prototype.createAppointmentElement=function(e,i){var n=t.createElement("div",{className:ip,innerHTML:i});return this.parent.activeViewOptions.group.resources.length>0&&n.setAttribute("data-group-index",e.toString()),n},e.prototype.dynamicEventsRendering=function(e){var i=this;if(t.isNullOrUndefined(this.parent.eventDragArea)){var n,r=this.parent.activeView.renderDates,a=[].slice.call(this.parent.element.querySelectorAll("."+tM)),s=this.parent.activeViewOptions.workDays;if(this.parent.activeViewOptions.group.resources.length>0){var o=(this.parent.virtualScrollModule&&this.parent.virtualScrollModule.isHorizontalScroll?this.parent.resourceBase.renderedResources:this.parent.resourceBase.lastResourceLevel).filter(function(e){return e.groupIndex===i.actionObj.groupIndex});r=o[0].renderDates;var l="."+tM+'[data-group-index="'+this.actionObj.groupIndex+'"]';a=[].slice.call(this.parent.element.querySelectorAll(l)),s=o[0].workDays,n=o[0].groupOrder}if(this.monthEvent.dateRender=r,this.monthEvent.getSlotDates(s),this.resizeEdges.left||this.resizeEdges.right)for(var h=0,p=[].slice.call(this.parent.element.querySelectorAll("."+iF));h<p.length;h++){var c=p[h];t.remove(c)}for(var d=0,u=this.monthEvent.splitEvent(e,r);d<u.length;d++){var m=u[d],f=this.parent.getIndexOfDate(r,C(m[this.monthEvent.fields.startTime])),v=m.data.count*this.actionObj.cellWidth-7,g=this.monthEvent.createAppointmentElement(m,this.actionObj.groupIndex,!0);g.setAttribute("drag","true"),t.addClass([g],iF),this.monthEvent.applyResourceColor(g,m,"backgroundColor",n),t.setStyleAttribute(g,{width:v+"px",border:"0px","pointer-events":"none"});var y=a[parseInt(f.toString(),10)];y&&(this.monthEvent.renderElement(y,g,!0),this.actionObj.cloneElement.push(g))}}},e.prototype.destroy=function(){!this.parent||this.parent&&this.parent.isDestroyed||(this.actionObj={},this.scrollArgs={},this.resizeEdges={left:!1,right:!1,top:!1,bottom:!1},this.scrollEdges={left:!1,right:!1,top:!1,bottom:!1})},e}(),a$=(eM=function(e,t){return(eM=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}eM(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),a0=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return a$(i,e),i.prototype.wireResizeEvent=function(e){for(var i=0,n=[].slice.call(e.querySelectorAll("."+iL));i<n.length;i++){var r=n[i];t.EventHandler.add(r,t.Browser.touchStartEvent,this.resizeStart,this)}},i.prototype.resizeHelper=function(){if(this.parent.activeViewOptions.group.resources.length>0&&this.parent.activeViewOptions.group.allowGroupEdit)for(var e=0,t=this.actionObj.originalElement.length;e<t;e++){var i=this.createCloneElement(this.actionObj.originalElement[parseInt(e.toString(),10)]);this.actionObj.cloneElement[parseInt(e.toString(),10)]=i,this.actionObj.element===this.actionObj.originalElement[parseInt(e.toString(),10)]&&(this.actionObj.clone=i)}else this.actionObj.element&&(this.actionObj.clone=this.createCloneElement(this.actionObj.element)),this.actionObj.cloneElement=[this.actionObj.clone],this.actionObj.originalElement=[this.actionObj.element]},i.prototype.resizeStart=function(e){var i=this;this.actionObj.action="resize",this.actionObj.slotInterval=this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount,this.actionObj.interval=this.actionObj.slotInterval;var n=t.closest(e.target,"."+iL);this.actionObj.element=t.closest(n,"."+ip),this.actionObj.event=this.parent.eventBase.getEventByGuid(this.actionObj.element.getAttribute("data-guid"));var r=t.extend({},this.actionObj.event,null,!0),a={cancel:!1,data:r,element:this.actionObj.element,event:e,interval:this.actionObj.interval,scroll:{enable:!0,scrollBy:30,timeDelay:100}};this.parent.trigger(e9,a,function(a){if(!a.cancel){i.actionClass("addClass"),i.parent.uiStateValues.action=!0,i.resizeEdges={left:n.classList.contains(ij),right:n.classList.contains(iW),top:n.classList.contains(iq),bottom:n.classList.contains(iz)},i.actionObj.groupIndex=i.parent.uiStateValues.isGroupAdaptive?i.parent.uiStateValues.groupIndex:0;var s=i.parent.element.querySelector("."+tM).getBoundingClientRect();i.actionObj.cellWidth=s.width,i.actionObj.cellHeight=s.height;var o=i.parent.activeViewOptions.headerRows.map(function(e){return e.option});if(i.parent.activeView.isTimelineView()&&o.length>0&&0>["Date","Hour"].indexOf(o.slice(-1)[0])){for(var l=i.parent.getContentTable().querySelector("tr"),h=0,p=0,c=[].slice.call(l.children);p<c.length;p++)h+=parseInt(c[p].getAttribute("colspan"),10);var d=l.getBoundingClientRect();i.actionObj.cellWidth=d.width/h,i.actionObj.cellHeight=d.height}var u=i.parent.eventBase.getPageCoordinates(e);i.actionObj.X=u.pageX,i.actionObj.Y=u.pageY,i.actionObj.groupIndex=parseInt(i.actionObj.element.getAttribute("data-group-index")||"0",10),i.actionObj.interval=a.interval,i.actionObj.scroll=a.scroll,i.actionObj.start=new Date(r[i.parent.eventFields.startTime].getTime()),i.actionObj.end=new Date(r[i.parent.eventFields.endTime].getTime()),i.actionObj.originalElement=i.getOriginalElement(i.actionObj.element),"Month"===i.parent.currentView&&(i.daysVariation=-1,i.monthEvent=new rN(i.parent));var m=i.parent.element.querySelector("."+iw);i.scrollArgs={element:m,width:m.scrollWidth,height:m.scrollHeight},t.EventHandler.add(document,t.Browser.touchMoveEvent,i.resizing,i),t.EventHandler.add(document,t.Browser.touchEndEvent,i.resizeStop,i)}})},i.prototype.resizing=function(e){if(this.parent.quickPopup&&this.parent.quickPopup.quickPopupHide(),0===this.parent.element.querySelectorAll("."+iB).length&&this.resizeHelper(),t.isNullOrUndefined(e.target)||!e.target.classList.contains(nG)){var i=this.parent.eventBase.getPageCoordinates(e);if("Month"===this.parent.currentView||"TimelineYear"===this.parent.currentView){var n=document.documentElement,r=(window.pageXOffset||n.scrollLeft)-(n.clientLeft||0),a=(window.pageYOffset||n.scrollTop)-(n.clientTop||0);this.actionObj.pageX=i.pageX-r,this.actionObj.pageY=i.pageY-a}else this.actionObj.pageX=i.pageX,this.actionObj.pageY=i.pageY;this.updateScrollPosition(e),this.updateResizingDirection(e);var s={cancel:!1,data:t.extend({},this.actionObj.event,null,!0),element:this.actionObj.element,event:e,startTime:this.actionObj.start,endTime:this.actionObj.end};this.parent.group.resources.length>0&&(s.groupIndex=this.actionObj.groupIndex),this.parent.trigger("resizing",s)}},i.prototype.updateResizingDirection=function(e){if("Month"!==this.parent.currentView&&"TimelineYear"!==this.parent.currentView){var i=this.resizeValidation(e);if(this.resizeEdges.left){if(i){var n=this.getLeftRightStyles(e,!0);if(1>parseInt(n.width,10))return;for(var r=0,a=this.actionObj.cloneElement;r<a.length;r++){var s=a[r];t.setStyleAttribute(s,n),t.addClass([s],ij)}}this.horizontalResizing(!this.parent.enableRtl)}if(this.resizeEdges.right){if(i){var o=this.getLeftRightStyles(e,!1);if(1>parseInt(o.width,10))return;for(var l=0,h=this.actionObj.cloneElement;l<h.length;l++)s=h[l],t.setStyleAttribute(s,o),t.addClass([s],iW)}this.horizontalResizing(this.parent.enableRtl)}if(this.resizeEdges.top){if(i){var p=this.getTopBottomStyles(e,!0);if(1>parseInt(p.height,10))return;for(var c=0,d=this.actionObj.cloneElement;c<d.length;c++)s=d[c],t.setStyleAttribute(s,p),t.addClass([s],iq)}this.verticalResizing(!0)}if(this.resizeEdges.bottom){if(i){var u=this.getTopBottomStyles(e,!1);if(1>parseInt(u.height,10))return;for(var m=0,f=this.actionObj.cloneElement;m<f.length;m++)s=f[m],t.setStyleAttribute(s,u),t.addClass([s],iz)}this.verticalResizing(!1)}}else this.monthResizing()},i.prototype.monthResizing=function(){if(this.removeCloneElement(),!t.isNullOrUndefined(this.actionObj.pageX)&&!t.isNullOrUndefined(this.actionObj.pageY)){var e=document.elementFromPoint(this.actionObj.pageX,this.actionObj.pageY);if(!t.isNullOrUndefined(e)){var i=this.parent.getDateFromElement(e),n=!(this.parent.activeViewOptions.group.resources.length>0)||parseInt(e.getAttribute("data-group-index"),10)===this.actionObj.groupIndex,r=new Date(this.actionObj.event[this.parent.eventFields.startTime].getTime()),a=new Date(this.actionObj.event[this.parent.eventFields.endTime].getTime());if(!this.parent.enableRtl&&this.resizeEdges.left||this.parent.enableRtl&&this.resizeEdges.right||this.resizeEdges.top?r=i:(!this.parent.enableRtl&&this.resizeEdges.right||this.parent.enableRtl&&this.resizeEdges.left||this.resizeEdges.bottom)&&(a=S(i,1)),n&&r<a){this.actionObj.start=r,this.actionObj.end=a;var s=this.getUpdatedEvent(this.actionObj.start,this.actionObj.end,this.actionObj.event);"TimelineYear"===this.parent.currentView?this.yearEventsRendering(s):this.dynamicEventsRendering(s),this.updateOriginalElement(this.actionObj.clone)}}}},i.prototype.yearEventsRendering=function(e){for(var i=0,n=[].slice.call(this.parent.element.querySelectorAll("."+iF));i<n.length;i++){var r=n[i];t.remove(r)}var a=new Date(e[this.parent.eventFields.endTime]),s=0;0===this.parent.activeViewOptions.group.resources.length&&(s=this.getMonthDiff(e[this.parent.eventFields.startTime],S(a,-1)));for(var o=0;o<=s;o++){var l=void 0;0===this.parent.activeViewOptions.group.resources.length?l=this.getEventCount(e,this.actionObj.start.getMonth()+o):(l=t.extend({},e,null,!0),a=this.resizeEdges.left||this.resizeEdges.right?S(a,-1):a,l.count=this.getMonthDiff(e[this.parent.eventFields.startTime],a)+1),this.dynamicYearlyEventsRendering(l,!0)}},i.prototype.getMonthDiff=function(e,t){var i;return(i=12*(t.getFullYear()-e.getFullYear())-e.getMonth()+t.getMonth())<=0?0:i},i.prototype.getEventCount=function(e,i){var n=t.extend({},e,null,!0),r=n[this.parent.eventFields.startTime],a=n[this.parent.eventFields.endTime],s=new Date(this.parent.selectedDate.getFullYear(),i,1),o=S(new Date(this.parent.selectedDate.getFullYear(),i+1,0),1),l=1;return r.getTime()<s.getTime()&&(n[this.parent.eventFields.startTime]=s),a.getTime()>o.getTime()&&(n[this.parent.eventFields.endTime]=o),0===this.parent.activeViewOptions.group.resources.length&&(l=Math.ceil((n[this.parent.eventFields.endTime].getTime()-n[this.parent.eventFields.startTime].getTime())/tm)),n.count=l,n},i.prototype.resizeStop=function(e){var i=this;t.EventHandler.remove(document,t.Browser.touchMoveEvent,this.resizing),t.EventHandler.remove(document,t.Browser.touchEndEvent,this.resizeStop),clearInterval(this.actionObj.scrollInterval),this.actionObj.scrollInterval=null,this.removeCloneElementClasses(),this.removeCloneElement(),this.actionClass("removeClass"),this.parent.uiStateValues.action=!1;var n={cancel:!1,data:this.getChangedData(),element:this.actionObj.element,event:e};this.parent.trigger(e7,n,function(e){e.cancel||(i.parent.isSpecificResourceEvents()&&(i.parent.crudModule.crudObj.sourceEvent=[i.parent.resourceBase.lastResourceLevel[parseInt(e.element.getAttribute("data-group-index"),10)]],i.parent.crudModule.crudObj.targetEvent=i.parent.crudModule.crudObj.sourceEvent,i.parent.crudModule.crudObj.isCrudAction=!0),i.saveChangedData(e))})},i.prototype.verticalResizing=function(e){var i=this.actionObj.clone.offsetTop;e||(i+=this.actionObj.clone.offsetHeight);var n=i/this.actionObj.cellHeight*this.actionObj.slotInterval,r=this.actionObj.clone.offsetParent;if(!t.isNullOrUndefined(r)){var a=C(this.parent.getDateFromElement(r));a.setHours(this.parent.activeView.getStartHour().getHours()),a.setMinutes(n+this.parent.activeView.getStartHour().getMinutes()),e?this.actionObj.start=this.calculateIntervalTime(a):this.actionObj.end=this.calculateIntervalTime(a),this.updateTimePosition(a)}},i.prototype.horizontalResizing=function(e){var i,n=new Date(this.actionObj.event[this.parent.eventFields.startTime].getTime()),r=new Date(this.actionObj.event[this.parent.eventFields.endTime].getTime()),a=!1,s=this.parent.currentView,o=["TimelineDay","TimelineWeek","TimelineWorkWeek"].indexOf(this.parent.currentView)>-1,l="TimelineMonth"===this.parent.currentView,h=l||o&&!this.parent.activeViewOptions.timeScale.enable;if(this.parent.activeView.isTimelineView()){var p=this.parent.getContentTable().querySelector("tr");if(this.parent.activeViewOptions.headerRows.length>0){var c=this.parent.activeViewOptions.headerRows.map(function(e){return e.option});s=c.slice(-1)[0],l&&"Hour"===s&&(s=c.slice(-2)[0]||"Month")}i=e?n:r;var d=0,u=[].slice.call(p.children),m=!1,f=this.actionObj.cellWidth/(this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount),v=parseFloat(this.parent.enableRtl?this.actionObj.clone.style.right:this.actionObj.clone.style.left);if(v=Math.round(v/f)*f,-1!==["Year","Month","Week","Date"].indexOf(s)){for(var g=0,y=0;y<u.length;y++)g+=parseInt(u[y].getAttribute("colspan"),10);var b=this.parent.enableRtl?parseInt(this.actionObj.clone.style.right,10):parseInt(this.actionObj.clone.style.left,10);b=Math.round(b/this.actionObj.cellWidth)*this.actionObj.cellWidth,e||(b+=this.actionObj.clone.getBoundingClientRect().width-this.actionObj.cellWidth),d=Math.floor(b/Math.floor(p.getBoundingClientRect().width/g)),a=o&&"Date"===s,m=(d=e?d:l?d+1:d)===u.length,d=d<0?0:d>=g?g-1:d}else{var D=this.actionObj.cellWidth;if(d=e?Math.floor(v/this.actionObj.cellWidth):Math.ceil((v+(this.actionObj.clone.getBoundingClientRect().width-D))/this.actionObj.cellWidth),this.parent.enableRtl){var w=0;"TimelineMonth"!==s&&(this.parent.activeViewOptions.timeScale.enable||l)||(w=this.actionObj.cellWidth),d=Math.floor((Math.floor(v/this.actionObj.cellWidth)*this.actionObj.cellWidth+(e?0:this.actionObj.clone.getBoundingClientRect().width-w))/this.actionObj.cellWidth)}m=d===u.length,d=this.getIndex(d)}var T=void 0;if(T=-1!==["Year","Month","Week","Date"].indexOf(s)?new Date(this.parent.activeView.renderDates[parseInt(d.toString(),10)].getTime()):this.parent.getDateFromElement(p.children[parseInt(d.toString(),10)]),-1===["TimelineMonth","Year","Month","Week","Date"].indexOf(s)&&this.parent.activeViewOptions.timeScale.enable){e||(v+=this.actionObj.clone.getBoundingClientRect().width);var E=Math.ceil(this.actionObj.slotInterval/this.actionObj.cellWidth*(v-Math.floor(v/this.actionObj.cellWidth)*this.actionObj.cellWidth));E=m||!e&&0===E?this.actionObj.slotInterval:E,(i=new Date(T.getTime())).setMinutes(i.getMinutes()+E),this.updateTimePosition(i)}else i=new Date(T.setHours(i.getHours(),i.getMinutes(),i.getSeconds()))}else{var O=t.closest(this.actionObj.clone,"td").cellIndex,k=Math.ceil((e?this.actionObj.element.getBoundingClientRect().width:0)/this.actionObj.cellWidth)*this.actionObj.cellWidth,x=(g=Math.ceil((this.actionObj.clone.getBoundingClientRect().width-k)/this.actionObj.cellWidth),p=t.closest(this.actionObj.clone,"tr"),e?O-g:O+g-1);x=this.getIndex(x),i=this.parent.getDateFromElement(p.children[parseInt(x.toString(),10)]),e?i.setHours(n.getHours(),n.getMinutes(),n.getSeconds()):i.setHours(r.getHours(),r.getMinutes(),r.getSeconds())}var M=-1!==["TimelineMonth","Year","Month","Week","Date"].indexOf(s)||!this.parent.activeViewOptions.timeScale.enable;if(e)r.getTime()-i.getTime()<=0&&(i=h?C(r):n),this.actionObj.start=M?i:this.calculateIntervalTime(i);else{var V=(!(o&&this.parent.activeViewOptions.timeScale.enable)||a||o&&["Week","Month","Year"].indexOf(s)>-1)&&0===i.getHours()&&0===i.getMinutes()?S(i,1):i;h&&V.getTime()-n.getTime()<=0&&(V=S(C(n),1)),this.actionObj.end=M?V:this.calculateIntervalTime(V)}},i.prototype.getTopBottomStyles=function(e,i){var n=this.parent.element.querySelector("."+iw),r=this.actionObj.cellHeight/this.actionObj.slotInterval*this.actionObj.interval,a=i?this.actionObj.element.offsetHeight+(this.actionObj.Y-this.actionObj.pageY):this.actionObj.element.offsetHeight+(this.actionObj.pageY-this.actionObj.Y),s=i?this.actionObj.element.offsetTop-(this.actionObj.Y-this.actionObj.pageY):this.actionObj.clone.offsetTop;return a=s<0?this.actionObj.clone.offsetHeight:this.actionObj.clone.offsetTop+this.actionObj.clone.offsetHeight>this.scrollArgs.height?this.actionObj.clone.offsetHeight:a,s=s<0?0:s,a=(s=i?Math.floor(s/r)*r:s)+a>=n.scrollHeight?n.scrollHeight-s:Math.ceil(a/r)*r,!i&&this.actionObj.clone.offsetTop+a>=this.parent.getContentTable().offsetHeight&&(a=this.parent.getContentTable().offsetHeight-this.actionObj.clone.offsetTop),{height:t.formatUnit(a<this.actionObj.cellHeight?Math.floor(a/r)*r:a),top:t.formatUnit(a<this.actionObj.cellHeight&&i?Math.ceil(s/r)*r:s),left:"0px",right:"0px",width:"100%"}},i.prototype.getLeftRightStyles=function(e,i){var n={},r=this.parent.activeView.isTimelineView(),a=["TimelineDay","TimelineWeek","TimelineWorkWeek"].indexOf(this.parent.currentView)>-1&&this.parent.activeViewOptions.timeScale.enable,s=this.actionObj.cellWidth/this.actionObj.slotInterval*this.actionObj.interval,o=i?this.actionObj.X-this.actionObj.pageX:this.actionObj.pageX-this.actionObj.X,l=r?this.actionObj.element.getBoundingClientRect().width/this.actionObj.cellWidth*this.actionObj.cellWidth:"Month"===this.parent.currentView?this.actionObj.element.getBoundingClientRect().width:Math.ceil(this.actionObj.element.getBoundingClientRect().width/this.actionObj.cellWidth)*this.actionObj.cellWidth,h=l+Math.ceil(o/this.actionObj.cellWidth)*this.actionObj.cellWidth,p=this.parent.enableRtl?parseInt(this.actionObj.element.style.right,10):this.actionObj.clone.offsetLeft;a&&(h=Math.round((p+(h=l+Math.ceil(o/s)*s))/s)*s-p,this.actionObj.event[this.parent.eventFields.isAllDay]=!1);var c=!i&&h+this.actionObj.clone.offsetLeft>this.scrollArgs.width?this.actionObj.clone.getBoundingClientRect().width:(this.actionObj.cellWidth,h);if(this.parent.enableRtl){var d=r?parseInt(this.actionObj.element.style.right,10):-(h-this.actionObj.cellWidth);d=r?d:i?0:d>0?0:d,r&&!i&&(d=(d=Math.ceil((this.actionObj.element.offsetLeft+(this.actionObj.element.getBoundingClientRect().width+(this.actionObj.pageX-this.actionObj.X)))/s)*s)<0?Math.abs(d):-d),d=d>=this.scrollArgs.width?this.scrollArgs.width-this.actionObj.cellWidth:d,n.right=t.formatUnit(d),c=c+d>this.scrollArgs.width?this.actionObj.clone.getBoundingClientRect().width:c}else{var u=i?this.actionObj.element.offsetLeft-(this.actionObj.X-this.actionObj.pageX):this.parent.enableRtl?this.actionObj.element.offsetLeft:0;r&&(u=i?u:parseInt(this.actionObj.clone.style.left,10),u=this.parent.enableRtl?i?u:this.actionObj.pageX<this.actionObj.X-this.actionObj.clone.getBoundingClientRect().width?parseInt(this.actionObj.clone.style.right,10):u:i&&this.actionObj.pageX>this.actionObj.X+this.actionObj.clone.getBoundingClientRect().width&&this.actionObj.clone.getBoundingClientRect().width===this.actionObj.cellWidth?parseInt(this.actionObj.clone.style.left,10):u);var m=u;(u=r?a?i?Math.floor(u/s)*s:u:Math.floor(u/this.actionObj.cellWidth)*this.actionObj.cellWidth:Math.ceil(Math.abs(u)/this.actionObj.cellWidth)*this.actionObj.cellWidth)<0&&(u=0,c=this.actionObj.clone.getBoundingClientRect().width);var f=Math.ceil(this.actionObj.clone.getBoundingClientRect().width/this.actionObj.cellWidth)*this.actionObj.cellWidth;i&&(n.left=t.formatUnit(r?u:i?m<0?-u:Math.ceil((l-f)/this.actionObj.cellWidth)*this.actionObj.cellWidth:u))}return n.width=t.formatUnit(c),n},i.prototype.resizeValidation=function(e){var t=this.parent.eventBase.getPageCoordinates(e),i=this.getContentAreaDimension(),n=this.parent.activeView.isTimelineView()&&this.parent.activeViewOptions.timeScale.enable,r=this.actionObj.cellWidth,a=!1;return this.resizeEdges.left&&(t.pageX<i.leftOffset&&t.pageX>=i.left&&n&&(r=0),a=t.pageX-r>=i.left),this.resizeEdges.right&&(t.pageX>i.rightOffset&&t.pageX<=i.right&&n&&(r=0),a=t.pageX+r<=i.right),this.resizeEdges.top&&(a=this.actionObj.clone.offsetTop>=i.top),this.resizeEdges.bottom&&(a=this.actionObj.clone.offsetTop+this.actionObj.clone.offsetHeight<=this.scrollArgs.height),a},i.prototype.getModuleName=function(){return"resize"},i}(aJ),a1=(eV=function(e,t){return(eV=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}eV(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),a2=function(e){function i(t){var i=e.call(this,t,"day")||this;return i.isResource=!1,i}return a1(i,e),i.prototype.renderAppointments=function(){this.parent.dragAndDropModule&&this.parent.dragAndDropModule.setDragArea(),this.fields=this.parent.eventFields;for(var e="Year"===this.parent.currentView?"."+ip:"."+t9+",."+i1,i=0,n=[].slice.call(this.parent.element.querySelectorAll(e));i<n.length;i++){var r=n[i];t.remove(r)}this.renderedEvents=[],"Year"===this.parent.currentView?this.yearViewEvents():(this.removeCellHeight(),this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive?(this.isResource=!0,this.timelineResourceEvents()):this.timelineYearViewEvents()),this.parent.renderTemplates(),this.parent.notify(to,{})},i.prototype.yearViewEvents=function(){for(var e=this.getMonths(),i=0;i<e.length;i++)for(var n=e[i],r=".e-month-calendar:nth-child("+(e.indexOf(n)+1)+") td.e-work-cells",a=[].slice.call(this.parent.element.querySelectorAll(r)),s=new Date(this.parent.selectedDate.getFullYear(),n,1),o=this.parent.calendarUtil.getMonthStartDate(new Date(s.getTime())),l=this.parent.calendarUtil.getMonthEndDate(new Date(s.getTime())),h=f(o,this.parent.firstDayOfWeek),p=S(v(l,this.parent.firstDayOfWeek),1),c=0;h.getTime()<p.getTime();c++){var d=C(new Date(h.getTime())),u=S(new Date(d.getTime()),1);if(h=S(new Date(h.getTime()),1),this.parent.isMinMaxDate(d)&&this.parent.eventBase.filterEvents(d,u).length>0){var m=a[parseInt(c.toString(),10)];m&&m.appendChild(t.createElement("div",{className:ip}))}}},i.prototype.timelineYearViewEvents=function(){var e=this,i=this.parent.element.querySelector("."+tM+":not(."+tR+")");this.cellWidth=i.getBoundingClientRect().width,this.cellHeader=H(i.querySelector("."+iV));var n=this.parent.element.querySelector("."+tz);this.eventHeight=c(n,ip);for(var r=[].slice.call(this.parent.element.querySelectorAll("."+ih)),a=this.getMonths(),s=this.parent.activeViewOptions.group.resources.length>0&&this.parent.uiStateValues.isGroupAdaptive?this.parent.uiStateValues.groupIndex:void 0,o=0;o<a.length;o++){var l=r[parseInt(o.toString(),10)],h=o+1,p=t.createElement("div",{className:t9});l.appendChild(p);var d=new Date(this.parent.selectedDate.getFullYear(),a[parseInt(o.toString(),10)],1),u=new Date(d.getFullYear(),d.getMonth()+1,0),m=d.getDay(),f=[];for("Horizontal"===this.parent.activeViewOptions.orientation&&(this.renderedEvents=[]);d.getTime()<=u.getTime();){var v=void 0,g=void 0;if("Vertical"===this.parent.activeViewOptions.orientation){var y=r[parseInt(m.toString(),10)];h=m+1,(p=y.querySelector("."+t9))||(p=t.createElement("div",{className:t9}),y.appendChild(p)),this.parent.enableRtl?g=o*this.cellWidth:v=o*this.cellWidth}else this.parent.enableRtl?g=(m+d.getDate()-1)*this.cellWidth:v=(m+d.getDate()-1)*this.cellWidth;var b=this.parent.element.querySelector(".e-content-wrap tr:nth-child("+h+") td");this.cellHeight=b.offsetHeight;var D=C(new Date(d.getTime())),w=S(new Date(D.getTime()),1),T=void 0;this.parent.uiStateValues.isGroupAdaptive&&(T=this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]);for(var E=this.parent.eventBase.filterEvents(D,w,void 0,T),O=this,k=0,x=(E=this.parent.eventBase.sortByDateTime(E)).length;k<x;k++)(function(e,i){var n=t.extend({},E[parseInt(e.toString(),10)],null,!0);O.updateSpannedEvents(n,D,w);var r=O.getIndex(D);n.Index=r;var a=O.cellHeader+O.eventHeight*(r+1)+2+O.moreIndicatorHeight,l=Math.floor((O.cellHeight-O.cellHeader-O.moreIndicatorHeight)/(O.eventHeight+2)),h=i-l<=0?1:i-l;if("Horizontal"===O.parent.activeViewOptions.orientation){var c=O.renderedEvents.filter(function(e){return e.Guid===n.Guid}),u=f.filter(function(e){return e.Guid===n.Guid});if(c.length>0&&c[0].MoreIndicator||u.length>0&&u[0].MoreIndicator){var y="Horizontal"===O.parent.activeViewOptions.orientation?o:m;return O.renderMoreIndicator(p,h,D,y,v,g,s)}if(c.length>0||u.length>0)return}O.parent.rowAutoHeight||O.cellHeight>a?(O.renderEvent(p,n,o,v,g,d,m),O.updateCellHeight(b,a),f.push(n)):(y="Horizontal"===O.parent.activeViewOptions.orientation?o:m,O.renderMoreIndicator(p,h,D,y,v,g,s),"Horizontal"===O.parent.activeViewOptions.orientation&&(n.MoreIndicator=!0,O.renderedEvents.push(n),f.push(n)))})(k,x);d=S(new Date(d.getTime()),1),"Vertical"===this.parent.activeViewOptions.orientation&&(m++,this.renderedEvents=[])}}if(this.parent.rowAutoHeight&&"Vertical"===this.parent.activeViewOptions.orientation){var M=[].slice.call(this.parent.element.querySelectorAll("."+ih)),V=[].slice.call(this.parent.element.querySelectorAll("."+tx+" tbody tr"));M.forEach(function(t,i){var n=[].slice.call(t.querySelectorAll("."+ip)),r=V[parseInt(i.toString(),10)].offsetTop+e.cellHeader+2;n.forEach(function(t){var i=parseInt(t.getAttribute("data-index"),10);t.style.top=r+i*e.eventHeight+"px",t.removeAttribute("data-index")})})}},i.prototype.updateSpannedEvents=function(e,t,i){var n=this.isResource&&"Vertical"===this.parent.activeViewOptions.orientation||!this.isResource&&"Horizontal"===this.parent.activeViewOptions.orientation,r={isLeft:!0,isRight:!0,isBottom:!0,isTop:!0};t.getTime()<=e[this.fields.startTime].getTime()&&(n?r.isLeft=!1:r.isTop=!1),(i.getTime()>=e[this.fields.endTime].getTime()||n&&!this.isResource&&S(i,-1).getMonth()===e[this.fields.endTime].getMonth()||n&&this.isResource&&i.getTime()<=e[this.fields.endTime].getTime())&&(n?r.isRight=!1:r.isBottom=!1),e.data=r},i.prototype.timelineResourceEvents=function(){var e=this,t=this.parent.element.querySelector("."+iw),i=t.offsetWidth>t.clientWidth,n=this.parent.element.querySelector("."+tM);this.cellWidth=n.getBoundingClientRect().width,this.cellHeader=0;var r=this.parent.element.querySelector("."+tz);this.eventHeight=c(r,ip);var a=[].slice.call(this.parent.element.querySelectorAll("."+ih)),s=this.parent.uiStateValues.isGroupAdaptive?[this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]]:this.parent.activeViewOptions.allowVirtualScrolling?this.parent.resourceBase.renderedResources:this.parent.resourceBase.lastResourceLevel,o=this.getMonths();if("Horizontal"===this.parent.activeViewOptions.orientation)for(var l=0;l<o.length;l++)for(var h=new Date(this.parent.selectedDate.getFullYear(),o[parseInt(l.toString(),10)],1),p=0,d=s.length;p<d;p++)this.renderedEvents=[],this.renderResourceEvent(a[parseInt(l.toString(),10)],s[parseInt(p.toString(),10)],l,p,h);else for(p=0,d=s.length;p<d;p++)for(l=0,this.renderedEvents=[];l<o.length;l++)h=new Date(this.parent.selectedDate.getFullYear(),o[parseInt(l.toString(),10)],1),this.renderResourceEvent(a[parseInt(p.toString(),10)],s[parseInt(p.toString(),10)],l,p,h);if(this.parent.rowAutoHeight&&!i&&t.offsetWidth>t.clientWidth){[].slice.call(this.parent.element.querySelectorAll("."+ip)).forEach(function(e){e.style.removeProperty("left"),e.style.removeProperty("right")});var u=[].slice.call(this.parent.element.querySelectorAll("."+ih)),m=this.parent.element.querySelector("."+tx),f=[].slice.call(m.querySelectorAll("tbody tr"));u.forEach(function(t,i){var n=[].slice.call(t.children),r=f[parseInt(i.toString(),10)];n.forEach(function(t,i){var n=r.querySelector("td:nth-child("+(i+1)+")"),a=[].slice.call(t.children),s=n.getBoundingClientRect().width,o=n.offsetLeft;if(e.parent.enableRtl){var l=m.offsetWidth-o-n.offsetWidth;a.forEach(function(e){e.style.width=Math.floor(parseInt(e.style.width,10)/s)*s+"px",e.style.right=l+"px"})}else a.forEach(function(e){e.style.width=Math.floor(parseInt(e.style.width,10)/s)*s+"px",e.style.left=o+"px"})})})}},i.prototype.renderResourceEvent=function(e,i,n,r,a){var s=t.createElement("div",{className:t9});e.appendChild(s);var o=S(y(new Date(a.getTime())),1),l=this.parent.eventBase.filterEvents(a,o,void 0,i),h="Vertical"===this.parent.activeViewOptions.orientation?r:n,p=this.parent.element.querySelector(".e-content-wrap tr:nth-child("+(h+1)+") td");this.cellHeight=p.offsetHeight,this.groupOrder=i.groupOrder;for(var c=[],d=this,u=0;u<l.length;u++){var m=function(e){var i=l[parseInt(e.toString(),10)],o=void 0,h=t.extend({},i,null,!0);if(d.parent.activeViewOptions.group.resources.length>0){var u=d.isSpannedEvent(h,a);o=d.getIndex(u[d.fields.startTime]),h.Index=o}else o=d.getIndex(h[d.fields.startTime]),h.Index=o;var m=d.cellHeader+d.eventHeight*(e+1)+2+d.moreIndicatorHeight,f="Vertical"===d.parent.activeViewOptions.orientation?n*d.cellWidth:r*d.cellWidth;if(!d.parent.isMinMaxDate(h[d.fields.startTime]))return{value:void 0};if("Vertical"===d.parent.activeViewOptions.orientation&&d.parent.activeViewOptions.group.resources.length>0){var v=d.renderedEvents.filter(function(e){return e.Guid===h.Guid}),g=c.filter(function(e){return e.Guid===h.Guid});if(v.length>0||g.length>0)return"continue"}if(!(d.parent.rowAutoHeight||d.cellHeight>m)){var y="Horizontal"===d.parent.activeViewOptions.orientation?n:r;if(d.renderMoreIndicator(s,l.length-e,a,y,f,f,r),"Horizontal"===d.parent.activeViewOptions.orientation)for(var b=r;b<l.length;b++)d.renderedEvents.push(t.extend({},l[parseInt(b.toString(),10)],{Index:o+b},!0));return"break"}d.renderEvent(s,h,n,f,f,a,r),d.updateCellHeight(p,m),c.push(h)}(u);if("object"==typeof m)return m.value;if("break"===m)break}},i.prototype.renderEvent=function(e,i,n,r,a,s,o){var l,h,p=this,c=this.isSpannedEvent(i,s),d=this.createEventElement(c);if(1===c.isSpanned.count){var u=S(c[this.fields.endTime],-1);c[this.fields.endTime]=u>c[this.fields.startTime]?u:c[this.fields.endTime]}if(!(c[this.fields.startTime]>c[this.fields.endTime])){"Horizontal"===this.parent.activeViewOptions.orientation?(h=n+1,c[this.fields.startTime].getTime()===c[this.fields.endTime].getTime()&&(c.isSpanned.count=1),l=c.isSpanned.count*this.cellWidth):(h=o+1,l=this.isResource?c.isSpanned.count*this.cellWidth:this.cellWidth);var m=this.parent.element.querySelector(".e-content-wrap tr:nth-child("+h+") td").offsetTop+this.cellHeader+this.eventHeight*c.Index+2;t.setStyleAttribute(d,{width:l+"px",height:this.eventHeight+"px",left:r+"px",right:a+"px",top:m+"px"}),!this.isResource&&this.parent.rowAutoHeight&&"Vertical"===this.parent.activeViewOptions.orientation&&d.setAttribute("data-index",c.Index.toString()),this.parent.trigger(e6,{data:c,element:d,cancel:!1,type:"event"},function(i){i.cancel||(e.appendChild(d),p.wireAppointmentEvents(d,c),p.parent.activeViewOptions.group.resources.length>0?p.renderedEvents.push(t.extend({},c,null,!0)):"Vertical"===p.parent.activeViewOptions.orientation?p.renderedEvents.push(t.extend({},c,null,!0)):((c.isSpanned.isRight||c.isSpanned.isLeft)&&"Horizontal"===p.parent.activeViewOptions.orientation||!c.isSpanned.isRight)&&p.renderedEvents.push(t.extend({},c,null,!0)))})}},i.prototype.renderMoreIndicator=function(e,i,n,r,a,s,o){if(0!==this.parent.activeViewOptions.group.resources.length||!e.querySelector('[data-start-date="'+n.getTime()+'"]')){l=this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive?S(y(new Date(n.getTime())),1):S(new Date(n.getTime()),1);var l,h=this.getMoreIndicatorElement(i,n,l),p=this.parent.element.querySelector(".e-content-wrap tr:nth-child("+(r+1)+")").offsetTop+(this.cellHeight-this.moreIndicatorHeight);a=Math.floor(a/this.cellWidth)*this.cellWidth,s=Math.floor(s/this.cellWidth)*this.cellWidth,t.setStyleAttribute(h,{width:this.cellWidth+"px",left:a+"px",right:s+"px",top:p+"px"}),t.isNullOrUndefined(o)||h.setAttribute("data-group-index",o.toString()),e.appendChild(h),t.EventHandler.add(h,"click",this.moreIndicatorClick,this)}},i.prototype.createEventElement=function(e){var i=e[this.fields.subject]||this.parent.eventSettings.fields.subject.default||this.parent.localeObj.getConstant("addTitle"),n=t.createElement("div",{className:ip,attrs:{"data-id":"Appointment_"+e[this.fields.id],"data-guid":e.Guid,role:"button",tabindex:"0","aria-disabled":this.parent.eventBase.getReadonlyAttribute(e),"aria-label":this.parent.getAnnouncementString(e)}});if(this.cssClass&&t.addClass([n],this.cssClass),e[this.fields.isReadonly]&&t.addClass([n],n5),this.parent.activeViewOptions.group.resources.length>0){var r=this.getGroupIndexFromEvent(e);n.setAttribute("data-group-index",r.toString())}var a=[],s=t.extend({},e,null,!0);if(this.parent.activeViewOptions.eventTemplate){var o=this.parent.element.id+"_"+this.parent.activeViewOptions.eventTemplateName+"eventTemplate";a=this.parent.getAppointmentTemplate()(s,this.parent,"eventTemplate",o,!1)}else{var l=e[this.fields.location]||this.parent.eventSettings.fields.location.default||"",h=t.createElement("div",{className:nS,innerHTML:i+(l?";&nbsp"+l:"")}),p=t.createElement("div",{className:iy+(this.parent.isAdaptive?" "+tT:""),innerHTML:this.parent.getTimeString(s[this.fields.startTime])}),c=t.createElement("div",{className:iy+(this.parent.isAdaptive?" "+tT:""),innerHTML:this.parent.getTimeString(s[this.fields.endTime])});t.addClass([h],"e-text-center"),e[this.fields.isAllDay]?a=[h]:s.isLeft||s.isRight?(s.isLeft||a.push(p),a.push(h),s.isRight||a.push(c)):a=[p,h,c]}var d=t.createElement("div",{className:im});return t.append(a,d),n.appendChild(d),this.parent.eventBase.renderSpannedIcon(n,e.isSpanned),this.renderResizeHandler(n,e.data,e[this.fields.isReadonly]),this.applyResourceColor(n,s,"backgroundColor",this.groupOrder),n},i.prototype.isSpannedEvent=function(e,i){var n=new Date(i.getFullYear(),i.getMonth(),1),r=S(new Date(i.getFullYear(),i.getMonth()+1,0),1),a=t.extend({},e,null,!0),s=a[this.fields.startTime],o=a[this.fields.endTime],l={isLeft:!1,isRight:!1,count:1},h=new Date(this.parent.selectedDate.getFullYear(),this.parent.firstMonthOfYear,1),p=O(h,this.parent.monthsCount);if(this.isResource&&this.updateSpannedEvents(e,n,r),"Vertical"===this.parent.activeViewOptions.orientation&&this.parent.activeViewOptions.group.resources.length>0){this.updateSpannedEventDetails(s,o,h,p,a,l);var c=a[this.fields.startTime],d=new Date(a[this.fields.endTime]-1);l.count=d.getMonth()-c.getMonth()+this.parent.monthsCount*(d.getFullYear()-c.getFullYear())+1}else if(this.updateSpannedEventDetails(s,o,n,r,a,l),0===this.parent.activeViewOptions.group.resources.length||this.parent.uiStateValues.isGroupAdaptive){var u=C(a[this.fields.endTime]).getTime(),m=C(a[this.fields.startTime]).getTime();(e[this.fields.isAllDay]&&u===e[this.fields.endTime].getTime()||l.isRight)&&(u=S(new Date(u),-1).getTime()),l.count=Math.ceil((u-m)/tm)+1}return a.isSpanned=l,C(s).getTime()<C(this.parent.minDate).getTime()&&(a[this.fields.startTime]=this.parent.minDate),C(o).getTime()>C(this.parent.maxDate).getTime()&&(a[this.fields.endTime]=this.parent.maxDate),a},i.prototype.updateSpannedEventDetails=function(e,t,i,n,r,a){e.getTime()<i.getTime()&&(r[this.fields.startTime]=i,a.isLeft=!0),t.getTime()>n.getTime()&&(r[this.fields.endTime]=n,a.isRight=!0)},i.prototype.getOverlapEvents=function(e,t){var i,n,r=[];if(this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive){var a=this.parent.calendarUtil.getMonthStartDate(new Date(e.getTime())),s=S(this.parent.calendarUtil.getMonthEndDate(new Date(e.getTime())),-1);i=C(new Date(a.getTime())).getTime(),n=C(new Date(s.getTime())).getTime()}else this.parent.rowAutoHeight?(i=C(new Date(e.getTime())).getTime(),n=S(C(new Date(e.getTime())),1).getTime()):i=n=C(new Date(e.getTime())).getTime();for(var o=0;o<t.length;o++){var l=t[o],h=new Date(l[this.fields.startTime].getTime()),p=new Date(l[this.fields.endTime].getTime()),c=l[this.fields.isAllDay]?C(p).getTime()>i:C(p).getTime()>=i;(C(h).getTime()<=i&&c||C(h).getTime()>=i&&C(p).getTime()<=n)&&r.push(l)}return r},i.prototype.getMonths=function(){var e=this;return Array.apply(null,{length:this.parent.monthsCount}).map(function(t,i){return e.parent.firstMonthOfYear+i})},i.prototype.removeCellHeight=function(){for(var e="."+n8+" tbody tr,."+tK+" tbody tr,."+tx+" tbody tr",t=0,i=[].slice.call(this.element.querySelectorAll(e));t<i.length;t++)i[t].firstElementChild.style.height=""},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.parent=null},i}(rH),a3=(eI=function(e,t){return(eI=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}eI(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),a6=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.widthUptoCursorPoint=0,t.heightUptoCursorPoint=0,t.cursorPointIndex=0,t.isHeaderRows=!1,t.isTimelineDayProcess=!1,t.widthPerMinute=0,t.heightPerMinute=0,t.minDiff=0,t.isStepDragging=!1,t.isMorePopupOpened=!1,t.isAllDayDrag=!1,t.isMultiSelect=!1,t.multiData=[],t.updatedData=[],t.swagData=[],t.startTime=0,t.isAllDayTarget=!1,t.targetTd=null,t.isCursorAhead=!1,t}return a3(i,e),i.prototype.wireDragEvent=function(e){new t.Draggable(e,{abort:"."+iL,clone:!0,isDragScroll:!0,enableTapHold:this.parent.isAdaptive,enableTailMode:!!this.parent.eventDragArea,cursorAt:this.parent.eventDragArea?{left:-20,top:-20}:{left:0,top:0},dragArea:this.dragArea,dragStart:this.dragStart.bind(this),drag:this.drag.bind(this),dragStop:this.dragStop.bind(this),enableAutoScroll:!1,helper:this.dragHelper.bind(this),queryPositionInfo:this.dragPosition.bind(this)})},i.prototype.setDragArea=function(){var e=document.querySelector(this.parent.eventDragArea);this.dragArea=this.parent.eventDragArea&&e?e:this.parent.element.querySelector("."+tx)},i.prototype.dragHelper=function(e){var i=this;this.setDragActionDefaultValues(),this.actionObj.element=e.element,this.actionObj.action="drag";var n=[];return!this.parent.allowMultiDrag||t.isNullOrUndefined(this.parent.selectedElements)||0===this.parent.selectedElements.length||this.parent.selectedElements.length>0&&-1===this.parent.selectedElements.indexOf(this.actionObj.element)?n=[e.element]:(n=this.parent.selectedElements,this.isMultiSelect=!0),n.forEach(function(e){var n=i.createCloneElement(e);e.getAttribute("data-guid")===i.actionObj.element.getAttribute("data-guid")&&(i.actionObj.clone=n,i.parent.eventDragArea||"Month"===i.parent.currentView||!i.parent.activeViewOptions.timeScale.enable||i.parent.activeView.isTimelineView()||i.actionObj.element.classList.contains(iX)||t.setStyleAttribute(i.actionObj.clone,{cursor:"move",left:"0%",right:"0%",width:"100%"}),i.actionObj.clone.style.top=t.formatUnit(i.actionObj.element.offsetTop)),i.actionObj.cloneElement.push(n),i.actionObj.originalElement.push(e)}),this.actionObj.clone},i.prototype.dragPosition=function(e){if(this.parent.eventDragArea)return{left:e.left,top:e.top};var i,n,r=this.actionObj.cellHeight/this.actionObj.slotInterval*this.actionObj.interval,a=t.formatUnit(0);"Month"===this.parent.currentView&&(a=e.left),i=this.isStepDragging?Math.ceil(this.actionObj.clone.getBoundingClientRect().right)+this.actionObj.interval:this.actionObj.clone.getBoundingClientRect().right;var s=this.parent.element.querySelector("."+iw).getBoundingClientRect().right;if(!(this.parent.activeView.isTimelineView()&&"TimelineYear"!==this.parent.currentView&&!this.parent.enableRtl&&this.actionObj.pageX>i)||this.isMorePopupOpened||this.actionObj.pageX>s||(this.isCursorAhead=!0),this.parent.activeView.isTimelineView()&&(a=t.formatUnit(this.actionObj.clone.offsetLeft)),this.parent.activeView.isTimelineView()||!this.parent.timeScale.enable||!t.isNullOrUndefined(this.actionObj.clone.offsetParent)&&this.actionObj.clone.offsetParent.classList.contains(nr))n=t.formatUnit(this.actionObj.clone.offsetTop);else if("Month"===this.parent.currentView)n=t.formatUnit(0);else if(this.actionObj.clone.classList.contains(iX))n=t.formatUnit(this.parent.element.querySelector("."+tk).offsetTop),t.setStyleAttribute(this.actionObj.clone,{width:t.formatUnit(Math.ceil(this.actionObj.clone.offsetWidth/this.actionObj.cellWidth)*this.actionObj.cellWidth),right:this.parent.enableRtl&&t.formatUnit(0)});else{this.actionObj.element.classList.contains(iX)&&!this.actionObj.clone.classList.contains(iX)&&t.setStyleAttribute(this.actionObj.clone,{height:t.formatUnit(this.actionObj.cellHeight),width:t.formatUnit(this.actionObj.cellWidth-1),pointerEvents:"none"});var o=parseInt(e.top,10);o=o<0?0:o,n=t.formatUnit(Math.ceil(o/r)*r);var l=this.parent.element.querySelector(".e-content-wrap").scrollHeight,h=parseInt(n,10)+this.actionObj.clone.offsetHeight;h>l&&(n=parseInt(n,10)-(h-l)+"px")}return{left:a,top:n}},i.prototype.setDragActionDefaultValues=function(){this.actionObj.action="drag",this.actionObj.isAllDay=null,this.actionObj.slotInterval=this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount,this.actionObj.interval=this.actionObj.slotInterval;var e=this.parent.element.querySelector("."+tM);this.actionObj.cellWidth=e.offsetWidth,this.actionObj.cellHeight=e.offsetHeight},i.prototype.dragStart=function(e){var i=this,n=this.actionObj.element.getAttribute("data-guid");this.actionObj.event=this.parent.eventBase.getEventByGuid(n);var r=t.extend({},this.actionObj.event,null,!0);t.isNullOrUndefined(r)||(this.startTime=r[this.parent.eventFields.startTime].getTime());var a={cancel:!1,data:r,selectedData:this.getSelectedData(),event:e,excludeSelectors:null,element:this.actionObj.element,interval:this.actionObj.interval,navigation:{enable:!1,timeDelay:2e3},scroll:{enable:!0,scrollBy:30,timeDelay:100}};this.parent.trigger("dragStart",a,function(n){if(n.cancel||!t.isNullOrUndefined(i.actionObj.element)&&t.isNullOrUndefined(i.actionObj.element.parentElement)){var a=i.actionObj.element.ej2_instances[0];return t.isNullOrUndefined(a)||a.intDestroy(e.event),i.actionObj.action="",i.removeCloneElementClasses(),void i.removeCloneElement()}i.actionClass("addClass"),i.parent.uiStateValues.action=!0,i.actionObj.start=r[i.parent.eventFields.startTime],i.actionObj.end=r[i.parent.eventFields.endTime],i.actionObj.groupIndex=parseInt(i.actionObj.element.getAttribute("data-group-index")||"0",10),i.actionObj.interval=n.interval,i.actionObj.navigation=n.navigation,i.actionObj.scroll=n.scroll,i.actionObj.excludeSelectors=n.excludeSelectors;var s=i.parent.element.querySelector("."+iw);if(i.scrollArgs={element:s,width:s.scrollWidth,height:s.scrollHeight},i.widthPerMinute=i.actionObj.cellWidth/i.actionObj.slotInterval*i.actionObj.interval,i.heightPerMinute=i.actionObj.cellHeight/i.actionObj.slotInterval*i.actionObj.interval,i.widthUptoCursorPoint=0,i.heightUptoCursorPoint=0,i.cursorPointIndex=-1,i.isHeaderRows=!1,i.isTimelineDayProcess=!1,i.minDiff=0,i.isMorePopupOpened=!1,i.daysVariation=-1,i.isAllDayTarget=i.actionObj.clone.classList.contains(iX),(i.parent.activeView.isTimelineView()||!i.parent.timeScale.enable)&&"TimelineYear"!==i.parent.currentView){!t.isNullOrUndefined(i.actionObj.clone.offsetParent)&&i.actionObj.clone.offsetParent.classList.contains(nr)&&(i.isMorePopupOpened=!0),i.actionObj.pageX=e.event.pageX;var o=i.parent.activeViewOptions.headerRows;i.isHeaderRows=o.length>0&&"Hour"!==o[o.length-1].option&&"Date"!==o[o.length-1].option,i.isTimelineDayProcess=!i.parent.activeViewOptions.timeScale.enable||i.isHeaderRows||"TimelineMonth"===i.parent.currentView||o.length>0&&"Date"===o[o.length-1].option,i.isStepDragging=!i.isTimelineDayProcess&&i.actionObj.slotInterval!==i.actionObj.interval,i.isTimelineDayProcess?i.timelineEventModule=new rH(i.parent,"day"):i.timelineEventModule=new rH(i.parent,"hour")}"TimelineYear"===i.parent.currentView&&(i.yearEvent=new a2(i.parent)),"Month"===i.parent.currentView&&(i.startTime=C(new Date(i.startTime)).getTime(),i.updateOriginalElement(i.actionObj.clone),i.monthEvent=new rN(i.parent)),("Day"===i.parent.currentView||"Week"===i.parent.currentView||"WorkWeek"===i.parent.currentView)&&(i.verticalEvent=new rI(i.parent),i.verticalEvent.initializeValues(),i.splitEvent(i.actionObj.event).forEach(function(e){var n='.e-day-wrapper[data-date="'+C(e[i.parent.eventFields.startTime]).getTime()+'"]';i.parent.activeViewOptions.group.resources.length>0&&(n=n.concat('[data-group-index = "'+i.actionObj.groupIndex+'"]'));var r=i.parent.element.querySelector(n);if(r){var a=r.querySelector('[data-id="'+i.actionObj.clone.getAttribute("data-id")+'"]');a&&t.addClass([a],iH)}}))})},i.prototype.getSelectedData=function(){if(this.isMultiSelect&&0===this.multiData.length&&this.parent.selectedElements.length>0)for(var e=0,i=this.parent.selectedElements;e<i.length;e++){var n=i[e].getAttribute("data-guid"),r=this.parent.eventBase.getEventByGuid(n);this.multiData.push(t.extend({},r,null,!0))}return this.multiData},i.prototype.drag=function(e){if(this.parent.quickPopup&&this.parent.quickPopup.quickPopupHide(!0),t.isNullOrUndefined(e.target)||!e.target.classList.contains(nG)){var i=t.extend({},this.actionObj.event,null,!0),n=this.parent.eventBase.getPageCoordinates(e);if(this.actionObj.Y=this.actionObj.pageY=n.pageY,this.actionObj.X=this.actionObj.pageX=n.pageX,this.actionObj.target=e.target,this.widthUptoCursorPoint=0===this.widthUptoCursorPoint?Math.ceil(Math.abs(this.actionObj.clone.getBoundingClientRect().left-this.actionObj.X)/this.widthPerMinute)*this.widthPerMinute:this.widthUptoCursorPoint,this.widthUptoCursorPoint=this.isMorePopupOpened?this.actionObj.cellWidth:this.widthUptoCursorPoint,this.heightUptoCursorPoint=0===this.heightUptoCursorPoint?Math.ceil(Math.abs(this.actionObj.clone.getBoundingClientRect().top-this.actionObj.Y)/this.heightPerMinute)*this.heightPerMinute:this.heightUptoCursorPoint,this.isAllDayDrag=this.parent.activeViewOptions.timeScale.enable?this.actionObj.clone.classList.contains(iX):this.actionObj.event[this.parent.eventFields.isAllDay],this.isStepDragging&&0===this.minDiff&&this.calculateMinutesDiff(i),("Month"===this.parent.currentView||this.isAllDayDrag)&&this.daysVariation<0){var r=this.parent.getDateFromElement(this.actionObj.target);if(t.isNullOrUndefined(r))this.daysVariation=0;else{var a=C(r),s=C(new Date(i[this.parent.eventFields.startTime].getTime()));this.daysVariation=(a.getTime()-s.getTime())/tm}}else this.daysVariation=0;if(this.parent.eventDragArea){var o=n.target;this.actionObj.clone.style.top=t.formatUnit(o.offsetTop),this.actionObj.clone.style.left=t.formatUnit(o.offsetLeft),t.closest(o,"."+ty)?"Week"!==this.parent.currentView&&"WorkWeek"!==this.parent.currentView&&"Day"!==this.parent.currentView&&(this.actionObj.clone.style.width=t.formatUnit(this.actionObj.element.offsetWidth)):(this.actionObj.clone.style.height="",this.actionObj.clone.style.width="")}this.updateScrollPosition(e),this.updateNavigatingPosition(e),this.updateDraggingDateTime(e);var l={data:i,event:e,element:this.actionObj.element,startTime:this.actionObj.start,endTime:this.actionObj.end,selectedData:this.updatedData};this.parent.group.resources.length>0&&(l.groupIndex=this.actionObj.groupIndex),this.parent.trigger("drag",l)}},i.prototype.calculateMinutesDiff=function(e){this.parent.enableRtl?this.minDiff=(this.actionObj.clone.offsetWidth-this.widthUptoCursorPoint)/this.widthPerMinute*this.actionObj.interval:this.minDiff=this.widthUptoCursorPoint/this.widthPerMinute*this.actionObj.interval;var t=e[this.parent.eventFields.startTime],i=x(this.parent.activeView.renderDates[0],this.parent.activeView.getStartHour(),this.parent.activeView.getEndHour());i.startHour.getTime()>t.getTime()&&(this.minDiff=this.minDiff+(i.startHour.getTime()-t.getTime())/tf)},i.prototype.dragStop=function(e){var i=this;if(this.isCursorAhead=!1,this.removeCloneElementClasses(),this.removeCloneElement(),clearInterval(this.actionObj.navigationInterval),this.actionObj.navigationInterval=null,clearInterval(this.actionObj.scrollInterval),this.actionObj.scrollInterval=null,this.actionClass("removeClass"),this.parent.uiStateValues.action=!1,!this.isAllowDrop(e)){var n=!e.target.classList.contains("e-work-cells")&&this.parent.cellTemplate?t.closest(e.target,".e-work-cells"):e.target,r={cancel:!1,data:this.getChangedData(this.updatedData),selectedData:this.updatedData,event:e,element:this.actionObj.element,target:n};this.actionObj.action=null,this.parent.trigger("dragStop",r,function(e){if(!e.cancel){if(i.parent.isSpecificResourceEvents()){i.parent.crudModule.crudObj.isCrudAction=!0,i.parent.crudModule.crudObj.sourceEvent=[i.parent.resourceBase.lastResourceLevel[parseInt(r.element.getAttribute("data-group-index"),10)]];var t=parseInt(r.target.getAttribute("data-group-index"),10)||i.actionObj.groupIndex;i.parent.crudModule.crudObj.targetEvent=[i.parent.resourceBase.lastResourceLevel[parseInt(t.toString(),10)]]}i.saveChangedData(e,i.isMultiSelect)}}),this.updatedData=[],this.multiData=[],this.isMultiSelect=!1,this.parent.selectedElements=[]}},i.prototype.updateNavigatingPosition=function(e){var i=this;if(this.actionObj.navigation.enable){var n=this.parent.getCurrentTime();t.isNullOrUndefined(this.actionObj.navigationInterval)&&(this.actionObj.navigationInterval=window.setInterval(function(){if(n){var t=i.parent.getCurrentTime().getSeconds(),r=n.getSeconds()+i.actionObj.navigation.timeDelay/1e3;(r=r>=60?r-60:r)===t&&(n=i.parent.getCurrentTime(),i.viewNavigation(e),i.updateDraggingDateTime(e))}},this.actionObj.navigation.timeDelay))}},i.prototype.updateDraggingDateTime=function(e){!t.isNullOrUndefined(this.actionObj.clone.offsetParent)&&this.actionObj.clone.offsetParent.classList.contains(nr)?this.morePopupEventDragging(e):this.parent.activeView.isTimelineView()&&"TimelineYear"!==this.parent.currentView?(this.timelineEventModule.dateRender=this.parent.activeView.renderDates,this.timelineEventModule.cellWidth=this.actionObj.cellWidth,this.timelineEventModule.getSlotDates(),this.actionObj.cellWidth=this.isHeaderRows?this.timelineEventModule.cellWidth:this.parent.element.querySelector("."+tM).getBoundingClientRect().width,this.calculateTimelineTime(e)):"Month"===this.parent.currentView||"TimelineYear"===this.parent.currentView?this.calculateVerticalDate(e):this.calculateVerticalTime(e)},i.prototype.navigationWrapper=function(){if(this.parent.activeView.isTimelineView()){var e=void 0;if(e=this.parent.activeViewOptions.group.resources.length>0?this.parent.element.querySelectorAll(".e-appointment-container:not(.e-hidden)").item(this.actionObj.index):this.parent.element.querySelector("."+ih),!t.isNullOrUndefined(e)){var i=e.querySelector("."+t9);i||(i=t.createElement("div",{className:t9}),e.appendChild(i)),this.actionObj.cloneElement.forEach(function(e){i.appendChild(e)})}}else if("Month"!==this.parent.currentView&&this.parent.timeScale.enable){var n=this.actionObj.clone.classList.contains(iX)?"."+iK:"."+t9;if(this.parent.element.querySelectorAll(n).item(this.actionObj.index).appendChild(this.actionObj.clone),n==="."+iK){var r=this.getAllDayEventHeight(),a=[].slice.call(this.parent.element.querySelectorAll("."+tO+":first-child"));if(a[0].offsetHeight<r)for(var s=0;s<a.length;s++)a[s].style.height=(r+2)/12+"em";this.actionObj.clone.style.height=t.formatUnit(r)}this.actionObj.height=parseInt(this.actionObj.clone.style.height,10)}else{var o=[].slice.call(this.parent.element.querySelectorAll("."+tM));this.actionObj.index=this.parent.activeView.renderDates.length<this.actionObj.index?this.parent.activeView.renderDates.length-1:this.actionObj.index;var l=o[this.actionObj.index].querySelector("."+t9);l||(l=t.createElement("div",{className:t9}),o[this.actionObj.index].appendChild(l)),l.appendChild(this.actionObj.clone)}},i.prototype.viewNavigation=function(e){var i,n=this.parent.element.querySelector("."+iw);n&&(!this.scrollEdges.top&&!this.scrollEdges.bottom||t.closest(this.actionObj.clone,"."+iK))&&(0===n.scrollLeft&&Math.round(this.actionObj.X)<=Math.round(n.getBoundingClientRect().left+this.actionObj.cellWidth+window.pageXOffset)?i=this.parent.enableRtl?"next":"previous":Math.round(n.scrollLeft)+n.clientWidth===n.scrollWidth&&Math.round(this.actionObj.X)>=Math.round(n.getBoundingClientRect().right-this.actionObj.cellWidth+window.pageXOffset)&&(i=this.parent.enableRtl?"previous":"next"),i&&this.parent.changeDate(this.parent.activeView.getNextPreviousDate(i)))},i.prototype.morePopupEventDragging=function(e){if(!(t.isNullOrUndefined(e.target)||e.target&&t.isNullOrUndefined(t.closest(e.target,"td")))){var i=t.extend({},this.actionObj.event,null,!0),n=i[this.parent.eventFields.endTime].getTime()-i[this.parent.eventFields.startTime].getTime(),r=t.closest(e.target,"td");if("TimelineYear"!==this.parent.currentView||r.classList.contains(tM)&&!r.classList.contains(tR)){var a=this.parent.getDateFromElement(r),s=new Date(a.getTime());s.setMilliseconds(n),this.parent.activeViewOptions.group.resources.length>0&&(this.actionObj.groupIndex=parseInt(r.getAttribute("data-group-index"),10)),this.actionObj.start=new Date(a.getTime()),this.actionObj.end=new Date(s.getTime()),this.actionObj.clone.style.top=t.formatUnit(r.offsetParent.offsetTop),this.actionObj.clone.style.left=t.formatUnit(r.offsetLeft),this.actionObj.clone.style.width=t.formatUnit(r.offsetWidth);var o,l=r;if(this.parent.activeView.isTimelineView()){var h=t.closest(r,"tr").rowIndex;l=this.parent.element.querySelectorAll(".e-appointment-container").item(h)}(o=l.querySelector("."+t9))||(o=t.createElement("div",{className:t9}),l.appendChild(o)),this.appendCloneElement(o)}}},i.prototype.calculateVerticalTime=function(e){var i=this;if(!(t.isNullOrUndefined(this.actionObj.target)||this.actionObj.target&&t.isNullOrUndefined(t.closest(this.actionObj.target,"tr"))||!t.closest(this.actionObj.target,"td").classList.contains(tM)&&!t.closest(this.actionObj.target,"td").classList.contains(tO))){this.parent.activeViewOptions.timeScale.enable&&this.swapDragging(e);var n=this.parent.element.querySelector("."+iw),r=t.extend({},this.actionObj.event,null,!0),a=r[this.parent.eventFields.startTime],s=U(r[this.parent.eventFields.endTime])-U(a),o=Math.floor(parseInt(this.actionObj.clone.style.top,10)/this.actionObj.cellHeight)*this.actionObj.cellHeight;o=o<0?0:o,(this.scrollEdges.top||this.scrollEdges.bottom)&&(o=Math.round((o=this.scrollEdges.top?n.scrollTop-this.heightUptoCursorPoint+this.actionObj.cellHeight+window.pageYOffset:n.scrollTop+n.offsetHeight-this.actionObj.clone.offsetHeight+window.pageYOffset+(this.actionObj.clone.offsetHeight-this.heightUptoCursorPoint))/this.actionObj.cellHeight)*this.actionObj.cellHeight,n.scrollTop>0&&(this.actionObj.clone.style.top=t.formatUnit(o)));var l,h=this.parent.activeViewOptions.timeScale.enable?o/this.actionObj.cellHeight:0,p=this.actionObj.cellHeight/this.actionObj.slotInterval,c=parseInt(this.actionObj.clone.style.top,10)-o;l=this.isAllDayDrag?this.parent.element.querySelector("."+tk):[].slice.call(this.parent.getContentTable().querySelectorAll("tr"))[parseInt(h.toString(),10)],(t.closest(this.actionObj.target,"td").classList.contains(tM)||t.closest(this.actionObj.target,"td").classList.contains(tO))&&(u=t.closest(this.actionObj.target,"td").cellIndex);var d=t.isNullOrUndefined(u)?t.closest(this.actionObj.clone,"td").cellIndex:u;if(this.actionObj.index=d,!t.isNullOrUndefined(l)){var u,m,f,v=l.children[parseInt(d.toString(),10)];if(this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&(this.actionObj.groupIndex=parseInt(v.getAttribute("data-group-index"),10)),this.parent.activeViewOptions.timeScale.enable&&!this.isAllDayDrag)this.appendCloneElement(this.getEventWrapper(d)),(m=this.parent.getDateFromElement(v)).setMinutes(m.getMinutes()+c/p),f=new Date(m.getTime()),this.actionObj.element.classList.contains(iX)?f.setMinutes(f.getMinutes()+this.actionObj.slotInterval):f.setMilliseconds(s);else{(m=this.parent.getDateFromElement(v)).setDate(m.getDate()-this.daysVariation),m.setHours(a.getHours(),a.getMinutes(),a.getSeconds()),(f=new Date(m.getTime())).setMilliseconds(s),!this.actionObj.element.classList.contains(iX)&&this.actionObj.clone.classList.contains(iX)&&(f=S(C(f),1));var g=this.parent.activeViewOptions.group.byDate||this.parent.virtualScrollModule&&!this.parent.activeViewOptions.timeScale.enable?d:void 0;this.updateAllDayEvents(m,f,g)}this.actionObj.start=new Date(+m),this.actionObj.end=new Date(+f);for(var y=this.getUpdatedEvent(this.actionObj.start,this.actionObj.end,this.actionObj.event),b=0,D=[].slice.call(this.parent.element.querySelectorAll(".e-dynamic-clone"));b<D.length;b++){var w=D[b];t.remove(w)}if(this.multiData.length>0){if(this.isAllDayTarget&&this.isAllDayDrag&&!t.isNullOrUndefined(this.actionObj.isAllDay)&&!this.actionObj.isAllDay){var T=parseInt(t.closest(this.actionObj.target,"td").getAttribute("data-date"),10);this.multiData.forEach(function(e){if(i.swagData.push(t.extend({},e,null,!0)),e[i.parent.eventFields.isAllDay]){e[i.parent.eventFields.startTime]=new Date(e[i.parent.eventFields.startTime].getTime()+(T-i.startTime));var n=new Date(e[i.parent.eventFields.startTime]),r=new Date(n.setMinutes(n.getMinutes()+i.actionObj.slotInterval));e[i.parent.eventFields.endTime]=r,e[i.parent.eventFields.isAllDay]=!1}}),this.startTime=T}if(this.isAllDayTarget&&this.isAllDayDrag&&!t.isNullOrUndefined(this.actionObj.isAllDay)&&this.actionObj.isAllDay&&this.swagData.length>0){this.multiData=this.swagData,this.swagData=[];var E=t.extend({},this.actionObj.event,null,!0);this.startTime=E[this.parent.eventFields.startTime].getTime()}for(var O=y[this.parent.eventFields.startTime].getTime()-this.startTime,k=0;k<this.multiData.length;k++){this.updatedData[parseInt(k.toString(),10)]=this.updateMultipleData(this.multiData[parseInt(k.toString(),10)],O);var x=this.getDayIndex(this.updatedData[parseInt(k.toString(),10)]);x>=0?(w=this.getEventWrapper(x,this.updatedData[parseInt(k.toString(),10)][this.parent.eventFields.isAllDay]),this.appendCloneElement(w,this.actionObj.cloneElement[parseInt(k.toString(),10)]),this.updateEventHeight(this.updatedData[parseInt(k.toString(),10)],k,x)):t.isNullOrUndefined(this.actionObj.cloneElement[parseInt(k.toString(),10)].parentNode)||t.remove(this.actionObj.cloneElement[parseInt(k.toString(),10)])}}else this.updateEventHeight(y);this.updateTimePosition(this.actionObj.start,this.updatedData)}}},i.prototype.splitEvent=function(e){var i=this.parent.eventFields,n=[],r=e[i.startTime],a=e[i.endTime];if(C(new Date(r.getTime()))<C(new Date(a.getTime()))){for(var s=C(new Date(r.getTime())),o=new Date(s.getTime()),l=0;s<new Date(a.getTime());l++){o=new Date(o.setDate(s.getDate()+1));var h=t.extend({},e,null,!0);h[i.startTime]=new Date(s),h[i.endTime]=new Date(o),s=new Date(s.setDate(s.getDate()+1)),n.push(h)}var p=n.length-1;n[0][i.startTime]=r,n[parseInt(p.toString(),10)][i.endTime]=a}else n.push(e);return n},i.prototype.updateMultipleData=function(e,i){var n=t.extend({},e,null,!0);!t.isNullOrUndefined(this.actionObj.isAllDay)&&this.parent.activeViewOptions.timeScale.enable&&(this.isAllDayTarget&&n[this.parent.eventFields.isAllDay]||!this.isAllDayTarget&&!n[this.parent.eventFields.isAllDay])&&(n[this.parent.eventFields.isAllDay]=this.actionObj.isAllDay);var r=n[this.parent.eventFields.endTime].getTime()-n[this.parent.eventFields.startTime].getTime();if(n[this.parent.eventFields.isAllDay]){var a=Math.ceil(i/864e5),s=Math.ceil(r/864e5),o=new Date(n[this.parent.eventFields.startTime]);n[this.parent.eventFields.startTime]=C(new Date(o.setDate(o.getDate()+a))),n[this.parent.eventFields.endTime]=S(n[this.parent.eventFields.startTime],s)}else n[this.parent.eventFields.startTime]=new Date(n[this.parent.eventFields.startTime].getTime()+i),n[this.parent.eventFields.endTime]=new Date(n[this.parent.eventFields.startTime].getTime()+r);return n},i.prototype.getDayIndex=function(e){var i=t.extend({},e,null,!0),n=C(i[this.parent.eventFields.startTime]);if(this.parent.activeViewOptions.timeScale.enable&&!i[this.parent.eventFields.isAllDay]){var r=this.parent.activeView.getStartHour();n.setMilliseconds(r.getTime()-C(r).getTime())}var a=n.getTime(),s="";return s="."+(this.parent.activeViewOptions.timeScale.enable&&i[this.parent.eventFields.isAllDay]?iK:tM)+'[data-date="'+a+'"]',this.parent.activeViewOptions.group.resources.length>0&&(s=s+'[data-group-index="'+this.actionObj.groupIndex+'"]'),this.targetTd=this.parent.element.querySelector(s),t.isNullOrUndefined(this.targetTd)?-1:this.targetTd.cellIndex},i.prototype.updateEventHeight=function(e,i,n){this.verticalEvent.initializeValues();var r=this.verticalEvent.getStartCount();if(!this.parent.uiStateValues.isGroupAdaptive)for(var a=0;a<this.actionObj.groupIndex;a++)this.verticalEvent.dateRender[parseInt(a.toString(),10)]&&(r+=this.verticalEvent.dateRender[parseInt(a.toString(),10)].length);var s=this.parent.uiStateValues.isGroupAdaptive?r:this.actionObj.groupIndex;if(!(!this.parent.activeViewOptions.group.byDate||t.isNullOrUndefined(this.parent.getDateFromElement(this.actionObj.target)))||!this.parent.activeViewOptions.group.byDate){var o=-1,l=this.parent.activeViewOptions.group.byDate?this.parent.getIndexOfDate(this.verticalEvent.dateRender[parseInt(s.toString(),10)],C(this.parent.getDateFromElement(t.isNullOrUndefined(i)?this.actionObj.target:this.targetTd))):t.isNullOrUndefined(i)?this.actionObj.index-r:n-r,h=this.splitEvent(e),p=this.parent.eventBase.isAllDayAppointment(e)||h.length>2||"TimeSlot"!==this.parent.eventSettings.spannedEventPlacement?[e]:h;for(a=0;a<p.length;a++){if(a>0){var c='.e-day-wrapper[data-date="'+C(p[parseInt(a.toString(),10)][this.parent.eventFields.startTime]).getTime()+'"]';this.parent.activeViewOptions.group.resources.length>0&&(c=c.concat('[data-group-index = "'+this.actionObj.groupIndex+'"]'));var d=this.parent.element.querySelector(c);d?(l+=1,o=d.cellIndex):l=-1}if(l>=0){var u=this.verticalEvent.isSpannedEvent(p[parseInt(a.toString(),10)],l,s),m=u[this.verticalEvent.fields.startTime],f=u[this.verticalEvent.fields.endTime],v=this.parent.activeViewOptions.timeScale.enable?this.verticalEvent.getHeight(m,f):this.actionObj.element.offsetHeight,g=this.parent.activeViewOptions.timeScale.enable?this.verticalEvent.getTopValue(m,l,s):this.actionObj.element.offsetTop;if(t.isNullOrUndefined(i))0===a?(this.actionObj.clone.style.top=t.formatUnit(g),this.actionObj.clone.style.height=t.formatUnit(v)):this.renderSpannedEvents(u,o,g,v);else{var y=this.actionObj.cellWidth;if(e[this.parent.eventFields.isAllDay]){g=this.parent.element.querySelector("."+tk).offsetTop,v=this.getAllDayEventHeight();var b=Math.ceil((e[this.parent.eventFields.endTime].getTime()-e[this.parent.eventFields.startTime].getTime())/864e5);b>=0&&(y=b*this.actionObj.cellWidth)}this.actionObj.cloneElement[parseInt(i.toString(),10)]&&(0===a?(this.actionObj.cloneElement[parseInt(i.toString(),10)].style.top=t.formatUnit(g),this.actionObj.cloneElement[parseInt(i.toString(),10)].style.height=t.formatUnit(v),this.actionObj.cloneElement[parseInt(i.toString(),10)].style.width=t.formatUnit(y),this.actionObj.cloneElement[parseInt(i.toString(),10)].style.left=t.formatUnit(0)):this.renderSpannedEvents(u,o,g,v))}}}}},i.prototype.renderSpannedEvents=function(e,i,n,r){if(e[this.parent.eventFields.startTime].getTime()!==e[this.parent.eventFields.endTime].getTime()){var a=this.verticalEvent.createAppointmentElement(e,!1,e.isSpanned,this.actionObj.groupIndex);t.addClass([a],[iF,"e-dynamic-clone"]),t.setStyleAttribute(a,{width:"100%",height:r+"px",top:n+"px",border:"0px"}),[].slice.call(this.parent.element.querySelectorAll("."+t9))[parseInt(i.toString(),10)].appendChild(a)}},i.prototype.getRenderedDates=function(){var e,t,i=this,n=this.parent.activeView.renderDates;return(e=this.parent.eventBase.slots).push.apply(e,this.parent.activeView.renderDates.map(function(e){return+e})),this.parent.activeViewOptions.group.resources.length>0&&(this.parent.eventBase.slots=[],n=this.parent.resourceBase.lastResourceLevel.filter(function(e){return e.groupIndex===i.actionObj.groupIndex})[0].renderDates,(t=this.parent.eventBase.slots).push.apply(t,n.map(function(e){return+e}))),n},i.prototype.updateAllDayEvents=function(e,i,n){this.parent.eventBase.slots=[];var r=this.getUpdatedEvent(e,i,this.actionObj.event),a=this.getRenderedDates(),s=this.parent.eventBase.splitEvent(r,a),o='.e-all-day-cells[data-date="'+s[0][this.parent.eventFields.startTime].getTime()+'"]';this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&(o=o.concat('[data-group-index = "'+this.actionObj.groupIndex+'"]'));var l=[].slice.call(this.parent.element.querySelectorAll(o));if(l.length>0||!t.isNullOrUndefined(n)){var h=t.isNullOrUndefined(n)?l[0].cellIndex:n;this.appendCloneElement(this.getEventWrapper(h)),this.actionObj.clone.style.width=t.formatUnit(s[0].data.count*this.actionObj.cellWidth)}},i.prototype.swapDragging=function(e){var i=t.closest(this.actionObj.target,"td").cellIndex;if(t.closest(this.actionObj.target,"."+tA)&&!t.closest(this.actionObj.clone,"."+iK)){t.addClass([this.actionObj.clone],iX),this.appendCloneElement(this.getEventWrapper(i)),this.actionObj.isAllDay=!0;var n=this.getAllDayEventHeight(),r=[].slice.call(this.parent.element.querySelectorAll("."+tO+":first-child"));if(r[0].offsetHeight<n)for(var a=0;a<r.length;a++)r[a].style.height=(n+2)/12+"em";t.setStyleAttribute(this.actionObj.clone,{width:t.formatUnit(this.actionObj.cellWidth),height:t.formatUnit(n),top:t.formatUnit(this.parent.element.querySelector("."+tk).offsetTop)})}if(t.closest(this.actionObj.target,"."+tM)&&!t.closest(this.actionObj.clone,"."+t7)){t.removeClass([this.actionObj.clone],iX),this.appendCloneElement(this.getEventWrapper(i)),this.actionObj.isAllDay=!1;var s=0===this.actionObj.element.offsetHeight?this.actionObj.height:this.actionObj.element.offsetHeight;t.setStyleAttribute(this.actionObj.clone,{left:t.formatUnit(0),height:t.formatUnit(s),width:t.formatUnit(this.actionObj.cellWidth)})}},i.prototype.calculateVerticalDate=function(e){if(!(t.isNullOrUndefined(e.target)||e.target&&t.isNullOrUndefined(t.closest(e.target,"tr"))||e.target&&"DIV"===e.target.tagName)){var i=t.extend({},this.actionObj.event,null,!0);t.isNullOrUndefined(this.parent.eventDragArea)&&this.removeCloneElement();var n=U(i[this.parent.eventFields.endTime])-U(i[this.parent.eventFields.startTime]),r=t.closest(this.actionObj.target,"td");if(!t.isNullOrUndefined(r)){var a=r.parentElement;this.actionObj.index=a.rowIndex*a.children.length+r.cellIndex,r=[].slice.call(this.parent.element.querySelectorAll("."+tM))[this.actionObj.index];var s=this.parent.getDateFromElement(r);if(!t.isNullOrUndefined(s)){this.parent.activeViewOptions.group.resources.length>0&&(this.actionObj.groupIndex=parseInt(r.getAttribute("data-group-index"),10));var o=new Date(s.setDate(s.getDate()-this.daysVariation)),l=new Date(o.getTime()),h=U(i[this.parent.eventFields.startTime])-U(C(new Date(+i[this.parent.eventFields.startTime])));l.setMilliseconds(h);var p=new Date(l.getTime());p.setMilliseconds(n),this.actionObj.start=new Date(l.getTime()),this.actionObj.end=new Date(p.getTime())}}var c=this.getUpdatedEvent(this.actionObj.start,this.actionObj.end,this.actionObj.event);if(t.isNullOrUndefined(this.parent.eventDragArea))for(var d=0,u=[].slice.call(this.parent.element.querySelectorAll("."+iF));d<u.length;d++){var m=u[d];t.remove(m)}if(this.multiData&&this.multiData.length>0){var f=C(new Date(c[this.parent.eventFields.startTime]));h=f.getTime()-this.startTime,"TimelineYear"===this.parent.currentView&&this.parent.group.resources.length>0&&(h=12*(f.getFullYear()-new Date(this.startTime).getFullYear())-new Date(this.startTime).getMonth()+f.getMonth());for(var v=0;v<this.multiData.length;v++)this.updatedData[parseInt(v.toString(),10)]=this.updateMultipleVerticalDate(this.multiData[parseInt(v.toString(),10)],h),"TimelineYear"===this.parent.currentView?this.dynamicYearlyEventsRendering(this.updatedData[parseInt(v.toString(),10)]):this.dynamicEventsRendering(this.updatedData[parseInt(v.toString(),10)])}else"TimelineYear"===this.parent.currentView?this.dynamicYearlyEventsRendering(c):this.dynamicEventsRendering(c)}},i.prototype.updateMultipleVerticalDate=function(e,i){var n=t.extend({},e,null,!0),r=n[this.parent.eventFields.endTime].getTime()-n[this.parent.eventFields.startTime].getTime(),a=new Date(n[this.parent.eventFields.startTime]);if("TimelineYear"===this.parent.currentView&&this.parent.group.resources.length>0)n[this.parent.eventFields.startTime]=new Date(a.setMonth(a.getMonth()+i));else{var s=Math.ceil(i/tm);n[this.parent.eventFields.startTime]=new Date(a.setDate(a.getDate()+s))}return n[this.parent.eventFields.endTime]=new Date(n[this.parent.eventFields.startTime].getTime()+r),n},i.prototype.calculateTimelineTime=function(e){var i,n=t.extend({},this.actionObj.event,null,!0),r=U(n[this.parent.eventFields.endTime])-U(n[this.parent.eventFields.startTime]),a=this.parent.enableRtl?Math.abs(this.actionObj.clone.offsetLeft)-this.actionObj.clone.offsetWidth:parseInt(this.actionObj.clone.style.left,10);a=Math.floor(a/Math.trunc(this.actionObj.cellWidth))*this.actionObj.cellWidth,this.parent.enableRtl&&(i=Math.abs(parseInt(this.actionObj.clone.style.right,10)),this.actionObj.clone.style.right=t.formatUnit(i)),a=this.getOffsetValue(a,i);var s=this.getColumnIndex(a),o=this.parent.element.querySelector("."+iw),l=o.getBoundingClientRect().right,h=this.parent.activeView.isTimelineView()&&!this.parent.enableRtl&&this.actionObj.pageX>this.actionObj.clone.getBoundingClientRect().right&&!this.isMorePopupOpened&&!(this.actionObj.pageX>l),p=this.parent.eventDragArea?o.scrollLeft-o.offsetLeft:0;(this.isCursorAhead||h)&&!this.isStepDragging&&(this.isCursorAhead=!0);var c=Math.floor((this.actionObj.pageX-this.actionObj.clone.getBoundingClientRect().left+p)/this.actionObj.cellWidth);this.parent.enableRtl&&(c=Math.abs(Math.floor((this.actionObj.pageX-this.actionObj.clone.getBoundingClientRect().right)/this.actionObj.cellWidth))-1),this.cursorPointIndex<0&&this.cursorIndex(e,n,a,c);var d=this.parent.getContentTable().querySelector("tr"),u=this.getCursorCurrentIndex(s,c,d);u=u<0?0:u;var m=this.isHeaderRows?new Date(this.timelineEventModule.dateRender[parseInt(u.toString(),10)].getTime()):this.parent.getDateFromElement(d.children[parseInt(u.toString(),10)]);if(this.isStepDragging){var f=this.getWidthDiff(d,u);if(0!==f){var v=Math.round(f/this.widthPerMinute);m.setMinutes(m.getMinutes()+v*this.actionObj.interval),this.isCursorAhead||h?m.setMilliseconds(-r):m.setMinutes(m.getMinutes()-this.minDiff)}else m=this.actionObj.start}else if(this.isCursorAhead||h){var g=this.isTimelineDayProcess?1440:this.actionObj.slotInterval;m.setMinutes(m.getMinutes()+g),m.setMilliseconds(-r),m.getTime()===C(m).getTime()&&0===m.getMinutes()&&0===r&&m.setMinutes(-g)}else m.setMinutes(m.getMinutes()-this.cursorPointIndex*(this.isTimelineDayProcess?1440:this.actionObj.slotInterval));if(m=this.calculateIntervalTime(m),this.isTimelineDayProcess){var y=n[this.parent.eventFields.startTime];m.setHours(y.getHours(),y.getMinutes(),y.getSeconds())}if(this.parent.eventDragArea){var b=this.parent.getDateFromElement(e.target);t.isNullOrUndefined(b)||(this.parent.activeViewOptions.timeScale.enable&&"TimelineMonth"!==this.parent.currentView?m=b:(y=n[this.parent.eventFields.startTime],m=new Date(b.setHours(y.getHours(),y.getMinutes(),y.getSeconds()))))}var D=new Date(m.getTime());D.setMilliseconds(r);var w=[this.getUpdatedEvent(m,D,this.actionObj.event)];if(this.multiData.length>0){for(var T=w[0][this.parent.eventFields.startTime].getTime()-this.startTime,E=0;E<this.multiData.length;E++)this.updatedData[parseInt(E.toString(),10)]=this.updateMultipleData(this.multiData[parseInt(E.toString(),10)],T);w=this.updatedData}for(var S=0;S<w.length;S++){var O=this.multiData.length>0?this.actionObj.cloneElement[parseInt(S.toString(),10)]:this.actionObj.clone;if(t.isNullOrUndefined(this.parent.eventDragArea)){var k=this.timelineEventModule.splitEvent(w[parseInt(S.toString(),10)],this.timelineEventModule.dateRender),x=k[0].data,M=this.timelineEventModule.getStartTime(k[0],x),V=this.timelineEventModule.getEndTime(k[0],x),I=this.timelineEventModule.getEventWidth(M,V,n[this.parent.eventFields.isAllDay],x.count),A=this.parent.getIndexOfDate(this.timelineEventModule.dateRender,C(new Date(M.getTime())));A=A<0?0:A;var N=this.timelineEventModule.getPosition(M,V,n[this.parent.eventFields.isAllDay],A);this.parent.enableRtl?O.style.right=t.formatUnit(N):O.style.left=t.formatUnit(N),this.isMorePopupOpened||(O.style.width=t.formatUnit(I))}this.parent.activeViewOptions.group.resources.length>0&&this.calculateResourceGroupingPosition(e,O),this.actionObj.start=new Date(m.getTime()),this.actionObj.end=new Date(D.getTime()),this.updateTimePosition(this.actionObj.start,this.updatedData)}},i.prototype.getOffsetValue=function(e,i){if(this.scrollEdges.left||this.scrollEdges.right){var n=this.parent.element.querySelector("."+iw);this.parent.enableRtl?(i=n.offsetWidth-n.scrollLeft,this.scrollEdges.right?i=i-n.offsetWidth+this.actionObj.clone.offsetWidth-(this.actionObj.clone.offsetWidth-this.widthUptoCursorPoint):(i+=this.widthUptoCursorPoint)-this.widthUptoCursorPoint>=n.scrollWidth&&(this.actionObj.clone.style.width=t.formatUnit(this.actionObj.clone.offsetWidth-this.widthUptoCursorPoint+this.actionObj.cellWidth),i=n.scrollLeft-n.scrollWidth),t.isNullOrUndefined(this.parent.eventDragArea)&&(this.actionObj.clone.style.left=t.formatUnit(i))):(this.scrollEdges.left?(e=n.scrollLeft-this.widthUptoCursorPoint+this.actionObj.cellWidth,n.scrollLeft+n.offsetWidth>=n.offsetWidth?n.scrollLeft=n.scrollLeft-1:0===this.actionObj.clone.offsetLeft&&(e=n.scrollLeft)):e=n.scrollLeft+n.offsetWidth-this.actionObj.clone.offsetWidth+(this.actionObj.clone.offsetWidth-this.widthUptoCursorPoint),e=e<0?0:e,t.isNullOrUndefined(this.parent.eventDragArea)&&(this.actionObj.clone.style.left=t.formatUnit(e)))}return e},i.prototype.getWidthDiff=function(e,t){var i=this.scrollArgs.element.getBoundingClientRect();if(i.left<=this.actionObj.pageX&&i.right>=this.actionObj.pageX){var n=e.children[parseInt(t.toString(),10)].offsetLeft,r=this.actionObj.pageX-i.left;return this.parent.enableRtl?n+this.actionObj.cellWidth-(this.scrollArgs.element.scrollLeft+r):this.scrollArgs.element.scrollLeft+r-n}return 0},i.prototype.getColumnIndex=function(e){var t=Math.floor(e/Math.trunc(this.actionObj.cellWidth));return this.isHeaderRows?t:this.getIndex(t)},i.prototype.getCursorCurrentIndex=function(e,t,i){var n=e+t;if(this.isHeaderRows){var r=Math.floor(i.offsetWidth/this.actionObj.cellWidth);return n>r-1?r-1:n}return n>i.children.length-1?i.children.length-1:n},i.prototype.cursorIndex=function(e,i,n,r){var a=t.closest(e.target,".e-work-cells");if(t.isNullOrUndefined(a)||this.isMorePopupOpened)this.cursorPointIndex=0;else{var s=this.parent.getDateFromElement(a);if(this.isHeaderRows){var o=Math.floor(n/this.actionObj.cellWidth);s=new Date(this.timelineEventModule.dateRender[o+r].getTime())}var l=s.getTime()-i[this.parent.eventFields.startTime].getTime();if(this.isTimelineDayProcess)this.cursorPointIndex=Math.abs(Math.ceil(l/tm));else{var h=Math.floor(l/tf/(this.actionObj.slotInterval/this.actionObj.cellWidth));this.cursorPointIndex=Math.floor(h/this.actionObj.cellWidth),this.cursorPointIndex=this.cursorPointIndex<0?0:this.cursorPointIndex}}},i.prototype.calculateResourceGroupingPosition=function(e,i){var n=this.parent.element.querySelector("."+iw),r=[].slice.call(this.parent.element.querySelectorAll(".e-content-wrap .e-content-table tr:not(.e-hidden)")),a=u(n.querySelector("table"));a=t.isNullOrUndefined(a)?0:a;var s=this.parent.rowAutoHeight?~~(n.querySelector("table").offsetHeight/r.length):this.actionObj.cellHeight,o=Math.floor(Math.floor(this.actionObj.Y+(n.scrollTop-a-(window.scrollY||window.pageYOffset))-n.getBoundingClientRect().top)/s);o=o<0?0:o>r.length-1?r.length-1:o,this.actionObj.index=o;var l=this.parent.element.querySelectorAll(".e-appointment-container:not(.e-hidden)").item(o),h=l.querySelector("."+t9);h||(h=t.createElement("div",{className:t9}),l.appendChild(h)),this.appendCloneElement(h,i);var p=t.closest(this.actionObj.target,"td");if(this.actionObj.groupIndex=p&&!isNaN(parseInt(p.getAttribute("data-group-index"),10))?parseInt(p.getAttribute("data-group-index"),10):this.actionObj.groupIndex,t.isNullOrUndefined(this.parent.eventDragArea)){var c=r[parseInt(o.toString(),10)].getBoundingClientRect().height*o;if(this.parent.rowAutoHeight){var d=this.getCursorElement(e);d&&(c=d.classList.contains(tM)?d.offsetTop:d.offsetParent&&d.offsetParent.classList.contains(ip)?d.offsetParent.offsetTop:c)}i.style.top=t.formatUnit(c)}},i.prototype.appendCloneElement=function(e,i){void 0===i&&(i=null),i=t.isNullOrUndefined(i)?this.actionObj.clone:i;var n=document.querySelector(this.parent.eventDragArea);this.parent.eventDragArea&&n?n.appendChild(i):e.appendChild(i)},i.prototype.getEventWrapper=function(e,i){var n;if(t.isNullOrUndefined(i)&&(i=this.actionObj.clone.classList.contains(iX)),this.parent.activeViewOptions.timeScale.enable){var r=i?"."+iK:"."+t9;n=this.parent.element.querySelectorAll(r).item(e)}else{var a=this.parent.element.querySelectorAll("."+tM).item(e);(n=a.querySelector("."+t9))||(n=t.createElement("div",{className:t9}),a.appendChild(n))}return n},i.prototype.getAllDayEventHeight=function(){var e=t.createElement("div",{className:ip});this.parent.element.querySelector("."+iK).appendChild(e);var i=e.offsetHeight;return t.remove(e),i},i.prototype.isAllowDrop=function(e){if(!this.actionObj.excludeSelectors)return!1;for(var t=!1,i=0,n=this.actionObj.excludeSelectors.split(",");i<n.length;i++){var r=n[i];if(e.target.classList.contains(r)){t=!0;break}}return t},i.prototype.getModuleName=function(){return"dragAndDrop"},i}(aJ),a4=function(){function e(e){this.previousNextAction="next",this.parent=e}return e.prototype.isTimelineView=function(){return -1!==this.parent.currentView.indexOf("Timeline")},e.prototype.getContentRows=function(){return[]},e.prototype.refreshHeader=function(){},e.prototype.refreshResourceHeader=function(){t.remove(this.element.querySelector("tbody").lastElementChild.firstElementChild);var e=t.createElement("td");e.appendChild(this.parent.resourceBase.createResourceColumn()),t.prepend([e],this.element.querySelector("tbody").lastElementChild),this.parent.notify(to,{})},e.prototype.getDayName=function(e){return this.parent.getDayNames("abbreviated")[e.getDay()]},e.prototype.getDate=function(e){return this.parent.globalize.formatDate(e,{format:"d",calendar:this.parent.getCalendarMode()})},e.prototype.getTime=function(e){return this.parent.isAdaptive?"HH:mm"===this.parent.activeViewOptions.timeFormat||"HH.mm"===this.parent.activeViewOptions.timeFormat?this.parent.globalize.formatDate(e,{format:"H",calendar:this.parent.getCalendarMode()}):this.parent.globalize.formatDate(e,{skeleton:"h",calendar:this.parent.getCalendarMode()}):this.parent.getTimeString(e)},e.prototype.getTimelineDate=function(e){return j(this.parent.globalize.formatDate(e,{skeleton:"MMMd",calendar:this.parent.getCalendarMode()})+", "+this.parent.getDayNames("wide")[e.getDay()],"multiple")},e.prototype.createEventTable=function(e){var i=t.createElement("div",{className:tz});return t.append(this.getEventRows(e),i),i},e.prototype.getEventRows=function(e){for(var i,n=[],r=0;r<e;r++)i=t.createElement("div",{className:ih}),this.parent.resourceBase&&!this.parent.uiStateValues.isGroupAdaptive&&this.parent.resourceBase.renderedResources&&i.setAttribute("data-group-index",this.parent.resourceBase.renderedResources[parseInt(r.toString(),10)].groupIndex.toString()),n.push(i);return n},e.prototype.collapseRows=function(e){this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&(this.parent.resourceBase.hideResourceRows(e.querySelector("tbody")),this.parent.resourceBase.hideResourceRows(e.querySelector("."+tz)))},e.prototype.createTableLayout=function(e){var i=t.createElement("table",{className:tS+" "+(e||"")}),n=t.createElement("tbody");return i.appendChild(n),i},e.prototype.setAriaAttributes=function(e){e.setAttribute("role","grid"),e.setAttribute("aria-label",this.getLabelText(this.parent.currentView))},e.prototype.createColGroup=function(e,i){var n=i.length;i[0]&&i[0].colSpan&&(n=i.map(function(e){return e.colSpan}).reduce(function(e,t){return e+t}));for(var r=t.createElement("colgroup"),a=0;a<n;a++)r.appendChild(t.createElement("col"));t.prepend([r],e)},e.prototype.getScrollXIndent=function(e){return e.offsetHeight-e.clientHeight>0?A():0},e.prototype.scrollTopPanel=function(e){this.getDatesHeaderElement().firstElementChild.scrollLeft=e.scrollLeft},e.prototype.scrollHeaderLabels=function(e){for(var i=this.element.querySelector(".e-date-header-wrap table"),n=i.offsetWidth/i.querySelectorAll("colgroup col").length,r=0,a=[".e-header-year-cell",".e-header-month-cell",".e-header-week-cell",".e-header-cells"];r<a.length;r++){var s=a[r],o=[].slice.call(this.element.querySelectorAll(s));if(o.length>0){for(var l=0;l<o.length;l++)o[l].children[0].style[this.parent.enableRtl?"right":"left"]="";(function(i,r){for(var a,s=0,o=0,l=r?-e.scrollLeft:e.scrollLeft,h=0;h<i.length;h++){var p=i[h];if((o+=parseInt(p.getAttribute("colSpan"),10))>Math.floor(l/n)){a=p;break}s+=p.offsetWidth}t.isNullOrUndefined(a)||(a.children[0].style[r?"right":"left"]=l-s+"px")})(o,this.parent.enableRtl)}}},e.prototype.addAttributes=function(e,i){e.template&&t.append(e.template,i),e.colSpan&&i.setAttribute("colspan",e.colSpan.toString()),e.className&&t.addClass([i],e.className)},e.prototype.getHeaderBarHeight=function(){var e=2;if(this.parent.headerModule&&(e+=H(this.parent.headerModule.getHeaderElement())),this.parent.uiStateValues.isGroupAdaptive){var t=this.parent.element.querySelector("."+ii);t&&(e+=t.offsetHeight)}return e},e.prototype.renderPanel=function(e){e===tB?t.prepend([this.element],this.parent.element.querySelector("."+tE)):this.parent.element.querySelector("."+tE).appendChild(this.element)},e.prototype.setPanel=function(e){this.element=e},e.prototype.getPanel=function(){return this.element},e.prototype.getDatesHeaderElement=function(){return this.element.querySelector("."+tN)},e.prototype.getDateSlots=function(e,t){return[]},e.prototype.generateColumnLevels=function(){return[]},e.prototype.getColumnLevels=function(){return this.colLevels},e.prototype.highlightCurrentTime=function(){},e.prototype.getStartDate=function(){return this.renderDates[0]},e.prototype.getEndDate=function(){return this.renderDates[this.renderDates.length-1]},e.prototype.startDate=function(){return this.renderDates[0]},e.prototype.endDate=function(){return S(this.renderDates[this.renderDates.length-1],1)},e.prototype.getStartHour=function(){var e=this.parent.getStartEndTime(this.parent.activeViewOptions.startHour);return t.isNullOrUndefined(e)&&(e=new Date(2e3,0,0,0)),e},e.prototype.getEndHour=function(){var e=this.parent.getStartEndTime(this.parent.activeViewOptions.endHour);return t.isNullOrUndefined(e)&&(e=new Date(2e3,0,0,0)),e},e.prototype.isCurrentDate=function(e){return e.setHours(0,0,0,0)===new Date(this.parent.currentTimezoneDate).setHours(0,0,0,0)},e.prototype.isCurrentMonth=function(e){return this.parent.activeViewOptions.displayDate||this.parent.activeViewOptions.numberOfWeeks>0?this.parent.activeView.getStartDate().getTime()<=this.parent.getCurrentTime().getTime()&&this.parent.activeView.getEndDate().getTime()>=this.parent.getCurrentTime().getTime():e.getFullYear()===this.parent.getCurrentTime().getFullYear()&&e.getMonth()===this.parent.getCurrentTime().getMonth()},e.prototype.isWorkDay=function(e,t){return void 0===t&&(t=this.parent.activeViewOptions.workDays),t.indexOf(e.getDay())>=0},e.prototype.isWorkHour=function(e,i,n,r){return!t.isNullOrUndefined(i)&&!t.isNullOrUndefined(n)&&(i.setMilliseconds(0),n.setMilliseconds(0),!(T(e)<T(i)||T(e)>=T(n)||!this.isWorkDay(e,r)))},e.prototype.getRenderDates=function(e){var t=[];if("Week"===this.parent.currentView||"TimelineWeek"===this.parent.currentView)for(var i=f(C(this.parent.selectedDate),this.parent.activeViewOptions.firstDayOfWeek),n=0,r=7*this.parent.activeViewOptions.interval;n<r;n++)this.parent.activeViewOptions.showWeekend?t.push(i):this.isWorkDay(i,e)&&t.push(i),i=S(i,1);else if("WorkWeek"===this.parent.currentView||"TimelineWorkWeek"===this.parent.currentView){i=f(C(this.parent.selectedDate),this.parent.activeViewOptions.firstDayOfWeek),n=0;for(var a=7*this.parent.activeViewOptions.interval;n<a;n++)this.isWorkDay(i,e)&&t.push(i),i=S(i,1)}else{var s="Agenda"===this.parent.currentView?this.parent.agendaDaysCount:this.parent.activeViewOptions.interval;i=C(this.parent.selectedDate);do this.parent.activeViewOptions.showWeekend?t.push(i):this.isWorkDay(i,e)&&t.push(i),i=S(i,1);while(s!==t.length)}return e||(this.renderDates=t),this.parent.headerModule&&this.parent.headerModule.previousNextIconHandler(),t},e.prototype.getNextPreviousDate=function(e){if(this.previousNextAction=e,"Day"===this.parent.currentView||"TimelineDay"===this.parent.currentView){if(this.parent.activeViewOptions.showWeekend){var t=this.parent.activeViewOptions.interval;return S(this.parent.selectedDate,"next"===e?t:-t)}var i=void 0;if("next"===e)for(i=S(this.renderDates.slice(-1)[0],1);!this.isWorkDay(i);)i=S(i,1);else{i=S(this.renderDates[0],-1);var n=0;do this.isWorkDay(i)&&(n+=1),this.parent.activeViewOptions.interval!==n&&(i=S(i,-1));while(this.parent.activeViewOptions.interval!==n)}return i}var r="next"===e?7:-7;return S(this.parent.selectedDate,r*this.parent.activeViewOptions.interval)},e.prototype.getLabelText=function(e){var t=e.charAt(0).toLowerCase()+e.substring(1);return this.parent.localeObj.getConstant(t)+" of "+j(this.parent.globalize.formatDate(this.parent.selectedDate,{skeleton:"long",calendar:this.parent.getCalendarMode()}),"single")},e.prototype.getDateRangeText=function(){if(this.parent.isAdaptive){var e=this.parent.activeViewOptions.dateFormat?this.parent.activeViewOptions.dateFormat:"MMMM y";return j(this.parent.globalize.formatDate(this.parent.selectedDate,{format:e,calendar:this.parent.getCalendarMode()}),"single")}return this.formatDateRange(this.renderDates[0],this.renderDates[this.renderDates.length-1])},e.prototype.formatDateRange=function(e,i){var n,r=this.parent.globalize,a=this.parent.getCalendarMode();if(e===i&&(i=null),!t.isNullOrUndefined(this.parent.activeViewOptions.dateFormat))return i?j(r.formatDate(e,{format:this.parent.activeViewOptions.dateFormat,calendar:a})+" - "+r.formatDate(i,{format:this.parent.activeViewOptions.dateFormat,calendar:a}),"multiple"):j(r.formatDate(e,{format:this.parent.activeViewOptions.dateFormat,calendar:a}),"multiple");if(n="en"===this.parent.locale||"en-US"===this.parent.locale?t.getValue("dateFormats.long",t.getDefaultDateObject(a)):t.getValue("main."+this.parent.locale+".dates.calendars."+a+".dateFormats.long",t.cldrData),!i)return j(r.formatDate(e,{format:n,calendar:a}),"single");var s=n.trim().toLocaleLowerCase();return j("d"===s.substr(0,1)?e.getFullYear()===i.getFullYear()?e.getMonth()===i.getMonth()?r.formatDate(e,{format:"dd",calendar:a})+" - "+r.formatDate(i,{format:"dd MMMM yyyy",calendar:a}):r.formatDate(e,{format:"dd MMM",calendar:a})+" - "+r.formatDate(i,{format:"dd MMM yyyy",calendar:a}):r.formatDate(e,{format:"dd MMM yyyy",calendar:a})+" - "+r.formatDate(i,{format:"dd MMM yyyy",calendar:a}):"m"===s.substr(0,1)?e.getFullYear()===i.getFullYear()?e.getMonth()===i.getMonth()?r.formatDate(e,{format:"MMMM dd",calendar:a})+" - "+r.formatDate(i,{format:"dd, yyyy",calendar:a}):r.formatDate(e,{format:"MMM dd",calendar:a})+" - "+r.formatDate(i,{format:"MMM dd, yyyy",calendar:a}):r.formatDate(e,{format:"MMM dd, yyyy",calendar:a})+" - "+r.formatDate(i,{format:"MMM dd, yyyy",calendar:a}):r.formatDate(e,{format:n,calendar:a})+" - "+r.formatDate(i,{format:n,calendar:a}),"multiple")},e.prototype.getMobileDateElement=function(e,i){return t.createElement("div",{className:i,innerHTML:'<div class="e-m-date">'+this.parent.globalize.formatDate(e,{format:"d",calendar:this.parent.getCalendarMode()})+'</div><div class="e-m-day">'+j(this.parent.globalize.formatDate(e,{format:"E",calendar:this.parent.getCalendarMode()}),"single")+"</div>"})},e.prototype.setResourceHeaderContent=function(e,i,n){if(void 0===n&&(n=ni),this.parent.activeViewOptions.resourceHeaderTemplate){var r={resource:i.resource,resourceData:i.resourceData},a=this.parent.element.id+"_"+this.parent.activeViewOptions.resourceHeaderTemplateName+"resourceHeaderTemplate",s=[].slice.call(this.parent.getResourceHeaderTemplate()(r,this.parent,"resourceHeaderTemplate",a,!1));t.append(s,e)}else{var o=t.createElement("div",{className:n});this.parent.sanitize(i.resourceData[i.resource.textField],o),e.appendChild(o)}},e.prototype.renderResourceMobileLayout=function(){this.parent.resourceBase.lastResourceLevel&&this.parent.resourceBase.lastResourceLevel.length<=0||(this.parent.resourceBase.renderResourceHeader(),this.parent.resourceBase.renderResourceTree())},e.prototype.addAutoHeightClass=function(e){!this.parent.uiStateValues.isGroupAdaptive&&this.parent.rowAutoHeight&&this.isTimelineView()&&this.parent.activeViewOptions.group.resources.length>0&&t.addClass([e],n6)},e.prototype.getColElements=function(){return[].slice.call(this.element.querySelectorAll("."+iw+" col, ."+tA+" col"))},e.prototype.setColWidth=function(e){if(this.isTimelineView()){var i=this.getColElements(),n=this.element.querySelector("."+tx+" tbody").getBoundingClientRect().width/(i.length/2);if(e.offsetHeight!==e.clientHeight){var r=this.parent.element.querySelector("."+tG);t.isNullOrUndefined(r)||t.setStyleAttribute(r,{height:t.formatUnit(e.clientHeight)})}[].slice.call(this.element.querySelectorAll(".e-header-cells,.e-time-slots,.e-header-week-cell,.e-header-month-cell,.e-header-year-cell")).forEach(function(e){var i=parseInt(t.isNullOrUndefined(e.getAttribute("colspan"))?"1":e.getAttribute("colspan"),10);t.setStyleAttribute(e,{width:t.formatUnit(n*i)})})}},e.prototype.resetColWidth=function(){for(var e=0,t=this.getColElements();e<t.length;e++)t[e].style.width=""},e.prototype.getContentAreaElement=function(){return this.element.querySelector("."+iw)},e.prototype.wireExpandCollapseIconEvents=function(){if(this.parent.resourceBase&&this.parent.resourceBase.resourceCollection.length>1)for(var e=0,i=[].slice.call(this.element.querySelectorAll("."+tJ));e<i.length;e++){var n=i[e];t.EventHandler.clearEvents(n),t.EventHandler.add(n,"click",this.parent.resourceBase.onTreeIconClick,this.parent.resourceBase)}},e.prototype.scrollToDate=function(e){if(-1!==["Month","TimelineMonth"].indexOf(this.parent.currentView)&&!t.isNullOrUndefined(e)){var i=this.getContentAreaElement(),n=new Date(C(new Date(+e)).getTime()).getTime(),r=i.querySelector("."+tM+'[data-date="'+n+'"]');"Month"===this.parent.currentView&&r&&(i.scrollWidth>i.clientWidth&&(this.parent.enableRtl?i.scrollLeft=-(this.parent.getContentTable().offsetWidth-r.offsetLeft-r.offsetWidth):i.scrollLeft=r.offsetLeft),i.scrollTop=r.offsetTop),"TimelineMonth"===this.parent.currentView&&r&&(this.parent.enableRtl?i.scrollLeft=-(this.parent.getContentTable().offsetWidth-r.offsetLeft-r.offsetWidth):i.scrollLeft=r.offsetLeft)}},e.prototype.setPersistence=function(){if(this.parent.enablePersistence){var e=this.element.querySelector(".e-content-wrap");t.isNullOrUndefined(e)||(this.parent.scrollLeft=e.scrollLeft,this.parent.scrollTop=e.scrollTop)}},e.prototype.retainScrollPosition=function(){if(this.parent.enablePersistence){var e=this.parent.element.querySelector(".e-content-wrap");t.isNullOrUndefined(e)||t.isNullOrUndefined(this.parent.scrollLeft)||t.isNullOrUndefined(this.parent.scrollTop)||(e.scrollTop=this.parent.scrollTop,e.scrollLeft=this.parent.scrollLeft)}},e.prototype.getViewStartDate=function(){var e=this.renderDates[0];return this.parent.activeViewOptions.group.resources.length>0&&this.parent.resourceBase.lastResourceLevel.length>0&&(e=this.parent.resourceBase.getResourceRenderDates()[0]),e},e.prototype.getViewEndDate=function(){var e=S(this.renderDates[this.renderDates.length-1],1);return this.parent.activeViewOptions.group.resources.length>0&&this.parent.resourceBase.lastResourceLevel.length>0&&(e=S(this.parent.resourceBase.getResourceRenderDates().slice(-1)[0],1)),e},e.prototype.getAdjustedDate=function(e){return this.parent.activeViewOptions.timeScale.enable&&"Month"!==this.parent.currentView&&("TimelineYear"!==this.parent.currentView||0!==this.parent.activeViewOptions.group.resources.length)?"TimelineYear"===this.parent.currentView&&this.parent.activeViewOptions.group.resources.length>0?(e.setHours(0,0,0,0),new Date(e.setDate(1))):null:new Date(e.setHours(0,0,0,0))},e.prototype.resetColLevels=function(){this.parent.resourceBase.expandedResources=[];for(var e=this.parent.virtualScrollModule.getRenderedCount(),t=this.parent.activeViewOptions.group.byDate?this.colLevels[0]:this.parent.resourceBase.renderedResources,i=0,n=0;n<t.length&&!(i>=e);n++)i+=t[parseInt(n.toString(),10)].colSpan,this.parent.resourceBase.expandedResources.push(t[parseInt(n.toString(),10)]);this.parent.activeViewOptions.group.byDate?(this.colLevels[0]=this.parent.resourceBase.expandedResources,this.parent.virtualScrollModule.setRenderedDates(this.parent.resourceBase.expandedResources)):(this.colLevels[this.colLevels.length-2]=this.parent.resourceBase.expandedResources,this.parent.resourceBase.renderedResources=this.parent.resourceBase.expandedResources),"Month"!==this.parent.currentView&&(this.colLevels[this.colLevels.length-1]=this.colLevels[this.colLevels.length-1].slice(0,i),this.parent.resourceBase.expandedResources=this.colLevels[this.colLevels.length-1])},e.prototype.destroy=function(){this.element&&this.element.parentNode&&t.remove(this.element),this.element=null,this.renderDates=null,this.colLevels=null},e}(),a5=(eA=function(e,t){return(eA=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}eA(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),a8=function(e){function i(t){var i=e.call(this,t)||this;return i.viewClass="e-day-view",i.isInverseTableSelect=!0,i.baseCssClass="e-vertical-view",i.appointment=null,i}return a5(i,e),i.prototype.getModuleName=function(){return"verticalView"},i.prototype.addEventListener=function(){this.parent.on(tp,this.scrollUiUpdate,this),this.parent.on(ta,this.renderEvents,this)},i.prototype.removeEventListener=function(){this.parent&&(this.parent.off(tp,this.scrollUiUpdate),this.parent.off(ta,this.renderEvents))},i.prototype.renderEvents=function(){this.appointment=this.parent.activeViewOptions.timeScale.enable?new rI(this.parent):new rN(this.parent),this.appointment.renderAppointments(),this.parent.notify(ts,{})},i.prototype.onContentScroll=function(e){this.parent.removeNewEventElement();var i=e.target;this.parent.notify(th,e),this.scrollLeftPanel(i),this.scrollTopPanel(i),this.parent.isAdaptive||(this.parent.uiStateValues.top=i.scrollTop),this.parent.uiStateValues.left=i.scrollLeft,t.isNullOrUndefined(this.parent.quickPopup)||this.parent.quickPopup.quickPopupHide(),this.setPersistence()},i.prototype.onAdaptiveMove=function(e){this.parent.uiStateValues.action&&e.preventDefault()},i.prototype.onAdaptiveScroll=function(e){this.parent&&!this.parent.isDestroyed&&(this.parent.removeNewEventElement(),this.parent.uiStateValues.top=e.target.scrollTop)},i.prototype.scrollLeftPanel=function(e){var i=this.getLeftPanelElement();t.isNullOrUndefined(i)||(i.scrollTop=e.scrollTop)},i.prototype.scrollUiUpdate=function(e){if(this.parent){var t=this.parent.element.querySelector("."+tA),i=this.getHeaderBarHeight(),n=this.getLeftPanelElement(),r=this.getScrollableElement(),a=this.getDatesHeaderElement(),s=this.parent.element.offsetHeight-i-a.offsetHeight;this.setContentHeight(r,n,s),this.setColWidth(r);var o=A();a.firstElementChild.style[e.cssProperties.rtlBorder]="",a.style[e.cssProperties.rtlPadding]="";var l=!this.parent.enableAllDayScroll||!(r.offsetWidth-r.clientWidth<=t.offsetWidth-t.clientWidth&&t.classList.contains("e-all-day-scroll"));r.offsetWidth-r.clientWidth>0&&l?(a.firstElementChild.style[e.cssProperties.border]=o>0?"1px":"0px",a.style[e.cssProperties.padding]=o>0?o-1+"px":"0px"):(a.firstElementChild.style[e.cssProperties.border]="",a.style[e.cssProperties.padding]=""),e.isPreventScrollUpdate||(this.parent.uiStateValues.isInitial?(this.parent.currentView.indexOf("Timeline")>-1&&(r.scrollTop=this.parent.uiStateValues.top),this.scrollToWorkHour(),this.parent.uiStateValues.isInitial=!1):(n&&(n.scrollTop=this.parent.uiStateValues.top),r.scrollTop=this.parent.uiStateValues.top,r.scrollLeft=this.parent.uiStateValues.left)),this.parent.activeViewOptions.timeScale.enable&&this.highlightCurrentTime(),this.retainScrollPosition()}},i.prototype.setContentHeight=function(e,i,n){this.parent.isAdaptive&&!this.isTimelineView()||t.isNullOrUndefined(i)||(i.style.height="auto"===this.parent.height?"auto":t.formatUnit(n-this.getScrollXIndent(e))),e.style.height="auto"===this.parent.height?"auto":t.formatUnit(n)},i.prototype.scrollToWorkHour=function(){if(this.parent.workHours.highlight){var e=this.element.querySelector("."+tV);e&&(this.getScrollableElement().scrollTop=e.offsetTop,this.parent.uiStateValues.top=e.offsetTop,this.parent.uiStateValues.left=0)}},i.prototype.scrollToHour=function(e,i){var n=this.parent.getStartEndTime(e);if(!t.isNullOrUndefined(i)){var r=this.element.querySelector("."+tP+'[data-date="'+new Date(C(i)).getTime()+'"]');if(r){if(this.parent.enableRtl){var a=this.element.querySelector("."+tx);this.getScrollableElement().scrollLeft=-(a.offsetWidth-r.offsetLeft-r.offsetWidth)}else this.getScrollableElement().scrollLeft=r.offsetLeft}}t.isNullOrUndefined(n)||(this.getScrollableElement().scrollTop=this.getTopFromDateTime(n))},i.prototype.scrollToDate=function(e){this.scrollToHour(null,e)},i.prototype.generateColumnLevels=function(){var e=this.getDateSlots(this.renderDates,this.parent.activeViewOptions.workDays),t=[];if(this.parent.activeViewOptions.group.resources.length>0){if(t=this.parent.resourceBase.generateResourceLevels(e),this.parent.activeViewOptions.group.hideNonWorkingDays)for(;0===t[0].length;)this.parent.setProperties({selectedDate:this.parent.activeView.getNextPreviousDate(this.previousNextAction)},!0),this.parent.activeView.getRenderDates(),this.parent.headerModule&&(this.parent.headerModule.setCalendarDate(this.parent.selectedDate),this.parent.headerModule.updateDateRange()),e=this.getDateSlots(this.renderDates,this.parent.activeViewOptions.workDays),t=this.parent.resourceBase.generateResourceLevels(e);if(this.parent.uiStateValues.isGroupAdaptive&&this.parent.resourceBase.lastResourceLevel.length>0){var i=this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex],n=i.resourceData[i.resource.startHourField],r=i.resourceData[i.resource.endHourField];t=[this.getDateSlots(i.renderDates,i.workDays,n,r)]}}else t.push(e);return this.colLevels=t,t},i.prototype.getDateSlots=function(e,t,i,n){void 0===i&&(i=this.parent.workHours.start),void 0===n&&(n=this.parent.workHours.end);for(var r=[],a=this.parent.getStartEndTime(i),s=this.parent.getStartEndTime(n),o=0;o<e.length;o++){var l=e[o],h=[tP];this.isCurrentDate(l)&&h.push(tF),r.push({date:l,type:"dateHeader",className:h,colSpan:1,workDays:t,startHour:new Date(+a),endHour:new Date(+s)})}return r},i.prototype.isWorkHourRange=function(e){return this.getStartHour().getTime()<=e.getTime()&&this.getEndHour().getTime()>=e.getTime()},i.prototype.highlightCurrentTime=function(){var e=this;if(!(this.parent.activeViewOptions.headerRows.length>0&&"Hour"!==this.parent.activeViewOptions.headerRows.slice(-1)[0].option)){var i=this.parent.getCurrentTime();if(this.parent.showTimeIndicator&&this.isWorkHourRange(i)){if(this.getCurrentTimeIndicatorIndex().length>0){if([].slice.call(this.element.querySelectorAll("."+tM)).length>0&&this.changeCurrentTimePosition(),t.isNullOrUndefined(this.currentTimeIndicatorTimer)){var n=tf-(1e3*i.getSeconds()+i.getMilliseconds());n<=tf-1e3&&window.setTimeout(function(){t.isNullOrUndefined(e.currentTimeIndicatorTimer)||(e.clearCurrentTimeIndicatorTimer(),e.changeCurrentTimePosition(),e.updateCurrentTimeIndicatorTimer())},n),this.updateCurrentTimeIndicatorTimer()}}else this.clearCurrentTimeIndicatorTimer()}else this.clearCurrentTimeIndicatorTimer()}},i.prototype.getCurrentTimeIndicatorIndex=function(){var e=[];if(t.isNullOrUndefined(this.parent.resourceBase)||!(this.parent.activeViewOptions.group.resources.length>0)||this.parent.uiStateValues.isGroupAdaptive){var i,n=this.parent.uiStateValues.isGroupAdaptive&&this.parent.resourceBase.lastResourceLevel.length>0?this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex].renderDates:this.renderDates;(i=this.parent.getIndexOfDate(n,C(this.parent.getCurrentTime())))>=0&&e.push(i)}else{var r=0,a=C(this.parent.getCurrentTime());if(this.parent.virtualScrollModule&&this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.activeViewOptions.group.byDate)for(var s=0,o=this.parent.resourceBase.expandedResources;s<o.length;s++)C((p=o[s]).date).getTime()===a.getTime()&&e.push(r),r+=1;else for(var l=0,h=this.parent.resourceBase.renderedResources;l<h.length;l++){var p=h[l];if((i=this.parent.getIndexOfDate(p.renderDates,a))>=0){var c=this.parent.activeViewOptions.group.byDate?this.parent.resourceBase.lastResourceLevel.length*i+r:r+i;e.push(c)}r+=this.parent.activeViewOptions.group.byDate?1:p.renderDates.length}}return e},i.prototype.clearCurrentTimeIndicatorTimer=function(){t.isNullOrUndefined(this.currentTimeIndicatorTimer)||(window.clearInterval(this.currentTimeIndicatorTimer),this.currentTimeIndicatorTimer=null,this.removeCurrentTimeIndicatorElements())},i.prototype.updateCurrentTimeIndicatorTimer=function(){var e=this;this.currentTimeIndicatorTimer=window.setInterval(function(){e.changeCurrentTimePosition()},tf)},i.prototype.removeCurrentTimeIndicatorElements=function(){for(var e=0,i=[].slice.call(this.element.querySelectorAll(".e-previous-timeline,.e-current-timeline,.e-current-time"));e<i.length;e++){var n=i[e];t.remove(n)}},i.prototype.changeCurrentTimePosition=function(){if(!(!this.parent||this.parent&&this.parent.isDestroyed)){this.removeCurrentTimeIndicatorElements();var e=this.getCurrentTimeIndicatorIndex(),i=this.parent.getContentTable().rows[0],n=this.getTopFromDateTime(this.parent.getCurrentTime()),r=t.formatUnit(n),a=Math.floor(n/i.cells[0].offsetHeight),s=this.getLeftPanelElement(),o=[].slice.call(s.querySelectorAll("tr"));if(!t.isNullOrUndefined(a)&&!isNaN(a)&&a!==o.length){for(var l=[].slice.call(this.element.querySelectorAll("."+t8)),h=0,p=e[0];h<p;h++)l[parseInt(h.toString(),10)].appendChild(t.createElement("div",{className:"e-previous-timeline",styles:"top:"+r}));for(var c=0;c<e.length;c++)l[parseInt(e[c].toString(),10)].appendChild(t.createElement("div",{className:t6,styles:"top:"+r}));var d=t.createElement("div",{innerHTML:this.parent.getTimeString(this.parent.getCurrentTime()),className:t3,styles:"top:"+r});a<=o.length&&(t.removeClass(s.querySelectorAll("."+t4),t4),o[parseInt(a.toString(),10)]&&t.addClass([o[parseInt(a.toString(),10)].lastElementChild],t4),t.prepend([d],s),d.style.top=t.formatUnit(d.offsetTop-d.offsetHeight/2))}}},i.prototype.getTopFromDateTime=function(e){var t=this.getStartHour();return(60*(e.getHours()-t.getHours())+(e.getMinutes()-t.getMinutes()))*this.getWorkCellHeight()*this.parent.activeViewOptions.timeScale.slotCount/this.parent.activeViewOptions.timeScale.interval},i.prototype.getWorkCellHeight=function(){return parseFloat(this.element.querySelector("."+tM).getBoundingClientRect().height.toFixed(2))},i.prototype.getTdContent=function(e,i,n){var r,a=t.createElement("div"),s="",o=this.parent.element.id+"_";switch(i){case"dateHeader":if(this.parent.activeViewOptions.dateHeaderTemplate){s="dateHeaderTemplate";var l={date:e,type:i},h=this.parent.activeViewOptions.dateHeaderTemplateName;r=[].slice.call(this.parent.getDateHeaderTemplate()(l,this.parent,s,o+h+s,!1))}else a.innerHTML=this.parent.activeView.isTimelineView()?'<span class="e-header-date e-navigate">'+this.getTimelineDate(e)+"</span>":'<div class="e-header-day">'+j(this.getDayName(e),"single")+'</div><div class="e-header-date e-navigate" role="link">'+this.getDate(e)+"</div>",r=[].slice.call(a.childNodes);break;case"majorSlot":this.parent.activeViewOptions.timeScale.majorSlotTemplate?(s="majorSlotTemplate",l={date:e,type:i},r=[].slice.call(this.parent.getMajorSlotTemplate()(l,this.parent,s,o+s,!1))):(a.innerHTML="<span>"+this.getTime(e)+"</span>",r=[].slice.call(a.childNodes));break;case"minorSlot":this.parent.activeViewOptions.timeScale.minorSlotTemplate?(s="minorSlotTemplate",l={date:e,type:i},r=[].slice.call(this.parent.getMinorSlotTemplate()(l,this.parent,s,o+s,!1))):r=[].slice.call(a.childNodes);break;case"alldayCells":this.parent.activeViewOptions.cellTemplate&&(h=this.parent.activeViewOptions.cellTemplateName,s="cellTemplate",l={date:e,type:i,groupIndex:n},r=[].slice.call(this.parent.getCellTemplate()(l,this.parent,s,o+h+s,!1)))}return r},i.prototype.refreshHeader=function(){t.remove(this.element.querySelector("tbody tr")),this.renderHeader(),this.parent.notify(to,{})},i.prototype.renderLayout=function(e){this.setPanel(t.createElement("div",{className:ib}));var i=[this.baseCssClass,this.viewClass];i.push(e),this.parent.activeViewOptions.group.byDate&&i.push("e-by-date"),this.parent.activeViewOptions.timeScale.enable||t.addClass([this.element],["e-timescale-disable",this.viewClass]),this.parent.activeViewOptions.allowVirtualScrolling&&!this.parent.uiStateValues.isGroupAdaptive&&i.push(n2),this.parent.rowAutoHeight&&this.parent.eventSettings.ignoreWhitespace&&i.push(n4),this.renderPanel(e),t.addClass([this.element],i),this.element.appendChild(this.createTableLayout(iD)),this.element.querySelector("table").setAttribute("role","presentation"),this.colLevels=this.generateColumnLevels(),this.renderHeader(),this.renderContent(),this.parent.uiStateValues.isGroupAdaptive&&!this.parent.element.querySelector("."+ie)&&this.renderResourceMobileLayout(),this.parent.notify(to,{})},i.prototype.renderHeader=function(){var e=t.createElement("tr"),i=t.createElement("td");if(i.appendChild(this.renderDatesHeader()),this.parent.activeViewOptions.timeScale.enable){var n=t.createElement("td",{className:tW});n.appendChild(this.renderLeftIndent()),e.appendChild(n)}e.appendChild(i),t.prepend([e],this.element.querySelector("tbody"))},i.prototype.renderContent=function(){this.parent.activeViewOptions.group.resources.length>0&&(this.parent.resourceBase.renderedResources=t.extend([],this.parent.resourceBase.lastResourceLevel,null,!0));var e=t.createElement("tr"),i=t.createElement("td");if(this.parent.isAdaptive){i.setAttribute("colspan",this.parent.activeViewOptions.timeScale.enable?"2":"1");var n=t.createElement("div",{className:t5});this.parent.activeViewOptions.timeScale.enable&&n.appendChild(this.renderTimeCells()),n.appendChild(this.renderContentArea()),i.appendChild(n),t.EventHandler.add(n,"scroll",this.onAdaptiveScroll,this),t.EventHandler.add(n,t.Browser.touchMoveEvent,this.onAdaptiveMove,this),e.appendChild(i)}else{var r=this.colLevels.slice(0);this.parent.virtualScrollModule&&this.resetColLevels();var a=this.renderContentArea();if(i.appendChild(a),this.parent.activeViewOptions.timeScale.enable){var s=t.createElement("td");s.appendChild(this.renderTimeCells()),e.appendChild(s)}e.appendChild(i),this.parent.virtualScrollModule&&(this.colLevels=r,this.parent.virtualScrollModule.renderVirtualTrack(a))}this.element.querySelector("tbody").appendChild(e)},i.prototype.renderLeftIndent=function(){for(var e,i=t.createElement("div",{className:tq}),n=this.createTableLayout(),r=t.createElement("tr"),a=this.colLevels.length,s=0;s<a;s++){var o=r.cloneNode(),l={className:[this.colLevels[parseInt(s.toString(),10)][0]&&this.colLevels[parseInt(s.toString(),10)][0].className[0]],type:"emptyCells"};if(this.parent.activeViewOptions.showWeekNumber&&-1!==l.className.indexOf(tP)){l.className.push(is);var h=this.parent.getWeekNumberContent(this.renderDates);l.template=[t.createElement("span",{innerHTML:""+h,attrs:{title:this.parent.localeObj.getConstant("week")+" "+h}})]}e=this.createTd(l),this.parent.renderHeaderIndentTemplate(l,e),o.appendChild(e),n.querySelector("tbody").appendChild(o)}var p=r.cloneNode(),c=t.createElement("div",{attrs:{tabindex:"0",role:"list",title:this.parent.localeObj.getConstant("expandAllDaySection"),"aria-disabled":"false","aria-label":"Expand section"},className:iJ+" "+i$+" "+tw+" "+tT}),d={className:[tO],type:"emptyCells"};return(e=this.createTd(d)).appendChild(c),this.parent.renderHeaderIndentTemplate(d,e),p.appendChild(e),n.querySelector("tbody").appendChild(p),i.appendChild(n),i},i.prototype.renderDatesHeader=function(){var e=t.createElement("div",{className:tN}),i=t.createElement("div",{className:tA});e.appendChild(i);for(var n=this.createTableLayout(),r=t.createElement("tr",{className:iG}),a=this.colLevels.length,s=this.colLevels[a-1],o=0;o<a;o++){for(var l=r.cloneNode(),h=this.colLevels[parseInt(o.toString(),10)],p=0;p<h.length;p++)l.appendChild(this.createTd(h[parseInt(p.toString(),10)]));n.querySelector("tbody").appendChild(l)}return this.createAllDayRow(n,s),this.createColGroup(n,s),i.appendChild(n),e},i.prototype.createAllDayRow=function(e,i){for(var n=t.createElement("tr",{className:tk}),r=0;r<i.length;r++){var a=t.extend({},i[parseInt(r.toString(),10)]);a.className=[tO],a.type="alldayCells";var s=this.createTd(a);s.setAttribute("data-date",a.date.getTime().toString()),t.isNullOrUndefined(a.groupIndex)?this.parent.uiStateValues.isGroupAdaptive&&s.setAttribute("data-group-index",""+this.parent.uiStateValues.groupIndex):s.setAttribute("data-group-index",""+a.groupIndex),this.wireCellEvents(s),n.appendChild(s)}e.querySelector("tbody").appendChild(n);var o=t.createElement("thead");o.appendChild(this.parent.eventBase.createEventWrapper("allDay")),t.prepend([o],e)},i.prototype.createTd=function(e){var i=t.createElement("td");if(this.addAttributes(e,i),e.date&&e.type){var n=this.getTdContent(e.date,e.type,e.groupIndex);n&&n.length&&t.append(n,i)}this.parent.isMinMaxDate(C(new Date(""+e.date)))||t.addClass([i],nG),"resourceHeader"===e.type&&this.setResourceHeaderContent(i,e),"dateHeader"===e.type&&e.className.indexOf(tP)>=0&&(i.setAttribute("data-date",e.date.getTime().toString()),t.isNullOrUndefined(e.groupIndex)||i.setAttribute("data-group-index",""+e.groupIndex),this.wireMouseEvents(i));var r={elementType:e.type,element:i,date:e.date,groupIndex:e.groupIndex};return this.parent.trigger(e2,r),i},i.prototype.wireCellEvents=function(e){t.EventHandler.add(e,"mousedown",this.parent.workCellAction.cellMouseDown,this.parent.workCellAction),this.wireMouseEvents(e)},i.prototype.wireMouseEvents=function(e){t.EventHandler.add(e,"click",this.parent.workCellAction.cellClick,this.parent.workCellAction),this.parent.isAdaptive||t.EventHandler.add(e,"dblclick",this.parent.workCellAction.cellDblClick,this.parent.workCellAction)},i.prototype.renderTimeCells=function(){var e=this,i=t.createElement("div",{className:t0}),n=this.createTableLayout(),r=t.createElement("tr");return this.getTimeSlotRows(function(t){t.type=t.first?"majorSlot":"minorSlot",t.className=t.last?["e-time-cells",t1]:[t1];var i=r.cloneNode(),a={date:t.date,type:t.type,className:t.className};return i.appendChild(e.createTd(a)),n.querySelector("tbody").appendChild(i),t}),i.appendChild(n),i},i.prototype.renderContentArea=function(){var e=t.createElement("div",{className:iw}),i=this.createTableLayout(tx);return this.setAriaAttributes(i),this.addAutoHeightClass(i),this.renderContentTable(i),this.createColGroup(i,this.colLevels.slice(-1)[0]),e.appendChild(i),this.wireCellEvents(i.querySelector("tbody")),t.EventHandler.add(e,"scroll",this.onContentScroll,this),t.EventHandler.add(e,t.Browser.touchMoveEvent,this.onAdaptiveMove,this),e},i.prototype.renderContentTable=function(e){var i=e.querySelector("tbody");t.append(this.getContentRows(),i),this.renderContentTableHeader(e)},i.prototype.getContentRows=function(){var e=this,i=[],n=t.createElement("tr"),r=t.createElement("td",{attrs:{"aria-selected":"false"}});return this.getTimeSlotRows(function(t){for(var a=n.cloneNode(),s=0,o=e.colLevels[e.colLevels.length-1];s<o.length;s++){var l=o[s],h=e.createContentTd(l,t,r);a.appendChild(h)}return i.push(a),t}),i},i.prototype.createContentTd=function(e,i,n){var r=n.cloneNode();e.colSpan&&r.setAttribute("colspan",e.colSpan.toString());var a=this.getContentTdClass(i),s=C(e.date);this.parent.isMinMaxDate(s)||a.push(nG),w(s,T(i.date));var o="workCells";if(-1!==e.className.indexOf(tX)&&(a.push(tY),o="resourceGroupCells"),this.parent.workHours.highlight&&(this.parent.activeViewOptions.timeScale.enable&&this.isWorkHour(s,e.startHour,e.endHour,e.workDays)||!this.parent.activeViewOptions.timeScale.enable&&this.isWorkDay(s,e.workDays))&&a.push(tV),t.addClass([r],a),this.parent.activeViewOptions.cellTemplate){var l={date:s,type:o,groupIndex:e.groupIndex},h=this.parent.element.id+"_"+this.parent.activeViewOptions.cellTemplateName+"cellTemplate",p=[].slice.call(this.parent.getCellTemplate()(l,this.parent,"cellTemplate",h,!1));t.append(p,r)}if(r.setAttribute("data-date",s.getTime().toString()),!t.isNullOrUndefined(e.groupIndex)||this.parent.uiStateValues.isGroupAdaptive){var c=this.parent.uiStateValues.isGroupAdaptive?this.parent.uiStateValues.groupIndex:e.groupIndex;r.setAttribute("data-group-index",""+c)}var d={elementType:o,element:r,date:s,groupIndex:e.groupIndex};return this.parent.trigger(e2,d),r},i.prototype.getContentTdClass=function(e){return e.last?[tM]:[tM,t2]},i.prototype.renderContentTableHeader=function(e){var i=t.createElement("thead");i.appendChild(this.parent.eventBase.createEventWrapper()),this.parent.activeViewOptions.timeScale.enable&&i.appendChild(this.parent.eventBase.createEventWrapper("timeIndicator")),t.prepend([i],e)},i.prototype.getScrollableElement=function(){return this.parent.isAdaptive&&!this.isTimelineView()?this.element.querySelector("."+t5):this.getContentAreaElement()},i.prototype.getLeftPanelElement=function(){return this.element.querySelector("."+t0)},i.prototype.getEndDateFromStartDate=function(e){var t=this.parent.activeViewOptions.timeScale.interval*tf/this.parent.activeViewOptions.timeScale.slotCount,i=new Date(e.getTime());return i.setMilliseconds(i.getMilliseconds()+t),i},i.prototype.getTimeSlotRows=function(e){var t=[],i=this.getStartHour(),n=this.getEndHour(),r=this.parent.activeViewOptions.timeScale.interval*tf,a=r/this.parent.activeViewOptions.timeScale.slotCount,s=Math.round(tm/a),o=i.getTime(),l=n.getTime();if(o!==l){var h=this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount;s=Math.abs(l-o)/a-(new Date(l).getTimezoneOffset()-new Date(o).getTimezoneOffset())/h}this.parent.activeViewOptions.timeScale.enable||(s=1);for(var p=this.parent.getStartEndTime(this.parent.workHours.start),c=this.parent.getStartEndTime(this.parent.workHours.end),d=0;d<s;d++){var u=new Date(o+a*d);if(F(u)||new Date(o).getTimezoneOffset()!==u.getTimezoneOffset()){var m=new Date(o).getTimezoneOffset()-u.getTimezoneOffset();u=new Date(u.getTime()-6e4*m)}var f=d%(r/a),v={date:new Date(""+u),startHour:p,endHour:c,first:0===f,middle:f<this.parent.activeViewOptions.timeScale.slotCount-1,last:f===this.parent.activeViewOptions.timeScale.slotCount-1,type:""};e&&e(v),t.push(v)}return t},i.prototype.getAdjustedDate=function(e){if(!this.parent.activeViewOptions.timeScale.enable)return new Date(e.setHours(0,0,0,0));for(var t=this.getTimeSlotRows(),i=new Date(new Date(t[0].date.getTime()).setHours(e.getHours(),e.getMinutes(),e.getMilliseconds())),n=0;n<t.length;n++)if(t[parseInt(n.toString(),10)].date.getTime()>i.getTime())return e.setHours(t[n-1].date.getHours(),t[n-1].date.getMinutes(),t[n-1].date.getMilliseconds()),new Date(e);return null},i.prototype.destroy=function(){if(!(!this.parent||this.parent&&this.parent.isDestroyed)&&(this.clearCurrentTimeIndicatorTimer(),this.element)){this.appointment&&(this.appointment.destroy(),this.appointment=null);var i=this.getContentAreaElement();i&&(t.EventHandler.remove(i,"scroll",this.onContentScroll),t.EventHandler.remove(i,t.Browser.touchMoveEvent,this.onAdaptiveMove)),this.parent.resourceBase&&this.parent.resourceBase.destroy(),this.parent.scheduleTouchModule&&this.parent.scheduleTouchModule.resetValues(),e.prototype.destroy.call(this)}},i}(a4),a9=(eN=function(e,t){return(eN=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}eN(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),a7=function(e){function t(t){var i=e.call(this,t)||this;return i.viewClass="e-day-view",i}return a9(t,e),t.prototype.getModuleName=function(){return"day"},t}(a8),se=(eP=function(e,t){return(eP=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}eP(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),st=function(e){function t(t){var i=e.call(this,t)||this;return i.viewClass="e-week-view",i}return se(t,e),t.prototype.startDate=function(){return this.getViewStartDate()},t.prototype.endDate=function(){return this.getViewEndDate()},t.prototype.getModuleName=function(){return"week"},t}(a8),si=(eH=function(e,t){return(eH=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}eH(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),sn=function(e){function t(t){var i=e.call(this,t)||this;return i.viewClass="e-work-week-view",i}return si(t,e),t.prototype.startDate=function(){return this.getViewStartDate()},t.prototype.endDate=function(){return this.getViewEndDate()},t.prototype.getModuleName=function(){return"workWeek"},t}(a8),sr=(eR=function(e,t){return(eR=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}eR(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),sa=function(e){function i(t){var i=e.call(this,t)||this;return i.dayNameFormat="wide",i.viewClass="e-month-view",i.isInverseTableSelect=!1,i.monthEvent=null,i.monthDates={},i}return sr(i,e),i.prototype.addEventListener=function(){this.parent.on(tp,this.onScrollUIUpdate,this),this.parent.on(ta,this.onDataReady,this),this.parent.on(eK,this.onCellClick,this)},i.prototype.removeEventListener=function(){this.parent&&(this.parent.off(tp,this.onScrollUIUpdate),this.parent.off(ta,this.onDataReady),this.parent.off(eK,this.onCellClick))},i.prototype.onDataReady=function(e){this.monthEvent=new rN(this.parent),this.monthEvent.renderAppointments(),this.parent.notify(ts,{})},i.prototype.onCellClick=function(e){},i.prototype.onContentScroll=function(e){this.parent.removeNewEventElement(),this.parent.notify(th,e),this.scrollTopPanel(e.target),this.scrollLeftPanel(e.target),this.parent.uiStateValues.top=e.target.scrollTop,this.parent.uiStateValues.left=e.target.scrollLeft,this.setPersistence()},i.prototype.scrollLeftPanel=function(e){var t=this.getLeftPanelElement();t&&(t.scrollTop=e.scrollTop)},i.prototype.getLeftPanelElement=function(){return this.element.querySelector("."+ia)},i.prototype.onScrollUIUpdate=function(e){var t=this.getHeaderBarHeight(),i=this.getDatesHeaderElement(),n=this.getContentAreaElement(),r=this.parent.element.offsetHeight-t-i.offsetHeight,a=this.getLeftPanelElement();"auto"!==this.parent.height&&this.setContentHeight(n,a,r);var s=A();if(i.firstElementChild.style[e.cssProperties.rtlBorder]="",i.style[e.cssProperties.rtlPadding]="",n.offsetWidth-n.clientWidth>0?(i.firstElementChild.style[e.cssProperties.border]=s>0?"1px":"0px",i.style[e.cssProperties.padding]=s>0?s-1+"px":"0px"):(i.firstElementChild.style[e.cssProperties.border]="",i.style[e.cssProperties.padding]=""),this.setColWidth(n),e.scrollPosition||!e.isPreventScrollUpdate&&"TimelineMonth"===this.parent.currentView){var o="TimelineMonth"===this.parent.currentView?this.parent.uiStateValues.top:e.scrollPosition.top;a&&(a.scrollTop=o),n.scrollTop=o,this.parent.uiStateValues.isInitial?(this.scrollToSelectedDate(),this.parent.uiStateValues.isInitial=!1):n.scrollLeft="TimelineMonth"===this.parent.currentView?this.parent.uiStateValues.left:e.scrollPosition.left}else this.scrollToSelectedDate();this.retainScrollPosition()},i.prototype.scrollToSelectedDate=function(){var e=this.element.querySelector("."+tP+'[data-date="'+this.parent.selectedDate.getTime().toString()+'"]'),i=this.getContentAreaElement();t.isNullOrUndefined(e)?i.scrollLeft=0:i.scrollLeft=this.parent.enableRtl?-(this.parent.getContentTable().offsetWidth-e.offsetLeft-e.offsetWidth):e.offsetLeft,0===i.scrollLeft&&this.parent.uiStateValues.isInitial&&(this.parent.uiStateValues.left=0)},i.prototype.setContentHeight=function(e,i,n){e.style.height="auto","Month"===this.parent.currentView&&(e.style.height=t.formatUnit(n)),i&&("MonthAgenda"===this.parent.currentView&&(n=this.parent.activeViewOptions.interval>1?this.getContentAreaElement().firstElementChild.offsetHeight:this.element.querySelector("."+tx).offsetHeight),i.style.height="auto",i.style.height=t.formatUnit(n-this.getScrollXIndent(e)))},i.prototype.generateColumnLevels=function(){var e=[],t=this.getDateSlots(this.renderDates,this.parent.activeViewOptions.workDays);if(this.parent.activeViewOptions.group.resources.length>0){if(e=this.parent.resourceBase.generateResourceLevels(t),"MonthAgenda"===this.parent.currentView&&(e=[t]),this.parent.uiStateValues.isGroupAdaptive&&this.parent.resourceBase.lastResourceLevel.length>0){var i=this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex],n=this.getDateSlots(i.renderDates,i.workDays);if(this.parent.activeViewOptions.group.byDate&&this.parent.activeViewOptions.group.hideNonWorkingDays){var r=n.findIndex(function(e,t){return 0!==t&&e.date.getDay()===n[0].date.getDay()});n=r>-1?n.slice(0,r):n}e=[n]}}else e.push(t);return this.colLevels=e,e},i.prototype.getDateSlots=function(e,t){for(var i=this.parent.activeViewOptions.showWeekend?7:t.length,n=[],r=this.isCurrentMonth(this.parent.selectedDate),a=0;a<i;a++){var s=[tP],o=e.slice(0,i).map(function(e){return e.getDay()});r&&o.indexOf(this.parent.currentTimezoneDate.getDay())===a&&s.push(tF),n.push({date:e[parseInt(a.toString(),10)],type:"monthDay",className:s,colSpan:1,workDays:t})}return n},i.prototype.getDayNameFormat=function(){return this.parent.isAdaptive||this.parent.activeViewOptions.group.resources.length>0?"abbreviated":"wide"},i.prototype.renderLayout=function(e){this.dayNameFormat=this.getDayNameFormat(),this.setPanel(t.createElement("div",{className:ib}));var i=[this.viewClass];i.push(e),this.parent.activeViewOptions.group.byDate&&(i.push("e-by-date"),"Month"!==this.parent.currentView&&(this.parent.activeViewOptions.group.hideNonWorkingDays=!1)),this.parent.activeViewOptions.allowVirtualScrolling&&!this.parent.uiStateValues.isGroupAdaptive&&i.push(n2),this.parent.rowAutoHeight&&this.parent.eventSettings.ignoreWhitespace&&i.push(n4),t.addClass([this.element],i),this.renderPanel(e),this.element.appendChild(this.createTableLayout(iD)),this.element.querySelector("table").setAttribute("role","presentation"),this.colLevels=this.generateColumnLevels(),this.renderHeader(),this.renderContent();var n="MonthAgenda"===this.parent.currentView?this.parent.activeView.getPanel():this.parent.element;this.parent.uiStateValues.isGroupAdaptive&&!n.querySelector("."+ie)&&this.renderResourceMobileLayout(),this.parent.notify(to,{}),this.parent.uiStateValues.isCustomMonth&&(this.parent.uiStateValues.isCustomMonth=!1)},i.prototype.refreshHeader=function(){t.remove(this.element.querySelector("tbody tr")),this.renderHeader(),this.parent.notify(to,{})},i.prototype.wireCellEvents=function(e){t.EventHandler.add(e,"mousedown",this.parent.workCellAction.cellMouseDown,this.parent.workCellAction),t.EventHandler.add(e,"click",this.parent.workCellAction.cellClick,this.parent.workCellAction),this.parent.isAdaptive||t.EventHandler.add(e,"dblclick",this.parent.workCellAction.cellDblClick,this.parent.workCellAction)},i.prototype.renderHeader=function(){var e=t.createElement("tr");this.renderLeftIndent(e);var i=t.createElement("td");i.appendChild(this.renderDatesHeader()),e.appendChild(i),t.prepend([e],this.element.querySelector("tbody"))},i.prototype.renderLeftIndent=function(e){this.parent.activeViewOptions.showWeekNumber&&e.appendChild(t.createElement("td",{className:"e-left-indent"}))},i.prototype.renderContent=function(){this.parent.activeViewOptions.group.resources.length>0&&(this.parent.resourceBase.renderedResources=t.extend([],this.parent.resourceBase.lastResourceLevel,null,!0));var e=t.createElement("tr");this.parent.activeViewOptions.showWeekNumber&&e.appendChild(this.renderWeekNumberContent());var i=t.createElement("td"),n=this.colLevels.slice(0);this.parent.virtualScrollModule&&this.resetColLevels();var r=t.createElement("div",{className:iw}),a=this.renderContentArea();if("Month"===this.parent.currentView)r.appendChild(a);else{var s=t.createElement("div",{className:tE});s.appendChild(a),r.appendChild(s)}t.EventHandler.add(r,"scroll",this.onContentScroll,this),i.appendChild(r),e.appendChild(i),this.parent.virtualScrollModule&&(this.colLevels=n,this.parent.virtualScrollModule.renderVirtualTrack(r)),this.element.querySelector("tbody").appendChild(e),this.renderAppointmentContainer()},i.prototype.renderWeekNumberContent=function(){var e=this.renderDates.map(function(e){return new Date(+e)}),i=t.createElement("td"),n=t.createElement("div",{className:ia});i.appendChild(n);var r=this.createTableLayout();n.appendChild(r);for(var a=this.parent.activeViewOptions.showWeekend?7:this.parent.activeViewOptions.workDays.length,s=0,o=this.renderDates.length/a;s<o;s++){var l=e.splice(0,a),h=this.parent.getWeekNumberContent(l);r.querySelector("tbody").appendChild(this.createWeekNumberElement(h))}return i},i.prototype.renderAppointmentContainer=function(){},i.prototype.renderDatesHeader=function(){var e=t.createElement("div",{className:tN}),i=t.createElement("div",{className:tA});e.appendChild(i);var n=this.createTableLayout();if("Month"===this.parent.currentView){var r=t.createElement("thead");r.appendChild(t.createElement("tr")),t.prepend([r],n)}this.createColGroup(n,this.colLevels[this.colLevels.length-1]);for(var a=t.createElement("tr"),s=0;s<this.colLevels.length;s++){for(var o=this.colLevels[parseInt(s.toString(),10)],l=a.cloneNode(),h=0;h<o.length;h++){var p=o[parseInt(h.toString(),10)];l.appendChild(this.createHeaderCell(p))}n.querySelector("tbody").appendChild(l)}return i.appendChild(n),e},i.prototype.createHeaderCell=function(e){var i=t.createElement("td");if(this.addAttributes(e,i),"monthDay"===e.type){var n=t.createElement("span",{innerHTML:j(this.parent.getDayNames(this.dayNameFormat)[e.date.getDay()],"single")});i.appendChild(n)}if("resourceHeader"===e.type&&this.setResourceHeaderContent(i,e),"dateHeader"===e.type){if(t.addClass([i],iV),i.setAttribute("data-date",e.date.getTime().toString()),this.parent.activeViewOptions.dateHeaderTemplate){var r={date:e.date,type:e.type},a=this.parent.element.id+"_"+this.parent.activeViewOptions.dateHeaderTemplateName+"dateHeaderTemplate",s=[].slice.call(this.parent.getDateHeaderTemplate()(r,this.parent,"dateHeaderTemplate",a,!1));s&&s.length&&t.append(s,i)}else{n=t.createElement("span",{className:iM});var o=this.parent.globalize.formatDate(e.date,{skeleton:"full",calendar:this.parent.getCalendarMode()});n.setAttribute("title",j(o,"multiple"));var l=!this.parent.calendarUtil.isMonthStart(e.date)||this.isCurrentDate(e.date)||this.parent.isAdaptive?this.parent.globalize.formatDate(e.date,{skeleton:"d",calendar:this.parent.getCalendarMode()}):this.parent.globalize.formatDate(e.date,{format:"MMM d",calendar:this.parent.getCalendarMode()});n.innerHTML=j(l,"single"),i.appendChild(n)}this.wireCellEvents(i)}var h={elementType:e.type,element:i,date:e.date,groupIndex:e.groupIndex};return this.parent.trigger(e2,h),i},i.prototype.getContentSlots=function(){if(!this.colLevels[this.colLevels.length-1]||!this.colLevels[this.colLevels.length-1][0])return[];var e=[],t=function(t,i,n,r){var a={date:new Date(+i),groupIndex:n.groupIndex,workDays:n.workDays,type:"monthCells",className:r||[tM]};e[parseInt(t.toString(),10)]||(e[parseInt(t.toString(),10)]=[]),e[parseInt(t.toString(),10)].push(a)},i="MonthAgenda"!==this.parent.currentView&&this.parent.activeViewOptions.group.resources.length>0;if(!i||this.parent.uiStateValues.isGroupAdaptive||this.parent.activeViewOptions.group.byDate){d=this.renderDates.map(function(e){return new Date(+e)}),u=this.parent.activeViewOptions.showWeekend?7:this.parent.activeViewOptions.workDays.length;var n=this.colLevels.slice(0,1)[0],r=this.renderDates.map(Number).indexOf(+n[0].date);for(m=0;m<this.renderDates.length/u;m++){f=d.splice(0,u);for(var a,s=r,o=this,l=r;l<this.colLevels[0].length+r&&l<f.length;l++)(function(e){var n=f[parseInt(s.toString(),10)];if(s++,i){var r=o.colLevels[o.colLevels.length-1],l=r.length/u,h=r.slice(0,l);if(o.parent.activeViewOptions.group.hideNonWorkingDays&&0===(h=r.filter(function(e){return e.date.getDay()===n.getDay()})).length)return e-=1,a=e;for(var p=0;p<h.length;p++){var c=void 0;0!==p&&(c=[tM,"e-disable-date"]),t(m,n,h[parseInt(p.toString(),10)],c)}}else t(m,n,o.colLevels[o.colLevels.length-1][0]);a=e})(l),l=a}}else for(var h=0,p=this.colLevels[this.colLevels.length-2];h<p.length;h++)for(var c=p[h],d=c.renderDates.map(function(e){return new Date(+e)}),u=this.parent.activeViewOptions.showWeekend?7:c.workDays.length,m=0;m<c.renderDates.length/u;m++)for(var f,v=0,g=f=d.splice(0,u);v<g.length;v++){var y=g[v];t(m,y,c)}return e},i.prototype.updateClassList=function(e){!this.isCustomMonth()&&this.isOtherMonth(e.date)&&e.className.push(tR),this.parent.isMinMaxDate(e.date)||e.className.push(nG),this.updateSelectedCellClass(e)},i.prototype.updateSelectedCellClass=function(e){},i.prototype.isOtherMonth=function(e){return e.getTime()<this.monthDates.start.getTime()||e.getTime()>this.monthDates.end.getTime()},i.prototype.renderContentArea=function(){var e=this.createTableLayout(tx);this.setAriaAttributes(e),this.addAutoHeightClass(e),"TimelineMonth"===this.parent.currentView&&this.createColGroup(e,this.colLevels[this.colLevels.length-1]);var i=new Date(this.parent.selectedDate.getTime());this.monthDates={start:this.parent.calendarUtil.firstDateOfMonth(i),end:this.parent.calendarUtil.lastDateOfMonth(O(i,this.parent.activeViewOptions.interval-1))};var n=e.querySelector("tbody");return t.append(this.getContentRows(),n),this.wireCellEvents(n),e},i.prototype.getContentRows=function(){for(var e=[],i=t.createElement("tr"),n=t.createElement("td",{attrs:{"aria-selected":"false"}}),r=this.getContentSlots(),a=0;a<r.length;a++){for(var s=i.cloneNode(),o=0;o<r[parseInt(a.toString(),10)].length;o++){var l=this.createContentTd(r[parseInt(a.toString(),10)][parseInt(o.toString(),10)],n);s.appendChild(l)}e.push(s)}return e},i.prototype.createContentTd=function(e,i){var n=i.cloneNode();e.colSpan&&n.setAttribute("colspan",e.colSpan.toString()),this.updateClassList(e);var r=e.type;if(-1!==e.className.indexOf(tX)&&(e.className.push(tY),r="resourceGroupCells"),this.parent.workHours.highlight&&this.isWorkDay(e.date,e.workDays)&&e.className.push(tH),this.isCurrentDate(e.date)&&e.className.push(tU),t.addClass([n],e.className),n.setAttribute("data-date",e.date.getTime().toString()),!t.isNullOrUndefined(e.groupIndex)||this.parent.uiStateValues.isGroupAdaptive){var a=this.parent.uiStateValues.isGroupAdaptive?this.parent.uiStateValues.groupIndex:e.groupIndex;n.setAttribute("data-group-index",""+a)}if(this.renderDateHeaderElement(e,n),this.parent.activeViewOptions.cellTemplate){var s={date:e.date,type:r,groupIndex:e.groupIndex},o=this.parent.element.id+"_"+this.parent.activeViewOptions.cellTemplateName+"cellTemplate",l=[].slice.call(this.parent.getCellTemplate()(s,this.parent,"cellTemplate",o,!1));t.append(l,n)}var h={elementType:r,element:n,date:e.date,groupIndex:e.groupIndex};return this.parent.trigger(e2,h),n},i.prototype.renderDateHeaderElement=function(e,i){if("TimelineMonth"!==this.parent.currentView){var n=t.createElement("div",{className:iV});if(this.parent.activeViewOptions.cellHeaderTemplate){var r={date:e.date,type:e.type,groupIndex:e.groupIndex},a=this.parent.element.id+"_"+this.parent.activeViewOptions.cellHeaderTemplateName+"cellHeaderTemplate",s=[].slice.call(this.parent.getCellHeaderTemplate()(r,this.parent,"cellHeaderTemplate",a,!1));t.append(s,n)}else{var o=!this.parent.calendarUtil.isMonthStart(e.date)||this.isCurrentDate(e.date)||this.parent.isAdaptive?this.parent.globalize.formatDate(e.date,{skeleton:"d",calendar:this.parent.getCalendarMode()}):this.parent.globalize.formatDate(e.date,{format:"MMM d",calendar:this.parent.getCalendarMode()});n.innerHTML=j(o,"single")}if(i.appendChild(n),"month"===this.getModuleName()){t.addClass([n],iM);var l=this.parent.globalize.formatDate(e.date,{skeleton:"full",calendar:this.parent.getCalendarMode()});i.setAttribute("aria-label",l)}}},i.prototype.getMonthStart=function(e){var i=f("Month"===this.parent.currentView&&!t.isNullOrUndefined(this.parent.activeViewOptions.displayDate)&&(this.parent.uiStateValues.isCustomMonth||this.isCustomRange())?this.parent.activeViewOptions.displayDate:this.parent.uiStateValues.isCustomMonth||this.isCustomRange()||!this.isCustomMonth()?this.parent.calendarUtil.firstDateOfMonth(e):e,this.parent.activeViewOptions.firstDayOfWeek);return new Date(i.getFullYear(),i.getMonth(),i.getDate())},i.prototype.getMonthEnd=function(e){if(this.isCustomMonth())return S(this.getMonthStart(e),7*(this.parent.activeViewOptions.numberOfWeeks>0?this.parent.activeViewOptions.numberOfWeeks:6)-1);var t=O(e,this.parent.activeViewOptions.interval-1);return S(f(this.parent.calendarUtil.lastDateOfMonth(t),this.parent.activeViewOptions.firstDayOfWeek),6)},i.prototype.isCustomRange=function(){var e=this.parent.getCurrentViewDates();if(e&&e.length>0){var t=C(this.parent.selectedDate).getTime(),i=f(e[e.length-1],this.parent.activeViewOptions.firstDayOfWeek);return!(t>=f(e[0],this.parent.activeViewOptions.firstDayOfWeek).getTime()&&t<=S(i,6).getTime())}return!1},i.prototype.getRenderDates=function(e){var t=[],i=C(this.parent.selectedDate),n=this.getMonthStart(i),r=this.getMonthEnd(i);do this.parent.activeViewOptions.showWeekend?t.push(n):this.isWorkDay(n,e)&&t.push(n),(n=S(n,1)).getHours()>0&&(n=C(n));while(n.getTime()<=r.getTime());return e||(this.renderDates=t),this.parent.headerModule&&this.parent.headerModule.previousNextIconHandler(),t},i.prototype.getNextPreviousDate=function(e){if(this.isCustomMonth()){var t=this.parent.getCurrentViewDates();return S(f("next"===e?t[t.length-1]:t[0],this.parent.activeViewOptions.firstDayOfWeek),"next"===e?7:-(7*(this.parent.activeViewOptions.numberOfWeeks>0?this.parent.activeViewOptions.numberOfWeeks:6)))}return O(this.parent.selectedDate,("next"===e?1:-1)*this.parent.activeViewOptions.interval)},i.prototype.getStartDate=function(){return this.getMonthStart(this.parent.selectedDate)},i.prototype.getEndDate=function(){return this.getMonthEnd(this.parent.selectedDate)},i.prototype.getEndDateFromStartDate=function(e){return S(new Date(e.getTime()),1)},i.prototype.getDateRangeText=function(){if(this.parent.isAdaptive||t.isNullOrUndefined(this.parent.activeViewOptions.dateFormat)){var e=this.parent.selectedDate,i=void 0,n=!1;if(this.isCustomMonth()){var r=this.parent.getCurrentViewDates();(n=r[0].getMonth()!==r[r.length-1].getMonth()||r[0].getFullYear()!==r[r.length-1].getFullYear())&&(e=r[0],i=r[r.length-1])}var a="Month"!==this.parent.currentView||!this.isCustomMonth();if(this.parent.activeViewOptions.interval>1&&a||n)return(i=i||O(y(e),this.parent.activeViewOptions.interval-1),e.getFullYear()===i.getFullYear())?j(this.parent.globalize.formatDate(e,{format:"MMMM",calendar:this.parent.getCalendarMode()})+" - "+this.parent.globalize.formatDate(i,{format:"MMMM ",calendar:this.parent.getCalendarMode()})+this.parent.globalize.formatDate(i,{skeleton:"y",calendar:this.parent.getCalendarMode()}),"single"):j(this.parent.globalize.formatDate(e,{format:"MMMM",calendar:this.parent.getCalendarMode()})+" "+e.getFullYear()+" - "+this.parent.globalize.formatDate(i,{format:"MMMM ",calendar:this.parent.getCalendarMode()})+this.parent.globalize.formatDate(i,{skeleton:"y",calendar:this.parent.getCalendarMode()}),"single");var s=this.parent.activeViewOptions.dateFormat?this.parent.activeViewOptions.dateFormat:"MMMM y";return j(this.parent.globalize.formatDate(e,{format:s,calendar:this.parent.getCalendarMode()}),"single")}return this.formatDateRange(this.parent.selectedDate)},i.prototype.getLabelText=function(e){return this.parent.localeObj.getConstant(e)+" of "+j(this.parent.globalize.formatDate(this.parent.selectedDate,{format:"MMMM y",calendar:this.parent.getCalendarMode()}),"single")},i.prototype.createWeekNumberElement=function(e){var i=t.createElement("tr"),n=t.createElement("td",{className:is,attrs:{title:e?this.parent.localeObj.getConstant("week")+" "+e:""},innerHTML:e||""});return i.appendChild(n),this.parent.trigger(e2,{elementType:"weekNumberCell",element:n}),i},i.prototype.unWireEvents=function(){var e=this.element.querySelector("."+iw);e&&t.EventHandler.remove(e,"scroll",this.onContentScroll)},i.prototype.isCustomMonth=function(){return"Month"===this.parent.currentView&&(!t.isNullOrUndefined(this.parent.activeViewOptions.displayDate)||this.parent.activeViewOptions.numberOfWeeks>0)},i.prototype.getModuleName=function(){return"month"},i.prototype.destroy=function(){!this.parent||this.parent&&this.parent.isDestroyed||this.element&&(this.monthEvent&&(this.monthEvent.destroy(),this.monthEvent=null),this.unWireEvents(),this.parent.resourceBase&&this.parent.resourceBase.destroy(),this.parent.scheduleTouchModule&&this.parent.scheduleTouchModule.resetValues(),e.prototype.destroy.call(this))},i}(a4),ss=(eF=function(e,t){return(eF=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}eF(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),so=function(e){function i(t){var i=e.call(this,t)||this;return i.viewClass="e-year-view",i.isInverseTableSelect=!1,i.yearEventModule=null,i}return ss(i,e),i.prototype.getModuleName=function(){return"year"},i.prototype.renderLayout=function(e){this.parent.resourceBase&&this.parent.resourceBase.generateResourceLevels([{renderDates:this.parent.activeView.renderDates}]),this.setPanel(t.createElement("div",{className:ib}));var i="Horizontal"===this.parent.activeViewOptions.orientation?"e-horizontal":"e-vertical";t.addClass([this.element],[this.viewClass,i,e]),this.renderPanel(e),this.parent.activeViewOptions.allowVirtualScrolling&&t.addClass([this.element],[n2]);var n=this.createTableLayout(iD);this.element.appendChild(n),this.element.querySelector("table").setAttribute("role","presentation");var r=n.querySelector("tbody");this.rowCount=this.getRowColumnCount("row"),this.columnCount=this.getRowColumnCount("column"),this.renderHeader(r),this.renderContent(r),"Year"!==this.parent.currentView&&this.parent.uiStateValues.isGroupAdaptive&&(this.generateColumnLevels(),this.renderResourceMobileLayout()),t.EventHandler.add(this.element.querySelector("."+iw),"scroll",this.onContentScroll,this),this.parent.notify(to,{})},i.prototype.renderHeader=function(e){},i.prototype.renderContent=function(e){var i=t.createElement("tr");e.appendChild(i);var n=t.createElement("td");i.appendChild(n),this.element.querySelector("tbody").appendChild(i);var r=t.createElement("div",{className:iw});n.appendChild(r);var a=this.createTableLayout("e-calendar-table");r.appendChild(a);var s=t.createElement("tr");a.querySelector("tbody").appendChild(s);var o=t.createElement("td");s.appendChild(o);var l=t.createElement("div",{className:"e-calendar-wrapper"});o.appendChild(l);for(var h=0,p=this.getMonths();h<p.length;h++){var c=p[h],d=new Date(this.parent.selectedDate.getFullYear(),c,1),u=t.createElement("div",{className:"e-month-calendar e-calendar",attrs:{"data-role":"calendar"}});u.appendChild(this.renderCalendarHeader(d)),u.appendChild(this.renderCalendarContent(d)),l.appendChild(u)}this.renderDates.splice(0,1)},i.prototype.renderCalendarHeader=function(e){var i=t.createElement("div",{className:"e-header e-month"}),n=t.createElement("div",{className:"e-day e-title"});return this.parent.activeViewOptions.monthHeaderTemplate?this.renderTemplates(this.parent.getMonthHeaderTemplate(),{date:e,type:"monthHeader"},"monthHeaderTemplate",this.parent.activeViewOptions.monthHeaderTemplateName,n):n.innerHTML=this.getMonthName(e),i.appendChild(n),this.parent.trigger(e2,{elementType:"headerCells",element:n,date:e}),i},i.prototype.renderCalendarContent=function(e){var i=this.getMonthDates(e),n=t.createElement("div",{className:"e-content e-month"}),r=this.createTableLayout("e-calendar-table "+tx);n.appendChild(r),this.setAriaAttributes(r);var a=t.createElement("thead",{className:"e-week-header"}),s=t.createElement("tr"),o=f(g(e),this.parent.firstDayOfWeek);this.parent.activeViewOptions.showWeekNumber&&s.appendChild(t.createElement("th"));for(var l=0;l<7;l++){if(this.parent.activeViewOptions.dayHeaderTemplate){var h=t.createElement("th"),p={date:o,type:"dayHeader"};this.renderTemplates(this.parent.getDayHeaderTemplate(),p,"dayHeaderTemplate",this.parent.activeViewOptions.dayHeaderTemplateName,h),s.appendChild(h)}else s.appendChild(t.createElement("th",{innerHTML:this.parent.getDayNames("narrow")[o.getDay()]}));o=new Date(o.getTime()+tm)}a.appendChild(s),t.prepend([a],r);for(var c=r.querySelector("tbody");i.length>0;){var d=i.splice(0,7),u=t.createElement("tr");if(this.parent.activeViewOptions.showWeekNumber){var m=this.parent.getWeekNumberContent(d),v=t.createElement("td",{className:"e-week-number",attrs:{title:this.parent.localeObj.getConstant("week")+" "+m},innerHTML:m});u.appendChild(v),this.parent.trigger(e2,{elementType:"weekNumberCells",element:v})}for(var y=0;y<d.length;y++){var b=d[y];if(v=t.createElement("td",{className:"e-cell "+tM,attrs:{"data-date":b.getTime().toString()}}),this.parent.activeViewOptions.cellHeaderTemplate)p={date:b,type:"monthCells"},this.renderTemplates(this.parent.getCellHeaderTemplate(),p,"cellHeaderTemplate",this.parent.activeViewOptions.cellHeaderTemplateName,v);else{var D=t.createElement("span",{className:"e-day",innerHTML:this.parent.globalize.formatDate(b,{skeleton:"d",calendar:this.parent.getCalendarMode()}),attrs:{title:this.parent.globalize.formatDate(b,{type:"date",skeleton:"full"})}});v.appendChild(D)}this.parent.activeViewOptions.cellTemplate&&(p={date:b,type:"monthCells"},this.renderTemplates(this.parent.getCellTemplate(),p,"cellTemplate",this.parent.activeViewOptions.cellTemplateName,v));var w=[];e.getMonth()!==b.getMonth()&&w.push(tR),this.isCurrentDate(b)&&e.getMonth()===b.getMonth()&&(w=w.concat(["e-today","e-selected"])),w.length>0&&t.addClass([v],w),u.appendChild(v),e.getMonth()===b.getMonth()&&this.renderDates.push(new Date(b)),this.parent.isMinMaxDate(b)?(t.EventHandler.add(v,"click",this.onCellClick,this),this.parent.isAdaptive||t.EventHandler.add(v,"dblclick",this.parent.workCellAction.cellDblClick,this.parent.workCellAction)):t.addClass([v],nG),this.parent.trigger(e2,{elementType:"workCells",element:v,date:b})}c.appendChild(u)}return n},i.prototype.createTableColGroup=function(e){for(var i=t.createElement("colgroup"),n=0;n<e;n++)i.appendChild(t.createElement("col"));return i},i.prototype.getMonthName=function(e){return j(this.parent.globalize.formatDate(e,{format:this.parent.activeViewOptions.dateFormat||"MMMM y",calendar:this.parent.getCalendarMode()}),"multiple")},i.prototype.generateColumnLevels=function(){var e=[],t=this.getDateSlots([this.parent.selectedDate],this.parent.activeViewOptions.workDays);if(this.parent.activeViewOptions.group.resources.length>0){if(e=this.parent.resourceBase.generateResourceLevels(t),this.parent.uiStateValues.isGroupAdaptive){var i=this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];e=[this.getDateSlots([this.parent.selectedDate],i.workDays)]}}else e.push(t);return e.pop(),this.colLevels=e,e},i.prototype.getDateSlots=function(e,t,i,n){return void 0===i&&(i=this.parent.workHours.start),void 0===n&&(n=this.parent.workHours.end),[{date:e[0],type:"dateHeader",className:[tP],colSpan:1,workDays:t,startHour:new Date(+this.parent.globalize.parseDate(i,{skeleton:"Hm"})),endHour:new Date(+this.parent.globalize.parseDate(n,{skeleton:"Hm"}))}]},i.prototype.getMonthDates=function(e){for(var t=f(g(e),this.parent.firstDayOfWeek),i=S(new Date(+t),42),n=[],r=t;r.getTime()<i.getTime();r=S(r,1))n.push(C(new Date(r)));return n},i.prototype.getRowColumnCount=function(e){for(var t=this.getMonths(),i=this.parent.selectedDate.getFullYear(),n=[],r=0;r<t.length;r++){var a=t[r];n.push(new Date(i,a,1).getDay()+new Date(i,a+1,0).getDate())}var s=Math.max.apply(Math,n);return"row"===e?"Horizontal"===this.parent.activeViewOptions.orientation?t.length:s:"Horizontal"===this.parent.activeViewOptions.orientation?s:t.length},i.prototype.isCurrentDate=function(e){return C(new Date).getTime()===C(new Date(e.getTime())).getTime()},i.prototype.getMonths=function(){var e=this;return Array.apply(null,{length:this.parent.activeViewOptions.monthsCount}).map(function(t,i){return e.parent.firstMonthOfYear+i})},i.prototype.renderTemplates=function(e,i,n,r,a){var s=this.parent.element.id+"_"+r+n,o=[].slice.call(e(i,this.parent,n,s,!1));t.append(o,a)},i.prototype.onCellClick=function(e){var i=t.closest(e.target,"."+tM),n=this.parent.getDateFromElement(i);this.parent.activeCellsData=this.parent.getCellDetails(i);var r=n.getTime()<this.getStartDate().getTime();if(r||n.getTime()>this.getEndDate().getTime()){this.parent.changeDate(this.parent.activeView.getNextPreviousDate(r?"previous":"next"),e);var a=this.parent.activeCellsData.startTime.getTime(),s=a>=this.getStartDate().getTime()&&a<=this.getEndDate().getTime()?a:(r?this.getEndDate():this.getStartDate()).getTime(),o=this.parent.element.querySelector(":not(."+tR+')[data-date="'+s+'"]');this.parent.selectCell(o),this.parent.activeCellsData=this.parent.getCellDetails(o)}else{var l=S(new Date(n.getTime()),1),h={date:n,event:this.parent.eventBase.filterEvents(n,l),element:e.target};i.classList.contains(tR)&&(i=this.parent.element.querySelector(":not(."+tR+')[data-date="'+i.getAttribute("data-date")+'"]')),this.parent.activeCellsData=this.parent.getCellDetails(i);var p=t.extend(this.parent.activeCellsData,{cancel:!1,event:e,name:"cellClick"});this.parent.trigger(eK,p),this.parent.quickPopup.moreEventClick(h,l)}},i.prototype.onContentScroll=function(e){var t=e.target,i=this.getDatesHeaderElement();this.parent.notify(th,e),i&&(i.firstElementChild.scrollLeft=t.scrollLeft);var n=this.element.querySelector(".e-month-header-wrapper,.e-resource-column-wrap");n&&(n.scrollTop=t.scrollTop),this.parent.isAdaptive||(this.parent.uiStateValues.top=e.target.scrollTop),this.parent.uiStateValues.left=e.target.scrollLeft,this.setPersistence()},i.prototype.onScrollUiUpdate=function(e){var i=this.parent.element.offsetHeight-this.getHeaderBarHeight(),n=this.element.querySelector("."+tN);n&&(i-=n.offsetHeight);var r=this.element.querySelector("."+iw);if(r&&(r.style.height=t.formatUnit(i)),!this.parent.isAdaptive&&n){var a=A();r.offsetWidth-r.clientWidth>0?(n.firstElementChild.style[e.cssProperties.border]=a>0?"1px":"0px",n.style[e.cssProperties.padding]=a>0?a-1+"px":"0px"):(n.firstElementChild.style[e.cssProperties.border]="",n.style[e.cssProperties.padding]="")}this.setColWidth(this.getContentAreaElement());var s=this.element.querySelector(".e-month-header-wrapper,.e-resource-column-wrap");if(s){var o=r.scrollWidth>r.clientWidth;s.style.height=t.formatUnit(i-(o?17:0))}e.isPreventScrollUpdate||(this.parent.uiStateValues.isInitial?(this.parent.uiStateValues.isInitial=!1,this.parent.uiStateValues.top=this.parent.uiStateValues.left=0):(s&&(s.scrollTop=this.parent.uiStateValues.top),r.scrollTop=this.parent.uiStateValues.top,r.scrollLeft=this.parent.uiStateValues.left)),this.retainScrollPosition()},i.prototype.getStartDate=function(){return new Date(this.parent.selectedDate.getFullYear(),this.parent.firstMonthOfYear%12,1)},i.prototype.getEndDate=function(){return S(O(this.getStartDate(),this.parent.monthsCount),-1)},i.prototype.startDate=function(){return"Year"===this.parent.currentView?f(this.getStartDate(),this.parent.firstDayOfWeek):this.getStartDate()},i.prototype.endDate=function(){return"Year"===this.parent.currentView?S(v(this.getEndDate(),this.parent.firstDayOfWeek),1):S(this.getEndDate(),1)},i.prototype.getEndDateFromStartDate=function(e){var t=new Date(e.getTime());return this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&(t=y(t)),S(new Date(t.getTime()),1)},i.prototype.getNextPreviousDate=function(e){return k(this.parent.selectedDate,"next"===e?1:-1)},i.prototype.getDateRangeText=function(){var e=this.getStartDate(),t=this.getEndDate();return e.getFullYear()!==t.getFullYear()?this.parent.globalize.formatDate(e,{skeleton:"yMMM"})+" - "+this.parent.globalize.formatDate(t,{skeleton:"yMMM"}):this.parent.globalize.formatDate(this.parent.selectedDate,{skeleton:"y"})},i.prototype.addEventListener=function(){this.parent.on(tp,this.onScrollUiUpdate,this),this.parent.on(ta,this.onDataReady,this)},i.prototype.removeEventListener=function(){this.parent&&(this.parent.off(tp,this.onScrollUiUpdate),this.parent.off(ta,this.onDataReady))},i.prototype.onDataReady=function(e){this.yearEventModule=new a2(this.parent),this.yearEventModule.renderAppointments(),this.parent.notify(ts,e)},i.prototype.scrollToDate=function(e){var i=+new Date(C(e)),n=this.element.querySelector("."+tM+":not(."+tR+')[data-date="'+i+'"]');n&&(n=t.closest(n,".e-month-calendar"),this.getContentAreaElement().scrollTop=n.offsetTop)},i.prototype.destroy=function(){if(!(!this.parent||this.parent&&this.parent.isDestroyed)&&this.element){var i=this.element.querySelector("."+iw);i&&t.EventHandler.remove(i,"scroll",this.onContentScroll),this.yearEventModule&&(this.yearEventModule.destroy(),this.yearEventModule=null),this.parent.resourceBase&&this.parent.resourceBase.destroy(),e.prototype.destroy.call(this)}},i}(a4),sl=(eU=function(e,t){return(eU=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}eU(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),sh=function(e){function i(t){return e.call(this,t)||this}return sl(i,e),i.prototype.createAgendaContentElement=function(e,i,n,r,a){var s,o=this,l=this.parent.eventFields;if("noEvents"===e){var p=[{subject:this.parent.localeObj.getConstant("noEvents")}];0===(s=h.ListBase.createList(this.parent.createElement,p,{moduleName:"agenda",listClass:this.parent.activeView.viewClass,itemClass:this.parent.activeView.viewClass,template:'<div class="'+iA+'">'+this.parent.localeObj.getConstant("noEvents")+"</div>"})).querySelector(".e-agenda-item").children.length&&s.firstElementChild.appendChild(t.createElement("div",{className:iA,innerHTML:this.parent.localeObj.getConstant("noEvents")}))}else s=h.ListBase.createList(this.parent.createElement,i,{moduleName:"agenda",listClass:this.parent.activeView.viewClass,itemClass:this.parent.activeView.viewClass}),[].slice.call(s.children).forEach(function(e,n){var s,h=t.createElement("div",{className:ip,attrs:{"data-id":"Appointment_"+i[parseInt(n.toString(),10)][""+o.parent.eventFields.id],"data-guid":i[parseInt(n.toString(),10)].Guid,role:"button",tabindex:"0","aria-disabled":o.parent.eventBase.getReadonlyAttribute(i[parseInt(n.toString(),10)]),"aria-label":o.parent.getAnnouncementString(i[parseInt(n.toString(),10)])}});if(t.isNullOrUndefined(a)||h.setAttribute("data-group-index",a.toString()),o.parent.eventBase.applyResourceColor(h,i[parseInt(n.toString(),10)],"borderColor",r),t.isNullOrUndefined(o.parent.activeViewOptions.eventTemplate))s=o.createAppointment(i[parseInt(n.toString(),10)]);else{t.addClass([h],"e-template");var p=o.parent.element.id+"_"+o.parent.activeViewOptions.eventTemplateName+"eventTemplate";if(s=o.parent.getAppointmentTemplate()(i[parseInt(n.toString(),10)],o.parent,"eventTemplate",p,!1),!t.isNullOrUndefined(i[parseInt(n.toString(),10)][l.recurrenceRule])){var c=i[parseInt(n.toString(),10)][l.id]===i[parseInt(n.toString(),10)][l.recurrenceID]?iY:i_;h.appendChild(t.createElement("div",{className:tw+" "+c}))}}t.append([].slice.call(s),h),R(e),e.appendChild(h);var d={data:t.extend({},i[parseInt(n.toString(),10)],null,!0),element:e,cancel:!1};o.parent.trigger(e6,d,function(i){i.cancel&&t.remove(e)})});return n.appendChild(s),("MonthAgenda"===this.parent.currentView&&this.parent.activeViewOptions.group.resources.length>0||"Agenda"===this.parent.currentView)&&t.addClass([n],"e-day-border"),this.parent.renderTemplates(),n},i.prototype.createAppointment=function(e){var i=this.parent.eventFields,n=e[i.subject]||this.parent.eventSettings.fields.subject.default||this.parent.localeObj.getConstant("addTitle"),r=e[i.location]||this.parent.eventSettings.fields.location.default,a=t.createElement("div",{className:iv});t.isNullOrUndefined(r)||""===r||(n+=",");var s=t.createElement("div",{className:nS});if(this.parent.sanitize(n,s),a.appendChild(s),!t.isNullOrUndefined(r)&&""!==r){var o=t.createElement("div",{className:nO});this.parent.sanitize(r,o),a.appendChild(o)}if(!t.isNullOrUndefined(e[i.recurrenceRule])){var l=e[i.id]===e[i.recurrenceID]?iY:i_;a.appendChild(t.createElement("div",{className:tw+" "+l}))}var h=e[i.startTime],p=e[i.endTime],c=e[i.isAllDay],d=this.parent.localeObj.getConstant("allDay"),u=this.parent.getTimeString(h)+" - "+this.parent.getTimeString(p);t.isNullOrUndefined(e.data)||(d=((p.getTimezoneOffset()!==h.getTimezoneOffset()?p.getTime()-h.getTime()+36e5:p.getTime()-h.getTime())/tm>=1?d:u)+" ("+this.parent.localeObj.getConstant("day")+" "+e.data.index+"/"+e.data.count+")");var m=!t.isNullOrUndefined(e.data)||c?d:u;return[a,t.createElement("div",{className:iI,innerHTML:m})]},i.prototype.processAgendaEvents=function(e){var i=[];if(t.isNullOrUndefined(e))return i;for(var n=0;n<e.length;n++){var r=e[n],a=this.parent.eventBase.splitEventByDay(r);i=i.concat(a.length>1?a:r)}return i},i.prototype.wireEventActions=function(){for(var e=0,i=[].slice.call(this.parent.element.querySelectorAll("."+ip));e<i.length;e++){var n=i[e];this.parent.eventBase.wireAppointmentEvents(n,this.parent.getEventDetails(n),!0)}for(var r=0,a=[].slice.call(this.parent.element.querySelectorAll(".e-m-date"));r<a.length;r++)n=a[r],t.EventHandler.add(n,"click",this.parent.agendaModule.dayNavigationClick,this)},i.prototype.calculateResourceTableElement=function(e,i,n){if(t.isNullOrUndefined(this.parent.resourceBase.lastResourceLevel)){var r=this.getDateSlots(this.renderDates,this.parent.activeViewOptions.workDays);this.parent.resourceBase.generateResourceLevels(r)}for(var a=S(new Date(n.getTime()),i),s=this.parent.activeViewOptions.group.byDate||"MonthAgenda"===this.parent.currentView?i:1,o=this.parent.resourceBase.resourceCollection,l=this.parent.resourceBase.lastResourceLevel,h=n,p=0;p<s;p++){var c=[],d=[],u=0,m=void 0,f=void 0,v=S(h,p),g=this.parent.activeViewOptions.group.byDate||"MonthAgenda"===this.parent.currentView?S(v,1):a,y=this.parent.eventBase.filterEvents(v,g);if(y.length>0||!this.parent.hideEmptyAgendaDays||"MonthAgenda"===this.parent.currentView){for(var b=0;b<l.length;b++){i=this.parent.activeViewOptions.group.byDate&&"MonthAgenda"!==this.parent.currentView?1:i;var D=[];n=v;var w=this.parent.eventBase.filterEvents(n,a,y,l[parseInt(b.toString(),10)]);if(w.length>0||!this.parent.hideEmptyAgendaDays||"MonthAgenda"===this.parent.currentView)for(var C=0;C<i;C++){var T=this.parent.eventBase.filterEvents(n,S(n,1),w,void 0);if((T.length>0||!this.parent.hideEmptyAgendaDays||"MonthAgenda"===this.parent.currentView)&&(D.push(T[0]),m={rowSpan:1,type:"eventColumn",resource:o[o.length-1],groupIndex:l[parseInt(b.toString(),10)].groupIndex,groupOrder:l[parseInt(b.toString(),10)].groupOrder,resourceData:l[parseInt(b.toString(),10)].resourceData,eventData:T,date:n},f={rowSpan:1,type:"dateColumn",resource:o[parseInt((o.length-1).toString(),10)],groupOrder:l[parseInt(b.toString(),10)].groupOrder,resourceData:l[parseInt(b.toString(),10)].resourceData,date:n},c[parseInt(u.toString(),10)]||(c[parseInt(u.toString(),10)]=[]),c[parseInt(u.toString(),10)].push(m),c[parseInt(u.toString(),10)].push(f),u++),(n=S(n,1)).getTime()>=a.getTime()||this.parent.activeViewOptions.group.byDate||"MonthAgenda"===this.parent.currentView){c[c.length-1][1].cssClass="e-day-border";var E={rowSpan:D.length,type:"resourceColumn",resource:o[parseInt((o.length-1).toString(),10)],groupOrder:l[parseInt(b.toString(),10)].groupOrder.slice(0,-1),resourceData:l[parseInt(b.toString(),10)].resourceData,groupIndex:c.length-D.length,className:[ig],date:n};c[parseInt((c.length-D.length).toString(),10)].push(E),d.push(t.extend({},E,null,!0));break}}}for(var O=o.slice(0,-1),k=[],x=0,M=0;M<O.length;M++){D=O[O.length-(M+1)].dataSource;for(var V=0;V<D.length;V++)for(var I=0,A=0;A<d.length;A++)d[parseInt(A.toString(),10)].groupOrder[O.length-(M+1)]===D[parseInt(V.toString(),10)][O[O.length-(M+1)].idField]&&(x+=d[parseInt(A.toString(),10)].rowSpan,k.push(t.extend({},d[parseInt(A.toString(),10)],null,!0))),++I===d.length&&k.length>0&&(k[0].rowSpan=x,k[0].type="parentColumnLevel_"+(M+1),k[0].resource=O[O.length-(M+1)],k[0].resourceData=D[parseInt(V.toString(),10)],k[0].date=n,c[k[0].groupIndex].push(k[0]),k=[],x=0)}this.createResourceTableRow(c,e)}}0===this.parent.eventBase.filterEvents(h,a).length&&!this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.hideEmptyAgendaDays&&this.renderEmptyContent(e,h)},i.prototype.createResourceTableRow=function(e,i){var n,r,a,s=t.createElement("tr"),o=t.createElement("td",{attrs:{"aria-selected":"false"}}),l=0;if(this.parent.activeViewOptions.group.byDate||"MonthAgenda"===this.parent.currentView){for(var h=[],p=this.parent.resourceBase.resourceCollection.slice(0,-1),c=0;c<e.length;c++)h=h.concat(e[parseInt(c.toString(),10)]);a=p.length>0?"parentColumnLevel_"+p.length:"resourceColumn";for(var d=h.filter(function(e){return e.type===a}),u=0;u<d.length;u++)l+=d[parseInt(u.toString(),10)].rowSpan}for(var m=0;m<e.length;m++){n=s.cloneNode();for(var f=e[parseInt(m.toString(),10)].length-1;f>=0;f--){var v=e[parseInt(m.toString(),10)][parseInt(f.toString(),10)],g=o.cloneNode();if("dateColumn"===v.type){if(this.parent.activeViewOptions.group.byDate||"MonthAgenda"===this.parent.currentView){r=e[parseInt(m.toString(),10)][parseInt(f.toString(),10)];continue}g.setAttribute("data-date",v.date.getTime().toString()),g.appendChild(this.createDateHeaderElement(v.date));var y=[iT,ix];v.cssClass&&y.push(v.cssClass),t.addClass([g],y),this.isCurrentDate(new Date(v.date.getTime()))&&t.addClass(g.childNodes,iE),n.appendChild(g)}else if("eventColumn"===v.type){var b=0===v.eventData.length?"noEvents":"data";(g=this.createAgendaContentElement(b,v.eventData,g,v.groupOrder,v.groupIndex)).setAttribute("data-date",v.date.getTime().toString()),(this.parent.activeViewOptions.group.byDate||"MonthAgenda"===this.parent.currentView)&&t.addClass([g],[iT,"e-day-padding"]),n.appendChild(g)}else g.setAttribute("rowspan",v.rowSpan.toString()),t.addClass([g],"e-resource-column"),this.setResourceHeaderContent(g,v,v.className[0]),n.appendChild(g)}if(this.parent.activeViewOptions.group.byDate&&0===m&&"MonthAgenda"!==this.parent.currentView){(g=o.cloneNode()).setAttribute("data-date",r.date.getTime().toString()),g.setAttribute("rowspan",l.toString()),g.appendChild(this.createDateHeaderElement(r.date)),t.addClass([g],[iT,ix,"e-date-border"]);var D=V(this.parent.selectedDate.getTime(),r.date.getTime());if(n.setAttribute("data-row-index",D.toString()),this.parent.element.querySelector('.e-agenda-view tr[data-row-index="'+D+'"]'))break;n.insertBefore(g,n.childNodes[0])}i.appendChild(n)}},i.prototype.createDateHeaderElement=function(e){var i;if(this.parent.activeViewOptions.dateHeaderTemplate){i=t.createElement("div",{className:ik});var n=this.parent.element.id+"_"+this.parent.activeViewOptions.dateHeaderTemplateName+"dateHeaderTemplate",r=[].slice.call(this.parent.getDateHeaderTemplate()({date:e,type:"dateHeader"},this.parent,"dateHeaderTemplate",n,!1));t.append(r,i)}else i=this.getMobileDateElement(e,ik);return i},i.prototype.renderEmptyContent=function(e,i){var n=this.createTableRowElement(i,"noEvents"),r=n.children[0],a=t.createElement("div",{className:"e-empty-event",innerHTML:this.parent.localeObj.getConstant("noEvents")});r.appendChild(a),e.appendChild(n)},i.prototype.createTableRowElement=function(e,i){var n=V(this.parent.selectedDate.getTime(),e.getTime()),r=t.createElement("tr",{attrs:{"data-row-index":n.toString()}}),a=t.createElement("td",{attrs:{class:"monthHeader"===i?iO:iT,"aria-selected":"false","data-column-index":n.toString(),"data-date":e.getTime().toString()}}),s=a.cloneNode(),o=a.cloneNode();return r.appendChild(s),"noEvents"!==i&&r.appendChild(o),r},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(a4),sp=(eL=function(e,t){return(eL=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}eL(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),sc=function(e){function i(t){var i=e.call(this,t)||this;return i.viewClass="e-agenda-view",i.isInverseTableSelect=!1,i.agendaDates={},i.virtualScrollTop=1,i}return sp(i,e),i.prototype.getModuleName=function(){return"agenda"},i.prototype.renderLayout=function(){this.agendaDates={},this.element=t.createElement("div",{className:ib}),t.addClass([this.element],this.viewClass),this.element.appendChild(this.createTableLayout(iD)),this.element.querySelector("table").setAttribute("role","presentation"),this.parent.element.querySelector("."+tE).appendChild(this.element);var e=t.createElement("tr");this.element.querySelector("tbody").appendChild(e);var i=t.createElement("td");e.appendChild(i);var n=t.createElement("div",{className:iw});i.appendChild(n);var r=this.createTableLayout(tx);this.setAriaAttributes(r),n.appendChild(r);var a=r.querySelector("tbody"),s=C(this.parent.selectedDate);this.renderEmptyContent(a,s),this.wireEvents(),this.parent.resourceBase&&this.parent.resourceBase.generateResourceLevels([{renderDates:this.parent.activeView.renderDates}]),this.parent.uiStateValues.isGroupAdaptive&&!this.parent.element.querySelector("."+ie)&&this.renderResourceMobileLayout(),this.parent.notify(to,{})},i.prototype.eventLoad=function(e){this.dataSource=t.extend([],this.parent.eventsData,null,!0);for(var i=0,n=this.parent.eventsData;i<n.length;i++)delete n[i].generatedDates;var r=this.parent.activeViewOptions.allowVirtualScrolling?e.processedData:this.parent.eventsProcessed;if(this.parent.uiStateValues.isGroupAdaptive){var a=this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];this.dataSource=this.parent.eventBase.filterEventsByResource(a,this.dataSource),r=this.parent.eventBase.filterEventsByResource(a,r)}this.parent.eventsProcessed=this.processAgendaEvents(r);var s=C(this.parent.selectedDate),o=this.element.querySelector("."+tx+" tbody");R(o),this.renderInitialContent(o,s),this.wireEventActions(),t.closest(o,"."+iw).scrollTop=1,this.parent.notify(ts,{}),this.parent.activeViewOptions.allowVirtualScrolling||this.retainScrollPosition()},i.prototype.refreshEvent=function(e){for(var i=[],n=this.parent.eventFields,r=0,a=this.dataSource;r<a.length;r++){var s=a[r];t.isNullOrUndefined(s[n.recurrenceID])&&!t.isNullOrUndefined(s[n.recurrenceRule])&&!t.isNullOrUndefined(s.generatedDates)&&e>=s.generatedDates.end&&(i=i.concat(this.parent.eventBase.generateOccurrence(s,e)))}this.parent.eventsProcessed=this.parent.eventsProcessed.concat(this.processAgendaEvents(i))},i.prototype.refreshHeader=function(){var e=this.element.querySelector("."+tx+" tbody");this.parent.activeViewOptions.group.byDate?R(e):t.remove(e.firstElementChild);var i=C(this.parent.selectedDate),n=t.createElement("tbody"),r=new Date(i.getTime()),a=this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.hideEmptyAgendaDays?this.getEndDateFromStartDate(r):S(r,this.parent.agendaDaysCount);this.renderContent(n,r,a),t.append([].slice.call(n.childNodes),e)},i.prototype.renderInitialContent=function(e,i){var n=t.createElement("tbody"),r=new Date(i.getTime()),a=this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.hideEmptyAgendaDays?this.getEndDateFromStartDate(r):S(r,this.parent.agendaDaysCount);if(this.renderContent(n,r,a),t.append([].slice.call(n.childNodes),e),this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.hideEmptyAgendaDays&&this.parent.eventsData.length>0)for(var s=this.getContentAreaElement(),o=s.querySelector(".e-content-table");s.offsetWidth<=s.clientWidth&&!(this.parent.isAdaptive&&o.offsetHeight>=s.clientHeight);){var l=t.createElement("tbody");if(r=S(a=r,-this.parent.agendaDaysCount),this.renderContent(l,r,a),t.prepend([].slice.call(l.childNodes),e),r<=this.parent.minDate)break}e.childNodes.length<=0&&this.renderEmptyContent(e,i)},i.prototype.renderContent=function(e,i,n){var r,a=this.parent.eventFields,s=new Date(i.getTime()),o=this.appointmentFiltering(s,n);if(o.length>0&&this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.hideEmptyAgendaDays&&(i=o[0][a.startTime],i=new Date(new Date(i.getTime()).setHours(0,0,0,0)),this.updateHeaderText(o[0][a.startTime])),!this.parent.hideEmptyAgendaDays||this.parent.agendaDaysCount>0&&o.length>0){if(this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive){var l=i;this.parent.activeViewOptions.group.byDate||(this.parent.activeViewOptions.allowVirtualScrolling=!1,l=s,this.parent.headerModule&&(this.parent.headerModule.updateDateRange(),this.parent.headerModule.updateHeaderItems("remove"))),this.calculateResourceTableElement(e,this.parent.agendaDaysCount,l)}else for(var h=0;h<this.parent.agendaDaysCount;h++){var p=this.appointmentFiltering(i),c=this.createTableRowElement(i,"data");if(this.element.querySelector('tr[data-row-index="'+parseInt(c.getAttribute("data-row-index"),10)+'"]'))i=S(i,1);else{var d=c.children[0],u=c.children[1];if(p.length>0||!this.parent.hideEmptyAgendaDays&&0===p.length){var m=this.parent.hideEmptyAgendaDays||0!==p.length?"data":"noEvents";d.appendChild(this.createDateHeaderElement(i)),c.appendChild(d);var f=this.createAgendaContentElement(m,p,u);c.appendChild(f),f.querySelectorAll("li").length>0&&e.appendChild(c)}else this.parent.activeViewOptions.allowVirtualScrolling&&h--;if(this.isCurrentDate(new Date(i.getTime()))&&t.addClass(d.childNodes,iE),(i=S(i,1)).getTime()>n.getTime())break}}r=new Date(i.getTime()-tm)}this.agendaDates={start:s,end:r}},i.prototype.agendaScrolling=function(e){this.parent.quickPopup&&this.parent.quickPopup.quickPopupHide(),this.parent.activeViewOptions.allowVirtualScrolling&&this.virtualScrolling(e),this.parent.activeViewOptions.allowVirtualScrolling||this.setPersistence()},i.prototype.virtualScrolling=function(e){var i,n=e.target,r=n.scrollTop,a=n.scrollHeight,s=r+n.clientHeight,o=this.virtualScrollTop<r?"next":"previous",l=n.querySelector("tbody"),h=t.createElement("tbody"),p=this.getElementFromScrollerPosition(e),c=this.parent.getDateFromElement(p);if(0===r){if(i=this.getPreviousNextDate(S(c,-1),o),this.appointmentFiltering(i.start,i.end).length>0||!this.parent.hideEmptyAgendaDays){this.renderContent(h,i.start,i.end),t.prepend([].slice.call(h.childNodes),l),this.wireEventActions();for(var d=0,u=l.children;d<u.length;d++)if(u[parseInt(d.toString(),10)].getAttribute("data-row-index")===p.getAttribute("data-column-index")){var m=u[parseInt(d.toString(),10)].offsetTop-this.element.querySelector(".e-agenda-item").offsetHeight;n.scrollTop=m;break}this.updateHeaderText(c)}}else s>=a-5?(i=this.getPreviousNextDate(S(c,1),o),(this.appointmentFiltering(i.start,i.end).length>0||!this.parent.hideEmptyAgendaDays)&&(this.renderContent(h,i.start,i.end),t.append([].slice.call(h.childNodes),l),this.wireEventActions(),this.updateHeaderText(c))):this.updateHeaderText(c);this.virtualScrollTop=r;var f=this.parent.eventBase.getSelectedAppointments();f.length>0&&f[f.length-1].focus()},i.prototype.getElementFromScrollerPosition=function(e){var i,n,r=e.target,a=r.scrollTop,s=r.scrollHeight,o=a+r.clientHeight,l=[].slice.call(r.querySelectorAll(".e-agenda-item"));if(l.length>0){if(0===a)n=l[0],i=t.closest(n,"."+iT);else if(o===s)n=l[l.length-1],i=t.closest(n,"."+iT);else for(var h=0,p=l.length;h<p;h++)if((n=l[parseInt(h.toString(),10)]).getBoundingClientRect().top>=0){i=t.closest(n,"."+iT);break}}return i},i.prototype.updateHeaderText=function(e){this.parent.showHeaderBar&&this.parent.headerModule.updateDateRange(e)},i.prototype.getPreviousNextDate=function(e,t){var i=new Date(e.getTime()),n=this.getStartDateFromEndDate(e),r=this.getEndDateFromStartDate(e),a=0;do if((this.appointmentFiltering(i).length>0||!this.parent.hideEmptyAgendaDays)&&a++,(i=S(i,"next"===t?1:-1))<n||i>r)break;while(a!==this.parent.agendaDaysCount);var s=S(i,"next"===t?-1:1);return"next"===t?{start:e,end:S(s,1)}:{start:s,end:S(e,1)}},i.prototype.appointmentFiltering=function(e,i){!t.isNullOrUndefined(e)&&t.isNullOrUndefined(i)?(n=C(new Date(e.getTime())),r=w(new Date(n.getTime()),tm)):(n=new Date(e.getTime()),r=new Date(i.getTime()));var n,r,a=this.parent.eventBase.filterEvents(n,r);return 0===a.length&&(this.refreshEvent(e),a=this.parent.eventBase.filterEvents(n,r)),a},i.prototype.getStartDateFromEndDate=function(e){var t,i=this.parent.eventFields;if(this.parent.eventsProcessed.length>0){var n=Math.min.apply(Math,this.parent.eventsProcessed.map(function(e){return e[i.startTime].getTime()}));t=this.parent.hideEmptyAgendaDays?new Date(n):this.parent.minDate}else t=this.parent.hideEmptyAgendaDays?O(e,-1):this.parent.minDate;return C(t)},i.prototype.getEndDateFromStartDate=function(e){var t,i=this.parent.eventFields;if(this.parent.eventsProcessed.length>0){var n=Math.max.apply(Math,this.parent.eventsProcessed.map(function(e){return e[i.endTime].getTime()}));t=this.parent.hideEmptyAgendaDays?new Date(n):this.parent.maxDate}else t=this.parent.hideEmptyAgendaDays?O(e,1):this.parent.maxDate;return C(S(t,1))},i.prototype.getNextPreviousDate=function(e){return S(this.parent.selectedDate,"next"===e?1:-1)},i.prototype.startDate=function(){return C(this.parent.selectedDate)},i.prototype.endDate=function(){return this.parent.activeViewOptions.allowVirtualScrolling?this.getEndDateFromStartDate(this.startDate()):S(this.startDate(),this.parent.agendaDaysCount)},i.prototype.getDateRangeText=function(e){var i=this.parent.activeViewOptions.dateFormat?this.parent.activeViewOptions.dateFormat:"MMMM y";if(this.parent.activeViewOptions.allowVirtualScrolling||this.parent.isAdaptive){var n=t.isNullOrUndefined(e)?this.parent.selectedDate:e;return j(this.parent.globalize.formatDate(n,{format:i,calendar:this.parent.getCalendarMode()}),"multiple")}var r=this.parent.selectedDate,a=S(r,this.parent.agendaDaysCount-1);return this.formatDateRange(r,a)},i.prototype.dayNavigationClick=function(e){var i=t.closest(e.currentTarget,"."+iT),n=this.parent.getDateFromElement(i);t.isNullOrUndefined(n)||this.parent.isAdaptive||!this.parent.isMinMaxDate(n)||(this.parent.setProperties({selectedDate:n},!0),this.parent.changeView("Day",e))},i.prototype.wireEvents=function(){t.EventHandler.add(this.element.querySelector("."+iw),tl,this.agendaScrolling,this)},i.prototype.unWireEvents=function(){t.EventHandler.remove(this.element.querySelector("."+iw),tl,this.agendaScrolling);for(var e=0,i=[].slice.call(this.element.querySelectorAll(".e-m-date"));e<i.length;e++){var n=i[e];t.EventHandler.remove(n,"click",this.dayNavigationClick)}},i.prototype.addEventListener=function(){this.parent.on(tp,this.onAgendaScrollUiUpdate,this),this.parent.on(ta,this.eventLoad,this)},i.prototype.removeEventListener=function(){this.parent&&(this.parent.off(tp,this.onAgendaScrollUiUpdate),this.parent.off(ta,this.eventLoad))},i.prototype.onAgendaScrollUiUpdate=function(){var e=this.getHeaderBarHeight();this.parent.headerModule&&(this.parent.activeViewOptions.allowVirtualScrolling?this.parent.headerModule.updateHeaderItems("add"):this.parent.headerModule.updateHeaderItems("remove"));var i=this.element.querySelector("."+iw);"auto"!==this.parent.height&&(i.style.height=t.formatUnit(this.parent.element.offsetHeight-e))},i.prototype.scrollToDate=function(e){var t=new Date(+C(e));if(this.parent.activeViewOptions.allowVirtualScrolling)(!this.parent.hideEmptyAgendaDays||this.parent.getEvents(t,S(t,1),!0).length>0)&&this.parent.changeDate(t);else{var i=this.element.querySelector("."+iT+'[data-date="'+t.getTime()+'"]');i&&(this.getContentAreaElement().scrollTop=i.offsetTop)}},i.prototype.destroy=function(){!this.parent||this.parent&&this.parent.isDestroyed||this.element&&(this.unWireEvents(),this.parent.resourceBase&&this.parent.resourceBase.destroy(),this.parent.headerModule&&this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.headerModule.updateHeaderItems("remove"),e.prototype.destroy.call(this))},i}(sh),sd=(eB=function(e,t){return(eB=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}eB(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),su=function(e){function i(t){var i=e.call(this,t)||this;return i.dayNameFormat="narrow",i.viewClass="e-month-agenda-view",i.monthAgendaDate=new Date(""+t.selectedDate),i}return sd(i,e),i.prototype.getModuleName=function(){return"monthAgenda"},i.prototype.renderAppointmentContainer=function(){var e=this.getContentAreaElement(),i=t.createElement("div",{className:il});e.appendChild(i);var n=t.createElement("div",{className:io});i.appendChild(n),this.appendAppContainer(n),this.setEventWrapperHeight()},i.prototype.getDayNameFormat=function(){return this.parent.isAdaptive?"narrow":"abbreviated"},i.prototype.updateSelectedCellClass=function(e){C(e.date).getTime()===C(this.monthAgendaDate).getTime()&&e.className.push(ir)},i.prototype.setEventWrapperHeight=function(){var e=(this.parent.headerModule?this.parent.headerModule.getHeaderElement().offsetHeight:0)+2,i=this.parent.element.querySelector("."+ii);i&&(e+=i.offsetHeight);var n=this.getContentAreaElement().firstElementChild,r=this.element.querySelector("."+tA),a=this.parent.element.offsetHeight-e-r.offsetHeight,s=this.parent.activeViewOptions.interval>1?Math.round(.8*a):n.offsetHeight,o=a-s,l=this.element.querySelector("."+il),h=this.element.querySelector("."+io);"auto"!==this.parent.height&&(this.parent.activeViewOptions.interval>1&&(n.style.height=t.formatUnit(s),t.EventHandler.add(n,"scroll",this.onContentScroll,this)),l.style.height=h.style.height=t.formatUnit(o))},i.prototype.onDataReady=function(e){this.setEventWrapperHeight(),this.clearElements();var i=e.processedData;if(this.parent.uiStateValues.isGroupAdaptive){var n=this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];i=this.parent.eventBase.filterEventsByResource(n,i)}this.agendaBase=this.getAgendaBase(),this.parent.eventsProcessed=this.agendaBase.processAgendaEvents(i);for(var r=0,a=0,s=this.renderDates;a<s.length;a++){var o=s[a],l=this.appointmentFiltering(o),h=this.element.querySelectorAll("."+tM)[parseInt(r.toString(),10)];l.length>0&&(h.querySelector("."+iN)||h.appendChild(t.createElement("div",{className:iN})),o.getTime()===C(new Date(this.monthAgendaDate.getTime())).getTime()&&this.onEventRender(l,o)),r++}this.parent.notify(ts,{})},i.prototype.onCellClick=function(e){this.parent.quickPopup&&this.parent.quickPopup.quickPopupHide();var t=this.appointmentFiltering(e.startTime);this.onEventRender(t,e.startTime),this.parent.notify(ts,{}),this.monthAgendaDate=new Date(""+e.startTime)},i.prototype.onEventRender=function(e,i){this.agendaBase=this.getAgendaBase();var n=this.element.querySelector("."+io);if(R(n),0===this.parent.activeViewOptions.group.resources.length||this.parent.uiStateValues.isGroupAdaptive){if(e.length>0){var r=t.createElement("div",{className:ih});n.appendChild(this.agendaBase.createAgendaContentElement("data",e,r))}else this.appendAppContainer(n)}else if(e.length>0){var a=this.createTableLayout(),s=a.querySelector("tbody");this.agendaBase.calculateResourceTableElement(s,1,i),a.appendChild(s),n.appendChild(a)}else this.appendAppContainer(n);this.agendaBase.wireEventActions()},i.prototype.appointmentFiltering=function(e){var t=C(new Date(e.getTime())),i=w(new Date(t.getTime()),tm);return this.parent.eventBase.filterEvents(t,i)},i.prototype.clearElements=function(){for(var e=0,i=[].slice.call(this.element.querySelectorAll("."+iN));e<i.length;e++){var n=i[e];t.remove(n)}this.appendAppContainer(this.element.querySelector("."+io))},i.prototype.appendAppContainer=function(e){var i=t.createElement("div",{className:ih});t.addClass([i],iA),i.innerHTML=this.parent.localeObj.getConstant("noEvents"),R(e),e.appendChild(i)},i.prototype.getNextPreviousDate=function(e){var t=this.parent.selectedDate,i="next"===e?this.parent.activeViewOptions.interval:-this.parent.activeViewOptions.interval,n=O(this.parent.selectedDate,i),r=new Date(t.getFullYear(),t.getMonth()+("next"===e?2:0),0).getDate(),a=r>=this.monthAgendaDate.getDate()?this.monthAgendaDate.getDate():r;return this.monthAgendaDate=new Date(n.getFullYear(),n.getMonth(),a),this.monthAgendaDate},i.prototype.getAgendaBase=function(){return this.agendaBase||new sh(this.parent)},i.prototype.destroy=function(){this.agendaBase&&(this.agendaBase.destroy(),this.agendaBase=null),e.prototype.destroy.call(this)},i}(sa),sm=function(){function e(e,t){this.parent=e,this.renderDates=t}return e.prototype.groupByYear=function(e){for(var t={},i=0;i<e.length;i++){var n=e[i],r=n.getFullYear();t[parseInt(r.toString(),10)]=t[parseInt(r.toString(),10)]||[],t[parseInt(r.toString(),10)].push(n)}return t},e.prototype.groupByMonth=function(e){for(var t={},i=0;i<e.length;i++){var n=e[i],r=12*(n.getFullYear()-1970)+n.getMonth();t[parseInt(r.toString(),10)]=t[parseInt(r.toString(),10)]||[],t[parseInt(r.toString(),10)].push(n)}return t},e.prototype.groupByWeek=function(e){for(var t={},i=0;i<e.length;i++){var n=e[i],r=+new Date(1970,0,1),a=n.getTimezoneOffset()-new Date(1970,0,1).getTimezoneOffset(),s=Math.ceil(((+n-r-60*a*1e3)/tm+new Date(r).getDay()+1)/7);this.parent.firstDayOfWeek&&this.parent.firstDayOfWeek>new Date(+n).getDay()&&(s-=1),t[parseInt(s.toString(),10)]=t[parseInt(s.toString(),10)]||[],t[parseInt(s.toString(),10)].push(n)}return t},e.prototype.generateSlots=function(e,i,n,r,a){for(var s=this,o=function(e,t){return s.parent.globalize.formatDate(e,{format:t,calendar:s.parent.getCalendarMode()})},l=[],h=Object.keys(e),p=0;p<h.length;p++){var c=e[h[parseInt(p.toString(),10)]],d=void 0;if(n.template){var u={date:c[0],type:a},m=this.parent.element.id+"_headerRowTemplate";d=[].slice.call(this.parent.templateParser(n.template)(u,this.parent,"template",m,!1))}else{var f=void 0;switch(n.option){case"Year":f='<span class="e-header-year">'+o(c[0],"y")+"</span>";break;case"Month":f='<span class="e-header-month">'+j(o(c[0],"MMMM"),"single")+"</span>";break;case"Week":f='<span class="e-header-week">'+this.parent.getWeekNumberContent(c)+"</span>"}var v=t.createElement("div",{innerHTML:f});d=[].slice.call(v.childNodes)}l.push({date:c[0],type:a,className:[r],colSpan:c.length*i,template:d})}return l},e.prototype.generateColumnLevels=function(e,t){var i=[],n=this.parent.activeViewOptions.headerRows,r=1;"Hour"===n[n.length-1].option&&t.length>0&&(r=t.length/e.length);for(var a,s,o,l=[],h=0;h<n.length;h++){var p=n[h];switch(p.option){case"Year":a=this.groupByYear(this.renderDates),l=this.generateSlots(a,r,p,"e-header-year-cell","yearHeader"),i.push(l);break;case"Month":s=this.groupByMonth(this.renderDates),l=this.generateSlots(s,r,p,"e-header-month-cell","monthHeader"),i.push(l);break;case"Week":o=this.groupByWeek(this.renderDates),l=this.generateSlots(o,r,p,"e-header-week-cell","weekHeader"),i.push(l);break;case"Date":l=(l=e).map(function(e){return e.colSpan=r,e}),i.push(l);break;case"Hour":t.length>0&&i.push(t)}}return i},e}(),sf=(ej=function(e,t){return(ej=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}ej(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),sv=function(e){function i(t){var i=e.call(this,t)||this;return i.timelineAppointment=null,i.baseCssClass="e-timeline-view",i}return sf(i,e),i.prototype.getModuleName=function(){return"timelineViews"},i.prototype.getLeftPanelElement=function(){return this.element.querySelector("."+tG)},i.prototype.scrollTopPanel=function(t){e.prototype.scrollTopPanel.call(this,t),this.scrollHeaderLabels(t)},i.prototype.scrollToWorkHour=function(){var e=this.parent.getStartEndTime(this.parent.workHours.start),i=this.isWorkDay(this.parent.selectedDate)&&this.parent.workHours.highlight&&!t.isNullOrUndefined(e)?new Date(+this.parent.selectedDate).setHours(e.getHours(),e.getMinutes(),0,0):new Date(+this.parent.selectedDate).setHours(0,0,0,0),n='[data-date="'+new Date(i).getTime().toString()+'"]',r=this.element.querySelector(n);r&&(this.getContentAreaElement().scrollLeft=this.parent.enableRtl?-(this.parent.getContentTable().offsetWidth-r.offsetLeft-r.offsetWidth):r.offsetLeft)},i.prototype.scrollToHour=function(e,i){if(i&&(r=this.parent.getIndexOfDate(this.renderDates,C(i)))>=0&&(n=i,!t.isNullOrUndefined(e))){var n,r,a,s=e.split(":");2===s.length&&(n=new Date(i.setHours(parseInt(s[0],10),parseInt(s[1],10),0)))}n=t.isNullOrUndefined(i)?this.parent.getStartEndTime(e):n,t.isNullOrUndefined(n)||(a=t.isNullOrUndefined(e)||!this.parent.activeViewOptions.timeScale.enable?r*this.getWorkCellWidth():t.isNullOrUndefined(i)?this.getLeftFromDateTime(null,n):this.getLeftFromDateTime([r],n),this.getScrollableElement().scrollLeft=this.parent.enableRtl?-a:a)},i.prototype.generateColumnLevels=function(){var e=[],t=this.getDateSlots(this.renderDates,this.parent.activeViewOptions.workDays);e.push(t),this.parent.activeViewOptions.group.resources.length>0&&this.parent.resourceBase.generateResourceLevels(t,!this.parent.uiStateValues.isGroupAdaptive);var i=[];return this.parent.activeViewOptions.timeScale.enable&&(i=this.generateTimeSlots(e[e.length-1]),e.push(i)),this.parent.activeViewOptions.headerRows.length>0&&(e=new sm(this.parent,this.renderDates).generateColumnLevels(t,i)),e},i.prototype.generateTimeSlots=function(e){for(var i=this,n=this.getTimeSlotRows(function(e){return e.type=e.first?"majorSlot":"minorSlot",e.className=e.first?[t1]:[t1,"e-time-cells"],e.workDays=i.parent.activeViewOptions.workDays,e}),r=[],a=0;a<e.length;a++){var s=e[a];s.colSpan=n.length;for(var o=0,l=t.extend([],n,null,!0);o<l.length;o++){var h=l[o],p=C(new Date(""+s.date));h.date=w(p,T(h.date)),r.push(h)}}return r},i.prototype.changeCurrentTimePosition=function(){if(!(!this.parent||this.parent&&this.parent.isDestroyed)){this.removeCurrentTimeIndicatorElements();var e=this.getCurrentTimeIndicatorIndex(),i=this.getLeftFromDateTime(e,this.parent.getCurrentTime()),n=this.element.querySelector("."+tx).offsetHeight,r=this.element.querySelector("."+tA);if(this.element.querySelector("."+iw).appendChild(t.createElement("div",{className:t6,styles:(this.parent.enableRtl?"right":"left")+":"+t.formatUnit(i)+"; height:"+t.formatUnit(n)})),this.parent.virtualScrollModule){var a=this.parent.element.querySelector("."+t6),s=this.parent.element.querySelector("."+iw+" table");t.setStyleAttribute(a,{transform:s.style.transform})}var o=t.createElement("div",{innerHTML:this.parent.getTimeString(this.parent.getCurrentTime()),className:t3});r.appendChild(o),o.style[this.parent.enableRtl?"right":"left"]=t.formatUnit(i-o.offsetWidth/2)}},i.prototype.getLeftFromDateTime=function(e,i){var n=this.getStartHour(),r=0,a=60*(i.getHours()-n.getHours())+(i.getMinutes()-n.getMinutes());if(!t.isNullOrUndefined(e)&&0!==e[0]){var s=this.parent.activeView.colLevels.findIndex(function(e){return"dateHeader"===e[0].type});if(this.parent.activeView.colLevels[parseInt(s.toString(),10)]&&this.parent.activeView.colLevels[parseInt(s.toString(),10)][0].colSpan)r=e[0]*this.parent.activeView.colLevels[parseInt(s.toString(),10)][0].colSpan*this.getWorkCellWidth();else{var o=this.getEndHour(),l=0===o.getHours()?24:o.getHours();a+=e[0]*(60*(l-n.getHours())+(o.getMinutes()-n.getMinutes()))}}return r+a*this.getWorkCellWidth()*this.parent.activeViewOptions.timeScale.slotCount/this.parent.activeViewOptions.timeScale.interval},i.prototype.getWorkCellWidth=function(){return this.element.querySelector(".e-work-cells").getBoundingClientRect().width},i.prototype.renderHeader=function(){var e=t.createElement("tr");this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&this.parent.resourceBase.renderResourceHeaderIndent(e);var i=t.createElement("td");i.appendChild(this.renderDatesHeader()),e.appendChild(i),t.prepend([e],this.element.querySelector("tbody"))},i.prototype.createAllDayRow=function(e,t){},i.prototype.getCurrentTimeIndicatorIndex=function(){var e=[],t=this.parent.getIndexOfDate(this.renderDates,C(this.parent.getCurrentTime()));return t>=0&&e.push(t),e},i.prototype.renderContent=function(){var e=t.createElement("tr");if(this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive){var i=t.createElement("td");i.appendChild(this.parent.resourceBase.createResourceColumn()),e.appendChild(i)}var n=t.createElement("td"),r=this.renderContentArea();r.appendChild(this.createEventTable(this.getRowCount())),this.collapseRows(r),n.appendChild(r),e.appendChild(n),this.parent.virtualScrollModule&&this.parent.virtualScrollModule.renderVirtualTrack(r),this.element.querySelector("tbody").appendChild(e)},i.prototype.getRowCount=function(){return this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive?this.parent.resourceBase.renderedResources.length:1},i.prototype.getResourceTdData=function(e,t){var i=this.parent.resourceBase.renderedResources[parseInt(e.toString(),10)],n=i.resourceData[i.resource.startHourField]||this.parent.workHours.start,r=i.resourceData[i.resource.endHourField]||this.parent.workHours.end;return t.startHour=this.parent.getStartEndTime(n),t.endHour=this.parent.getStartEndTime(r),t.workDays=i.resourceData[i.resource.workDaysField]||this.parent.workDays,t.className=i.className,t.groupIndex=i.groupIndex,t.groupOrder=i.groupOrder,t},i.prototype.renderContentTable=function(e){var i=e.querySelector("tbody");t.append(this.getContentRows(),i)},i.prototype.getContentRows=function(){for(var e=[],i=t.createElement("tr"),n=t.createElement("td",{attrs:{"aria-selected":"false"}}),r=this.getRowCount(),a=0;a<r;a++){for(var s=i.cloneNode(),o=0,l=this.colLevels[this.colLevels.length-1];o<l.length;o++){var h=l[o];this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&(h=this.getResourceTdData(a,h));var p=this.createContentTd(h,h,n);s.appendChild(p)}e.push(s)}return e},i.prototype.getContentTdClass=function(e){return e.first||!this.parent.activeViewOptions.timeScale.enable?[tM]:[tM,t2]},i.prototype.renderEvents=function(){this.timelineAppointment=new rH(this.parent,this.parent.activeViewOptions.timeScale.enable?"hour":"day"),this.timelineAppointment.renderAppointments(),this.parent.notify(ts,{})},i.prototype.getAdjustedDate=function(e){if(!this.parent.activeViewOptions.timeScale.enable)return new Date(e.setHours(0,0,0,0));for(var t=this.colLevels[this.colLevels.length-1],i=0;i<t.length;i++)if(t[parseInt(i.toString(),10)].date.getTime()>e.getTime())return t[i-1].date;return null},i.prototype.destroy=function(){!this.parent||this.parent&&this.parent.isDestroyed||(this.timelineAppointment&&(this.timelineAppointment.destroy(),this.timelineAppointment=null),e.prototype.destroy.call(this))},i}(a8),sg=(eW=function(e,t){return(eW=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}eW(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),sy=function(e){function i(t){var i=e.call(this,t)||this;return i.viewClass="e-timeline-month-view",i.isInverseTableSelect=!0,i.appointment=null,i}return sg(i,e),i.prototype.getModuleName=function(){return"timelineMonth"},i.prototype.onDataReady=function(){this.appointment=new rH(this.parent,"day"),this.appointment.renderAppointments(),this.parent.notify(ts,{})},i.prototype.getLeftPanelElement=function(){return this.element.querySelector("."+tG)},i.prototype.scrollTopPanel=function(t){e.prototype.scrollTopPanel.call(this,t),this.scrollHeaderLabels(t)},i.prototype.setContentHeight=function(e,i,n){i&&(i.style.height=t.formatUnit(n-this.getScrollXIndent(e))),e.style.height=t.formatUnit(n)},i.prototype.getDateSlots=function(e,t){for(var i=[],n=0;n<e.length;n++){var r=e[n],a=[tP];this.isCurrentDate(r)&&a.push(tF),i.push({date:r,type:"dateHeader",className:a,colSpan:1,workDays:t})}return i},i.prototype.renderLeftIndent=function(e){this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&this.parent.resourceBase.renderResourceHeaderIndent(e)},i.prototype.renderContent=function(){var e=t.createElement("tr");if(this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive){var i=t.createElement("td");i.appendChild(this.parent.resourceBase.createResourceColumn()),e.appendChild(i)}var n=t.createElement("td");this.element.querySelector("tbody").appendChild(e);var r=t.createElement("div",{className:iw});r.appendChild(this.renderContentArea()),r.appendChild(this.createEventTable(this.getRowCount())),this.collapseRows(r),t.EventHandler.add(r,"scroll",this.onContentScroll,this),n.appendChild(r),this.parent.virtualScrollModule&&this.parent.virtualScrollModule.renderVirtualTrack(r),e.appendChild(n)},i.prototype.getRowCount=function(){return this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive?this.parent.resourceBase.renderedResources.length:1},i.prototype.getContentSlots=function(){for(var e=[],t=0;t<this.getRowCount();t++)for(var i=0,n=this.colLevels[this.colLevels.length-1];i<n.length;i++){var r=n[i];if(r.className=[tM],this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive){var a=this.parent.resourceBase.renderedResources[parseInt(t.toString(),10)];r.workDays=a.resourceData[a.resource.workDaysField]||this.parent.workDays,r.className=r.className.concat(a.className),r.groupIndex=a.groupIndex,r.groupOrder=a.groupOrder}var s={date:new Date(+r.date),colSpan:r.colSpan,groupIndex:r.groupIndex,workDays:r.workDays,type:"monthCells",className:r.className};e[parseInt(t.toString(),10)]||(e[parseInt(t.toString(),10)]=[]),e[parseInt(t.toString(),10)].push(s)}return e},i.prototype.updateClassList=function(e){this.parent.isMinMaxDate(e.date)||e.className.push(nG)},i.prototype.unWireEvents=function(){t.EventHandler.remove(this.getContentAreaElement(),"scroll",this.onContentScroll)},i.prototype.getMonthStart=function(e){var t=this.parent.calendarUtil.firstDateOfMonth(C(e));return new Date(t.getFullYear(),t.getMonth(),t.getDate())},i.prototype.getMonthEnd=function(e){var t=this.parent.calendarUtil.firstDateOfMonth(C(e));return this.parent.calendarUtil.lastDateOfMonth(O(new Date(+t),this.parent.activeViewOptions.interval-1))},i.prototype.generateColumnLevels=function(){var e=[],t=this.getDateSlots(this.renderDates,this.parent.activeViewOptions.workDays);return e.push(t),this.parent.activeViewOptions.group.resources.length>0&&this.parent.resourceBase.generateResourceLevels(t,!this.parent.uiStateValues.isGroupAdaptive),this.parent.activeViewOptions.headerRows.length>0&&(e=new sm(this.parent,this.renderDates).generateColumnLevels(t,[])),this.colLevels=e,e},i.prototype.getAdjustedDate=function(e){for(var t=this.colLevels[this.colLevels.length-1],i=0;i<t.length;i++)if(t[parseInt(i.toString(),10)].date.getTime()>e.getTime())return t[i-1].date;return null},i.prototype.destroy=function(){if(!(!this.parent||this.parent&&this.parent.isDestroyed)){if(this.element){var i=this.element.querySelector("."+iw);i&&t.EventHandler.remove(i,"scroll",this.onContentScroll)}this.appointment&&(this.appointment.destroy(),this.appointment=null),e.prototype.destroy.call(this)}},i}(sa),sb=(eq=function(e,t){return(eq=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}eq(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),sD=function(e){function i(t){var i=e.call(this,t)||this;return i.viewClass="e-timeline-year-view",i.isInverseTableSelect=!0,i}return sb(i,e),i.prototype.getModuleName=function(){return"timelineYear"},i.prototype.renderHeader=function(e){var i=t.createElement("tr");if(e.appendChild(i),"Vertical"===this.parent.activeViewOptions.orientation&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive)this.parent.resourceBase.renderResourceHeaderIndent(i);else{var n=t.createElement("td",{className:tW});i.appendChild(n),n.appendChild(this.renderResourceHeader(tq))}var r="Horizontal"===this.parent.activeViewOptions.orientation,a=this.parent.activeViewOptions.group.resources.length>0;this.isInverseTableSelect=!(r&&!a);var s=t.createElement("td");i.appendChild(s);var o=t.createElement("div",{className:tN});if(s.appendChild(o),"Horizontal"===this.parent.activeViewOptions.orientation&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive)o.appendChild(this.renderResourceHeader(tA)),this.columnCount=this.colLevels.slice(-1)[0].length;else{var l=t.createElement("div",{className:tA});o.appendChild(l);var h=this.createTableLayout();l.appendChild(h),h.appendChild(this.createTableColGroup(this.columnCount));var p=t.createElement("tr");h.querySelector("tbody").appendChild(p);for(var c=this.getMonths(),d=this.getMonthDates(new Date(this.parent.selectedDate.getFullYear(),c[0],1)),u=0;u<this.columnCount;u++){var m=new Date(this.parent.selectedDate.getFullYear(),c[parseInt(u.toString(),10)],1),f=t.createElement("td",{className:tP});"Horizontal"===this.parent.activeViewOptions.orientation?this.parent.dayHeaderTemplate?t.append(this.renderDayMonthHeaderTemplate(d[parseInt(u.toString(),10)],u,"dayHeaderTemplate"),f):f.innerHTML="<span>"+this.parent.getDayNames("abbreviated")[u%7]+"</span>":(this.parent.monthHeaderTemplate?t.append(this.renderDayMonthHeaderTemplate(m,c[parseInt(u.toString(),10)],"monthHeaderTemplate"),f):f.innerHTML="<span>"+this.getMonthName(m)+"</span>",f.setAttribute("data-date",m.getTime().toString())),p.appendChild(f),this.parent.trigger(e2,{elementType:"headerCells",element:f})}}},i.prototype.renderResourceHeader=function(e){var i=t.createElement("div",{className:e}),n=this.createTableLayout();i.appendChild(n);var r=t.createElement("tr");if(this.parent.activeViewOptions.group.resources.length>0)this.colLevels=this.generateColumnLevels();else{var a=[{className:[tP],type:"headerCell"}];this.colLevels=[a]}for(var s=0,o=this.colLevels;s<o.length;s++){for(var l=o[s],h=r.cloneNode(),p=0,c=e===tA?l:[l[0]];p<c.length;p++){var d=c[p],u=t.createElement("td");d.className&&t.addClass([u],d.className),e===tA&&(d.template&&t.append(d.template,u),d.colSpan&&u.setAttribute("colspan",d.colSpan.toString()),d.groupIndex>-1&&u.setAttribute("data-group-index",d.groupIndex.toString()),this.setResourceHeaderContent(u,d)),e===tq&&this.parent.renderHeaderIndentTemplate(d,u);var m={elementType:d.type,element:u,date:d.date,groupIndex:d.groupIndex};this.parent.trigger(e2,m),h.appendChild(u)}n.querySelector("tbody").appendChild(h)}return e===tA&&n.appendChild(this.createTableColGroup(this.colLevels.slice(-1)[0].length)),i},i.prototype.renderContent=function(e){var i=t.createElement("tr");e.appendChild(i);var n,r=t.createElement("td"),a=t.createElement("td"),s=[];if("Vertical"===this.parent.activeViewOptions.orientation&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive)s.push(r),r.appendChild(this.parent.resourceBase.createResourceColumn()),this.rowCount=this.parent.resourceBase.renderedResources.length;else{s.push(r);var o=t.createElement("div",{className:n8});r.appendChild(o),o.appendChild(this.createTableLayout()),n=o.querySelector("tbody")}s.push(a),t.append(s,i);var l=t.createElement("div",{className:iw});a.appendChild(l);var h=this.createTableLayout(tx);this.setAriaAttributes(h),l.appendChild(h);var p=t.createElement("div",{className:tz});l.appendChild(p),this.parent.virtualScrollModule&&this.parent.virtualScrollModule.renderVirtualTrack(l);var c=h.querySelector("tbody");if(this.parent.rowAutoHeight){var d=[h],u=this.parent.element.querySelector("."+n8+" ."+tS);u&&d.push(u),t.addClass(d,n6)}if(this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive){var m="Horizontal"===this.parent.activeViewOptions.orientation?this.colLevels.slice(-1)[0].length:this.columnCount;h.appendChild(this.createTableColGroup(m)),this.renderResourceContent(p,n,c)}else h.appendChild(this.createTableColGroup(this.columnCount)),this.renderDefaultContent(p,n,c)},i.prototype.renderDefaultContent=function(e,i,n){for(var r=this.getMonths(),a=this.getMonthDates(new Date(this.parent.selectedDate.getFullYear(),r[0],1)),s=0;s<this.rowCount;s++){e.appendChild(t.createElement("div",{className:ih}));var o=new Date(this.parent.selectedDate.getFullYear(),r[parseInt(s.toString(),10)],1),l=this.parent.calendarUtil.getMonthStartDate(new Date(o.getTime())),h=this.parent.calendarUtil.getMonthEndDate(new Date(o.getTime())),p=t.createElement("tr"),c=p.cloneNode();i.appendChild(c);var d=p.cloneNode();n.appendChild(d);var u=t.createElement("td",{className:iO});"Horizontal"===this.parent.activeViewOptions.orientation?(this.parent.monthHeaderTemplate?t.append(this.renderDayMonthHeaderTemplate(l,s,"monthHeaderTemplate"),u):u.innerHTML="<span>"+this.getMonthName(o)+"</span>",u.setAttribute("data-date",o.getTime().toString())):this.parent.dayHeaderTemplate?t.append(this.renderDayMonthHeaderTemplate(a[parseInt(s.toString(),10)],s,"dayHeaderTemplate"),u):u.innerHTML="<span>"+this.parent.getDayNames("abbreviated")[s%7]+"</span>",c.appendChild(u),this.parent.trigger(e2,{elementType:"leftHeaderCells",element:u});for(var m=new Date(l.getTime()),f=0;f<this.columnCount;f++){var v=void 0;if("Vertical"===this.parent.activeViewOptions.orientation){o=new Date(this.parent.selectedDate.getFullYear(),r[parseInt(f.toString(),10)],1),l=this.parent.calendarUtil.getMonthStartDate(new Date(o.getTime())),h=this.parent.calendarUtil.getMonthEndDate(new Date(o.getTime()));var g=s-l.getDay()+1;m=new Date(this.parent.selectedDate.getFullYear(),r[parseInt(f.toString(),10)],g),v=g>0&&m.getTime()<h.getTime()}else v=f>=l.getDay()&&m.getTime()<h.getTime();var y=this.parent.globalize.formatDate(m,{skeleton:"full",calendar:this.parent.getCalendarMode()}),b=t.createElement("td",{className:tM,attrs:{"aria-selected":"false","aria-label":y}});d.appendChild(b);var D=t.createElement("div",{className:iV+" "+iM,innerHTML:v?this.parent.globalize.formatDate(m,{skeleton:"d",calendar:this.parent.getCalendarMode()}):""});if(v){var w=[b],C=[];this.parent.activeViewOptions.workDays.indexOf(m.getDay())>-1&&C.push(tH),this.parent.isMinMaxDate(m)||t.addClass([b],nG),this.isCurrentDate(m)&&(C.push(tF),"Horizontal"===this.parent.activeViewOptions.orientation?w.push(this.element.querySelector("."+tP+":nth-child("+(f+1)+")")):w.push(this.element.querySelectorAll("."+iO).item(s))),C.length>0&&t.addClass(w,C)}else t.addClass([b],tR),this.parent.isMinMaxDate(m)||t.addClass([b],nG);b.classList.contains(tR)||(this.renderDates.push(new Date(m)),b.appendChild(D),v&&(b.setAttribute("data-date",m.getTime().toString()),this.wireEvents(b)),this.renderCellTemplate({date:m,type:"workCells"},b),this.parent.trigger(e2,{elementType:"workCells",element:b,date:m}),v&&"Horizontal"===this.parent.activeViewOptions.orientation&&(m=S(new Date(m.getTime()),1)))}}this.renderDates.splice(0,1)},i.prototype.getContentRows=function(){for(var e=[],i=this.getMonths(),n=0;n<this.parent.resourceBase.renderedResources.length;n++){var r=t.createElement("tr");e.push(r);var a=void 0;this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&(a=this.parent.resourceBase.renderedResources[parseInt(n.toString(),10)]);for(var s=new Date(this.parent.selectedDate.getFullYear(),i[parseInt(n.toString(),10)],1),o=this.parent.calendarUtil.getMonthStartDate(new Date(s.getTime())),l=0;l<this.columnCount;l++){var h=[],p=a.groupIndex;(h=h.concat(a.className)).indexOf(tX)>-1?h.push(tY):h.push(tH),s=new Date(this.parent.selectedDate.getFullYear(),i[parseInt(l.toString(),10)],1),o=this.parent.calendarUtil.getMonthStartDate(new Date(s.getTime()));var c=t.createElement("td",{className:tM,attrs:{"aria-selected":"false","data-date":o.getTime().toString()}});t.addClass([c],h),c.setAttribute("data-group-index",p.toString()),this.renderCellTemplate({date:o,type:"resourceGroupCells",groupIndex:p},c),this.wireEvents(c),this.parent.trigger(e2,{elementType:"resourceGroupCells",element:c,date:o}),r.appendChild(c)}}return e},i.prototype.renderResourceContent=function(e,i,n){for(var r=this.getMonths(),a=0;a<this.rowCount;a++){e.appendChild(t.createElement("div",{className:ih}));var s=t.createElement("tr");n.appendChild(s);var o=void 0;"Vertical"===this.parent.activeViewOptions.orientation&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&(o=this.parent.resourceBase.renderedResources[parseInt(a.toString(),10)]);var l=new Date(this.parent.selectedDate.getFullYear(),r[parseInt(a.toString(),10)],1),h=this.parent.calendarUtil.getMonthStartDate(new Date(l.getTime()));if("Horizontal"===this.parent.activeViewOptions.orientation){var p=s.cloneNode();i.appendChild(p);var c=t.createElement("td",{className:iO,attrs:{"data-date":h.getTime().toString()}});this.parent.monthHeaderTemplate?t.append(this.renderDayMonthHeaderTemplate(l,a,"monthHeaderTemplate"),c):c.innerHTML="<span>"+this.getMonthName(l)+"</span>",p.appendChild(c)}for(var d=0;d<this.columnCount;d++){var u=[],m=void 0;"Vertical"===this.parent.activeViewOptions.orientation?(m=o.groupIndex,(u=u.concat(o.className)).indexOf(tX)>-1?u.push(tY):u.push(tH),l=new Date(this.parent.selectedDate.getFullYear(),r[parseInt(d.toString(),10)],1),h=this.parent.calendarUtil.getMonthStartDate(new Date(l.getTime()))):(m=this.colLevels.slice(-1)[0][parseInt(d.toString(),10)].groupIndex,u.push(tH));var f=t.createElement("td",{className:tM,attrs:{"aria-selected":"false","data-date":h.getTime().toString()}});t.addClass([f],u),f.setAttribute("data-group-index",m.toString()),this.renderCellTemplate({date:h,type:"resourceGroupCells",groupIndex:m},f),this.wireEvents(f),s.appendChild(f),this.parent.trigger(e2,{elementType:"resourceGroupCells",element:f,date:h})}}"Vertical"===this.parent.activeViewOptions.orientation&&this.collapseRows(this.parent.element.querySelector("."+iw))},i.prototype.renderDayMonthHeaderTemplate=function(e,t,i){var n={date:e,type:"dayHeaderTemplate"===i?"dayHeader":"monthHeader"},r="schedule_"+this.parent.activeViewOptions.dayHeaderTemplateName+"dayHeaderTemplate",a="schedule_"+this.parent.activeViewOptions.dayHeaderTemplateName+"monthHeaderTemplate";return"dayHeaderTemplate"===i?(n.day=this.parent.getDayNames("wide")[t%7],[].slice.call(this.parent.getDayHeaderTemplate()(n,this.parent,"dayHeaderTemplate",r,!1))):[].slice.call(this.parent.getMonthHeaderTemplate()(n,this.parent,"monthHeaderTemplate",a,!1))},i.prototype.renderCellTemplate=function(e,i){if(this.parent.activeViewOptions.cellTemplate&&!i.classList.contains(tR)){var n={date:e.date,type:e.type};e.groupIndex&&(n.groupIndex=e.groupIndex);var r=this.parent.element.id+"_"+this.parent.activeViewOptions.cellTemplateName+"cellTemplate",a=[].slice.call(this.parent.getCellTemplate()(n,this.parent,"cellTemplate",r,!1));t.append(a,i)}},i.prototype.scrollToDate=function(e){t=null!==this.parent.activeViewOptions.group.resources&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive?+new Date(C(g(e))):+new Date(C(e));var t,i=this.element.querySelector('[data-date="'+t+'"]');if(i){var n=this.getScrollableElement();if(this.parent.enableRtl){var r=this.element.querySelector("."+tx);n.scrollLeft=-(r.offsetWidth-i.offsetLeft-i.offsetWidth)}else n.scrollLeft=i.offsetLeft;n.scrollTop=i.offsetTop}},i.prototype.getScrollableElement=function(){return this.parent.isAdaptive&&!this.isTimelineView()?this.element.querySelector("."+t5):this.getContentAreaElement()},i.prototype.wireEvents=function(e){t.EventHandler.add(e,"mousedown",this.parent.workCellAction.cellMouseDown,this.parent.workCellAction),t.EventHandler.add(e,"click",this.parent.workCellAction.cellClick,this.parent.workCellAction),this.parent.isAdaptive||t.EventHandler.add(e,"dblclick",this.parent.workCellAction.cellDblClick,this.parent.workCellAction)},i}(so),sw=function(){function e(e){this.parent=e}return e.prototype.initializeCalendarExport=function(e,t){var i=this.getCalendarString(e,t);this.download(i,e)},e.prototype.getCalendarString=function(e,i){var n=this,r=i||t.extend([],this.parent.eventsData,null,!0);r=this.parent.eventBase.sortByTime(r);var a=-1!==navigator.appVersion.indexOf("Win")?"\r\n":"\n",s=[],o=[],l=this.parent.timezone||this.parent.tzModule.getLocalTimezoneName(),h=this.parent.eventFields;return r.forEach(function(e){var i=e[h.id]||e.Guid||n.parent.eventBase.generateGuid(),p=[];if(e[h.recurrenceID]){var c=n.filterEvents(o,h.id,e[h.recurrenceID]);i=c.length>0?c[0].UID:i}if(!e[h.recurrenceID]&&e[h.recurrenceRule]&&e[h.recurrenceException]){var d=e[h.recurrenceException].split(",");n.filterEvents(r,h.recurrenceID,e[h.id]).forEach(function(e){p.push(eu(e[h.startTime]))});var u=d.filter(function(e){return -1===p.indexOf(e)});e[h.recurrenceException]=u.length>0?u.join(",")+",":""}var m=e[h.startTimezone]||l,f=e[h.endTimezone]||l,v=!!e[h.isReadonly]&&e[h.isReadonly],g=["BEGIN:VEVENT","LOCATION:"+(e[h.location]||""),"SUMMARY:"+(e[h.subject]||""),"UID:"+i,"DESCRIPTION:"+(e[h.description]||""),"ISREADONLY:"+v,"END:VEVENT"];if(e[h.isAllDay]?(g.splice(4,0,"DTEND;VALUE=DATE:"+n.convertDateToString(e[h.endTime],!0)),g.splice(4,0,"DTSTART;VALUE=DATE:"+n.convertDateToString(e[h.startTime],!0))):e[h.isAllDay]||e[h.recurrenceRule]?(g.splice(4,0,'DTEND;TZID="'+f+'":'+n.convertDateToString(e[h.endTime])),g.splice(4,0,'DTSTART;TZID="'+m+'":'+n.convertDateToString(e[h.startTime]))):(g.splice(4,0,"DTEND:"+n.convertDateToString(e[h.endTime])),g.splice(4,0,"DTSTART:"+n.convertDateToString(e[h.startTime]))),e[h.recurrenceRule]&&g.splice(4,0,"RRULE:"+e[h.recurrenceRule]),e[h.recurrenceException]){d=e[h.recurrenceException].split(",");for(var y=0;y<d.length-1;y++)g.splice(5,0,"EXDATE:"+n.convertDateToString(Y(d[parseInt(y.toString(),10)]),e[h.isAllDay]))}e[h.recurrenceID]&&g.splice(4,0,'RECURRENCE-ID;TZID="'+m+'":'+n.convertDateToString(e[h.startTime],e[h.isAllDay]));var b=n.customFieldFilter(e,h);b.length>0&&b.forEach(function(t){return g.splice(4,0,t+":"+(e[""+t]||""))});var D=t.extend({},e);D.UID=i,o.push(D),s.push(g.join(a))}),["BEGIN:VCALENDAR","PRODID:-//Syncfusion Inc//Scheduler//EN","VERSION:2.0","CALSCALE:GREGORIAN","METHOD:PUBLISH","X-WR-CALNAME:"+(e||"Calendar"),"X-WR-TIMEZONE:"+l].join(a)+a+s.join(a)+a+"END:VCALENDAR"},e.prototype.customFieldFilter=function(e,t){var i=Object.keys(t).map(function(e){return t[""+e]});return Object.keys(e).filter(function(e){return -1===i.indexOf(e)&&"Guid"!==e})},e.prototype.convertDateToString=function(e,t){var i=("0000"+e.getFullYear().toString()).slice(-4),n=("00"+(e.getMonth()+1).toString()).slice(-2),r=("00"+e.getDate().toString()).slice(-2),a=("00"+e.getHours().toString()).slice(-2),s=("00"+e.getMinutes().toString()).slice(-2),o=("00"+e.getSeconds().toString()).slice(-2);return t?i+n+r:i+n+r+"T"+a+s+o},e.prototype.download=function(e,t){var i=new Blob([e],{type:"data:text/calendar;charset=utf8"});if(t=(t||"Calendar")+".ics",navigator.msSaveBlob)navigator.msSaveBlob(i,t);else{var n=document.createElementNS("http://www.w3.org/1999/xhtml","a");n.download=t,n.href=URL.createObjectURL(i);var r=document.createEvent("MouseEvent");r.initEvent("click",!0,!0),n.dispatchEvent(r),setTimeout(function(){URL.revokeObjectURL(n.href),n.href=void 0})}},e.prototype.filterEvents=function(e,t,i){return e.filter(function(e){return e[""+t]===i})},e.prototype.getModuleName=function(){return"iCalendarExport"},e.prototype.destroy=function(){!this.parent||this.parent&&this.parent.isDestroyed||(this.parent=null)},e}(),sC=function(){function e(e){this.allDay=!1,this.parent=e}return e.prototype.initializeCalendarImport=function(e){var t=this;if(e&&e instanceof Blob){var i=new FileReader;i.onload=function(){var e=i.result;t.iCalendarParser(e)},i.readAsText(e,"UTF-8")}else e&&"string"==typeof e&&this.iCalendarParser(e)},e.prototype.iCalendarParser=function(e){var i,n,r={isEvent:!1,curEvent:null,id:this.parent.eventBase.getEventMaxID(),count:0,events:[],key:null},a=e.length,s=e.search(/[^ \t]/),o=s;do{0===(o=e.indexOf("\n",s)+1)?(o=a,n=0):n=o>1&&"\r"===e[o-2]?2:1;var l=e[s];" "===l||"\n"===l||"	"===l?i+=e.slice(s+1,o-n):(i&&(r=this.updateEventData(i,r)),i=e.slice(s,o-n)),s=o}while(o!==a);(i=i.trim()).length&&(r=this.updateEventData(i,r));var h=t.extend([],r.events,null,!0);this.parent.addEvent(this.processOccurrence(h,r.id))},e.prototype.updateEventData=function(e,i){var n=this.parent.eventFields,r=i.id,a=i.events,s=i.isEvent,o=i.count,l=i.curEvent,h=i.key;if(s||"BEGIN:VEVENT"!==e||(s=!0,l={}),s&&"END:VEVENT"===e&&(s=!1,a.push(l),l=null),s){var p=e.indexOf(":"),c=e.substring(0,p).replace(/^\s\s*/,"").replace(/\s\s*$/,""),d=e.substring(p+1,e.length).replace(/^\s\s*/,"").replace(/\s\s*$/,"");if(-1!==e.indexOf("SUMMARY")&&(c="SUMMARY"),-1!==e.indexOf("DTSTART"))l[n.startTime]=this.dateParsing(e),l[n.isAllDay]=this.allDay,this.allDay=!1;else if(-1!==e.indexOf("DTEND"))l[n.endTime]=this.dateParsing(e);else if(-1!==e.indexOf("EXDATE"))d=eu(this.dateParsing(e)),l[n.recurrenceException]=t.isNullOrUndefined(l[n.recurrenceException])?d:l[n.recurrenceException]+","+d;else if(-1!==e.indexOf("RECURRENCE-ID"))d=eu(this.dateParsing(e)),l[n.recurrenceException]=d,l[n.recurrenceID]=d;else switch(h=c||h){case"BEGIN":break;case"UID":l[""+c]=d,"number"==typeof r?(l[n.id]=parseInt(d,10),isNaN(l[n.id])&&(l[n.id]=r+o,o++)):l[n.id]=d;break;case"SUMMARY":l[n.subject]=this.getFormattedString(d);break;case"LOCATION":l[n.location]=this.getFormattedString(d);break;case"DESCRIPTION":l[n.description]?l[n.description]=this.getFormattedString(l[n.description]+"\r\n"+d):l[n.description]=this.getFormattedString(d);break;case"ISREADONLY":l[n.isReadonly]=d.indexOf("true")>-1;break;case"RRULE":l[n.recurrenceRule]=d;break;default:if(this.parent.resourceCollection.length>0){var u=this.parent.resourceCollection.filter(function(e){return e.field===c});l[""+c]=u.length>0&&"number"==typeof u[0].dataSource[0][u[0].idField]?parseInt(d,10):d}else l[""+c]=d}}return{isEvent:s,curEvent:l,id:r,count:o,events:a,key:h}},e.prototype.processOccurrence=function(e,i){var n=this,r=[],a=this.parent.eventFields,s=[];return this.parent.eventsData.forEach(function(e){s.push(e[a.id])}),e.forEach(function(o){var l,h;if(o.hasOwnProperty(a.recurrenceID)||(l=o,h=o[a.id]),0>s.indexOf(o[a.id])){var p=e.filter(function(e){return e.UID===o.UID});if(p.length>1&&t.isNullOrUndefined(o[a.recurrenceID])){h="number"==typeof i?i++:h;for(var c=0;c<p.length;c++)if(p[parseInt(c.toString(),10)].hasOwnProperty(a.recurrenceID)){var d=p[parseInt(c.toString(),10)][a.recurrenceID];p[parseInt(c.toString(),10)][a.id]="number"==typeof i?i++:n.parent.eventBase.generateGuid(),p[parseInt(c.toString(),10)][a.recurrenceID]=h,p[parseInt(c.toString(),10)][a.recurrenceException]=null,l[a.recurrenceException]=n.getExcludeDateString(l[a.recurrenceException],d),delete p[parseInt(c.toString(),10)].UID,r.push(p[parseInt(c.toString(),10)])}delete l.UID,l[a.id]=h,r.push(l)}else o.hasOwnProperty(a.recurrenceID)||(delete o.UID,o[a.id]="number"==typeof i?i++:h,r.push(o))}}),r},e.prototype.getExcludeDateString=function(e,i){if(t.isNullOrUndefined(e))return i;if(t.isNullOrUndefined(i))return e;var n=e.split(",").map(function(e){return e.split("T")[0]}),r=i.split(",").map(function(e){return e.split("T")[0]});return n.filter(function(e){return r.indexOf(e)>-1}).length>0?e:e+","+i},e.prototype.getFormattedString=function(e){return(e=e||"").replace(/\\\,/g,",").replace(/\\\;/g,";").replace(/\\[nN]/g,"\n").replace(/\\\\/g,"\\")},e.prototype.dateParsing=function(e){var t=e.split(":"),i=t[t.length-1],n=new Date(this.getFormattedString(i));if(e&&(e.indexOf("VALUE=DATE")>-1||e.indexOf("RECURRENCE-ID;TZID")>-1)){var r=/^(\d{4})(\d{2})(\d{2})$/.exec(i);null!==r&&(n=new Date(parseInt(r[1],10),parseInt(r[2],10)-1,parseInt(r[3],10))),e.indexOf("DTSTART")>-1&&(this.allDay=!0)}var a=/^(\d{4})(\d{2})(\d{2})T(\d{2})(\d{2})(\d{2})(Z)?$/.exec(i);return null!==a&&(n="Z"===a[7]?new Date(Date.UTC(parseInt(a[1],10),parseInt(a[2],10)-1,parseInt(a[3],10),parseInt(a[4],10),parseInt(a[5],10),parseInt(a[6],10))):new Date(parseInt(a[1],10),parseInt(a[2],10)-1,parseInt(a[3],10),parseInt(a[4],10),parseInt(a[5],10),parseInt(a[6],10))),n},e.prototype.getModuleName=function(){return"iCalendarImport"},e.prototype.destroy=function(){!this.parent||this.parent&&this.parent.isDestroyed},e}(),sT=function(){function e(e){this.parent=e}return e.prototype.initializeExcelExport=function(e){void 0===e&&(e={});var i,n,r=this.getExportColumns(e),a=e.fileName||"Schedule",s=e.exportType||"xlsx",o=e.includeOccurrences||!1;t.isNullOrUndefined(e.separator)||","===e.separator||(n=e.separator),i=e.customData?o?this.parent.eventBase.getProcessedEvents(e.customData):e.customData:o?this.parent.eventsProcessed:this.parent.eventsData,this.processWorkbook(r,a,s,i,n)},e.prototype.processWorkbook=function(e,i,n,r,a){var s=this,o=[],l=[],h=[];e.forEach(function(e,t){o.push({index:t+1,width:"Id"===e.name?50:150})});var c={fontSize:12,borders:{color:"#E0E0E0"},bold:!0};e.forEach(function(e,t){h.push({index:t+1,value:e.text,style:c})}),l.push({index:1,cells:h}),r.forEach(function(i,n){var r=[];e.forEach(function(e,n){var a={index:n+1,value:i[e.name]||""};(e.name===s.parent.eventFields.startTime||e.name===s.parent.eventFields.endTime)&&(a=t.extend({},a,{style:{fontSize:12,numberFormat:"m/d/yyyy h:mm AM/PM"}},!0)),r.push(a)}),l.push({index:n+2,cells:r})}),new p.Workbook({worksheets:[{columns:o,rows:l}]},n,this.parent.locale,void 0,a).save(i+"."+n)},e.prototype.getExportColumns=function(e){var t=this,i=e.fieldsInfo||[];return 0===i.length&&(e.fields||Object.keys(this.parent.eventFields).map(function(e){return t.parent.eventFields[""+e]})).forEach(function(e){i.push({name:e,text:e})}),i},e.prototype.getModuleName=function(){return"excelExport"},e.prototype.destroy=function(){this.parent=null},e}(),sE=function(){function e(e){this.parent=e}return e.prototype.print=function(e){t.isNullOrUndefined(e)?this.printScheduler():this.printSchedulerWithModel(e)},e.prototype.printScheduler=function(){var e=this.parent.element.cloneNode(!0);e.id=this.parent.element.id+"_print",document.body.appendChild(e);for(var i="MonthAgenda"===this.parent.currentView?".e-appointment-wrap":".e-content-wrap",n=this.parent.element.querySelector(i),r="",a=0,s=[].slice.call(document.getElementsByTagName("head")[0].querySelectorAll("link, style"));a<s.length;a++)r+=s[a].outerHTML;var o=t.createElement("div");e.style.width=this.parent.element.offsetWidth+"px";var l=100*Math.round(parseInt(e.style.width,10)/100);o.appendChild(e);var h=window.open("","print","height=550,width="+l+",tabbar=no");h.document.write("<!DOCTYPE html><html><head>"+r+"</head><body>"+o.innerHTML+"<script>(function() { window.ready = true; })();</script></body></html>"),h.document.close(),h.focus(),setTimeout(function(){if(h.ready&&n){n.scrollLeft=n.scrollLeft,n.scrollTop=n.scrollTop;var e=h.document.querySelector(".e-date-header-wrap");e&&(e.scrollLeft=n.scrollLeft);var t=h.document.querySelector(".e-time-cells-wrap");t&&(t.scrollTop=n.scrollTop),h.print(),h.close()}},500)},e.prototype.printSchedulerWithModel=function(e){var i=t.createElement("div",{id:this.parent.element.id+"_print",className:"e-print-schedule"});document.body.appendChild(i),aQ.Inject(a7,st,sn,sa,sc,su,sv,sy,so,sD),this.printInstance=new aQ(this.getPrintScheduleModel(e)),this.printInstance.isPrinting=!0,this.printInstance.appendTo(i),this.printInstance.on(tr,this.contentReady,this),this.printWindow=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth+",tabbar=no"),this.printWindow.moveTo(0,0),this.printWindow.resizeTo(screen.availWidth,screen.availHeight)},e.prototype.getPrintScheduleModel=function(e){for(var i,n,r,a,s={},o=["cellHeaderTemplate","dayHeaderTemplate","monthHeaderTemplate","cellTemplate","dateHeaderTemplate","dateRangeTemplate","eventTemplate","resourceHeaderTemplate","headerIndentTemplate"],l=["actionBegin","actionComplete","actionFailure","created","dataBinding","dataBound","destroyed","eventRendered","moreEventsClick","navigating","popupOpen","popupClose","renderCell"],h=0,p=["agendaDaysCount","calendarMode","cssClass","currentView","dateFormat","enableRtl","endHour","eventSettings","firstDayOfWeek","firstMonthOfYear","group","height","locale","maxDate","minDate","readonly","resources","rowAutoHeight","selectedDate","showHeaderBar","showTimeIndicator","showWeekNumber","showWeekend","startHour","timeFormat","timeScale","timezone","views","width","workDays","workHours","dateHeaderTemplate","dateRangeTemplate","cellHeaderTemplate","dayHeaderTemplate","monthHeaderTemplate","cellTemplate","resourceHeaderTemplate","headerIndentTemplate","actionBegin","actionComplete","actionFailure","created","dataBinding","dataBound","destroyed","eventRendered","moreEventsClick","navigating","popupOpen","popupClose","renderCell"];h<p.length;h++){var c=p[h];switch(c){case"eventSettings":(i=Object.assign({},this.parent.eventSettings.properties)).dataSource=this.parent.eventsData;var d=t.isNullOrUndefined(e.eventSettings)||t.isNullOrUndefined(e.eventSettings.template)?i.template:e.eventSettings.template;i.template="function"==typeof d?null:d,s.eventSettings=i;break;case"group":(n=t.isNullOrUndefined(e.group)?this.parent.group:e.group).headerTooltipTemplate=null,s.group=n;break;case"timeScale":(r=t.isNullOrUndefined(e.timeScale)?this.parent.timeScale:e.timeScale).majorSlotTemplate="function"==typeof r.majorSlotTemplate?null:r.majorSlotTemplate,r.minorSlotTemplate="function"==typeof r.minorSlotTemplate?null:r.minorSlotTemplate,e.timeScale=r;break;case"views":if((a=t.isNullOrUndefined(e.views)?this.parent.views:e.views)&&a.length>0&&"object"==typeof a[0])for(var u=function(e){o.forEach(function(i){t.isNullOrUndefined(e[""+i])||(e[""+i]="function"==typeof e[""+i]?null:e[""+i])})},m=0;m<a.length;m++)u(a[m]);s.views=a;break;default:if(o.indexOf(c)>-1){s[""+c]=t.isNullOrUndefined(e[""+c])?"function"==typeof this.parent[""+c]?null:this.parent[""+c]:"function"==typeof e[""+c]?null:e[""+c];break}if(l.indexOf(c)>-1){s[""+c]=e[""+c];break}s[""+c]=t.isNullOrUndefined(e[""+c])?this.parent[""+c]:e[""+c]}}return s},e.prototype.contentReady=function(){var e=this;this.printWindow=t.print(this.printInstance.element,this.printWindow),this.printWindow.onbeforeunload=function(){e.printInstance.off(tr,e.contentReady),e.printInstance.element.remove(),e.printInstance.destroy(),e.printInstance=null,e.printWindow=null}},e.prototype.getModuleName=function(){return"print"},e.prototype.destroy=function(){this.parent=null},e}();e.Schedule=aQ,e.cellClick=eK,e.cellDoubleClick=eX,e.moreEventsClick=eZ,e.select=eQ,e.hover="hover",e.actionBegin=eJ,e.actionComplete=e$,e.actionFailure=e0,e.navigating=e1,e.renderCell=e2,e.eventClick=e3,e.eventRendered=e6,e.dataBinding=e4,e.dataBound="dataBound",e.popupOpen=e5,e.popupClose=e8,e.dragStart="dragStart",e.drag="drag",e.dragStop="dragStop",e.resizeStart=e9,e.resizing="resizing",e.resizeStop=e7,e.inlineClick=te,e.cellSelect=tt,e.virtualScrollStart=ti,e.virtualScrollStop=tn,e.initialLoad="initial-load",e.initialEnd="initial-end",e.print=tr,e.dataReady=ta,e.eventsLoaded=ts,e.contentReady=to,e.scroll=tl,e.virtualScroll=th,e.scrollUiUpdate=tp,e.uiUpdate=tc,e.documentClick=td,e.cellMouseDown=tu,e.WEEK_LENGTH=7,e.DEFAULT_WEEKS=6,e.MS_PER_DAY=tm,e.MS_PER_MINUTE=tf,e.getElementHeightFromClass=c,e.getElementWidthFromClass=d,e.getTranslateY=u,e.getTranslateX=m,e.getWeekFirstDate=f,e.getWeekLastDate=v,e.firstDateOfMonth=g,e.lastDateOfMonth=y,e.getWeekNumber=b,e.getWeekMiddleDate=D,e.setTime=w,e.resetTime=C,e.getDateInMs=T,e.getDateCount=E,e.addDays=S,e.addMonths=O,e.addYears=k,e.getStartEndHours=x,e.getMaxDays=M,e.getDaysCount=V,e.getDateFromString=I,e.getScrollBarWidth=A,e.resetScrollbarWidth=N,e.findIndexInData=P,e.getOuterHeight=H,e.removeChildren=R,e.isDaylightSavingTime=F,e.getUniversalTime=U,e.isMobile=L,e.isIPadDevice=B,e.capitalizeFirstWord=j,e.Resize=a0,e.DragAndDrop=a6,e.HeaderRenderer=rn,e.ViewBase=a4,e.Day=a7,e.Week=st,e.WorkWeek=sn,e.Month=sa,e.Year=so,e.Agenda=sc,e.MonthAgenda=su,e.TimelineViews=sv,e.TimelineMonth=sy,e.TimelineYear=sD,e.Timezone=rp,e.timezoneData=rc,e.ICalendarExport=sw,e.ICalendarImport=sC,e.ExcelExport=sT,e.Print=sE,e.RecurrenceEditor=ad,e.generateSummary=W,e.generate=z,e.getDateFromRecurrenceDateString=Y,e.extractObjectFromRule=ep,e.getCalendarUtil=ed,e.getRecurrenceStringFromDate=eu,e.Gregorian=rl,e.Islamic=rh,Object.defineProperty(e,"__esModule",{value:!0})})(t,i(38295),i(9456),i(14514),i(79177),i(98849),i(52684),i(88451),i(24160),i(41019),i(15794))},74461:()=>{},83740:()=>{}};