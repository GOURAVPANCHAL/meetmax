exports.id=830,exports.ids=[830],exports.modules={17293:function(e,t,n){var r,a,i,o,l,s,d,c,p,h,u,g,m,f,y,v,b,S,C,w,E,k,O,x,D,A,M,F,T,j,q,R,L,P,H,N,I,B,U,_,z,V,K,W,Y,Q,X,G,J,Z,$,ee,et,en,er,ea,ei,eo,el,es,ed,ec,ep,eh,eu,eg,em,ef,ey,ev,eb,eS,eC,ew,eE,ek,eO,ex,eD,eA,eM,eF,eT,ej,eq,eR,eL,eP,eH,eN,eI,eB,eU,e_,ez,eV,eK,eW,eY,eQ,eX,eG,eJ,eZ,e$,e0,e1,e3,e2,e5,e8,e4,e9,e6,e7,te,tt,tn,tr,ta,ti,to,tl,ts,td,tc,tp,th,tu,tg,tm,tf,ty,tv,tb;/*!
*  filename: ej2-kanban.umd.min.js
*  version : 23.1.36
*  Copyright Syncfusion Inc. 2001 - 2020. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/r=n(38295),a=n(9456),i=n(98849),o=n(24160),l=n(88451),s=n(52684),d=n(14514),b="actionBegin",S="actionComplete",C="actionFailure",w="cardDoubleClick",E="cardRendered",k="queryCellInfo",O="dataBinding",x="dataBound",D="dialogOpen",A="dialogClose",M="content-ready",F="data-ready",T="dataSourceChanged",j="dataStateChange",q=function(){function e(e){this.dataState={isPending:!1,resolver:null,isDataChanged:!1},this.parent=e,this.keyField=this.parent.cardSettings.headerField,this.dataState={isDataChanged:!1},this.isObservable=!1,this.initDataManager(e.dataSource,e.query),this.refreshDataManager()}return e.prototype.initDataManager=function(e,t){this.dataManager=e instanceof i.DataManager?e:new i.DataManager(e),this.query=t instanceof i.Query?t:new i.Query,this.kanbanData=new i.DataManager(this.parent.kanbanData)},e.prototype.isRemote=function(){return!0!==this.dataManager.dataSource.offline&&void 0!==this.dataManager.dataSource.url&&""!==this.dataManager.dataSource.url},e.prototype.columnKeyFields=function(){for(var e=[],t=0,n=this.parent.columns;t<n.length;t++){var r=n[t];if(r.keyField.toString().split(",").length>1)for(var a=0,i=r.keyField.toString().split(",");a<i.length;a++){var o=i[a];e.push(o.trim())}else e.push(r.keyField.toString())}return e},e.prototype.getQuery=function(e){var t=this.query.clone();if(this.isRemote()&&this.parent.enableVirtualization){for(var n="auto"===this.parent.cardHeight?100:parseInt(r.formatUnit(this.parent.cardHeight).split("px")[0],10),a="auto"===this.parent.height?2*Math.ceil(window.innerHeight/n):2*Math.ceil(parseInt(r.formatUnit(this.parent.height).split("px")[0],10)/n),i=this.columnKeyFields(),o=0;o<i.length;o++)t.where(this.parent.keyField,"equal",i[o]);t.take(a),r.isNullOrUndefined(e)&&(e="KanbanVirtualization"),t.addParams("KanbanVirtualization",e)}return t},e.prototype.getData=function(e){if(this.parent.dataSource&&"result"in this.parent.dataSource){var t=this.eventPromise({requestType:""},e);return this.isObservable=!0,t.promise}return this.dataManager.executeQuery(e)},e.prototype.setState=function(e){return this.dataState=e},e.prototype.getStateEventArgument=function(e){var t=new i.UrlAdaptor,n=new i.DataManager({url:"",adaptor:new i.UrlAdaptor}),a=t.processQuery(n,e),o=JSON.parse(a.data);return r.extend(o,a.pvtData)},e.prototype.eventPromise=function(e,t,n){var a=this,o=this.getStateEventArgument(t),l=new i.Deferred,s=new i.Deferred;return void 0!==e.requestType&&!1!==this.dataState.isDataChanged?(o.action=e,"cardChanged"===e.requestType||"cardRemoved"===e.requestType||"cardCreated"===e.requestType)?(e.promise=s.promise,e.state=o,e.index=n,this.setState({isPending:!0,resolver:s.resolve}),e.endEdit=s.resolve,e.cancelEdit=s.reject,this.parent.trigger(T,e),s.promise.then(function(){a.setState({isPending:!0,resolver:l.resolve}),a.parent.trigger(j,o),e.addedRecords.forEach(function(e){a.parent.kanbanData.push(e)}),e.changedRecords.forEach(function(e){var t=a.parent.kanbanData.filter(function(t){return t[a.parent.cardSettings.headerField]===e[a.parent.cardSettings.headerField]})[0];r.extend(t,e)}),e.deletedRecords.forEach(function(e){var t=a.parent.kanbanData.findIndex(function(t){return t[a.parent.cardSettings.headerField]===e[a.parent.cardSettings.headerField]});a.parent.kanbanData.splice(t,1)})}).catch(function(){a.parent.hideSpinner()})):(this.setState({isPending:!0,resolver:l.resolve}),this.parent.trigger(j,o)):(this.setState({}),l.resolve(this.parent.dataSource)),l},e.prototype.getTable=function(){return this.parent.query?this.getQuery().fromTable:null},e.prototype.refreshDataManager=function(){var e=this;this.getData(this.getQuery()).then(function(t){return e.dataManagerSuccess(t)}).catch(function(t){return e.dataManagerFailure(t)})},e.prototype.dataManagerSuccess=function(e,t,n,r){var a=this;this.parent.isDestroyed||(t?(this.updateKanbanData(e),this.parent.enableVirtualization&&this.isRemote()&&this.parent.virtualLayoutModule.refresh()):this.parent.trigger(O,e,function(e){a.updateKanbanData(e),a.parent.notify(F,{processedData:a.parent.kanbanData}),a.parent.trigger(x,null,function(){return a.parent.hideSpinner()})}))},e.prototype.updateKanbanData=function(e){var t=r.extend([],r.isNullOrUndefined(e.result.result)?e.result:e.result.result,null,!0);if(this.isRemote()&&this.parent.enableVirtualization&&t.length>0&&!r.isNullOrUndefined(e.result.count))for(var n=this.columnKeyFields(),a=0;a<n.length;a++)e.result.count[a].Key===n[a]&&(this.parent.columnDataCount[n[a]]=e.result.count[a].Value);this.parent.kanbanData=t},e.prototype.dataManagerFailure=function(e){var t=this;this.parent.isDestroyed||this.parent.trigger(C,{error:e},function(){return t.parent.hideSpinner()})},e.prototype.updateDataManager=function(e,t,n,a,i,o,l,s,d,c){var p=this;this.parent.showSpinner();var h,u={requestType:n,cancel:!1,addedRecords:t.addedRecords,changedRecords:t.changedRecords,deletedRecords:t.deletedRecords};this.setState({isDataChanged:!0}),this.eventPromise(u,this.query,i),this.parent.trigger(S,u,function(n){if(!n.cancel){switch(e){case"insert":h=p.dataManager.insert(a,p.getTable(),p.getQuery());break;case"update":p.parent.enableVirtualization&&!p.parent.dataModule.isRemote()&&o?(h=p.dataManager.remove(p.keyField,a,p.getTable(),p.getQuery()),h=p.dataManager.insert(a,p.getTable(),p.getQuery(),p.dataManager.dataSource.json.findIndex(function(e){return e[p.parent.cardSettings.headerField]===l}))):h=p.dataManager.update(p.keyField,a,p.getTable(),p.getQuery());break;case"delete":h=p.dataManager.remove(p.keyField,a,p.getTable(),p.getQuery());break;case"batch":if(!p.parent.dataModule.isRemote()&&o&&p.parent.enableVirtualization&&a){for(var u=0;u<a.length;u++)h=p.dataManager.remove(p.keyField,a[u],p.getTable(),p.getQuery());var g=p.dataManager.dataSource.json.findIndex(function(e){return e[p.parent.cardSettings.headerField]===l});for(u=0;u<a.length;u++,g++)h=p.dataManager.insert(a[u],p.getTable(),p.getQuery(),g)}else h=p.dataManager.saveChanges(t,p.keyField,p.getTable(),p.getQuery())}p.dataManager.dataSource.offline?p.isObservable||(p.kanbanData=p.dataManager,p.parent.kanbanData=p.dataManager.dataSource.json,i=s===d&&c?i-1:i,p.refreshUI(n,i,o),p.parent.enableVirtualization&&p.parent.virtualLayoutModule.refreshColumnData(s,d,n.requestType,a[p.parent.keyField])):h.then(function(e){!p.parent.isDestroyed&&(p.getData(p.getQuery()).then(function(e){return p.dataManagerSuccess(e,"DataSourceChange",n,i)}).catch(function(e){return p.dataManagerFailure(e)}),"cardCreated"===n.requestType?Array.isArray(e)?p.modifyArrayData(n.addedRecords,e):n.addedRecords[0]=r.extend(n.addedRecords[0],e):"cardChanged"===n.requestType?Array.isArray(e)?p.modifyArrayData(n.changedRecords,e):n.changedRecords[0]=r.extend(n.changedRecords[0],e):"cardRemoved"===n.requestType&&(Array.isArray(e)?p.modifyArrayData(n.deletedRecords,e):n.deletedRecords[0]=r.extend(n.deletedRecords[0],e)),i=s===d&&c?i-1:i,p.refreshUI(n,i,o),p.parent.enableVirtualization&&p.parent.virtualLayoutModule.refreshColumnData(s,d,n.requestType,a[p.parent.keyField]))}).catch(function(e){p.dataManagerFailure(e)})}})},e.prototype.modifyArrayData=function(e,t){if(e.length===t.length)for(var n=0;n<t.length;n++)e[n]=r.extend(e[n],t[n]);return e},e.prototype.refreshUI=function(e,t,n){var r=this;this.parent.enableVirtualization?(this.parent.virtualLayoutModule.columnData=this.parent.virtualLayoutModule.getColumnCards(),e.addedRecords.forEach(function(a,i){r.parent.virtualLayoutModule.renderCardBasedOnIndex(a,t+i,n,e.requestType)}),e.changedRecords.forEach(function(a){r.parent.virtualLayoutModule.removeCard(a),r.parent.virtualLayoutModule.renderCardBasedOnIndex(a,t,n,e.requestType),r.parent.virtualLayoutModule.isSelectedCard&&r.parent.actionModule.SingleCardSelection(a),r.parent.sortSettings.field&&"Index"===r.parent.sortSettings.sortBy&&"Descending"===r.parent.sortSettings.direction&&t>0?--t:t++}),e.deletedRecords.forEach(function(e){r.parent.virtualLayoutModule.removeCard(e)}),this.parent.virtualLayoutModule.refresh()):(this.parent.layoutModule.columnData=this.parent.layoutModule.getColumnCards(),this.parent.swimlaneSettings.keyField&&(this.parent.layoutModule.kanbanRows=this.parent.layoutModule.getRows(),this.parent.layoutModule.swimlaneData=this.parent.layoutModule.getSwimlaneCards()),e.addedRecords.forEach(function(e,n){r.parent.swimlaneSettings.keyField&&!e[r.parent.swimlaneSettings.keyField]&&(e[r.parent.swimlaneSettings.keyField]=""),r.parent.layoutModule.renderCardBasedOnIndex(e,t+n)}),e.changedRecords.forEach(function(e){r.parent.swimlaneSettings.keyField&&!e[r.parent.swimlaneSettings.keyField]&&(e[r.parent.swimlaneSettings.keyField]=""),r.parent.layoutModule.removeCard(e),r.parent.layoutModule.renderCardBasedOnIndex(e,t),r.parent.layoutModule.isSelectedCard&&r.parent.actionModule.SingleCardSelection(e),r.parent.sortSettings.field&&"Index"===r.parent.sortSettings.sortBy&&"Descending"===r.parent.sortSettings.direction&&t>0?--t:t++}),e.deletedRecords.forEach(function(e){r.parent.layoutModule.removeCard(e)}),this.parent.layoutModule.refresh()),this.parent.renderTemplates(),this.parent.notify(M,{}),this.parent.trigger(x,e,function(){return r.parent.hideSpinner()})},e}(),c=function(e,t){return(c=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},R=function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},L=function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},P=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return R(t,e),L([r.Property()],t.prototype,"keyField",void 0),L([r.Property()],t.prototype,"textField",void 0),L([r.Property(!1)],t.prototype,"showEmptyRow",void 0),L([r.Property(!0)],t.prototype,"showItemCount",void 0),L([r.Property(!1)],t.prototype,"allowDragAndDrop",void 0),L([r.Property()],t.prototype,"template",void 0),L([r.Property("Ascending")],t.prototype,"sortDirection",void 0),L([r.Property()],t.prototype,"sortComparer",void 0),L([r.Property(!0)],t.prototype,"showUnassignedRow",void 0),L([r.Property(!1)],t.prototype,"enableFrozenRows",void 0),t}(r.ChildProperty),p=function(e,t){return(p=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},H=function(e,t){function n(){this.constructor=e}p(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},N=function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},I=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return H(t,e),N([r.Property(!0)],t.prototype,"showHeader",void 0),N([r.Property()],t.prototype,"headerField",void 0),N([r.Property()],t.prototype,"contentField",void 0),N([r.Property()],t.prototype,"tagsField",void 0),N([r.Property()],t.prototype,"grabberField",void 0),N([r.Property()],t.prototype,"footerCssField",void 0),N([r.Property()],t.prototype,"template",void 0),N([r.Property("Single")],t.prototype,"selectionType",void 0),t}(r.ChildProperty),h=function(e,t){return(h=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},B=function(e,t){function n(){this.constructor=e}h(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},U=function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return B(t,e),U([r.Property()],t.prototype,"template",void 0),U([r.Property([])],t.prototype,"fields",void 0),U([r.Property(null)],t.prototype,"model",void 0),t}(r.ChildProperty),u=function(e,t){return(u=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},z=function(e,t){function n(){this.constructor=e}u(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},V=function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},K=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return z(t,e),V([r.Property()],t.prototype,"keyField",void 0),V([r.Property()],t.prototype,"headerText",void 0),V([r.Property()],t.prototype,"template",void 0),V([r.Property(!1)],t.prototype,"allowToggle",void 0),V([r.Property(!0)],t.prototype,"isExpanded",void 0),V([r.Property()],t.prototype,"minCount",void 0),V([r.Property()],t.prototype,"maxCount",void 0),V([r.Property(!0)],t.prototype,"showItemCount",void 0),V([r.Property(!1)],t.prototype,"showAddButton",void 0),V([r.Property(!0)],t.prototype,"allowDrag",void 0),V([r.Property(!0)],t.prototype,"allowDrop",void 0),V([r.Property([])],t.prototype,"transitionColumns",void 0),t}(r.ChildProperty),g=function(e,t){return(g=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},W=function(e,t){function n(){this.constructor=e}g(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Y=function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},Q=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return W(t,e),Y([r.Property()],t.prototype,"text",void 0),Y([r.Property()],t.prototype,"keyFields",void 0),t}(r.ChildProperty),m=function(e,t){return(m=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},X=function(e,t){function n(){this.constructor=e}m(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},G=function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},J=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return X(t,e),G([r.Property("Index")],t.prototype,"sortBy",void 0),G([r.Property()],t.prototype,"field",void 0),G([r.Property("Ascending")],t.prototype,"direction",void 0),t}(r.ChildProperty),Z="e-kanban",$="e-device",ee="e-icons",et="e-template",en="e-swimlane",er="e-kanban-table",ea="e-kanban-header",ei="e-header-table",eo="e-header-cells",el="e-header-wrap",es="e-header-title",ed="e-header-text",ec="e-header-icon",ep="e-stacked-header-row",eh="e-stacked-header-cell",eu="e-content-cells",eg="e-kanban-content",em="e-content-table",ef="e-toggle-header",ey="e-header-row",ev="e-content-row",eb="e-swimlane-row",eS="e-swimlane-row-expand",eC="e-swimlane-row-collapse",ew="e-item-count",eE="e-card-wrapper",ek="e-card-virtual-wrapper",eO="e-card",ex="e-droppable",eD="e-drag",eA="e-drop",eM="e-disabled",eF="e-card-header",eT="e-card-content",ej="e-card-header-caption",eq="e-card-header-title",eR="e-card-footer",eL="e-empty-card",eP="e-card-footer-css",eH="e-column-expand",eN="e-column-collapse",eI="e-collapse-header-text",eB="e-collapsed",eU="e-kanban-dialog",e_="e-kanban-form",ez="e-kanban-error",eV="e-target-dragged-clone",eK="e-cloned-card",eW="e-kanban-dragged-card",eY="e-target-dropped-clone",eQ="e-dropping",eX="e-kanban-border",eG="e-toggle-visible",eJ="e-multi-card-wrapper",eZ="e-target-multi-clone",e$="e-column-key",e0="e-selection",e1="e-tooltip-text",e3="e-swimlane-header",e2="e-toolbar-swimlane-name",e5="e-swimlane-overlay",e8="e-swimlane-content",e4="e-swimlane-resource",e9="e-limits",e6="e-max-color",e7="e-min-color",te="e-popup-content",tt="e-show-add-button",tn="e-show-add-icon",tr="e-show-add-focus",ta="e-frozen-swimlane-row",ti=function(){function e(e){this.parent=e,this.columnToggleArray=[],this.selectionArray=[],this.lastCardSelection=null,this.lastSelectionRow=null,this.lastCard=null,this.selectedCardsElement=[],this.selectedCardsData=[],this.hideColumnKeys=[]}return e.prototype.clickHandler=function(e){var t=r.closest(e.target,".e-card,.e-header-icon,.e-content-row.e-swimlane-row,.e-show-add-button,.e-frozen-swimlane-row,.e-content-row:not(.e-swimlane-row) .e-content-cells");if(t){if(t.classList.contains(eO))this.parent.allowKeyboard&&this.parent.keyboardModule.cardTabIndexRemove(),this.cardClick(e);else if(t.classList.contains(ec))this.columnExpandCollapse(e);else if(t.classList.contains(ev)&&t.classList.contains(eb))this.rowExpandCollapse(e);else if(t.classList.contains(tt))this.addButtonClick(t);else if(t.classList.contains(ta)){var n=[].slice.call(this.parent.element.querySelectorAll("."+eb)),a=this.parent.layoutModule.frozenSwimlaneRow.querySelector("."+ee);this.rowExpandCollapse(e,n[this.parent.layoutModule.frozenOrder]),a.classList.contains(eC)?r.classList(a,[eS],[eC]):r.classList(a,[eC],[eS])}}},e.prototype.addButtonClick=function(e){var t=this,n={};if(0===this.parent.kanbanData.length)n[this.parent.cardSettings.headerField]=1;else if("number"==typeof this.parent.kanbanData[0][this.parent.cardSettings.headerField]){var a=this.parent.kanbanData.map(function(e){return parseInt(e[t.parent.cardSettings.headerField],10)});n[this.parent.cardSettings.headerField]=Math.max.apply(Math,a)+1}if(n[this.parent.keyField]=r.closest(e,"."+eu).getAttribute("data-key"),"Index"===this.parent.sortSettings.sortBy&&(n[this.parent.sortSettings.field]=1,r.closest(e,"."+eu).querySelector("."+eO))){var i="Ascending"===this.parent.sortSettings.direction?e.nextElementSibling.classList.contains(eX)?e.nextElementSibling.nextElementSibling.lastElementChild:e.nextElementSibling.lastElementChild:e.nextElementSibling.classList.contains(eX)?e.nextElementSibling.nextElementSibling.firstElementChild:e.nextElementSibling.firstElementChild,o=this.parent.getCardDetails(i);n[this.parent.sortSettings.field]=o[this.parent.sortSettings.field]+1}0!==this.parent.kanbanData.length&&this.parent.swimlaneSettings.keyField&&r.closest(e,"."+ev).previousElementSibling&&(n[this.parent.swimlaneSettings.keyField]=r.closest(e,"."+ev).previousElementSibling.getAttribute("data-key")),this.parent.openDialog("Add",n)},e.prototype.doubleClickHandler=function(e){r.closest(e.target,"."+eO)&&this.cardDoubleClick(e)},e.prototype.cardClick=function(e,t){var n=this,a=r.closest(t||e.target,"."+eO),i=this.parent.getCardDetails(a);i&&(this.parent.activeCardData={data:i,element:a},this.parent.trigger("cardClick",{data:i,element:a,cancel:!1,event:e},function(t){if(!t.cancel){if(a.classList.contains(e0)&&"click"===e.type)r.removeClass([a],e0),n.parent.enableVirtualization?n.parent.virtualLayoutModule.disableAttributeSelection(a):n.parent.layoutModule.disableAttributeSelection(a);else{var i=e.ctrlKey;n.parent.isAdaptive&&n.parent.touchModule&&(i=n.parent.touchModule.mobilePopup&&n.parent.touchModule.tabHold||i),n.cardSelection(a,i,e.shiftKey)}n.parent.isAdaptive&&n.parent.touchModule&&n.parent.touchModule.updatePopupContent();var o=r.closest(a,"."+eu);n.parent.allowKeyboard&&([].slice.call(o.querySelectorAll("."+eO)).forEach(function(e){e.setAttribute("tabindex","0")}),n.parent.keyboardModule.addRemoveTabIndex("Remove"))}}))},e.prototype.cardDoubleClick=function(e){var t=this,n=r.closest(e.target,"."+eO),a=this.parent.getCardDetails(n);this.parent.activeCardData={data:a,element:n},this.cardSelection(n,!1,!1);var i={data:a,element:n,cancel:!1,event:e};this.parent.trigger(w,i,function(e){e.cancel||t.parent.dialogModule.openDialog("Edit",i.data)})},e.prototype.rowExpandCollapse=function(e,t){var n=this,a=e instanceof HTMLElement?e:e.target,i=r.isNullOrUndefined(t)?a:t;this.parent.trigger(b,{cancel:!1,target:a,requestType:"rowExpandCollapse"},function(e){if(!e.cancel){var t,o=r.closest(i,"."+eb),l=o.getAttribute("data-key"),s=n.parent.element.querySelector("."+ev+":nth-child("+(o.rowIndex+2)+")"),d=o.querySelector("."+eS+",."+eC),c=!!o.classList.contains(eB);c?(r.removeClass([s,o],eB),r.classList(d,[eS],[eC]),n.parent.swimlaneToggleArray.splice(n.parent.swimlaneToggleArray.indexOf(l),1),t="0"):(r.addClass([s,o],eB),r.classList(d,[eC],[eS]),n.parent.swimlaneToggleArray.push(l),t="-1"),d.setAttribute("aria-label",c?l+" Expand":l+" Collapse"),o.setAttribute("aria-expanded",c.toString()),s.setAttribute("aria-expanded",c.toString()),[].slice.call(s.querySelectorAll("."+eu)).forEach(function(e){e.setAttribute("tabindex",t)}),n.parent.notify(M,{}),n.parent.trigger(S,{target:a,requestType:"rowExpandCollapse"})}})},e.prototype.columnExpandCollapse=function(e){var t=this,n=e instanceof HTMLElement?e:e.target;this.parent.trigger(b,{cancel:!1,target:n,requestType:"columnExpandCollapse"},function(e){if(!e.cancel){var a=r.closest(n,"."+eo),i=a.cellIndex;t.columnToggle(a);var o=t.parent.element.querySelectorAll("."+eo+"."+eB).length;if(o===t.parent.columns.length-t.hideColumnKeys.length){var l="."+eo+":not(."+eh+"):nth-child("+(i+1===o?1:i+2)+")",s=t.parent.element.querySelector(l);r.addClass([s],eB),t.columnToggle(s)}t.parent.notify(M,{}),t.parent.trigger(S,{target:n,requestType:"columnExpandCollapse"})}})},e.prototype.columnToggle=function(e){var t=this,n=e.cellIndex,a=[].slice.call(this.parent.element.querySelectorAll(".e-content-row:not(.e-swimlane-row)")),i="."+er+" col:nth-child("+(n+1)+")",o=e.querySelector("."+eH+",."+eN),l=[].slice.call(this.parent.element.querySelectorAll(i));if(e.classList.contains(eB)){r.removeClass(l,eB),this.parent.isAdaptive&&(this.parent.enableVirtualization?l.forEach(function(e){return e.style.width=r.formatUnit(t.parent.virtualLayoutModule.getWidth())}):l.forEach(function(e){return e.style.width=r.formatUnit(t.parent.layoutModule.getWidth())})),r.classList(o,[eH],[eN]);for(var s=0;s<a.length;s++)(function(t){var a=t.querySelector("."+eu+":nth-child("+(n+1)+")");r.removeClass([a,e],eB),r.remove(a.querySelector("."+eI)),e.setAttribute("aria-expanded","true"),a.setAttribute("aria-expanded","true"),[].slice.call(a.parentElement.querySelectorAll("."+eB)).forEach(function(e){var t=e.querySelector("."+eI);t.style.height="auto",t&&a.getBoundingClientRect().height<t.getBoundingClientRect().height+10&&(t.style.height=a.getBoundingClientRect().height-4+"px")})})(a[s]);this.columnToggleArray.splice(this.columnToggleArray.indexOf(e.getAttribute("data-key")),1),this.parent.columns[n].setProperties({isExpanded:!0},!0),e.querySelector(".e-header-icon").setAttribute("aria-label",e.getAttribute("data-key")+" Expand")}else{r.addClass(l,eB),this.parent.isAdaptive&&l.forEach(function(e){return e.style.width=r.formatUnit(50)}),r.classList(o,[eN],[eH]);for(var d=e.getAttribute("data-key"),c=this,p=0;p<a.length;p++)(function(t){var n=t.querySelector("."+eu+'[data-key="'+d+'"]'),a=n.cellIndex,i=void 0;if(c.parent.enableVirtualization){var o=c.parent.dataModule.isRemote()?c.parent.columnDataCount[c.parent.columns[a].keyField]:c.parent.virtualLayoutModule.columnData[c.parent.columns[a].keyField].length;i=(c.parent.columns[a].showItemCount?"["+o+"] ":"")+c.parent.columns[a].headerText}else i=(c.parent.columns[a].showItemCount?"["+n.querySelectorAll("."+eO).length+"] ":"")+c.parent.columns[a].headerText;n.appendChild(r.createElement("div",{className:eI,innerHTML:i})),r.addClass([n,e],eB),e.setAttribute("aria-expanded","false"),n.setAttribute("aria-expanded","false"),[].slice.call(n.parentElement.querySelectorAll("."+eB)).forEach(function(e){var t=e.querySelector("."+eI);t&&n.getBoundingClientRect().height<t.getBoundingClientRect().height+10&&(t.style.height=n.getBoundingClientRect().height-4+"px")})})(a[p]);this.columnToggleArray.push(e.getAttribute("data-key")),this.parent.columns[n].setProperties({isExpanded:!1},!0),e.querySelector(".e-header-icon").setAttribute("aria-label",d+" Collapse")}},e.prototype.cardSelection=function(e,t,n){var a=this;if(e){var i=this.parent.getSelectedCards();if("None"!==this.parent.cardSettings.selectionType){var o=r.closest(e,"."+ev);if((r.isNullOrUndefined(this.lastSelectionRow)?o.rowIndex:this.lastSelectionRow.rowIndex)!==o.rowIndex&&(t||n)&&"Multiple"===this.parent.cardSettings.selectionType)return;if(0===i.length||t&&"Single"!==this.parent.cardSettings.selectionType||(r.removeClass(i,e0),this.parent.enableVirtualization?this.parent.virtualLayoutModule.disableAttributeSelection(i):this.parent.layoutModule.disableAttributeSelection(i),i.forEach(function(e){a.selectionArray.splice(a.selectionArray.indexOf(e.getAttribute("data-id")),1),a.selectedCardsElement.splice(a.selectedCardsElement.indexOf(e),1),a.selectedCardsData.splice(a.selectedCardsData.indexOf(a.parent.getCardDetails(e),1))})),i.length>0&&n&&"Multiple"===this.parent.cardSettings.selectionType){var l=[],s=void 0,d=void 0,c=void 0,p=[].slice.call(o.querySelectorAll("."+eO));p.forEach(function(e){return l.push(e.getAttribute("data-id"))});var h=e.getAttribute("data-id"),u=this.lastCard.getAttribute("data-id"),g=d=l.indexOf(h),m=s=l.indexOf(u),f=g>m?"next":"prev";for("prev"===f&&(s=g,d=m),c=s;c<=d;c++){var y=p[c];r.addClass([y],e0),y.setAttribute("aria-selected","true"),y.setAttribute("tabindex","0"),this.selectionArray.push(y.getAttribute("data-id")),this.selectedCardsElement.push(y),this.selectedCardsData.push(this.parent.getCardDetails(y)),this.lastCardSelection=y,"prev"===f&&(this.lastCardSelection=p[s])}}else if(r.addClass([e],e0),e.setAttribute("aria-selected","true"),e.setAttribute("tabindex","0"),this.selectionArray.push(e.getAttribute("data-id")),this.selectedCardsElement.push(e),this.selectedCardsData.push(this.parent.getCardDetails(e)),this.lastCard=this.lastCardSelection=e,this.lastSelectionRow=r.closest(e,"."+ev),this.lastSelectionRow.previousElementSibling){var v=this.lastSelectionRow.previousElementSibling.querySelector(".e-swimlane-row-expand,.e-swimlane-row-collapse");v&&v.classList.contains(eC)&&this.rowExpandCollapse(v)}}}},e.prototype.addColumn=function(e,t){var n=r.createInstance(K,[this.parent,"columns",e,!0]);this.parent.columns.splice(t,0,n),this.parent.notify(F,{processedData:this.parent.kanbanData})},e.prototype.deleteColumn=function(e){var t=this.parent.element.querySelectorAll("."+eo).item(e);t&&t.classList.contains(ef)&&this.columnToggleArray.splice(this.columnToggleArray.indexOf(t.getAttribute("data-key"),0)),this.parent.columns.splice(e,1),0===this.parent.columns.length?(r.detach(this.parent.element.querySelector("."+ea)),r.detach(this.parent.element.querySelector("."+eg))):this.parent.notify(F,{processedData:this.parent.kanbanData})},e.prototype.showColumn=function(e){var t=this.hideColumnKeys.indexOf(e.toString());-1!==t&&(this.hideColumnKeys.splice(t,1),this.parent.notify(F,{processedData:this.parent.kanbanData}))},e.prototype.hideColumn=function(e){this.hideColumnKeys.push(e.toString()),this.parent.notify(F,{processedData:this.parent.kanbanData})},e.prototype.SingleCardSelection=function(e){if("None"!==this.parent.cardSettings.selectionType&&e[this.parent.cardSettings.headerField]){var t=this.parent.element.querySelector('.e-card[data-id="'+e[this.parent.cardSettings.headerField].toString()+'"]');t&&(r.addClass([t],e0),t.setAttribute("aria-selected","true"),t.setAttribute("tabindex","0"))}},e}(),to=function(){function e(e){this.parent=e}return e.prototype.addCard=function(e,t){var n=this;this.parent.trigger(b,{cancel:!1,requestType:"cardCreate",addedRecords:e instanceof Array?e:[e],changedRecords:[],deletedRecords:[]},function(r){if(!r.cancel){var a=[];n.parent.sortSettings.field&&"Index"===n.parent.sortSettings.sortBy&&(e instanceof Array?a=e:a.push(e),a.forEach(function(e,t){if(!e[n.parent.sortSettings.field]){var r=n.parent.getColumnData(e[n.parent.keyField]);"Ascending"===n.parent.sortSettings.direction&&r.length>0?e[n.parent.sortSettings.field]=r[r.length-1][n.parent.sortSettings.field]+t+1:"Descending"===n.parent.sortSettings.direction&&r.length>0&&(e[n.parent.sortSettings.field]=r[0][n.parent.sortSettings.field]+t+1),0===r.length&&(e[n.parent.sortSettings.field]=1)}}),e instanceof Array||t||"Descending"!==n.parent.sortSettings.direction||n.parent.getColumnData(a[0][n.parent.keyField]).filter(function(e,r){e[n.parent.sortSettings.field]===a[0][n.parent.sortSettings.field]&&(t=r+1)}),0===t||t||"Descending"!==n.parent.sortSettings.direction||(t=0),a=n.priorityOrder(a,t));var i={addedRecords:e instanceof Array?e:[e],changedRecords:n.parent.sortSettings.field&&"Index"===n.parent.sortSettings.sortBy?a:[],deletedRecords:[]},o=e instanceof Array||a.length>0?"batch":"insert";n.parent.dataModule.updateDataManager(o,i,"cardCreated",e,t)}})},e.prototype.getIndexFromData=function(e){var t=this.parent.element.querySelector('.e-card[data-id="'+e[this.parent.cardSettings.headerField]+'"]'),n=r.closest(t,"."+eu);return[].slice.call(n.querySelectorAll("."+eO)).indexOf(t)},e.prototype.updateCard=function(e,t,n,a,i,o,l){var s=this,d={requestType:"cardChange",cancel:!1,addedRecords:[],changedRecords:e instanceof Array?e:[e],deletedRecords:[]};t=r.isNullOrUndefined(t)?this.getIndexFromData(d.changedRecords[0]):t,this.parent.trigger(b,d,function(r){if(!r.cancel){if(s.parent.sortSettings.field&&"Index"===s.parent.sortSettings.sortBy){var d=[];e instanceof Array?d=e:d.push(e),e=s.priorityOrder(d,t)}var c={addedRecords:[],changedRecords:e instanceof Array?e:[e],deletedRecords:[]},p=e instanceof Array?"batch":"update";s.parent.dataModule.updateDataManager(p,c,"cardChanged",e,t,n,a,i,o,l)}})},e.prototype.deleteCard=function(e){var t=this,n={addedRecords:[],changedRecords:[],deletedRecords:[]};n.deletedRecords="string"==typeof e||"number"==typeof e?this.parent.kanbanData.filter(function(n){return n[t.parent.cardSettings.headerField]===e}):e instanceof Array?e:[e];var r={requestType:"cardRemove",cancel:!1,addedRecords:[],changedRecords:[],deletedRecords:n.deletedRecords};this.parent.trigger(b,r,function(e){if(!e.cancel){var r=n.deletedRecords.length>1?"batch":"delete",a=n.deletedRecords;t.parent.dataModule.updateDataManager(r,n,"cardRemoved",a[0])}})},e.prototype.priorityOrder=function(e,t){for(var n,a=this,i=e.map(function(e){return e[a.parent.cardSettings.headerField]}),o=e[e.length-1][this.parent.sortSettings.field],l=e.map(function(e){return e[a.parent.keyField]}),s=[],d=[],c=function(l){var c=e.filter(function(e){return e[a.parent.keyField]===l});n=p.parent.enableVirtualization?p.parent.virtualLayoutModule.getColumnData(l):p.parent.layoutModule.getColumnData(l);for(var h=0;h<c.length;h++){var u=c[h];if(p.parent.swimlaneSettings.keyField){var g=p.parent.getSwimlaneData(u[p.parent.swimlaneSettings.keyField]);n=p.parent.getColumnData(l,g)}}if(c.forEach(function(e){return s.push(e)}),!r.isNullOrUndefined(t)){for(var m=function(e){n.filter(function(n,r){n[a.parent.cardSettings.headerField]===i[e]&&r<=t&&d.push(r)})},f=0;f<i.length;f++)m(f);if(d.length>0&&(t+=d.length),"Ascending"===p.parent.sortSettings.direction)for(var y=t;y<n.length;y++)-1===i.indexOf(n[y][p.parent.cardSettings.headerField])&&(n[y][p.parent.sortSettings.field]=++o,s.push(n[y]));else for(y=t-1;y>=0;y--)-1===i.indexOf(n[y][p.parent.cardSettings.headerField])&&(n[y][p.parent.sortSettings.field]=++o,s.push(n[y]))}},p=this,h=0,u=l.filter(function(e,t){return l.indexOf(e)===t}).sort();h<u.length;h++)c(u[h]);return s},e}(),tl=function(){function e(e){this.insertClone="afterend",this.parent=e,this.dragObj={element:null,cloneElement:null,instance:null,targetClone:null,draggedClone:null,targetCloneMulti:null,selectedCards:[],pageX:0,pageY:0,navigationInterval:null,cardDetails:[],modifiedData:[]},this.dragEdges={left:!1,right:!1,top:!1,bottom:!1},this.isDragging=!1,this.isExternalDrop=!1}return e.prototype.wireDragEvents=function(e){var t;null!=!this.parent.element&&0===this.parent.externalDropId.length&&(t=this.parent.element.querySelector("."+eg)),this.dragObj.instance=new r.Draggable(e,{clone:!0,enableTapHold:this.parent.isAdaptive,enableTailMode:!0,cursorAt:{top:-10,left:-10},dragArea:t,dragStart:this.dragStart.bind(this),drag:this.drag.bind(this),dragStop:this.dragStop.bind(this),enableAutoScroll:!1,helper:this.dragHelper.bind(this)})},e.prototype.dragHelper=function(e){if(this.parent.isAdaptive&&this.parent.touchModule.mobilePopup&&this.parent.touchModule.mobilePopup.element.classList.contains("e-popup-open")&&this.parent.touchModule.mobilePopup.hide(),this.dragObj.element=r.closest(e.sender.target,"."+eO),r.isNullOrUndefined(this.dragObj.element))return null;this.dragObj.element.style.width=r.formatUnit(this.dragObj.element.offsetWidth);var t=r.createElement("div",{innerHTML:this.dragObj.element.outerHTML});return this.dragObj.cloneElement=t.children.item(0),r.addClass([this.dragObj.cloneElement],eK),this.dragObj.element.parentElement.appendChild(this.dragObj.cloneElement),this.dragObj.targetCloneMulti=r.createElement("div",{className:eZ}),this.dragObj.targetClone=r.createElement("div",{className:eY,styles:"width:100%;height:"+r.formatUnit(this.dragObj.element.offsetHeight)}),this.dragObj.modifiedData=[],this.dragObj.cloneElement},e.prototype.dragStart=function(e){var t=this;if(this.dragObj.selectedCards=this.dragObj.element,this.borderElm=this.parent.element.querySelectorAll("."+eX),this.dragObj.element.classList.contains(e0)){var n=r.closest(this.dragObj.element,"."+ev);this.dragObj.selectedCards=[].slice.call(n.querySelectorAll(".e-card.e-selection:not(.e-cloned-card)")),this.dragObj.selectedCards.forEach(function(e){t.dragObj.cardDetails.push(t.parent.getCardDetails(e))})}else this.dragObj.cardDetails=[this.parent.getCardDetails(this.dragObj.element)];r.isNullOrUndefined(this.dragObj.selectedCards)||r.isNullOrUndefined(this.dragObj.selectedCards.length)||!(this.dragObj.selectedCards.length>=1)?r.isNullOrUndefined(this.dragObj.selectedCards)||r.isNullOrUndefined(this.dragObj.selectedCards.closest(".e-content-cells"))||this.dragObj.selectedCards.closest(".e-content-cells").classList.add("e-dragged-column"):this.dragObj.selectedCards[0].closest(".e-content-cells").classList.add("e-dragged-column");var a={cancel:!1,data:this.dragObj.cardDetails,event:e,element:this.dragObj.selectedCards};this.parent.trigger("dragStart",a,function(n){if(n.cancel)return t.removeElement(t.dragObj.cloneElement),t.dragObj.instance.intDestroy(e),t.dragObj.element=null,t.dragObj.targetClone=null,t.dragObj.draggedClone=null,t.dragObj.cloneElement=null,void(t.dragObj.targetCloneMulti=null);if(t.dragObj.element.classList.contains(e0)){if(t.dragObj.selectedCards.forEach(function(e){t.draggedClone(e)}),t.dragObj.selectedCards.length>1){t.dragObj.cloneElement.innerHTML="";var a=r.createElement("div",{className:"e-multi-card-text",innerHTML:t.dragObj.selectedCards.length+" Cards"});t.dragObj.cloneElement.appendChild(a),r.classList(t.dragObj.cloneElement,["e-multi-card-clone"],[e0]),t.parent.enableVirtualization?t.parent.virtualLayoutModule.disableAttributeSelection(t.dragObj.cloneElement):t.parent.layoutModule.disableAttributeSelection(t.dragObj.cloneElement),t.dragObj.cloneElement.style.width="90px"}}else t.draggedClone(t.dragObj.element);r.EventHandler.add(document.body,"keydown",t.keydownHandler,t),t.parent.notify(M,{})})},e.prototype.draggedClone=function(e){this.dragObj.draggedClone=r.createElement("div",{className:eV,styles:"width:"+r.formatUnit(e.offsetWidth-1)+";height:"+r.formatUnit(e.offsetHeight)}),e.insertAdjacentElement("afterend",this.dragObj.draggedClone),r.addClass([e],eW)},e.prototype.drag=function(e){var t=this;if(e.target){var n=r.closest(e.target,".e-kanban ."+eO);r.isNullOrUndefined(n)||!this.parent.enableVirtualization||r.isNullOrUndefined(e.target.previousElementSibling)||r.isNullOrUndefined(e.target.previousElementSibling.querySelector(".e-target-dropped-clone"))||(n=e.target.previousElementSibling.querySelector(".e-target-dropped-clone").nextElementSibling);var a=e.target,i=this.parent.element.querySelector(".e-target-dropped-clone"),o=null;r.isNullOrUndefined(i)||(o=i.previousSibling),r.isNullOrUndefined(e.target.parentElement)||("SPAN"===e.target.nodeName&&e.target.classList.contains("e-empty-card")?a=e.target.parentElement:"DIV"===e.target.nodeName&&e.target.classList.contains("e-kanban-border")&&(r.isNullOrUndefined(o)&&r.isNullOrUndefined(e.target.parentElement.querySelector(".e-empty-card"))||(a=e.target.parentElement)));var l,s,d,c=n||a,p=r.closest(c,".e-content-row:not(.e-swimlane-row) .e-content-cells.e-droppable");if(c.nextElementSibling&&c.nextElementSibling.lastChild&&(d=c.nextElementSibling.lastChild.previousElementSibling),this.externalDrop(c),this.kanbanObj=this.parent.isExternalKanbanDrop?this.parent.externalDropObj:this.parent,this.calculateArgs(e),p&&"not-allowed"!==document.body.style.cursor){var h=this.getColumnKey(p),u=h.split(",");this.multiCloneRemove();var g=h===this.getColumnKey(r.closest(this.dragObj.draggedClone,"."+eu));if(1===u.length||g){if(c.classList.contains(eV)&&this.removeElement(this.dragObj.targetClone,this.kanbanObj),c.classList.contains(eO)||"beforebegin"===this.insertClone){var m=c.classList.contains(eV)&&c.previousElementSibling.classList.contains(eW)?null:c.previousElementSibling;if(this.insertClone="afterend",r.isNullOrUndefined(m)){var f=c.classList.contains(eV)?this.dragObj.pageY/2:this.dragObj.pageY,y=c.classList.contains(eV)?c.offsetHeight:c.offsetHeight/2;f-(this.kanbanObj.element.getBoundingClientRect().top+c.offsetTop)<y&&(this.insertClone="beforebegin")}c.classList.contains(eO)&&(this.parent.enableVirtualization&&(this.insertClone=this.isTargetElementVisible(c)?this.insertClone:"beforebegin"),c.insertAdjacentElement(this.insertClone,this.dragObj.targetClone))}else if(c.classList.contains(eu)&&!r.closest(c,"."+eb)){if(0!==c.querySelectorAll("."+eW).length&&0===c.querySelectorAll(".e-card:not(.e-kanban-dragged-card):not(.e-cloned-card)").length)return;c.querySelector("."+eE).appendChild(this.dragObj.targetClone)}else!c.classList.contains(eE)&&!c.classList.contains(ek)||r.closest(c,"."+eb)||0!==p.querySelectorAll("."+eO).length?!(c.classList.contains(eX)&&!r.closest(c,"."+eb)&&c.nextElementSibling&&c.nextElementSibling.classList.contains(eE)&&this.dragObj.targetClone)||d&&d.classList.contains(eY)||this.parent.enableVirtualization||this.isTargetElementVisible(c.nextElementSibling)||c.nextElementSibling.appendChild(this.dragObj.targetClone):c.appendChild(this.dragObj.targetClone)}else u.length>1&&(p.classList.contains(eQ)||p.firstChild&&p.firstChild.classList.contains(eQ))&&this.multiCloneCreate(u,p);this.kanbanObj.notify(M,{})}0===this.kanbanObj.element.querySelectorAll("."+eQ).length&&this.cellDropping();var v=!1;p&&(v=p.classList.contains(eB)&&p.classList.contains(eQ),"true"!==p.getAttribute("aria-expanded")&&p.parentElement.hasAttribute("aria-expanded")||(l=p.getBoundingClientRect(),this.updateDimension(l)),s=p.querySelector("."+eX)),c&&"TABLE"===c.tagName&&!r.isNullOrUndefined(c.querySelector("."+ev))&&(l=c.querySelector("."+ev).getBoundingClientRect(),this.updateDimension(l,c)),v&&(this.toggleVisible(c),r.addClass([p],eG));var b=[].slice.call(this.kanbanObj.element.querySelectorAll("."+eG));!(b.length>0)||c.classList.contains(eG)||r.closest(c,"."+eG)||(this.toggleVisible(c,b.slice(-1)[0]),r.removeClass(b,eG)),this.kanbanObj.notify(M,{});var S=r.closest(c,"."+e$);if(S){var C=[].slice.call(this.kanbanObj.element.querySelectorAll("."+e$+":not(."+eM+")")).filter(function(e){return t.getColumnKey(e)===t.getColumnKey(S)});C.length>0&&(r.addClass(C,"e-multi-active"),C[0].previousElementSibling&&r.addClass([C[0].previousElementSibling],"e-multi-bottom-border"))}document.body.style.cursor=p&&p.classList.contains(eQ)||p&&s&&s.classList.contains(eQ)?"":"not-allowed",!n||r.closest(n,"."+eu).classList.contains(eQ)||p&&s&&s.classList.contains(eQ)||(n.style.cursor="not-allowed",document.body.style.cursor="not-allowed"),this.isExternalDrop&&"not-allowed"===document.body.style.cursor&&(document.body.style.cursor=""),"not-allowed"===document.body.style.cursor&&(this.removeElement(this.dragObj.targetClone,this.kanbanObj),this.multiCloneRemove()),this.updateScrollPosition();var w={data:this.dragObj.cardDetails,event:e,element:this.dragObj.selectedCards};this.kanbanObj.trigger("drag",w),this.parent.isExternalKanbanDrop=!1,this.isExternalDrop=!1}},e.prototype.removeElement=function(e,t){(t=t||this.parent).element.getElementsByClassName(e.className).length>0&&r.remove(e)},e.prototype.isTargetElementVisible=function(e){var t=r.closest(e,"."+eE);if(!r.isNullOrUndefined(t)){var n=t.getBoundingClientRect().bottom;return!(e.getBoundingClientRect().bottom>n)}return!0},e.prototype.externalDrop=function(e){var t=this;this.parent.externalDropId.forEach(function(n){var a=r.closest(e,n);if(a){if(a.classList.contains("e-kanban")){t.parent.externalDropObj=document.querySelector(n).ej2_instances[0],t.parent.isExternalKanbanDrop=!0;var i=[].slice.call(t.parent.externalDropObj.element.querySelectorAll(".e-content-row:not(.e-swimlane-row):not(.e-collapsed) .e-content-cells"));r.addClass(i,eQ)}else t.isExternalDrop=!0}})},e.prototype.multiCloneCreate=function(e,t){var n=t.offsetHeight,a=t.querySelector("."+e9);a&&(n-=a.offsetHeight),this.dragObj.targetCloneMulti.style.height=r.formatUnit(n),t.querySelector("."+tt)&&r.addClass([t.querySelector("."+tt)],eJ),r.addClass([t.querySelector("."+eE)],eJ),t.querySelector("."+eE).style.height="auto",t.style.borderStyle="none",this.removeElement(this.dragObj.targetClone);for(var i=0;i<e.length;i++){var o=e[i],l=r.closest(this.dragObj.draggedClone,"."+eu),s=this.kanbanObj.columns[l.cellIndex].transitionColumns,d=this.allowedTransition(this.dragObj.element.getAttribute("data-key"),o,s),c=d?"":" "+eM,p=r.createElement("div",{className:e$+c,attrs:{"data-key":o.trim()}}),h=r.createElement("div",{className:"e-text",innerHTML:o.trim()});t.appendChild(this.dragObj.targetCloneMulti).appendChild(p).appendChild(h),p.style.cursor=d?"":"not-allowed",p.style.lineHeight=p.style.height=r.formatUnit(n/e.length),h.style.top=r.formatUnit(n/2-h.offsetHeight/2)}},e.prototype.allowedTransition=function(e,t,n){for(var r=!0,a=t.split(","),i=0;i<a.length;i++){if(e===a[i].trim())return!0;if(n){if(1===n.length&&0===n[0].length)return!0;for(var o=0;o<n.length;o++){if(a[i].trim()===n[o].trim())return!0;r=!1}}}return r},e.prototype.cellDropping=function(){var e=this,t=r.closest(this.dragObj.draggedClone,"."+eu),n=r.closest(this.dragObj.draggedClone,"."+ev);if(t&&t.classList.contains(eA)&&r.addClass([t],eQ),this.addDropping(n,t),this.kanbanObj.swimlaneSettings.keyField&&this.kanbanObj.swimlaneSettings.allowDragAndDrop){var a=[].slice.call(this.kanbanObj.element.querySelectorAll(".e-content-row:not(.e-swimlane-row):not(.e-collapsed)"));[].slice.call(a).forEach(function(r){n!==r&&e.addDropping(r,t)})}},e.prototype.addDropping=function(e,t){var n=this;if(t&&this.borderElm&&0!==this.borderElm.length){t.classList.contains(eQ)&&r.removeClass([t],eQ);var a=t.getBoundingClientRect();this.updateDimension(a)}else t&&e&&[].slice.call(e.children).forEach(function(e){var a=n.kanbanObj.columns[t.cellIndex].transitionColumns;e!==t&&e.classList.contains(eA)&&n.allowedTransition(t.getAttribute("data-key"),e.getAttribute("data-key"),a)&&r.addClass([e],eQ)})},e.prototype.updateDimension=function(e,t){[].slice.call(this.borderElm).forEach(function(n){!n.parentElement||"true"!==n.parentElement.getAttribute("aria-expanded")&&n.parentElement.hasAttribute("aria-expanded")||r.addClass([n],eQ);var a=n.previousElementSibling;n.style.height=parseInt(e.height.toString(),10)-(a&&a.classList.contains(tt)?a.offsetHeight+a.offsetTop:0)+"px",t&&"TABLE"===t.tagName||(n.style.width=parseInt(e.width.toString(),10)+"px"),n.style.left=n.parentElement.getBoundingClientRect().left-r.closest(n,".e-kanban").getBoundingClientRect().left+"px"})},e.prototype.keydownHandler=function(e){"Escape"===e.code&&this.dragObj.cloneElement&&(r.EventHandler.remove(this.dragObj.cloneElement,"keydown",this.keydownHandler),this.dragObj.element.removeAttribute("aria-grabbed"),this.dragStopClear(),this.dragStopPostClear())},e.prototype.dragStop=function(e){var t,n,a,i,o,l=this,s=r.closest(this.dragObj.targetClone,"."+eu);if(this.parent.enableVirtualization&&!r.isNullOrUndefined(s)&&s.classList.add("e-dropped-column"),r.EventHandler.remove(document.body,"keydown",this.keydownHandler),[].slice.call(this.borderElm).forEach(function(e){e.classList.remove(eQ)}),this.dragObj.targetClone.parentElement){var d=(i=this.dragObj.selectedCards&&this.dragObj.selectedCards.length>1&&"Index"===this.parent.sortSettings.sortBy)?".e-card:not(."+eK+"),."+eY:".e-card:not(."+eW+", ."+eK+"),."+eY;n=[].slice.call(this.dragObj.targetClone.parentElement.querySelectorAll(d)).indexOf(this.dragObj.targetClone),this.parent.enableVirtualization&&!r.isNullOrUndefined(this.dragObj.targetClone.nextElementSibling)&&(a=this.dragObj.targetClone.nextElementSibling.getAttribute("data-id"))}!r.isNullOrUndefined(this.kanbanObj)&&this.kanbanObj.element.querySelector("."+eZ)&&(t=r.closest(e.target,"."+e$+":not(."+eM+")")),(s||t)&&(s?o=this.getColumnKey(s):(o=this.getColumnKey(t),s=r.closest(t,"."+eu)),this.dragObj.selectedCards instanceof HTMLElement?this.updateDroppedData(this.dragObj.selectedCards,o,s):this.dragObj.selectedCards.forEach(function(e){l.updateDroppedData(e,o,s)}),this.parent.sortSettings.field&&"Index"===this.parent.sortSettings.sortBy&&this.changeOrder(this.dragObj.modifiedData,e.helper)),0===this.dragObj.modifiedData.length&&(this.dragObj.modifiedData=this.dragObj.cardDetails);var c={cancel:!1,data:this.dragObj.modifiedData,event:e,element:this.dragObj.selectedCards,dropIndex:n};this.parent.trigger("dragStop",c,function(e){if(l.dragStopClear(),!e.cancel&&(s||t)){var n=e.data instanceof Array&&e.data.length>1?e.data:e.data[0],r=void 0,o=void 0;l.parent.enableVirtualization&&(r=s.closest(".e-kanban").querySelector(".e-dragged-column").getAttribute("data-key"),o=s.getAttribute("data-key")),l.parent.crudModule.updateCard(n,e.dropIndex,!0,a,r,o,i),l.parent.enableVirtualization&&(l.parent.virtualLayoutModule.refreshColumnData(r,o),l.parent.virtualLayoutModule.ensureColumnNotEmpty(r))}l.dragStopPostClear()})},e.prototype.dragStopClear=function(){this.removeElement(this.dragObj.draggedClone),this.removeElement(this.dragObj.targetClone,this.kanbanObj),this.removeElement(this.dragObj.cloneElement),[].slice.call(this.parent.element.querySelectorAll("."+eV)).forEach(function(e){r.remove(e)}),this.dragObj.element.style.removeProperty("width"),this.multiCloneRemove(),this.dragObj.selectedCards instanceof HTMLElement?r.removeClass([this.dragObj.selectedCards],eW):r.removeClass(this.dragObj.selectedCards,eW),clearInterval(this.dragObj.navigationInterval),this.dragObj.navigationInterval=null,"not-allowed"===document.body.style.cursor&&(document.body.style.cursor=""),[].slice.call(this.parent.element.querySelectorAll(".e-card[style]")).forEach(function(e){e.style.cursor=""});var e="."+ev+":not(."+eb+")";[].slice.call(this.parent.element.querySelectorAll(e+" ."+eu)).forEach(function(e){return r.removeClass([e],eQ)}),this.parent.externalDropObj&&[].slice.call(this.parent.externalDropObj.element.querySelectorAll(e+" ."+eu)).forEach(function(e){return r.removeClass([e],eQ)})},e.prototype.dragStopPostClear=function(){this.parent.isAdaptive&&(this.parent.touchModule.tabHold=!1),this.parent.element.querySelector(".e-dragged-column")&&this.parent.element.querySelector(".e-dragged-column").classList.remove("e-dragged-column"),this.parent.element.querySelector(".e-dropped-column")&&this.parent.element.querySelector(".e-dropped-column").classList.remove("e-dropped-column"),this.dragObj.cardDetails=this.dragObj.modifiedData=[],this.isDragging=!1,this.parent.isExternalKanbanDrop=!1,this.parent.externalDropObj=null},e.prototype.updateDroppedData=function(e,t,n){var a=this.parent.getCardDetails(e),i=r.extend({},a,null,!0);if(1===t.split(",").length&&(i[this.parent.keyField]=t),this.parent.swimlaneSettings.keyField&&this.parent.swimlaneSettings.allowDragAndDrop){var o=r.closest(n,"."+ev).previousElementSibling;if(this.parent.isAdaptive){var l=this.parent.layoutModule.kanbanRows[this.parent.layoutModule.swimlaneIndex].keyField;i[this.parent.swimlaneSettings.keyField]=l}else i[this.parent.swimlaneSettings.keyField]=this.getColumnKey(o)}this.dragObj.modifiedData.push(i)},e.prototype.changeOrder=function(e,t){var n,r=this,a=!1;if(!(n="Ascending"===this.kanbanObj.sortSettings.direction?t===this.dragObj.targetClone.previousElementSibling&&this.dragObj.targetClone.previousElementSibling&&this.dragObj.targetClone.previousElementSibling.previousElementSibling?this.dragObj.targetClone.previousElementSibling.previousElementSibling:this.dragObj.targetClone.previousElementSibling:this.dragObj.targetClone.nextElementSibling)||n.classList.contains(eW)||n.classList.contains(eK)||n.classList.contains(eV)){if(this.dragObj.targetClone.nextElementSibling&&"Ascending"===this.kanbanObj.sortSettings.direction)n=this.dragObj.targetClone.nextElementSibling;else{if(!this.dragObj.targetClone.previousElementSibling||"Descending"!==this.kanbanObj.sortSettings.direction)return;n=this.dragObj.targetClone.previousElementSibling}}else a=!0;if(n.classList.contains(eO)){var i=this.kanbanObj.getCardDetails(n)[this.kanbanObj.sortSettings.field];e.length>1&&"Descending"===this.kanbanObj.sortSettings.direction&&(e=e.reverse()),e.forEach(function(e,t){a?e[r.kanbanObj.sortSettings.field]=++i:1!==i&&t<=e[r.kanbanObj.sortSettings.field]?e[r.kanbanObj.sortSettings.field]=--i:1===i&&(e[r.kanbanObj.sortSettings.field]=t+1)})}},e.prototype.toggleVisible=function(e,t){var n=this;[].slice.call(this.kanbanObj.element.querySelectorAll(".e-header-cells:not(.e-stacked-header-cell)")).forEach(function(r){n.getColumnKey(r)===n.getColumnKey(t||e)&&n.kanbanObj.actionModule.columnToggle(r)});var a=r.closest(this.dragObj.draggedClone,"."+eu);if(a){var i=r.formatUnit(a.offsetWidth-16);this.dragObj.draggedClone.style.width=i,this.dragObj.cloneElement.style.width=i}},e.prototype.multiCloneRemove=function(){var e=r.isNullOrUndefined(this.kanbanObj)?[]:[].slice.call(this.kanbanObj.element.querySelectorAll("."+eZ));e.length>0&&([].slice.call(this.kanbanObj.element.querySelectorAll("."+e$)).forEach(function(e){return r.remove(e)}),e.forEach(function(e){var t=r.closest(e,"."+eu);t&&(t.style.borderStyle="",t.querySelector("."+tt)&&r.removeClass([t.querySelector("."+tt)],eJ),r.removeClass([t.querySelector("."+eE)],eJ))}),this.removeElement(this.dragObj.targetCloneMulti,this.kanbanObj))},e.prototype.calculateArgs=function(e){var t=this.getPageCoordinates(e);this.dragObj.pageY=t.pageY,this.dragObj.pageX=t.pageX,this.isDragging=!0,this.kanbanObj.isAdaptive&&this.kanbanObj.tooltipModule&&this.kanbanObj.tooltipModule.tooltipObj.close()},e.prototype.getPageCoordinates=function(e){var t=e.event;return t&&t.changedTouches?t.changedTouches[0]:e.changedTouches?e.changedTouches[0]:t||e},e.prototype.getColumnKey=function(e){return e&&e.getAttribute("data-key")?e.getAttribute("data-key").trim():""},e.prototype.updateScrollPosition=function(){var e=this;r.isNullOrUndefined(this.dragObj.navigationInterval)&&(this.dragObj.navigationInterval=window.setInterval(function(){e.autoScroll()},100))},e.prototype.autoScrollValidation=function(){var e=this.dragObj.pageY,t=this.dragObj.pageX,n={left:!1,right:!1,top:!1,bottom:!1},r=this.kanbanObj.element.querySelector("."+eg).getBoundingClientRect();e<r.top+30+window.pageYOffset&&e>r.top+window.pageYOffset&&(n.top=!0),e>r.bottom-30+window.pageYOffset&&e<r.bottom+window.pageYOffset&&(n.bottom=!0),t<r.left+30+window.pageXOffset&&t>r.left+window.pageXOffset&&(n.left=!0),t>r.right-30+window.pageXOffset&&t<r.right+window.pageXOffset&&(n.right=!0),this.dragEdges=n},e.prototype.autoScroll=function(){if(this.autoScrollValidation(),this.kanbanObj.isAdaptive){var e;if(this.dragEdges.top||this.dragEdges.bottom?e=this.dragObj.targetClone?r.closest(this.dragObj.targetClone,"."+eE):r.closest(this.dragObj.draggedClone,"."+eE):(this.dragEdges.right||this.dragEdges.left)&&(e=this.kanbanObj.element.querySelector("."+eg)),e){var t=e.offsetHeight<=e.scrollHeight,n=e.offsetWidth<=e.scrollWidth,a=e.scrollTop>=0&&e.scrollTop+e.offsetHeight<=e.scrollHeight,i=e.scrollLeft>=0&&e.scrollLeft+e.offsetWidth<=e.scrollWidth;t&&a&&(this.dragEdges.top||this.dragEdges.bottom)&&(e.scrollTop+=this.dragEdges.top?-66:30),n&&i&&(this.dragEdges.left||this.dragEdges.right)&&((this.parent.enableVirtualization?this.kanbanObj.virtualLayoutModule.getWidth():this.kanbanObj.layoutModule.getWidth())*(this.kanbanObj.columns.length-1)>e.scrollLeft||this.dragEdges.left)&&(e.scrollLeft+=this.dragEdges.left?-30:30)}}else{var o=this.kanbanObj.element.querySelector("."+eg),l=this.dragObj.targetClone.parentElement,s=o.offsetHeight<=o.scrollHeight,d=o.offsetWidth<=o.scrollWidth,c=s&&o.scrollTop>=0&&o.scrollTop+o.offsetHeight<=o.scrollHeight,p=d&&o.scrollLeft>=0&&o.scrollLeft+o.offsetWidth<=o.scrollWidth;c&&(this.dragEdges.top||this.dragEdges.bottom)&&(o.scrollTop+=this.dragEdges.top?-30:30,this.parent.swimlaneSettings.enableFrozenRows&&(this.dragObj.cloneElement.style.top=this.dragEdges.top?parseInt(this.dragObj.cloneElement.style.top,10)-30+"px":parseInt(this.dragObj.cloneElement.style.top,10)+30+"px"),l&&(l.scrollTop+=this.dragEdges.top?-30:30)),p&&(this.dragEdges.left||this.dragEdges.right)&&(o.scrollLeft+=this.dragEdges.left?-30:30,l&&(l.scrollLeft+=this.dragEdges.left?-30:30)),this.dragObj.pageY-window.scrollY<30?window.scrollTo(window.scrollX,window.scrollY-30):window.innerHeight-(this.dragObj.pageY-window.scrollY)<30&&window.scrollTo(window.scrollX,window.scrollY+30)}},e.prototype.unWireDragEvents=function(e){if(!r.isNullOrUndefined(e)&&!r.isNullOrUndefined(e.ej2_instances[0])){var t=e.ej2_instances[0];t&&!t.isDestroyed&&t.destroy()}},e}(),ts=function(){function e(e){this.preventUpdate=!1,this.parent=e}return e.prototype.openDialog=function(e,t){this.action=e,this.parent.activeCardData.data=t,this.renderDialog(t,e),this.dialogObj.show()},e.prototype.closeDialog=function(){this.dialogObj.hide()},e.prototype.renderDialog=function(e,t){this.element=r.createElement("div",{id:this.parent.element.id+"_dialog_wrapper"}),this.parent.element.appendChild(this.element);var n={buttons:this.getDialogButtons(t),content:this.getDialogContent(e,t),cssClass:eU,enableRtl:this.parent.enableRtl,header:this.parent.localeObj.getConstant("Add"===t?"addTitle":"Edit"===t?"editTitle":"deleteTitle"),height:"auto",isModal:!0,showCloseIcon:!0,width:"Delete"===t?400:350,visible:!1,beforeOpen:this.onBeforeDialogOpen.bind(this),beforeClose:this.onBeforeDialogClose.bind(this)};this.dialogObj=new a.Dialog(r.extend(n,"Delete"!==t&&this.parent.dialogSettings.model||{}),this.element),"Delete"!==t&&this.applyFormValidation(),this.dialogObj.element.querySelector(".e-dlg-closeicon-btn").title=this.parent.localeObj.getConstant("close")},e.prototype.getDialogContent=function(e,t){if("Delete"===t)return this.parent.localeObj.getConstant("deleteContent");var n=r.createElement("div",{className:"e-kanban-form-wrapper"}),a=r.createElement("form",{id:this.parent.element.id+"EditForm",className:e_,attrs:{onsubmit:"return false;"}});if(this.parent.dialogSettings.template){e&&(this.destroyComponents(),[].slice.call(a.childNodes).forEach(function(e){return r.remove(e)}));var i=this.parent.element.id+"_dialogTemplate",o=this.parent.templateParser(this.parent.dialogSettings.template)(e,this.parent,"dialogTemplate",i,!1);r.append(o,a),this.parent.renderTemplates()}else{var l=r.createElement("div",{className:"e-kanban-dialog-content"});a.appendChild(l);var s=r.createElement("table");l.appendChild(s);for(var d=0,c=this.getDialogFields();d<c.length;d++){var p=c[d],h=r.createElement("tr");s.appendChild(h),h.appendChild(r.createElement("td",{className:"e-label",innerHTML:p.text?p.text:p.key}));var u=r.createElement("td");h.appendChild(u),u.appendChild(this.renderComponents(p))}}return n.appendChild(a),n},e.prototype.getDialogFields=function(){var e=this.parent.dialogSettings.fields;return 0===e.length&&(e=[{text:"ID",key:this.parent.cardSettings.headerField,type:"TextBox"},{key:this.parent.keyField,type:"DropDown"},{key:this.parent.cardSettings.contentField,type:"TextArea"}],this.parent.sortSettings.field&&e.splice(e.length-1,0,{key:this.parent.sortSettings.field,type:"TextBox"}),this.parent.swimlaneSettings.keyField&&e.splice(e.length-1,0,{key:this.parent.swimlaneSettings.keyField,type:"DropDown"})),e},e.prototype.getDialogButtons=function(e){var t="Delete"===e?"e-dialog-no":"e-dialog-cancel",n=[{buttonModel:{cssClass:"e-flat "+("Delete"===e?"e-dialog-yes":"Add"===e?"e-dialog-add":"e-dialog-edit"),isPrimary:!0,content:this.parent.localeObj.getConstant("Add"===e||"Edit"===e?"save":"yes")},click:this.dialogButtonClick.bind(this)},{buttonModel:{cssClass:"e-flat "+t,isPrimary:!1,content:this.parent.localeObj.getConstant("Add"===e||"Edit"===e?"cancel":"no")},click:this.dialogButtonClick.bind(this)}];if("Edit"===e){var r={buttonModel:{cssClass:"e-flat e-dialog-delete",isPrimary:!1,content:this.parent.localeObj.getConstant("delete")},click:this.dialogButtonClick.bind(this)};n.splice(0,0,r)}return n},e.prototype.renderComponents=function(e){var t=r.createElement("div",{className:e.key+"_wrapper"}),n=r.createElement("input",{className:"e-field",attrs:{name:e.key}});t.appendChild(n);var a,i,s,d=this.parent.activeCardData.data?this.parent.activeCardData.data[e.key]:null;switch(e.type){case"DropDown":if(e.key===this.parent.keyField){var c=this.parent.enableVirtualization?this.parent.virtualLayoutModule.columnKeys:this.parent.layoutModule.columnKeys;if(this.parent.actionModule.hideColumnKeys.length>0){c=[];for(var p=0;p<this.parent.columns.length;p++)(this.parent.enableVirtualization?this.parent.virtualLayoutModule.isColumnVisible(this.parent.columns[p]):this.parent.layoutModule.isColumnVisible(this.parent.columns[p]))&&(c="number"==typeof this.parent.columns[p].keyField?c.concat(this.parent.columns[p].keyField.toString()):c.concat(this.parent.columns[p].keyField.split(",").map(function(e){return e.trim()})))}i={dataSource:c,value:d?d.toString():d}}else e.key===this.parent.swimlaneSettings.keyField&&(i={dataSource:[].slice.call(this.parent.enableVirtualization?this.parent.virtualLayoutModule.kanbanRows:this.parent.layoutModule.kanbanRows),fields:{text:"textField",value:"keyField"},value:d});s=new o.DropDownList(i);break;case"Numeric":s=new l.NumericTextBox({value:d});break;case"TextBox":s=new l.TextBox({value:d}),d&&this.parent.cardSettings.headerField===e.key&&(s.enabled=!1);break;case"TextArea":r.remove(n),a=r.createElement("div"),n=r.createElement("textarea",{className:"e-field",attrs:{name:e.key,rows:"3","aria-label":this.parent.cardSettings.contentField},innerHTML:d}),t.appendChild(a).appendChild(n)}return s&&s.appendTo(n),t},e.prototype.onBeforeDialogOpen=function(e){var t=this,n={data:this.parent.activeCardData.data,cancel:!1,element:this.element,target:this.parent.activeCardData.element,requestType:this.action};this.storeElement=document.activeElement,250>=parseInt(e.maxHeight,10)&&(e.maxHeight="250px"),this.parent.trigger(D,n,function(n){e.cancel=n.cancel,n.cancel&&t.destroy()})},e.prototype.onBeforeDialogClose=function(e){var t=this,n=this.getFormElements(),a={};if(e.isInteracted&&(this.preventUpdate=!0),!this.preventUpdate)for(var i=0;i<n.length;i++){var o=n[i],l=o.name||this.getColumnName(o);if(!r.isNullOrUndefined(l)&&""!==l){var s=this.getValueFromElement(o);l===this.parent.cardSettings.headerField&&(s="string"===this.getIDType()?s:parseInt(s,10)),a[l]=s}}this.preventUpdate=!1;var d={data:a=r.extend(this.parent.activeCardData.data,a),cancel:!1,element:this.element,requestType:this.action};this.parent.trigger(A,d,function(n){e.cancel=n.cancel,n.cancel||(t.cardData=d.data,t.destroy(),t.parent.actionModule.SingleCardSelection(t.cardData))})},e.prototype.getIDType=function(){return 0!==this.parent.kanbanData.length?typeof this.parent.kanbanData[0][this.parent.cardSettings.headerField]:"string"},e.prototype.applyFormValidation=function(){for(var e=this,t=this.element.querySelector("."+e_),n={},r=0,a=this.parent.dialogSettings.fields;r<a.length;r++){var i=a[r];n[i.key]=i.validationRules&&Object.keys(i.validationRules).length>0?i.validationRules:null}this.formObj=new l.FormValidator(t,{rules:n,customPlacement:function(t,n){var r=n.getAttribute("for");e.element.querySelector("#"+r+"_Error")||e.createTooltip(t,n,r,"")},validationComplete:function(t){var n=e.element.querySelector("#"+t.inputName+"_Error");n&&(n.style.display="failure"===t.status?"":"none")}})},e.prototype.createTooltip=function(e,t,n,a){var i,o,l=e.parentElement.getBoundingClientRect();this.element.classList.contains(eU)?(i=this.element,o=this.element.getBoundingClientRect()):o=(i=this.element.querySelector(".e-kanban-dialog .e-dlg-content")).getBoundingClientRect();var s=r.createElement("div",{className:"e-tooltip-wrap e-popup "+ez,id:n+"_Error",styles:"display:"+a+";top:"+(l.bottom-o.top+i.scrollTop+9)+"px;left:"+(l.left-o.left+i.scrollLeft+l.width/2)+"px;"}),d=r.createElement("div",{className:"e-tip-content"});d.appendChild(t);var c=r.createElement("div",{className:"e-arrow-tip e-tip-top"});c.appendChild(r.createElement("div",{className:"e-arrow-tip-outer e-tip-top"})),c.appendChild(r.createElement("div",{className:"e-arrow-tip-inner e-tip-top"})),s.appendChild(d),s.appendChild(c),i.appendChild(s),s.style.left=parseInt(s.style.left,10)-s.offsetWidth/2+"px"},e.prototype.destroyToolTip=function(){this.element&&this.element.querySelectorAll("."+ez).forEach(function(e){return r.remove(e)}),this.formObj&&this.formObj.element&&this.formObj.reset()},e.prototype.dialogButtonClick=function(e){var t=e.target.cloneNode(!0),n=this.formObj.element.id;if(document.getElementById(n)&&this.formObj.validate()&&(t.classList.contains("e-dialog-edit")||t.classList.contains("e-dialog-add"))){if(this.dialogObj.hide(),t.classList.contains("e-dialog-edit")){var a=this.parent.activeCardData,i=void 0;a.data[this.parent.keyField]===this.cardData[this.parent.keyField]&&a.element&&(i=[].slice.call(a.element.parentElement.children).indexOf(a.element)),this.parent.enableHtmlSanitizer&&"string"==typeof this.cardData[this.parent.cardSettings.contentField]&&(this.cardData[this.parent.cardSettings.contentField]=r.SanitizeHtmlHelper.sanitize(this.cardData[this.parent.cardSettings.contentField])),this.parent.crudModule.updateCard(this.cardData,i)}t.classList.contains("e-dialog-add")&&this.parent.crudModule.addCard(this.cardData),this.parent.actionModule.SingleCardSelection(this.cardData),this.cardData=null}t.classList.contains("e-dialog-edit")||t.classList.contains("e-dialog-add")||(t.classList.contains("e-dialog-cancel")&&(this.preventUpdate=!0),this.dialogObj.hide(),t.classList.contains("e-dialog-yes")?this.parent.crudModule.deleteCard(this.parent.activeCardData.data):t.classList.contains("e-dialog-no")?this.openDialog("Edit",this.parent.activeCardData.data):t.classList.contains("e-dialog-delete")&&this.openDialog("Delete",this.parent.activeCardData.data))},e.prototype.getFormElements=function(){for(var e=[],t=0,n=[].slice.call(this.element.querySelectorAll(".e-field"));t<n.length;t++){var r=n[t];r.classList.contains("e-control")?e.push(r):r.querySelector(".e-control")?e.push(r.querySelector(".e-control")):e.push(r)}return e},e.prototype.getColumnName=function(e){var t=e.getAttribute("data-name")||"";if(""===t){var n=!1,a="";e.classList.contains("e-dropdownlist")||e.classList.contains("e-multiselect")?(a=e.classList.contains("e-dropdownlist")?"e-ddl":"e-multiselect",n=!0):e.classList.contains("e-numerictextbox")&&(a="e-numeric");var i=n?"."+a+":not(.e-control)":"."+a,o=r.closest(e,i)||e.querySelector("."+a);if(o){var l=o.querySelector("[name]");l&&(t=l.name)}}return t},e.prototype.getValueFromElement=function(e){return e.classList.contains("e-dropdownlist")?e.ej2_instances[0].value:e.classList.contains("e-multiselect")?e.ej2_instances[0].value:e.classList.contains("e-checkbox")?e.ej2_instances[0].checked:"checkbox"===e.type?e.checked:e.value},e.prototype.destroyComponents=function(){for(var e=0,t=this.getFormElements();e<t.length;e++){var n=t[e].ej2_instances;n&&n.length>0&&n.forEach(function(e){return e.destroy()})}},e.prototype.destroy=function(){this.destroyToolTip(),this.destroyComponents(),this.dialogObj&&(this.dialogObj.destroy(),this.storeElement.focus(),this.dialogObj=null,r.remove(this.element),this.element=null)},e}(),td=function(){function e(e){this.keyConfigs={firstCardSelection:"36",lastCardSelection:"35",upArrow:"38",downArrow:"40",rightArrow:"39",leftArrow:"37",multiSelectionEnter:"ctrl+13",multiSelectionSpace:"ctrl+32",multiSelectionByUpArrow:"shift+38",multiSelectionByDownArrow:"shift+40",shiftTab:"shift+tab",enter:"13",tab:"tab",delete:"46",escape:"27",space:"32"},this.parent=e,this.parent.element.tabIndex=-1===this.parent.element.tabIndex?0:this.parent.element.tabIndex,this.keyboardModule=new r.KeyboardEvents(this.parent.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),this.multiSelection=!1}return e.prototype.keyActionHandler=function(e){var t=this,n=this.parent.element.querySelectorAll(".e-card."+e0).item(0);if(n||r.closest(document.activeElement,"."+Z)){var a,i=[];switch(e.action){case"upArrow":case"downArrow":case"multiSelectionByUpArrow":case"multiSelectionByDownArrow":e.preventDefault(),this.processUpDownArrow(e.action,n);break;case"rightArrow":case"leftArrow":this.processLeftRightArrow(e);break;case"firstCardSelection":case"lastCardSelection":this.processCardSelection(e.action,n);break;case"multiSelectionEnter":case"multiSelectionSpace":document.activeElement&&this.parent.actionModule.cardSelection(document.activeElement,!0,!1);break;case"space":case"enter":this.processEnter(e,n);break;case"escape":if(document.activeElement.classList.contains(eO)||document.activeElement.classList.contains(tt)){if(document.activeElement.classList.contains(e0))r.removeClass([document.activeElement],e0),document.activeElement.focus();else{var o=r.closest(document.activeElement,"."+eu),l=[].slice.call(o.querySelectorAll("."+eO));r.removeClass(l,e0),o.focus(),this.cardTabIndexRemove(),this.addRemoveTabIndex("Add")}}break;case"tab":case"shiftTab":a=r.closest(document.activeElement,"."+eu),document.activeElement.classList.contains(eO)&&(document.activeElement.nextElementSibling||"tab"!==e.action||e.preventDefault(),!document.activeElement.previousElementSibling&&a.querySelector("."+tt)&&"tab"===e.action&&r.addClass([a.querySelector("."+tt)],tr)),document.activeElement.classList.contains(tt)&&(!a.querySelector("."+eO)&&"tab"===e.action||"shiftTab"===e.action)&&e.preventDefault(),document.activeElement.classList.contains(Z)&&(this.cardTabIndexRemove(),this.parent.keyboardModule.addRemoveTabIndex("Add"));break;case"delete":[].slice.call(this.parent.element.querySelectorAll(".e-card."+e0)).forEach(function(e){i.push(t.parent.getCardDetails(e))}),this.parent.crudModule.deleteCard(i)}}},e.prototype.processCardSelection=function(e,t){if(t){r.removeClass([t],e0),this.parent.enableVirtualization?this.parent.virtualLayoutModule.disableAttributeSelection(t):this.parent.layoutModule.disableAttributeSelection(t);var n=this.parent.actionModule.selectionArray;n.splice(n.indexOf(t.getAttribute("data-id")),1)}this.cardTabIndexRemove();var a=[].slice.call(this.parent.element.querySelectorAll("."+eO)),i="firstCardSelection"===e?a[0]:a[a.length-1];this.parent.actionModule.cardSelection(i,!1,!1),this.addRemoveTabIndex("Remove"),i.focus(),[].slice.call(r.closest(i,"."+eu).querySelectorAll("."+eO)).forEach(function(e){e.setAttribute("tabindex","0")})},e.prototype.processLeftRightArrow=function(e){document.activeElement.classList.contains(eu)&&("rightArrow"===e.action&&document.activeElement.nextElementSibling?document.activeElement.nextElementSibling.focus():"leftArrow"===e.action&&document.activeElement.previousElementSibling&&document.activeElement.previousElementSibling.focus())},e.prototype.processUpDownArrow=function(e,t){if("upArrow"===e&&document.activeElement){if(document.activeElement.classList.contains(eO)&&document.activeElement.previousElementSibling)document.activeElement.previousElementSibling.focus();else if(document.activeElement.classList.contains(tt)){document.activeElement.setAttribute("tabindex","-1"),r.removeClass([document.activeElement],tr);var n=r.closest(document.activeElement,"."+eu);n.querySelectorAll("."+eO).length>0&&[].slice.call(n.querySelectorAll("."+eO)).slice(-1)[0].focus()}this.removeSelection()}else if("downArrow"===e&&document.activeElement&&document.activeElement.classList.contains(eO)){if(document.activeElement.nextElementSibling)document.activeElement.nextElementSibling.focus();else if(r.closest(document.activeElement,"."+eE).nextElementSibling){var a=r.closest(document.activeElement,"."+eE).nextElementSibling;a.setAttribute("tabindex","0"),r.addClass([a],tr),a.focus()}this.removeSelection()}if(("multiSelectionByUpArrow"===e||"multiSelectionByDownArrow"===e)&&t&&"Multiple"===this.parent.cardSettings.selectionType){var i=void 0;(i="multiSelectionByUpArrow"===e?document.activeElement.previousElementSibling:document.activeElement.nextElementSibling)&&(this.parent.actionModule.cardSelection(i,!1,!0),i.focus(),this.multiSelection=!0)}},e.prototype.removeSelection=function(){if(this.multiSelection){var e=this.parent.getSelectedCards();e.length>0&&(r.removeClass(e,e0),this.parent.enableVirtualization?this.parent.virtualLayoutModule.disableAttributeSelection(e):this.parent.layoutModule.disableAttributeSelection(e)),this.multiSelection=!1}},e.prototype.cardTabIndexRemove=function(){[].slice.call(this.parent.element.querySelectorAll("."+eO)).forEach(function(e){e.setAttribute("tabindex","-1")}),[].slice.call(this.parent.element.querySelectorAll("."+tt)).forEach(function(e){e.setAttribute("tabindex","-1"),r.removeClass([e],tr)})},e.prototype.processEnter=function(e,t){"space"===e.action&&e.preventDefault();var n=e.target;if(n.classList.contains(ec)&&this.parent.actionModule.columnExpandCollapse(e),(n.classList.contains(eS)||n.classList.contains(eC))&&this.parent.actionModule.rowExpandCollapse(e),document.activeElement.classList.contains(eO)&&this.parent.actionModule.cardSelection(document.activeElement,!1,!1),document.activeElement.classList.contains(tt)&&(this.parent.dialogModule.dialogObj||this.parent.actionModule.addButtonClick(document.activeElement),document.activeElement.focus()),n.classList.contains(eu)){var r=[].slice.call(n.querySelectorAll("."+eO));this.addRemoveTabIndex("Remove"),r.length>0&&(n.querySelector("."+eO).focus(),r.forEach(function(e){e.setAttribute("tabindex","0")})),n.querySelector("."+tt)&&(n.querySelector("."+tt).setAttribute("tabindex","0"),n.querySelector("."+tt).focus())}t===document.activeElement&&1===this.parent.element.querySelectorAll("."+e0).length&&(this.parent.activeCardData={data:this.parent.getCardDetails(t),element:t},this.parent.dialogModule.dialogObj||this.parent.dialogModule.openDialog("Edit",this.parent.getCardDetails(t)),t.focus())},e.prototype.addRemoveTabIndex=function(e){var t="Add"===e?"0":"-1",n=[].slice.call(this.parent.element.querySelectorAll("."+ec));n.length>0&&n.forEach(function(e){e.setAttribute("tabindex",t)});var r=[].slice.call(this.parent.element.querySelectorAll("."+eS));r.length>0&&r.forEach(function(e){e.setAttribute("tabindex",t)}),[].slice.call(this.parent.element.querySelectorAll(".e-content-row:not(.e-swimlane-row) .e-content-cells")).forEach(function(e){e.setAttribute("tabindex",t)})},e.prototype.destroy=function(){this.keyboardModule.destroy()},e}(),tc=function(){function e(e){this.parent=e,this.renderTooltip()}return e.prototype.renderTooltip=function(){this.tooltipObj=new a.Tooltip({cssClass:this.parent.cssClass+" e-kanban-tooltip",enableRtl:this.parent.enableRtl,mouseTrail:!this.parent.isAdaptive,offsetY:5,position:"BottomCenter",showTipPointer:!0,target:"."+e1,beforeRender:this.onBeforeRender.bind(this),beforeClose:this.onBeforeClose.bind(this)}),this.tooltipObj.appendTo(this.parent.element),this.tooltipObj.isStringTemplate=!0},e.prototype.onBeforeRender=function(e){if(this.parent.dragAndDropModule.isDragging)e.cancel=!0;else{var t;if(this.parent.tooltipTemplate){t=r.createElement("div");var n=r.closest(e.target,"."+eO),a=this.parent.getCardDetails(n),i=this.parent.element.id+"_tooltipTemplate",o=this.parent.templateParser(this.parent.tooltipTemplate)(a,this.parent,"tooltipTemplate",i,!1);r.append(o,t),this.parent.renderTemplates()}else t=r.initializeCSPTemplate(function(){return'<div class="e-card-header-caption">'+e.target.innerText+"</div>"});this.tooltipObj.setProperties({content:t},!0)}},e.prototype.onBeforeClose=function(){this.parent.resetTemplates(["tooltipTemplate"])},e.prototype.destroy=function(){this.tooltipObj.destroy(),r.addClass([this.parent.element],"e-control"),this.tooltipObj=null},e}(),tp=function(){function e(e){this.parent=e,this.tabHold=!1}return e.prototype.wireTouchEvents=function(){this.element=this.parent.element.querySelector("."+eg),this.touchObj=new r.Touch(this.element,{tapHold:this.tapHoldHandler.bind(this)})},e.prototype.tapHoldHandler=function(e){this.tabHold=!0;var t=r.closest(e.originalEvent.target,"."+eO);t&&"Multiple"===this.parent.cardSettings.selectionType&&(this.parent.actionModule.cardSelection(t,!0,!1),this.mobilePopup||(this.renderMobilePopup(),this.mobilePopup.show()),this.updatePopupContent())},e.prototype.renderMobilePopup=function(){if("Multiple"===this.parent.cardSettings.selectionType){var e=r.createElement("div",{className:"e-mobile-popup-wrapper e-popup-close",innerHTML:'<div class="e-popup-header"><button class="e-close"></button></div><div class="'+te+'"></div>'});document.body.appendChild(e),r.addClass([e],$),this.mobilePopup=new a.Popup(e,{targetType:"container",enableRtl:this.parent.enableRtl,hideAnimation:{name:"ZoomOut"},showAnimation:{name:"ZoomIn"},collision:{X:"fit",Y:"fit"},position:{X:"left",Y:"top"},viewPortElement:document.body,zIndex:1004,close:this.popupClose.bind(this)});var t=this.mobilePopup.element.querySelector(".e-close"),n=new s.Button({cssClass:"e-flat e-round e-small",enableRtl:this.parent.enableRtl,iconCss:ee+" e-close-icon"});n.appendTo(t),n.isStringTemplate=!0,r.EventHandler.add(t,"click",this.closeClick,this)}},e.prototype.getPopupContent=function(){var e,t=this.parent.getSelectedCards();return t.length>1?e="("+t.length+") "+this.parent.localeObj.getConstant("cardsSelected"):1===t.length&&(e=" "+this.parent.getCardDetails(t[0])[this.parent.cardSettings.headerField]),e},e.prototype.updatePopupContent=function(){if(this.mobilePopup){var e=this.getPopupContent();e?this.mobilePopup.element.querySelector("."+te).textContent=e:this.mobilePopup.hide()}},e.prototype.closeClick=function(){this.parent.touchModule.mobilePopup.hide()},e.prototype.popupClose=function(){this.popupDestroy()},e.prototype.popupDestroy=function(){if(this.mobilePopup&&this.mobilePopup.element){var e=this.mobilePopup.element.querySelector(".e-control.e-btn").ej2_instances[0];e&&e.destroy(),this.mobilePopup.destroy(),r.remove(this.mobilePopup.element),this.mobilePopup=null}},e.prototype.unWireTouchEvents=function(){this.touchObj&&this.touchObj.destroy(),this.touchObj=null,this.element=null},e.prototype.destroy=function(){this.popupDestroy(),this.unWireTouchEvents(),this.tabHold=!1},e}(),th=function(){function e(e){this.parent=e}return e.prototype.renderSwimlaneHeader=function(){var e=r.createElement("div",{className:e3,innerHTML:'<div class="e-swimlane-header-toolbar"><div class="e-toolbar-menu"><div class="e-icons e-icon-menu"></div></div><div class="e-toolbar-level-title"><div class="'+e2+'"></div></div></div>'});this.parent.element.appendChild(e),r.EventHandler.add(e.querySelector(".e-icon-menu"),"click",this.menuClick,this)},e.prototype.renderSwimlaneTree=function(){var e=this.parent.element.querySelector("."+e3).offsetHeight,t=window.innerHeight-e;this.popupOverlay=r.createElement("div",{className:e5,styles:"height: "+t+"px;"});var n=r.createElement("div",{className:e8,styles:"top:"+e+"px;"}),i=r.createElement("div",{className:e4+" e-popup-close",styles:"height: "+t+"px;"});n.appendChild(i),n.appendChild(this.popupOverlay),this.parent.element.appendChild(n);var o=r.createElement("div",{className:"e-swimlane-tree"});i.appendChild(o);var l=this.parent.enableVirtualization?this.parent.virtualLayoutModule.kanbanRows:this.parent.layoutModule.kanbanRows;this.treeViewObj=new d.TreeView({cssClass:this.parent.cssClass,enableRtl:this.parent.enableRtl,fields:{dataSource:l,id:"keyField",text:"textField"},nodeTemplate:this.parent.swimlaneSettings.template,nodeClicked:this.treeSwimlaneClick.bind(this),drawNode:this.drawNode.bind(this)}),this.treeViewObj.appendTo(o);var s={targetType:"relative",actionOnScroll:"none",enableRtl:this.parent.enableRtl,zIndex:10,hideAnimation:{name:"SlideLeftOut",duration:500},showAnimation:{name:"SlideLeftIn",duration:500},viewPortElement:this.parent.element.querySelector("."+eg)};s.content=this.treeViewObj.element,this.treePopup=new a.Popup(i,s)},e.prototype.menuClick=function(){if(this.parent.element.querySelector("."+e4).classList.contains("e-popup-open"))this.treePopup.hide(),r.removeClass([this.popupOverlay],"e-enable");else{var e=[].slice.call(this.treeViewObj.element.querySelectorAll(".e-list-item"));r.removeClass(e,"e-active"),r.addClass([e[this.parent.layoutModule.swimlaneIndex]],"e-active"),this.treePopup.show(),r.addClass([this.popupOverlay],"e-enable")}},e.prototype.treeSwimlaneClick=function(e){this.treePopup.hide();var t=[].slice.call(this.treeViewObj.element.querySelectorAll(".e-list-item"));this.parent.layoutModule.swimlaneIndex=t.indexOf(e.node),this.parent.layoutModule.scrollLeft=0,this.parent.notify(F,{processedData:this.parent.kanbanData}),e.event.preventDefault()},e.prototype.hidePopup=function(){this.treePopup.hide(),r.removeClass([this.popupOverlay],"e-enable")},e.prototype.getWidth=function(){return 80*window.innerWidth/100},e.prototype.drawNode=function(e){if(this.parent.swimlaneSettings.template&&this.parent.isReact){var t=this.parent.element.id+"_treeviewTemplate",n=this.parent.templateParser(this.parent.swimlaneSettings.template)(e.nodeData,this.parent,"nodeTemplate",t,!1);r.append(n,e.node.querySelector(".e-list-text"))}},e}(),f=function(e,t){return(f=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},tu=function(e,t){function n(){this.constructor=e}f(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},tg=function(e){function t(t){var n=e.call(this,t)||this;return n.kanbanRows=[],n.parent=t,n.columnKeys=[],n.swimlaneIndex=0,n.swimlaneData={},n.scrollLeft=0,n.frozenOrder=0,n.parent.on(F,n.initRender,n),n.parent.on(M,n.scrollUiUpdate,n),n}return tu(t,e),t.prototype.initRender=function(){if(0!==this.parent.columns.length){if(this.columnData=this.getColumnCards(),this.kanbanRows=this.getRows(),this.swimlaneData=this.getSwimlaneCards(),this.parent.isAdaptive){var e=this.parent.element.querySelector("."+eg);e&&(this.scrollLeft=e.scrollLeft)}this.destroy(),this.parent.on(F,this.initRender,this),this.parent.on(M,this.scrollUiUpdate,this),this.parent.isAdaptive&&this.parent.swimlaneSettings.keyField&&0!==this.parent.kanbanData.length&&this.renderSwimlaneHeader();var t=r.createElement("div",{className:ea});this.parent.element.appendChild(t),this.renderHeader(t),this.renderContent(),this.renderCards(),this.renderValidation(),this.parent.renderTemplates(),this.parent.notify(M,{}),this.wireEvents(),this.parent.isInitialRender&&(this.parent.isInitialRender=!1)}},t.prototype.renderHeader=function(e){var t=r.createElement("div",{className:this.parent.swimlaneSettings.keyField?en:""});e.appendChild(t);var n=r.createElement("table",{className:er+" "+ei,attrs:{role:"table","aria-label":"Kanban board header"}});t.appendChild(n),this.renderColGroup(n);var a=r.createElement("thead");n.appendChild(a),this.parent.stackedHeaders.length>0&&a.appendChild(this.createStackedRow(this.parent.stackedHeaders));var i=r.createElement("tr",{className:ey});a.appendChild(i);for(var o=this,l=0,s=this.parent.columns;l<s.length;l++)(function(e){if(o.isColumnVisible(e)){var t=o.parent.actionModule.columnToggleArray.indexOf(e.keyField.toString()),n=r.createElement("th",{className:-1===t?eo:eo+" "+eB,attrs:{"data-role":"kanban-column","data-key":e.keyField.toString(),scope:"row"}}),a=[];e.allowToggle&&(a.push(ef),e.isExpanded||a.push(eB)),r.addClass([n],a);var l=r.createElement("div",{className:el});n.appendChild(l);var s=o.columnData[e.keyField].length,d=r.createElement("div",{className:es});if(l.appendChild(d),e.template){var c={keyField:e.keyField,headerText:e.headerText,minCount:e.minCount,maxCount:e.maxCount,allowToggle:e.allowToggle,isExpanded:e.isExpanded,showItemCount:e.showItemCount,count:s};r.addClass([n],et);var p=o.parent.element.id+"_columnTemplate",h=o.parent.templateParser(e.template)(c,o.parent,"columnTemplate",p,!1);r.append(h,d)}else{var u=r.createElement("div",{className:ed,innerHTML:e.headerText});if(d.appendChild(u),e.showItemCount){var g=r.createElement("div",{className:ew,innerHTML:"- "+s.toString()+" "+o.parent.localeObj.getConstant("items")});d.appendChild(g)}}if(e.allowToggle){var m=!(!e.isExpanded||-1!==t),f=m?eH:eN,y=r.createElement("div",{className:ec+" "+ee+" "+f,attrs:{tabindex:"0",role:"button"}});y.setAttribute("aria-label",m?e.keyField+" Expand":e.keyField+" Collapse"),n.setAttribute("aria-expanded",m.toString()),l.appendChild(y)}var v={data:[{keyField:e.keyField,textField:e.headerText,count:s}],element:i,cancel:!1,requestType:"headerRow"};o.parent.trigger(k,v,function(e){e.cancel||i.appendChild(n)})}})(s[l])},t.prototype.renderContent=function(){var e=r.createElement("div",{className:eg});this.parent.element.appendChild(e);var t=r.createElement("div",{className:this.parent.swimlaneSettings.keyField?en:""});e.appendChild(t);var n=r.createElement("table",{className:er+" "+em,attrs:{role:"presentation"}});t.appendChild(n),this.renderColGroup(n);var a=r.createElement("tbody");a.setAttribute("role","rowgroup"),n.appendChild(a);var i=!1;this.swimlaneRow=this.kanbanRows,this.initializeSwimlaneTree();for(var o=0,l=this.swimlaneRow;o<l.length;o++){var s=l[o];this.parent.swimlaneSettings.keyField&&0!==this.parent.swimlaneToggleArray.length&&(i=-1!==this.parent.swimlaneToggleArray.indexOf(s.keyField)),this.parent.swimlaneSettings.keyField&&!this.parent.isAdaptive&&this.renderSwimlaneRow(a,s,i),this.renderSingleContent(a,s,i)}},t.prototype.renderSingleContent=function(e,t,n){for(var a=n?ev+" "+eB:ev,i=r.createElement("tr",{className:a,attrs:{"aria-expanded":"true",role:"row"}}),o=0,l=this.parent.columns;o<l.length;o++){var s=l[o];if(this.isColumnVisible(s)){var d=this.parent.actionModule.columnToggleArray.indexOf(s.keyField.toString()),c=-1===d?eu:eu+" "+eB,p=(s.allowDrag?" "+eD:"")+(s.allowDrop?" e-drop "+ex:""),h=r.createElement("td",{className:c+p,attrs:{"data-role":"kanban-column","data-key":s.keyField.toString(),tabindex:"0",role:"treegrid","aria-label":s.keyField.toString()}});if(s.allowToggle&&!s.isExpanded||-1!==d){r.addClass([h],eB);var u=(s.showItemCount?"["+this.getColumnData(s.keyField,this.swimlaneData[t.keyField]).length+"] ":"")+s.headerText;h.appendChild(r.createElement("div",{className:eI,innerHTML:u})),h.setAttribute("aria-expanded","false")}if(s.showAddButton){var g=r.createElement("div",{className:tt,attrs:{tabindex:"-1"}});g.appendChild(r.createElement("div",{className:tn+" "+ee})),h.appendChild(g)}i.appendChild(h)}}var m={data:[{keyField:t.keyField,textField:t.textField,count:t.count}],element:i,cancel:!1,requestType:"contentRow"};this.parent.trigger(k,m,function(t){t.cancel||(e.classList.contains("e-swimlane-row")?e.insertAdjacentElement("beforebegin",i):e.appendChild(i))})},t.prototype.initializeSwimlaneTree=function(){this.parent.swimlaneSettings.keyField&&this.parent.isAdaptive&&0!==this.parent.kanbanData.length&&(this.swimlaneRow=[this.kanbanRows[this.swimlaneIndex]],this.renderSwimlaneTree(),this.parent.element.querySelector("."+e2).innerHTML=this.swimlaneRow[0].textField)},t.prototype.renderSwimlaneRow=function(e,t,n){var a=n?" "+eB:"",i=r.createElement("tr",{className:"e-content-row e-swimlane-row"+a,attrs:{"data-key":t.keyField,"aria-expanded":(!n).toString(),role:"row"}}),o=this.parent.columns.length-this.parent.actionModule.hideColumnKeys.length,l=r.createElement("td",{className:eu,attrs:{"data-role":"kanban-column",colspan:o.toString()}}),s=r.createElement("div",{className:e3});l.appendChild(s);var d=n?eC:eS,c=r.createElement("div",{className:ee+" "+d,attrs:{tabindex:"0",role:"button","aria-label":n?t.keyField+" Collapse":t.keyField+" Expand"}});s.appendChild(c);var p=r.createElement("div",{className:el});s.appendChild(p);var h=this.swimlaneData[t.keyField].length;if(this.parent.swimlaneSettings.template){var u=r.extend({},t,{count:h},!0);r.addClass([l],et);var g=this.parent.element.id+"_swimlaneTemplate",m=this.parent.templateParser(this.parent.swimlaneSettings.template)(u,this.parent,"swimlaneTemplate",g,!1);r.append(m,p)}else p.appendChild(r.createElement("div",{className:"e-swimlane-text",innerHTML:t.textField,attrs:{"data-role":t.textField}}));this.parent.swimlaneSettings.showItemCount&&s.appendChild(r.createElement("div",{className:ew,innerHTML:"- "+h.toString()+" "+this.parent.localeObj.getConstant("items")})),i.appendChild(l);var f={data:[{keyField:t.keyField,textField:t.textField,count:t.count}],element:i,cancel:!1,requestType:"swimlaneRow"};this.parent.trigger(k,f,function(t){t.cancel||(e.classList.contains("e-swimlane-row")?e.insertAdjacentElement("beforebegin",i):e.appendChild(i))})},t.prototype.renderCards=function(){var e=this,t=this.swimlaneRow,n=[].slice.call(this.parent.element.querySelectorAll(".e-content-row:not(.e-swimlane-row)")),a=[].slice.call(this.parent.element.querySelectorAll(".e-content-row.e-swimlane-row")),i=[],o=!1;n.forEach(function(n,l){for(var s=0,d=0,c=e.parent.columns;d<c.length;d++)(function(a){if(e.isColumnVisible(a)){var i=e.parent.swimlaneSettings.keyField?e.getColumnData(a.keyField,e.swimlaneData[t[l].keyField]):e.columnData[a.keyField];s+=i.length;var d=n.querySelector('[data-key="'+a.keyField+'"]'),c=r.createElement("div",{className:eE,attrs:{role:"listbox",tabindex:"0","aria-label":a.keyField.toString()}});if(a.transitionColumns.length>0&&(o=!0),!o&&r.isNullOrUndefined(e.parent.swimlaneSettings.keyField)){var p=r.createElement("div",{className:eX});d.appendChild(p)}if(d.appendChild(c),i.length>0)for(var h=0;h<i.length;h++)(function(t){var n=t[e.parent.cardSettings.headerField],a=e.parent.actionModule.selectionArray.indexOf(n),i=e.renderCard(t);-1!==a&&(i.setAttribute("aria-selected","true"),r.addClass([i],e0)),e.parent.trigger(E,{data:t,element:i,cancel:!1},function(e){e.cancel||c.appendChild(i)})})(i[h]);else c.appendChild(e.renderEmptyCard())}})(c[d]);0===s&&(i.push(n),a.length>0&&i.push(a[l]))}),this.parent.swimlaneSettings.showEmptyRow||0!==this.parent.kanbanData.length||this.parent.showEmptyColumn||i.forEach(function(e){return r.remove(e)})},t.prototype.renderCard=function(e){var t=r.createElement("div",{className:eO,attrs:{"data-id":e[this.parent.cardSettings.headerField],"data-key":e[this.parent.keyField],"aria-selected":"false",tabindex:"-1",role:"option"}});if("auto"!==this.parent.cardHeight&&(t.style.height=r.formatUnit(this.parent.cardHeight)),this.parent.cardSettings.template){r.addClass([t],et);var n=this.parent.element.id+"_cardTemplate",a=this.parent.templateParser(this.parent.cardSettings.template)(e,this.parent,"cardTemplate",n,!1);r.append(a,t)}else{var i=this.parent.enableTooltip?" "+e1:"";if(this.parent.cardSettings.showHeader){var o=r.createElement("div",{className:eF}),l=r.createElement("div",{className:ej}),s=r.createElement("div",{className:eq+i,innerHTML:e[this.parent.cardSettings.headerField]||""});o.appendChild(l),l.appendChild(s),t.appendChild(o)}var d=r.createElement("div",{className:eT+i,innerHTML:e[this.parent.cardSettings.contentField]||""});if(t.appendChild(d),this.parent.cardSettings.tagsField&&e[this.parent.cardSettings.tagsField]){for(var c=r.createElement("div",{className:"e-card-tags"}),p=0,h=e[this.parent.cardSettings.tagsField].toString().split(",");p<h.length;p++){var u=h[p];c.appendChild(r.createElement("div",{className:"e-card-tag e-card-label",innerHTML:u}))}t.appendChild(c)}if(this.parent.cardSettings.grabberField&&e[this.parent.cardSettings.grabberField]&&(r.addClass([t],"e-card-color"),t.style.borderLeftColor=e[this.parent.cardSettings.grabberField]),this.parent.cardSettings.footerCssField){for(var g=r.createElement("div",{className:eR}),m=0,f=e[this.parent.cardSettings.footerCssField].split(",");m<f.length;m++){var y=f[m];g.appendChild(r.createElement("div",{className:y.trim()+" "+eP}))}t.appendChild(g)}}return t},t.prototype.renderEmptyCard=function(){return r.createElement("span",{className:eL,innerHTML:this.parent.localeObj.getConstant("noCard")})},t.prototype.renderColGroup=function(e){var t=this,n=r.createElement("colgroup");this.parent.columns.forEach(function(e){if(t.isColumnVisible(e)){var a=t.parent.actionModule.columnToggleArray.indexOf(e.keyField.toString()),i=e.allowToggle&&!e.isExpanded,o=-1===a?i?eB:"":eB,l=r.createElement("col",{className:o,attrs:{"data-key":e.keyField.toString()},styles:t.parent.isAdaptive?"width: "+(i?r.formatUnit(50):r.formatUnit(t.getWidth())):""});n.appendChild(l)}}),e.appendChild(n)},t.prototype.getRows=function(){var e=this,t=[];return this.parent.swimlaneSettings.keyField?(this.parent.kanbanData.map(function(n){if(e.parent.swimlaneSettings.showEmptyRow||!(r.isNullOrUndefined(n[e.parent.keyField])||""===n[e.parent.keyField]||n[e.parent.keyField]&&-1===e.columnKeys.indexOf(n[e.parent.keyField].toString()))){var a=n[e.parent.swimlaneSettings.textField]||n[e.parent.swimlaneSettings.keyField],i=n[e.parent.swimlaneSettings.keyField];if(!n[e.parent.swimlaneSettings.keyField]){if(!e.parent.swimlaneSettings.showUnassignedRow)return;a=e.parent.localeObj.getConstant("unassigned"),i=""}t.push({keyField:i,textField:a})}}),t=t.filter(function(e,t,n){return t===n.map(function(e){return e.keyField}).indexOf(e.keyField)}),(t=this.swimlaneSorting(t)).forEach(function(t){t.count=e.parent.kanbanData.filter(function(n){return e.columnKeys.indexOf(n[e.parent.keyField])>-1&&n[e.parent.swimlaneSettings.keyField]===t.keyField}).length}),0===t.length&&t.push({keyField:"",textField:""})):t.push({keyField:"",textField:""}),t},t.prototype.swimlaneSorting=function(e){return this.parent.swimlaneSettings.sortComparer?e=this.parent.swimlaneSettings.sortComparer.call(this.parent,e):(e.sort(function(e,t){return e.textField.localeCompare(t.textField,void 0,{numeric:!0})}),"Descending"===this.parent.swimlaneSettings.sortDirection&&e.reverse()),e},t.prototype.createStackedRow=function(e){var t=r.createElement("tr",{className:ey+" "+ep}),n=[];this.parent.columns.forEach(function(t){for(var r="",a=0;a<e.length;a++){var i=e[a];-1!==i.keyFields.indexOf(t.keyField.toString())&&(r=i.text)}n.push(r)});for(var a=0;a<n.length;a++){for(var i=1,o=a+1;o<n.length&&""!==n[a]&&""!==n[o]&&n[a]===n[o];o++)i++;var l=r.createElement("div",{className:ed,innerHTML:n[a]}),s=r.createElement("th",{className:eo+" "+eh,attrs:{colspan:i.toString(),scope:"row"}});t.appendChild(s).appendChild(l),a+=i-1}return t},t.prototype.scrollUiUpdate=function(){var e=this,t=this.parent.element.querySelector("."+ea),n=this.parent.element.querySelector("."+eg),a=this.parent.element.offsetHeight-t.offsetHeight;if(this.parent.isAdaptive){a=window.innerHeight-(t.offsetHeight+25);var i=this.parent.element.querySelector("."+e3);i&&(a-=i.offsetHeight),[].slice.call(this.parent.element.querySelectorAll("."+eu)).forEach(function(t){var n=t.querySelector("."+eE);n.classList.contains(eJ)||(n.style.height=r.formatUnit(a),r.EventHandler.add(t,"touchmove",e.onAdaptiveScroll,e))})}"auto"!==this.parent.height&&"100%"!==this.parent.height&&(n.style.height=r.formatUnit(a)),[].slice.call(t.children).forEach(function(t){var a=0;n.offsetWidth-n.clientWidth>0&&(a=17,n.offsetHeight-n.clientHeight>0&&(t.style.width=r.formatUnit(n.clientWidth))),e.parent.enableRtl?t.style.paddingLeft=r.formatUnit(a):t.style.paddingRight=r.formatUnit(a)}),this.updateScrollPosition()},t.prototype.onContentScroll=function(e){var t=e.target,n=this.parent.element.querySelector("."+ea);[].slice.call(n.children).forEach(function(e){e.scrollLeft=t.scrollLeft}),this.parent.scrollPosition.content={left:t.scrollLeft,top:t.scrollTop},!r.isNullOrUndefined(this.parent.swimlaneSettings.keyField)&&this.parent.swimlaneSettings.enableFrozenRows&&this.frozenRows(e)},t.prototype.addFrozenSwimlaneDataKey=function(e){var t=e.getAttribute("data-key");r.isNullOrUndefined(t)||this.frozenSwimlaneRow.setAttribute("data-key",t)},t.prototype.frozenRows=function(e){var t=this.parent.element.querySelector("."+eb),n=this.parent.element.querySelector("."+ea),a=this.parent.element.querySelector("."+eg);if(r.isNullOrUndefined(this.frozenSwimlaneRow)){this.frozenSwimlaneRow=r.createElement("div",{className:ta});var i=r.createElement("div",{className:"e-frozen-row"});this.frozenSwimlaneRow.appendChild(i),this.parent.element.insertBefore(this.frozenSwimlaneRow,this.parent.element.firstElementChild),i.appendChild(t.querySelector("."+e3).cloneNode(!0)),this.addFrozenSwimlaneDataKey(t),r.setStyleAttribute(this.frozenSwimlaneRow,{height:r.formatUnit(t.getBoundingClientRect().height),width:r.formatUnit(a.querySelector(".e-swimlane").getBoundingClientRect().width),top:r.formatUnit(n.getBoundingClientRect().height.toString())}),r.setStyleAttribute(n,{position:"relative",top:r.formatUnit(-this.frozenSwimlaneRow.getBoundingClientRect().height)}),r.setStyleAttribute(a,{position:"relative",top:r.formatUnit(-this.frozenSwimlaneRow.getBoundingClientRect().height)})}else{var o=[].slice.call(this.parent.element.querySelectorAll("."+eb)),l=o[this.frozenOrder],s=o[this.frozenOrder-1],d=o[this.frozenOrder+1],c=void 0,p=void 0,h=void 0;l&&(c=l.getBoundingClientRect().top+l.getBoundingClientRect().height),s&&(p=s.getBoundingClientRect().top+s.getBoundingClientRect().height),d&&(h=d.getBoundingClientRect().top+d.getBoundingClientRect().height);var u=a.getBoundingClientRect().top+this.frozenSwimlaneRow.getBoundingClientRect().height,g=this.frozenSwimlaneRow.querySelector(".e-frozen-row");h&&u>=h&&this.frozenOrder<o.length-1?(g&&(r.remove(g.querySelector("."+e3)),g.appendChild(d.querySelector("."+e3).cloneNode(!0)),this.addFrozenSwimlaneDataKey(d)),++this.frozenOrder):p&&u<c&&u>p&&this.frozenOrder>0&&(g&&(r.remove(g.querySelector("."+e3)),g.appendChild(s.querySelector("."+e3).cloneNode(!0)),this.addFrozenSwimlaneDataKey(s)),--this.frozenOrder)}e&&0===e.target.scrollTop&&this.removeFrozenRows()},t.prototype.removeFrozenRows=function(){r.remove(this.frozenSwimlaneRow),this.frozenSwimlaneRow=null;var e=this.parent.element.querySelector("."+ea),t=this.parent.element.querySelector("."+eg);r.setStyleAttribute(e,{position:"",top:""}),r.setStyleAttribute(t,{position:"",top:""}),this.parent.scrollPosition.content={left:this.parent.scrollPosition.content.left,top:0},t.scrollTop=0,this.frozenOrder=0},t.prototype.onColumnScroll=function(e){var t=e.target;if(t.offsetParent){var n=t.offsetParent.getAttribute("data-key");this.parent.scrollPosition.column[""+n]={left:t.scrollLeft,top:t.scrollTop}}},t.prototype.onAdaptiveScroll=function(e){this.parent.touchModule.tabHold&&!this.parent.touchModule.mobilePopup&&e.preventDefault()},t.prototype.isColumnVisible=function(e){var t=this,n=!1;return"number"==typeof e.keyField?n=-1===this.parent.actionModule.hideColumnKeys.indexOf(e.keyField.toString()):e.keyField.split(",").forEach(function(e){n=-1===t.parent.actionModule.hideColumnKeys.indexOf(e)}),n},t.prototype.renderLimits=function(e,t){var n=r.createElement("div",{className:e9});e.minCount&&n.appendChild(r.createElement("div",{className:"e-min-count",innerHTML:this.parent.localeObj.getConstant("min")+": "+e.minCount.toString()})),e.maxCount&&n.appendChild(r.createElement("div",{className:"e-max-count",innerHTML:this.parent.localeObj.getConstant("max")+": "+e.maxCount.toString()})),n.childElementCount>0&&(t.querySelector("."+eE)?t.insertBefore(n,t.firstElementChild):t.appendChild(n))},t.prototype.renderValidation=function(){var e=this;this.parent.columns.forEach(function(t){if(t.minCount||t.maxCount){var n=e.columnData[t.keyField],a='[data-key="'+t.keyField+'"]',i=e.parent.element.querySelector("."+(eo+a)),o=[].slice.call(e.parent.element.querySelectorAll("."+(eu+a)));if("Swimlane"===e.parent.constraintType&&e.parent.swimlaneSettings.keyField)e.swimlaneRow.forEach(function(a,i){e.renderLimits(t,o[i]);var l=n.filter(function(t){return t[e.parent.swimlaneSettings.keyField]===a.keyField}),s=e.getValidationClass(t,l.length);s&&r.addClass([o[i]],s)});else{e.renderLimits(t,i);var l=e.getValidationClass(t,n.length);l&&r.addClass(o.concat(i),l)}}})},t.prototype.getValidationClass=function(e,t){var n;return e.maxCount&&t>e.maxCount?n=e6:e.minCount&&t<e.minCount&&(n=e7),n},t.prototype.refreshValidation=function(){[].slice.call(this.parent.element.querySelectorAll("."+e9)).forEach(function(e){r.remove(e)});var e=[].slice.call(this.parent.element.querySelectorAll("."+e7));r.removeClass(e,e7);var t=[].slice.call(this.parent.element.querySelectorAll("."+e6));r.removeClass(t,e6),this.renderValidation()},t.prototype.getColumnData=function(e,t){var n=this;void 0===t&&(t=this.parent.kanbanData);var r=[];if("number"==typeof e){var a=t.filter(function(t){return t[n.parent.keyField]===e});r=r.concat(a)}else for(var i=function(e){var a=t.filter(function(t){return t[n.parent.keyField]===e.trim()});r=r.concat(a)},o=0,l=e.split(",");o<l.length;o++)i(l[o]);return this.sortCategory(r),r},t.prototype.sortCategory=function(e){var t=this.parent.cardSettings.headerField,n=this.parent.sortSettings.direction;switch(this.parent.sortSettings.sortBy){case"DataSourceOrder":this.sortOrder(t,n,e);break;case"Custom":case"Index":this.parent.sortSettings.field&&(t=this.parent.sortSettings.field),this.sortOrder(t,n,e)}return e},t.prototype.sortOrder=function(e,t,n){var r,a,i=!0;return this.parent.kanbanData.length>0&&(i="number"==typeof this.parent.kanbanData[0][""+e]),(i||"Index"!==this.parent.sortSettings.sortBy)&&(n=n.sort(function(t,n){return i?(r=t[""+e],a=n[""+e]):(r=t[""+e].toLowerCase(),a=n[""+e].toLowerCase()),r>a?1:a>r?-1:0}),"Descending"===t&&n.reverse()),n},t.prototype.documentClick=function(e){if(e.target.classList.contains(e5)&&this.parent.element.querySelector("."+e4).classList.contains("e-popup-open")&&(this.treePopup.hide(),r.removeClass([this.popupOverlay],"e-enable")),!r.closest(e.target,"."+Z)){var t=[].slice.call(this.parent.element.querySelectorAll(".e-card."+e0));r.removeClass(t,e0),this.disableAttributeSelection(t)}},t.prototype.disableAttributeSelection=function(e){e instanceof Element?e.setAttribute("aria-selected","false"):e.forEach(function(e){e.setAttribute("aria-selected","false")})},t.prototype.getColumnCards=function(e){var t=this,n={};return this.columnKeys=[],this.parent.columns.forEach(function(r){var a="number"==typeof r.keyField;t.columnKeys=a?t.columnKeys.concat(r.keyField.toString()):t.columnKeys.concat(r.keyField.split(",").map(function(e){return e.trim()}));var i=t.getColumnData(r.keyField,e);n[r.keyField]=i}),n},t.prototype.getSwimlaneCards=function(){var e=this,t={};return this.parent.swimlaneSettings.keyField&&this.kanbanRows.forEach(function(n){return t[n.keyField]=e.parent.kanbanData.filter(function(t){return!r.isNullOrUndefined(t[e.parent.keyField])&&e.columnKeys.indexOf(t[e.parent.keyField].toString())>-1&&(!t[e.parent.swimlaneSettings.keyField]&&e.parent.swimlaneSettings.showUnassignedRow?"":t[e.parent.swimlaneSettings.keyField])===n.keyField})}),t},t.prototype.refreshHeaders=function(){var e=this.parent.element.querySelector("."+ea);[].slice.call(e.children).forEach(function(e){return r.remove(e)}),this.renderHeader(e)},t.prototype.refreshCards=function(){this.parent.resetTemplates(["cardTemplate"]),[].slice.call(this.parent.element.querySelectorAll("."+eE)).forEach(function(e){return r.remove(e)}),this.renderCards(),this.wireDragEvent(),this.parent.renderTemplates()},t.prototype.refresh=function(){var e=this,t=!1;this.parent.columns.forEach(function(n){if(n.showItemCount){n&&n.template&&!t&&(e.refreshHeaders(),t=!0);var r="."+eo+'[data-key="'+n.keyField+'"] .'+ew,a=e.parent.element.querySelector(r);if(a){var i=0;if("number"==typeof n.keyField)i=[].slice.call(e.parent.element.querySelectorAll('.e-card[data-key="'+n.keyField+'"]')).length;else for(var o=0,l=n.keyField.split(",");o<l.length;o++){var s=l[o];i=[].slice.call(e.parent.element.querySelectorAll('.e-card[data-key="'+s.trim()+'"]')).length+i}a.innerHTML="-\xa0"+i+"\xa0"+e.parent.localeObj.getConstant("items")}}}),this.parent.swimlaneSettings.keyField&&[].slice.call(this.parent.element.querySelectorAll("."+eb)).forEach(function(t){var n=t.getAttribute("data-key"),r=t.querySelector("."+ew);if(r&&n){var a=[].slice.call(t.nextElementSibling.querySelectorAll("."+eO));r.innerHTML="-\xa0"+a.length+"\xa0"+e.parent.localeObj.getConstant("items")}}),this.refreshValidation()},t.prototype.updateScrollPosition=function(){var e=this,t=this.parent.element.querySelector("."+eg);t&&(r.Browser.isIE?(t.scrollTop=this.parent.scrollPosition.content.top,t.scrollLeft=this.parent.scrollPosition.content.left):t.scrollTo(this.parent.scrollPosition.content.left,this.parent.scrollPosition.content.top)),[].slice.call(this.parent.element.querySelectorAll("."+eE)).forEach(function(t){if(t.offsetParent){var n=e.parent.scrollPosition.column[t.offsetParent.getAttribute("data-key")];n&&(r.Browser.isIE?(t.scrollTop=n.top,t.scrollLeft=n.left):t.scrollTo(n.left,n.top))}})},t.prototype.renderCardBasedOnIndex=function(e,t){var n=this,a=e[this.parent.keyField],i=this.parent.element.querySelector(".e-content-row:not(.e-swimlane-row)");if(this.parent.swimlaneSettings.keyField&&!this.parent.isAdaptive){var o='.e-content-row.e-swimlane-row[data-key="'+e[this.parent.swimlaneSettings.keyField]+'"]';if(this.parent.element.querySelector(o))i=this.parent.element.querySelector(o).nextElementSibling;else{if(-1!==this.columnKeys.indexOf(a)&&-1===this.parent.actionModule.hideColumnKeys.indexOf(a)){var l=this.kanbanRows.findIndex(function(t){return t.keyField===e[n.parent.swimlaneSettings.keyField]}),s=[].slice.call(this.parent.element.querySelectorAll(".e-swimlane-row")),d=this.parent.element.querySelector("."+em+" tbody");s[l]&&(d=s[l]),this.renderSwimlaneRow(d,this.kanbanRows[l],!1),this.renderSingleContent(d,this.kanbanRows[l],!1)}i=this.parent.element.querySelector(o).nextElementSibling,[].slice.call(i.children).forEach(function(e){var t=r.createElement("div",{className:eE});e.appendChild(t),t.appendChild(n.renderEmptyCard())})}}if("Index"!==this.parent.sortSettings.sortBy){var c=this.parent.cardSettings.headerField;if("Custom"===this.parent.sortSettings.sortBy&&(c=this.parent.sortSettings.field),r.isNullOrUndefined(this.parent.swimlaneSettings.keyField))t=this.getColumnData(a,this.parent.kanbanData).findIndex(function(t){return t[""+c]===e[""+c]});else{var p=this.parent.getSwimlaneData(e[this.parent.swimlaneSettings.keyField]);t=this.getColumnData(a,p).findIndex(function(t){return t[""+c]===e[""+c]})}}else"Index"===this.parent.sortSettings.sortBy&&this.parent.sortSettings.field&&"Ascending"===this.parent.sortSettings.direction&&(t=e[this.parent.sortSettings.field]-1);if(i){var h=[].slice.call(i.children).filter(function(e){return -1!==e.getAttribute("data-key").replace(/\s/g,"").split(",").indexOf(a.toString().replace(/\s/g,""))})[0],u=h.querySelector("."+eE),g=u.querySelector("."+eL);g&&r.remove(g);var m=this.renderCard(e);this.parent.allowDragAndDrop&&h.classList.contains(eD)&&(this.parent.dragAndDropModule.wireDragEvents(m),r.addClass([m],ex)),this.parent.trigger(E,{data:e,element:m,cancel:!1},function(e){e.cancel||(r.isNullOrUndefined(t)||0===u.children.length?u.appendChild(m):u.insertBefore(m,u.childNodes[t]))})}},t.prototype.removeCard=function(e){var t=e[this.parent.cardSettings.headerField],n=this.parent.element.querySelector('.e-card[data-id="'+t+'"]');this.isSelectedCard=!!n.classList.contains(e0);var a=n.parentElement;n&&r.remove(n),0===a.querySelectorAll(".e-card:not(."+eK+")").length&&a.appendChild(this.renderEmptyCard())},t.prototype.wireEvents=function(){var e=this;r.EventHandler.add(this.parent.element,"click",this.parent.actionModule.clickHandler,this.parent.actionModule),r.EventHandler.add(this.parent.element,"dblclick",this.parent.actionModule.doubleClickHandler,this.parent.actionModule),r.EventHandler.add(document,r.Browser.touchStartEvent,this.documentClick,this);var t=this.parent.element.querySelector("."+eg);r.EventHandler.add(t,"scroll",this.onContentScroll,this),[].slice.call(this.parent.element.querySelectorAll("."+eE)).forEach(function(t){e.parent.isInitialRender&&t.offsetParent&&(e.parent.scrollPosition.column[t.offsetParent.getAttribute("data-key")]={left:0,top:0}),r.EventHandler.add(t,"scroll",e.onColumnScroll,e)}),this.parent.isAdaptive&&(this.parent.touchModule.wireTouchEvents(),t.scrollLeft=this.scrollLeft),this.wireDragEvent()},t.prototype.unWireEvents=function(){var e=this;r.EventHandler.remove(this.parent.element,"click",this.parent.actionModule.clickHandler),r.EventHandler.remove(this.parent.element,"dblclick",this.parent.actionModule.doubleClickHandler),r.EventHandler.remove(document,r.Browser.touchStartEvent,this.documentClick);var t=this.parent.element.querySelector("."+eg);t&&(r.EventHandler.remove(t,"scroll",this.onContentScroll),this.parent.allowDragAndDrop&&this.unWireDragEvent());var n=[].slice.call(this.parent.element.querySelectorAll("."+eE));n.length>0&&n.forEach(function(t){r.EventHandler.remove(t,"scroll",e.onColumnScroll)}),this.parent.isAdaptive&&this.parent.touchModule.unWireTouchEvents()},t.prototype.wireDragEvent=function(){var e=this;if(this.parent.allowDragAndDrop){var t=[].slice.call(this.parent.element.querySelectorAll("."+eu+"."+eD+" ."+eO));r.addClass(t,ex),t.forEach(function(t){return e.parent.dragAndDropModule.wireDragEvents(t)})}},t.prototype.unWireDragEvent=function(){var e=this,t=[].slice.call(this.parent.element.querySelectorAll("."+eu+"."+eD+" ."+eO));r.removeClass(t,ex),t.forEach(function(t){return e.parent.dragAndDropModule.unWireDragEvents(t)})},t.prototype.destroy=function(){this.parent.resetTemplates(),this.parent.off(F,this.initRender),this.parent.off(M,this.scrollUiUpdate),this.unWireEvents();var e=this.parent.element.querySelector("."+ea);e&&r.remove(e);var t=this.parent.element.querySelector("."+eg);t&&r.remove(t),this.treeViewObj&&(this.treeViewObj.destroy(),this.treeViewObj=null),this.treePopup&&(this.treePopup.destroy(),this.treePopup=null);var n=this.parent.element.querySelector("."+e3);n&&r.remove(n);var a=this.parent.element.querySelector("."+e8);a&&r.remove(a)},t}(th),y=function(e,t){return(y=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},tm=function(e,t){function n(){this.constructor=e}y(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},tf=function(e){function t(t){var n=e.call(this,t)||this;return n.parent=t,n.kanbanRows=[],n.scrollStatus={},n.offsets={},n.tempOffsets={},n.offsetKeys=[],n.columnKeys=[],n.scrollLeft=0,n.frozenOrder=0,n.parent.enableVirtualization&&(n.parent.on(F,n.initRender,n),n.parent.on(M,n.scrollUiUpdate,n)),n}return tm(t,e),t.prototype.initRender=function(){if(this.isSwimlane=!r.isNullOrUndefined(this.parent.swimlaneSettings.keyField)&&this.parent.swimlaneSettings.keyField.trim().length>1,this.query=this.parent.query instanceof i.Query?this.parent.query:new i.Query,0!==this.parent.columns.length){if(this.cardHeight=this.cardHeightCalculate(),this.columnData=this.getColumnCards(),this.kanbanRows=this.getRows(),this.parent.isAdaptive){var e=this.parent.element.querySelector("."+eg);e&&(this.scrollLeft=e.scrollLeft)}this.destroy(),this.parent.on(F,this.initRender,this),this.parent.on(M,this.scrollUiUpdate,this);var t=r.createElement("div",{className:ea});this.parent.element.appendChild(t),this.renderHeader(t),this.isSwimlane||(this.renderContent(),this.renderCards()),this.renderValidation(),this.parent.renderTemplates(),this.parent.notify(M,{}),this.wireEvents(),this.parent.isInitialRender&&(this.parent.isInitialRender=!1)}},t.prototype.cardHeightCalculate=function(){return"auto"===this.parent.cardHeight?108:parseInt(r.formatUnit(this.parent.cardHeight).split("px")[0],10)+8},t.prototype.renderHeader=function(e){var t=r.createElement("div",{className:this.parent.swimlaneSettings.keyField?en:""});e.appendChild(t);var n=r.createElement("table",{className:er+" "+ei,attrs:{role:"presentation"}});t.appendChild(n),this.renderColGroup(n);var a=r.createElement("thead");n.appendChild(a),this.parent.stackedHeaders.length>0&&a.appendChild(this.createStackedRow(this.parent.stackedHeaders));var i=r.createElement("tr",{className:ey});a.appendChild(i);for(var o=this,l=0,s=this.parent.columns;l<s.length;l++)(function(e){if(o.isColumnVisible(e)){var t=o.parent.actionModule.columnToggleArray.indexOf(e.keyField.toString()),n=r.createElement("th",{className:-1===t?eo:eo+" "+eB,attrs:{"data-role":"kanban-column","data-key":e.keyField.toString()}}),a=[];e.allowToggle&&(a.push(ef),e.isExpanded||a.push(eB)),r.addClass([n],a);var l=r.createElement("div",{className:el});n.appendChild(l);var s=o.parent.dataModule.isRemote()?o.parent.columnDataCount[e.keyField]:o.columnData[e.keyField].length,d=r.createElement("div",{className:es});if(l.appendChild(d),e.template){var c={keyField:e.keyField,headerText:e.headerText,minCount:e.minCount,maxCount:e.maxCount,allowToggle:e.allowToggle,isExpanded:e.isExpanded,showItemCount:e.showItemCount,count:s};r.addClass([n],et);var p=o.parent.element.id+"_columnTemplate",h=o.parent.templateParser(e.template)(c,o.parent,"columnTemplate",p,!1);r.append(h,d)}else{var u=r.createElement("div",{className:ed,innerHTML:e.headerText});if(d.appendChild(u),e.showItemCount){var g=r.createElement("div",{className:ew,innerHTML:"- "+s.toString()+" "+o.parent.localeObj.getConstant("items")});d.appendChild(g)}}if(e.allowToggle){var m=!(!e.isExpanded||-1!==t),f=m?eH:eN,y=r.createElement("div",{className:ec+" "+ee+" "+f,attrs:{tabindex:"0"}});y.setAttribute("aria-label",m?e.keyField+" Expand":e.keyField+" Collapse"),n.setAttribute("aria-expanded",m.toString()),l.appendChild(y)}var v={data:[{keyField:e.keyField,textField:e.headerText,count:s}],element:i,cancel:!1,requestType:"headerRow"};o.parent.trigger(k,v,function(e){e.cancel||i.appendChild(n)})}})(s[l])},t.prototype.renderContent=function(){var e=r.createElement("div",{className:eg});this.parent.element.appendChild(e);var t=r.createElement("div",{className:this.parent.swimlaneSettings.keyField?en:""});e.appendChild(t);var n=r.createElement("table",{className:er+" "+em,attrs:{role:"presentation"}});t.appendChild(n),this.renderColGroup(n);var a=r.createElement("tbody");n.appendChild(a);for(var i=!1,o=0,l=this.kanbanRows;o<l.length;o++){var s=l[o];this.parent.swimlaneSettings.keyField&&0!==this.parent.swimlaneToggleArray.length&&(i=-1!==this.parent.swimlaneToggleArray.indexOf(s.keyField)),this.renderSingleContent(a,s,i)}},t.prototype.renderSingleContent=function(e,t,n){for(var a=n?ev+" "+eB:ev,i=r.createElement("tr",{className:a,attrs:{"aria-expanded":"true"}}),o=0,l=this.parent.columns;o<l.length;o++){var s=l[o];if(this.isColumnVisible(s)){var d=this.parent.actionModule.columnToggleArray.indexOf(s.keyField.toString()),c=-1===d?eu:eu+" "+eB,p=(s.allowDrag?" "+eD:"")+(s.allowDrop?" e-drop "+ex:""),h=r.createElement("td",{className:c+p,attrs:{"data-role":"kanban-column","data-key":s.keyField.toString(),"aria-expanded":"true",tabindex:"0",role:"navigation"}});if(s.allowToggle&&!s.isExpanded||-1!==d){r.addClass([h],eB);var u=(s.showItemCount?"["+(this.parent.dataModule.isRemote()?this.parent.columnDataCount[s.keyField]:this.getColumnData(s.keyField).length)+"] ":"")+s.headerText;h.appendChild(r.createElement("div",{className:eI,innerHTML:u})),h.setAttribute("aria-expanded","false")}if(s.showAddButton){var g=r.createElement("div",{className:tt,attrs:{tabindex:"-1"}});g.appendChild(r.createElement("div",{className:tn+" "+ee})),h.appendChild(g)}if(i.appendChild(h),this.parent.enableVirtualization){var m=this.parent.element.querySelector(".e-kanban-header").getBoundingClientRect().height;"auto"===this.parent.height?h.style.height=window.innerHeight-(m+this.parent.element.getBoundingClientRect().top+15)+"px":h.style.height=parseInt(r.formatUnit(this.parent.height).split("px")[0],10)-(m+15)+"px"}}}var f={data:[{keyField:t.keyField,textField:t.textField,count:t.count}],element:i,cancel:!1,requestType:"contentRow"};this.parent.trigger(k,f,function(t){t.cancel||(e.classList.contains("e-swimlane-row")?e.insertAdjacentElement("beforebegin",i):e.appendChild(i))})},t.prototype.windowResize=function(){for(var e=this.parent.element.querySelectorAll("."+eu),t=this.parent.element.querySelector(".e-kanban-header").getBoundingClientRect().height,n=0;n<e.length;n++)"auto"===this.parent.height?e[n].style.height=window.innerHeight-(t+this.parent.element.getBoundingClientRect().top+15)+"px":e[n].style.height=parseInt(r.formatUnit(this.parent.height).split("px")[0],10)-(t+15)+"px"},t.prototype.refreshColumnData=function(e,t,n,a){var i=this,o=[].slice.call(this.parent.element.querySelectorAll(".e-content-row:not(.e-swimlane-row)")),l=("cardChanged"===n||"cardCreated"===n||"cardRemoved"===n)&&!r.isNullOrUndefined(a);o.forEach(function(n,r){for(var a=0,o=i.parent.columns;a<o.length;a++)(function(r){if(i.isColumnVisible(r)&&(r.keyField===e||r.keyField===t)||l){var a=0,o=[],s=i.getColumnCards()[r.keyField],d=i.parent.dataModule.isRemote()?i.parent.columnDataCount[r.keyField]:s.length,c=i.cardHeight*d;o=Array.apply(null,Array(d)).map(function(){return++a});var p=n.querySelector('[data-key="'+r.keyField+'"]'),h=Math.ceil(parseInt(p.style.height.split("px")[0],10)/i.cardHeight);i.offsets[1]=h*i.cardHeight;for(var u=1;u<o.length;u++)i.offsets[o[u]]=i.offsets[o[u-1]]+h*i.cardHeight,i.tempOffsets[o[u]]=0|i.offsets[o[u]-1];var g=p.querySelector("."+eE),m=d%2==0?d-2:d-1,f=i.getInfoFromView(i.scrollStatus[r.keyField]),y=i.getTranslateY(f),v=g.querySelector("."+ek);v.style.maxHeight=d*i.cardHeight+"px",i.setPadding(y,v,d),i.currentStatus={column:r.keyField,columnOverAllHeight:c,columnHeight:parseInt(p.style.height.split("px")[0],10),previousScrollTop:i.scrollStatus[r.keyField].currentScrollTop,currentScrollTop:g.scrollTop,scrollDirection:i.scrollStatus[r.keyField].scrollDirection,currentBlockIndex:i.scrollStatus[r.keyField].currentBlockIndex,oldBlockIndex:i.scrollStatus[r.keyField].oldBlockIndex,offsets:i.offsets,tempOffsets:i.tempOffsets,totalColumnData:d,singleIndexCardCount:h,maxBlock:m},i.scrollStatus[r.keyField]=i.currentStatus}})(o[a])})},t.prototype.renderCards=function(){var e=this,t=(this.kanbanRows,[].slice.call(this.parent.element.querySelectorAll(".e-content-row:not(.e-swimlane-row)"))),n=[].slice.call(this.parent.element.querySelectorAll(".e-content-row.e-swimlane-row")),a=[],i=!1;t.forEach(function(t,o){for(var l=0,s=0,d=e.parent.columns;s<d.length;s++)(function(n){if(e.isColumnVisible(n)){var a=0,o=[];e.offsets={},e.tempOffsets={};var s=e.columnData[n.keyField],d=e.parent.dataModule.isRemote()?e.parent.columnDataCount[n.keyField]:s.length;l+=d;var c=e.cardHeight*d+7,p=t.querySelector('[data-key="'+n.keyField+'"]'),h=Math.ceil(parseFloat(p.style.height.split("px")[0])/e.cardHeight),u=h>d?d:Math.floor(d/h);o=Array.apply(null,Array(d)).map(function(){return++a}),e.offsets[1]=h*e.cardHeight+7;for(var g=1;g<o.length;g++)e.offsets[o[g]]=e.offsets[o[g-1]]+h*e.cardHeight,e.tempOffsets[o[g]]=0|e.offsets[o[g]-1];var m=r.createElement("div",{className:eE,attrs:{role:"listbox"}}),f=r.createElement("div",{className:ek,attrs:{role:"listbox"}});if(m.appendChild(f),e.currentStatus={column:n.keyField,columnOverAllHeight:c,columnHeight:parseInt(p.style.height.split("px")[0],10),previousScrollTop:null,currentScrollTop:m.scrollTop,scrollDirection:null,currentBlockIndex:[1,2],oldBlockIndex:[1,2],offsets:e.offsets,tempOffsets:e.tempOffsets,totalColumnData:d,singleIndexCardCount:h,maxBlock:u%2==0?u:u+1},e.scrollStatus[n.keyField]=e.currentStatus,n.transitionColumns.length>0&&(i=!0),!i&&r.isNullOrUndefined(e.parent.swimlaneSettings.keyField)){var y=r.createElement("div",{className:eX});p.appendChild(y)}if(p.appendChild(m),d>0){for(g=0;g<2*h&&g<s.length;g++)(function(t){var n=s[t][e.parent.cardSettings.headerField],a=e.parent.actionModule.selectionArray.indexOf(n),i=e.renderCard(s[t]);-1!==a&&(i.setAttribute("aria-selected","true"),r.addClass([i],e0));var o={data:s[t],element:i,cancel:!1};e.parent.trigger(E,o,function(e){e.cancel||f.appendChild(i)})})(g);f.style.maxHeight=e.cardHeight*d+"px"}else f.appendChild(e.renderEmptyCard());e.setPadding(0,f,d)}})(d[s]);0===l&&(a.push(t),n.length>0&&a.push(n[o]))}),this.parent.swimlaneSettings.showEmptyRow||0!==this.parent.kanbanData.length||this.parent.showEmptyColumn||a.forEach(function(e){return r.remove(e)})},t.prototype.renderCard=function(e){var t=r.createElement("div",{className:eO,attrs:{"data-id":e[this.parent.cardSettings.headerField],"data-key":e[this.parent.keyField],"aria-selected":"false",tabindex:"-1",role:"option"}});if(t.style.height=this.cardHeight-8+"px",this.parent.cardSettings.template){r.addClass([t],et);var n=this.parent.element.id+"_cardTemplate",a=this.parent.templateParser(this.parent.cardSettings.template)(e,this.parent,"cardTemplate",n,!1);r.append(a,t)}else{var i=this.parent.enableTooltip?" "+e1:"";if(this.parent.cardSettings.showHeader){var o=r.createElement("div",{className:eF}),l=r.createElement("div",{className:ej}),s=r.createElement("div",{className:eq+i,innerHTML:e[this.parent.cardSettings.headerField]||""});o.appendChild(l),l.appendChild(s),t.appendChild(o)}var d=r.createElement("div",{className:eT+i,innerHTML:e[this.parent.cardSettings.contentField]||""});if(t.appendChild(d),this.parent.cardSettings.tagsField&&e[this.parent.cardSettings.tagsField]){for(var c=r.createElement("div",{className:"e-card-tags"}),p=0,h=e[this.parent.cardSettings.tagsField].toString().split(",");p<h.length;p++){var u=h[p];c.appendChild(r.createElement("div",{className:"e-card-tag e-card-label",innerHTML:u}))}t.appendChild(c)}if(this.parent.cardSettings.grabberField&&e[this.parent.cardSettings.grabberField]&&(r.addClass([t],"e-card-color"),t.style.borderLeftColor=e[this.parent.cardSettings.grabberField]),this.parent.cardSettings.footerCssField){for(var g=r.createElement("div",{className:eR}),m=0,f=e[this.parent.cardSettings.footerCssField].split(",");m<f.length;m++){var y=f[m];g.appendChild(r.createElement("div",{className:y.trim()+" "+eP}))}t.appendChild(g)}}return t},t.prototype.renderEmptyCard=function(){return r.createElement("span",{className:eL,innerHTML:this.parent.localeObj.getConstant("noCard")})},t.prototype.renderColGroup=function(e){var t=this,n=r.createElement("colgroup");this.parent.columns.forEach(function(e){if(t.isColumnVisible(e)){var a=t.parent.actionModule.columnToggleArray.indexOf(e.keyField.toString()),i=e.allowToggle&&!e.isExpanded,o=-1===a?i?eB:"":eB,l=r.createElement("col",{className:o,attrs:{"data-key":e.keyField.toString()},styles:t.parent.isAdaptive?"width: "+(i?r.formatUnit(50):r.formatUnit(t.getWidth())):""});n.appendChild(l)}}),e.appendChild(n)},t.prototype.getRows=function(){var e=[];return e.push({keyField:"",textField:""}),e},t.prototype.createStackedRow=function(e){var t=r.createElement("tr",{className:ey+" "+ep}),n=[];this.parent.columns.forEach(function(t){for(var r="",a=0;a<e.length;a++){var i=e[a];-1!==i.keyFields.indexOf(t.keyField.toString())&&(r=i.text)}n.push(r)});for(var a=0;a<n.length;a++){for(var i=1,o=a+1;o<n.length&&""!==n[a]&&""!==n[o]&&n[a]===n[o];o++)i++;var l=r.createElement("div",{className:ed,innerHTML:n[a]}),s=r.createElement("th",{className:eo+" "+eh,attrs:{colspan:i.toString()}});t.appendChild(s).appendChild(l),a+=i-1}return t},t.prototype.scrollUiUpdate=function(){var e=this,t=this.parent.element.querySelector("."+ea),n=this.parent.element.querySelector("."+eg),a=this.parent.element.offsetHeight-t.offsetHeight;if(this.parent.isAdaptive){a=window.innerHeight-(t.offsetHeight+25);var i=this.parent.element.querySelector("."+e3);i&&(a-=i.offsetHeight),[].slice.call(this.parent.element.querySelectorAll("."+eu)).forEach(function(t){var n=t.querySelector("."+eE);n.classList.contains(eJ)||(n.style.height=r.formatUnit(a),r.EventHandler.add(t,"touchmove",e.onAdaptiveScroll,e))})}"auto"!==this.parent.height&&"100%"!==this.parent.height&&(n.style.height=r.formatUnit(a)),[].slice.call(t.children).forEach(function(t){var a=0;n.offsetWidth-n.clientWidth>0&&(a=17,n.offsetHeight-n.clientHeight>0&&(t.style.width=r.formatUnit(n.clientWidth))),e.parent.enableRtl?t.style.paddingLeft=r.formatUnit(a):t.style.paddingRight=r.formatUnit(a)}),this.updateScrollPosition()},t.prototype.onContentScroll=function(e){var t=e.target,n=this.parent.element.querySelector("."+ea);[].slice.call(n.children).forEach(function(e){e.scrollLeft=t.scrollLeft}),this.parent.scrollPosition.content={left:t.scrollLeft,top:t.scrollTop}},t.prototype.getOffset=function(e,t){return Math.min(0|t.offsets[e],0|t.offsets[t.maxBlock])},t.prototype.getTranslateY=function(e){var t=(e.newBlockIndex[0]||1)-1,n=this.getOffset(t,e),r=this.getOffset(e.newBlockIndex[e.newBlockIndex.length-1],e);return n>e.currentScrollTop?this.getOffset(t-1,e):r<e.currentScrollTop+e.columnHeight?this.getOffset(t+1,e):n},t.prototype.setPadding=function(e,t,n,r,a){r&&"down"===a?(t.style.paddingTop=e+"px",t.style.paddingBottom="0px"):(t.style.paddingTop=e+"px",t.style.paddingBottom=this.cardHeight*n-e+"px")},t.prototype.getData=function(e,t,n,r){var a=this.query.clone(),o=new i.Predicate(e,"equal",t,!0);return(a.where(o),a.take(n),a.skip(r),a.addParams("KanbanVirtualScroll","KanbanVirtualScroll"),this.parent.dataSource&&"result"in this.parent.dataSource)?this.eventPromise({requestType:""},a).promise:this.parent.dataModule.dataManager.executeQuery(a)},t.prototype.eventPromise=function(e,t){var n=this.getStateEventArgument(t),r=new i.Deferred;return n.updateData=r.resolve,n.action=e,r},t.prototype.getStateEventArgument=function(e){var t=new i.UrlAdaptor,n=new i.DataManager({url:"",adaptor:new i.UrlAdaptor}),a=t.processQuery(n,e),o=JSON.parse(a.data);return r.extend(o,a.pvtData)},t.prototype.dataManagerSuccess=function(e,t,n,a){var i,o=this;return t?i=r.extend([],r.isNullOrUndefined(e.result.result)?e.result:e.result.result,null,!0):this.parent.trigger(O,e,function(e){i=r.extend([],r.isNullOrUndefined(e.result.result)?e.result:e.result.result,null,!0),o.parent.trigger(x,null,function(){return o.parent.hideSpinner()})}),i},t.prototype.dataManagerFailure=function(e){var t=this;this.parent.isDestroyed||this.parent.trigger(C,{error:e},function(){return t.parent.hideSpinner()})},t.prototype.onColScrollShowSkeleton=function(e){var t=e.target;if(!(this.parent.element.querySelectorAll(".e-card-skeleton-wrapper").length>0)){var n=t.parentElement.getAttribute("data-key"),r=this.scrollStatus[n].previousScrollTop,a=t.parentElement.clientHeight;(t.scrollTop-r>a||r-t.scrollTop>a)&&this.showSkeleton(t,this.scrollStatus[n].singleIndexCardCount)}},t.prototype.showSkeleton=function(e,t){var n=r.createElement("div",{className:"e-card-virtual-skeleton-wrapper",attrs:{role:"listbox"}});e.parentElement.insertBefore(n,e),n.style.position="absolute",n.style.zIndex="10";for(var a=0;a<t;a++){var i=r.createElement("div",{className:"e-card-skeleton-wrapper"}),o=r.createElement("span",{className:"e-skeleton e-skeleton-text e-shimmer-wave"});o.style.height=this.cardHeight+"px",r.isNullOrUndefined(e.querySelector(".e-card"))||(o.style.width=e.querySelector(".e-card").getBoundingClientRect().width+"px"),i.appendChild(o),n.appendChild(i)}},t.prototype.hideSkeleton=function(e){setTimeout(function(){for(var t=e.querySelectorAll(".e-card-virtual-skeleton-wrapper"),n=0;n<t.length;n++)r.detach(t[n])},50)},t.prototype.onColumnScroll=function(e){var t,n=this,a=e.target,i=a.scrollTop;if(a.offsetParent&&(t=a.offsetParent.getAttribute("data-key"),this.parent.scrollPosition.column[t]={left:a.scrollLeft,top:a.scrollTop}),this.parent.enableVirtualization){var o=0,l=this.getColumnCards()[t],s=this.parent.dataModule.isRemote()?this.parent.columnDataCount[t]:l.length;o+=s;var d=this.cardHeight*o,c=[],p=[];if(this.checkScrollDirection(t,i),"fast"===this.findScrollSpeed(a,t)&&i>d)return void this.hideSkeleton(a.parentElement);var h=this.scrollStatus[t].maxBlock,u=this.scrollStatus[t].currentBlockIndex.indexOf(h)>-1,g=e.timeStamp-this.scrollStatus[t].previousTimeStamps<300;if(u&&!r.isNullOrUndefined(this.scrollStatus[t].previousTimeStamps)&&g)return void this.hideSkeleton(a.parentElement);this.scrollStatus[t].previousTimeStamps=e.timeStamp;var m=this.getInfoFromView(this.scrollStatus[t]);c=m.currentBlockIndex.filter(function(e){return -1===m.newBlockIndex.indexOf(e)}),p=m.newBlockIndex.filter(function(e){return -1===m.currentBlockIndex.indexOf(e)});var f=i+a.clientHeight>=d,y=f?d-a.querySelector("."+ek).childElementCount*this.cardHeight:this.getTranslateY(m),v=a.querySelector("."+ek);if(c.length>0){var b=void 0,S=void 0;1===c[0]?(b=0,S=c.length*this.scrollStatus[t].singleIndexCardCount-1):S=(b=(c[0]-1)*this.scrollStatus[t].singleIndexCardCount)+c.length*this.scrollStatus[t].singleIndexCardCount,this.removeCardsOnScroll(v,"down"===this.scrollStatus[t].scrollDirection,b,S)}if(p.length>0){if(this.parent.dataModule.isRemote()){var C=(p[0]-1)*this.scrollStatus[t].singleIndexCardCount,w=[];this.getData(this.parent.keyField,t,this.scrollStatus[t].singleIndexCardCount*p.length,C).then(function(e){w=n.dataManagerSuccess(e),n.scrollCardInsert(t,v,a,i,a,"down"===n.scrollStatus[t].scrollDirection?0:w.length-1,!0,w,null)}).catch(function(e){return n.dataManagerFailure(e)})}else{C="down"===this.scrollStatus[t].scrollDirection?(p[0]-1)*this.scrollStatus[t].singleIndexCardCount:(p[0]-1)*this.scrollStatus[t].singleIndexCardCount+this.scrollStatus[t].singleIndexCardCount*p.length-1;var E="down"===this.scrollStatus[t].scrollDirection?C+this.scrollStatus[t].singleIndexCardCount*p.length:(p[0]-1)*this.scrollStatus[t].singleIndexCardCount;this.scrollCardInsert(t,v,a,i,a,C,!1,l,E)}}this.scrollStatus[t].currentBlockIndex=this.scrollStatus[t].newBlockIndex,this.setPadding(y,v,s,f,this.scrollStatus[t].scrollDirection),m.currentBlockIndex=m.newBlockIndex,this.parent.renderTemplates(),this.hideSkeleton(a.parentElement)}},t.prototype.checkScrollDirection=function(e,t){this.scrollStatus[e].previousScrollTop=this.scrollStatus[e].currentScrollTop,this.scrollStatus[e].currentScrollTop=t,t>this.scrollStatus[e].previousScrollTop?this.scrollStatus[e].scrollDirection="down":this.scrollStatus[e].scrollDirection="up"},t.prototype.findScrollSpeed=function(e,t){return"down"===this.scrollStatus[t].scrollDirection&&e.scrollTop-this.scrollStatus[t].previousScrollTop>e.clientHeight?"fast":"up"===this.scrollStatus[t].scrollDirection&&this.scrollStatus[t].previousScrollTop-e.scrollTop>e.clientHeight?"fast":"slow"},t.prototype.removeCardsOnScroll=function(e,t,n,a){for(var i=n;i<a;i++){for(var o=t?e.firstChild:e.lastChild;!r.isNullOrUndefined(o)&&(o.classList.contains(eW)||o.classList.contains(eV)||o.classList.contains(eY)||o.classList.contains(eK));)o=t?o.nextSibling:o.previousSibling;r.isNullOrUndefined(o)||r.detach(o)}},t.prototype.scrollCardInsert=function(e,t,n,a,i,o,l,s,d){var c=this,p=l?s.length:d,h=l?0:d;if(s.length>0){for(var u=this,g=o;"down"===this.scrollStatus[e].scrollDirection?g<p:g>=h;"down"===this.scrollStatus[e].scrollDirection?g++:g--)(function(n){if(!r.isNullOrUndefined(s[n])){var a=s[n][u.parent.cardSettings.headerField],i=u.parent.actionModule.selectionArray.indexOf(a),o=u.renderCard(s[n]);-1!==i&&(o.setAttribute("aria-selected","true"),r.addClass([o],e0));var l={data:s[n],element:o,cancel:!1};u.parent.trigger(E,l,function(n){n.cancel||("down"===c.scrollStatus[e].scrollDirection?t.appendChild(o):t.insertBefore(o,t.firstChild),c.parent.dragAndDropModule.wireDragEvents(o),r.addClass([o],ex))})}})(g);n.scrollTop=a}else i.appendChild(this.renderEmptyCard())},t.prototype.ensureColumnNotEmpty=function(e){var t=this.scrollStatus[e].singleIndexCardCount,n=this.columnData[e],a=this.parent.element.querySelector('.e-content-row:not(.e-swimlane-row) [data-key="'+e+'"]').querySelector("."+ek),i=a.querySelectorAll("."+eO);if(i.length>0){var o=i[i.length-1].getAttribute("data-id"),l=i[0].getAttribute("data-id"),s=void 0,d=void 0;if(i.length<2*t){for(var c=0;c<n.length;c++)o===n[c][this.parent.cardSettings.headerField].toString()&&(s=c),l===n[c][this.parent.cardSettings.headerField].toString()&&(d=c);for(c=i.length;c<2*t;c++){var p=s===n.length-1,h=s<n.length?s+1:d-1;if(h<=n.length){var u=n[h];if(!r.isNullOrUndefined(u)){var g=this.renderCard(u);this.triggerCardRendering(g,h,n,a,p),p?d=h:s=h}}}}}},t.prototype.triggerCardRendering=function(e,t,n,a,i){var o=this,l=n[t][this.parent.cardSettings.headerField];-1!==this.parent.actionModule.selectionArray.indexOf(l)&&(e.setAttribute("aria-selected","true"),r.addClass([e],e0));var s={data:n[t],element:e,cancel:!1};this.parent.trigger(E,s,function(t){t.cancel||(i?a.insertBefore(e,a.querySelectorAll("."+eO)[0]):a.appendChild(e),o.parent.dragAndDropModule.wireDragEvents(e),r.addClass([e],ex))})},t.prototype.ensureBlocks=function(e){var t=e.newBlockIndex[e.block],n=Math.ceil(e.totalColumnData/e.singleIndexCardCount),r=Math.max;return("down"===e.scrollDirection?t>=n?[r(t,1),--t,--t].reverse():t+1>=n?[r(t-1,1),t,++t]:[r(t,1),++t,++t]:t===n?[r(t-2,1),r(t-1,1),t]:[r(t-1,1),t,t+1]).filter(function(e){return e>0})},t.prototype.getInfoFromView=function(e){var t=!1;e.page=this.getPageFromTop(e),e.newBlockIndex=this.getBlockIndexes(e.page);var n=this.ensureBlocks(e);if(e.newBlockIndex.toString()!==n.toString()){var r=n[n.length-1];-1===e.newBlockIndex.indexOf(r)&&(t=!0)}return e.newBlockIndex=t?n:e.newBlockIndex,e},t.prototype.getBlockIndexes=function(e){return[e+(e-1),2*e]},t.prototype.getPageFromTop=function(e){var t=this,n=e.totalColumnData,r=0;return this.offsetKeys=Object.keys(e.offsets),this.offsetKeys.some(function(a){var i=Number(a),o=e.currentScrollTop<=e.offsets[parseInt(a,10)]||i===n&&e.currentScrollTop>e.offsets[parseInt(a,10)];if(o){var l=Math.ceil(n/e.singleIndexCardCount);t.offsetKeys.length%2!=0&&i.toString()===t.offsetKeys[t.offsetKeys.length-2]&&e.currentScrollTop<=e.offsets[t.offsetKeys.length-1]&&(i=i+1>l?l:i+1),i=i>l?l:i,e.block=i%2==0?1:0,r=Math.max(1,Math.min(t.getPage(i,l),l))}return o}),r},t.prototype.getPage=function(e,t){return e+1>t?e%2==0?e/2:(e-1)/2:e%2==0?e/2:(e+1)/2},t.prototype.onAdaptiveScroll=function(e){this.parent.touchModule.tabHold&&!this.parent.touchModule.mobilePopup&&e.preventDefault()},t.prototype.isColumnVisible=function(e){var t=this,n=!1;return"number"==typeof e.keyField?n=-1===this.parent.actionModule.hideColumnKeys.indexOf(e.keyField.toString()):e.keyField.split(",").forEach(function(e){n=-1===t.parent.actionModule.hideColumnKeys.indexOf(e)}),n},t.prototype.renderLimits=function(e,t){var n=r.createElement("div",{className:e9});e.minCount&&n.appendChild(r.createElement("div",{className:"e-min-count",innerHTML:this.parent.localeObj.getConstant("min")+": "+e.minCount.toString()})),e.maxCount&&n.appendChild(r.createElement("div",{className:"e-max-count",innerHTML:this.parent.localeObj.getConstant("max")+": "+e.maxCount.toString()})),n.childElementCount>0&&(t.querySelector("."+eE)?t.insertBefore(n,t.firstElementChild):t.appendChild(n))},t.prototype.renderValidation=function(){var e=this;this.parent.columns.forEach(function(t){if(t.minCount||t.maxCount){var n=e.columnData[t.keyField],a='[data-key="'+t.keyField+'"]',i=e.parent.element.querySelector("."+(eo+a)),o=[].slice.call(e.parent.element.querySelectorAll("."+(eu+a)));e.renderLimits(t,i);var l=e.getValidationClass(t,n.length);l&&r.addClass(o.concat(i),l)}})},t.prototype.getValidationClass=function(e,t){var n;return e.maxCount&&t>e.maxCount?n=e6:e.minCount&&t<e.minCount&&(n=e7),n},t.prototype.refreshValidation=function(){[].slice.call(this.parent.element.querySelectorAll("."+e9)).forEach(function(e){r.remove(e)});var e=[].slice.call(this.parent.element.querySelectorAll("."+e7));r.removeClass(e,e7);var t=[].slice.call(this.parent.element.querySelectorAll("."+e6));r.removeClass(t,e6),this.renderValidation()},t.prototype.getColumnData=function(e,t){var n=this;void 0===t&&(t=this.parent.kanbanData);var r=[];if("number"==typeof e){var a=t.filter(function(t){return t[n.parent.keyField]===e});r=r.concat(a)}else for(var i=function(e){var a=t.filter(function(t){return t[n.parent.keyField]===e.trim()});r=r.concat(a)},o=0,l=e.split(",");o<l.length;o++)i(l[o]);return this.sortCategory(r),r},t.prototype.sortCategory=function(e){var t=this.parent.cardSettings.headerField,n=this.parent.sortSettings.direction;switch(this.parent.sortSettings.sortBy){case"DataSourceOrder":this.sortOrder(t,n,e);break;case"Custom":case"Index":this.parent.sortSettings.field&&(t=this.parent.sortSettings.field),this.sortOrder(t,n,e)}return e},t.prototype.sortOrder=function(e,t,n){var r,a,i=!0;return this.parent.kanbanData.length>0&&(i="number"==typeof this.parent.kanbanData[0][e]),(i||"Index"!==this.parent.sortSettings.sortBy)&&(n=n.sort(function(t,n){return i?(r=t[e],a=n[e]):(r=t[e].toLowerCase(),a=n[e].toLowerCase()),r>a?1:a>r?-1:0}),"Descending"===t&&n.reverse()),n},t.prototype.documentClick=function(e){if(e.target.classList.contains(e5)&&this.parent.element.querySelector("."+e4).classList.contains("e-popup-open")&&(this.treePopup.hide(),r.removeClass([this.popupOverlay],"e-enable")),!r.closest(e.target,"."+Z)){var t=[].slice.call(this.parent.element.querySelectorAll(".e-card."+e0));r.removeClass(t,e0),this.disableAttributeSelection(t)}},t.prototype.disableAttributeSelection=function(e){e instanceof Element?e.setAttribute("aria-selected","false"):e.forEach(function(e){e.setAttribute("aria-selected","false")})},t.prototype.getColumnCards=function(e){var t=this,n={};return this.columnKeys=[],this.parent.columns.forEach(function(r){var a="number"==typeof r.keyField;t.columnKeys=a?t.columnKeys.concat(r.keyField.toString()):t.columnKeys.concat(r.keyField.split(",").map(function(e){return e.trim()}));var i=t.getColumnData(r.keyField,e);n[r.keyField]=i}),n},t.prototype.refreshHeaders=function(){var e=this.parent.element.querySelector("."+ea);[].slice.call(e.children).forEach(function(e){return r.remove(e)}),this.renderHeader(e)},t.prototype.refreshCards=function(){this.parent.resetTemplates(["cardTemplate"]),[].slice.call(this.parent.element.querySelectorAll("."+ek)).forEach(function(e){return r.remove(e)}),this.renderCards(),this.wireDragEvent(),this.parent.renderTemplates()},t.prototype.refresh=function(){var e=this,t=!1;this.parent.columns.forEach(function(n){if(n.showItemCount){n&&n.template&&!t&&(e.refreshHeaders(),t=!0);var r="."+eo+'[data-key="'+n.keyField+'"] .'+ew,a=e.parent.element.querySelector(r);if(a){var i=e.parent.dataModule.isRemote()?e.parent.columnDataCount[n.keyField]:e.columnData[n.keyField].length,o=0;if("number"==typeof n.keyField)o=[].slice.call(e.parent.element.querySelectorAll(".e-card[data-key="+n.keyField+"]")).length;else for(var l=0,s=n.keyField.split(",");l<s.length;l++){var d=s[l];o=[].slice.call(e.parent.element.querySelectorAll(".e-card[data-key="+d.trim()+"]")).length+o}a.innerHTML="- "+i+" "+e.parent.localeObj.getConstant("items")}}}),this.refreshValidation()},t.prototype.updateScrollPosition=function(){var e=this,t=this.parent.element.querySelector("."+eg);t&&(r.Browser.isIE?(t.scrollTop=this.parent.scrollPosition.content.top,t.scrollLeft=this.parent.scrollPosition.content.left):t.scrollTo(this.parent.scrollPosition.content.left,this.parent.scrollPosition.content.top)),[].slice.call(this.parent.element.querySelectorAll("."+eE)).forEach(function(t){if(t.offsetParent){var n=e.parent.scrollPosition.column[t.offsetParent.getAttribute("data-key")];n&&(r.Browser.isIE?(t.scrollTop=n.top,t.scrollLeft=n.left):t.scrollTo(n.left,n.top))}})},t.prototype.renderCardBasedOnIndex=function(e,t,n,a){var i=this,o=e[this.parent.keyField],l=this.parent.element.querySelector(".e-content-row:not(.e-swimlane-row)");if("Index"!==this.parent.sortSettings.sortBy){var s=this.parent.cardSettings.headerField;if("Custom"===this.parent.sortSettings.sortBy&&(s=this.parent.sortSettings.field),r.isNullOrUndefined(this.parent.swimlaneSettings.keyField))t=this.getColumnData(o,this.parent.kanbanData).findIndex(function(t){return t[s]===e[s]});else{var d=this.parent.getSwimlaneData(e[this.parent.swimlaneSettings.keyField]);t=this.getColumnData(o,d).findIndex(function(t){return t[s]===e[s]})}}else"Index"===this.parent.sortSettings.sortBy&&this.parent.sortSettings.field&&"Ascending"===this.parent.sortSettings.direction&&(t=e[this.parent.sortSettings.field]-1);if(l){var c=[].slice.call(l.children).filter(function(e){return -1!==e.getAttribute("data-key").replace(/\s/g,"").split(",").indexOf(o.toString().replace(/\s/g,""))})[0],p=c.querySelector("."+ek),h=p.querySelector("."+eL);h&&r.remove(h);var u=this.renderCard(e);this.parent.allowDragAndDrop&&c.classList.contains(eD)&&(this.parent.dragAndDropModule.wireDragEvents(u),r.addClass([u],ex)),this.parent.trigger(E,{data:e,element:u,cancel:!1},function(e){var l=!!n||p.childNodes.length<i.scrollStatus[o].singleIndexCardCount;(e.cancel||!l)&&r.isNullOrUndefined(a)||(r.isNullOrUndefined(t)||0===p.children.length?p.appendChild(u):p.insertBefore(u,p.childNodes[t]))})}},t.prototype.removeCard=function(e){var t=e[this.parent.cardSettings.headerField],n=this.parent.element.querySelector('.e-card[data-id="'+t+'"]');this.isSelectedCard=!!n.classList.contains(e0);var a=n.parentElement;n&&r.remove(n),0===a.querySelectorAll(".e-card:not(."+eK+")").length&&a.appendChild(this.renderEmptyCard())},t.prototype.wireEvents=function(){var e=this;r.EventHandler.add(this.parent.element,"click",this.parent.actionModule.clickHandler,this.parent.actionModule),r.EventHandler.add(this.parent.element,"dblclick",this.parent.actionModule.doubleClickHandler,this.parent.actionModule),r.EventHandler.add(document,r.Browser.touchStartEvent,this.documentClick,this),window.addEventListener("resize",this.windowResize.bind(this));var t=this.parent.element.querySelector("."+eg);r.EventHandler.add(t,"scroll",this.onContentScroll,this),[].slice.call(this.parent.element.querySelectorAll("."+eE)).forEach(function(t){e.parent.isInitialRender&&t.offsetParent&&(e.parent.scrollPosition.column[t.offsetParent.getAttribute("data-key")]={left:0,top:0}),r.EventHandler.add(t,"scroll",e.onColScrollShowSkeleton,e),r.EventHandler.add(t,"scroll",r.debounce(e.onColumnScroll,200),e)}),this.parent.isAdaptive&&(this.parent.touchModule.wireTouchEvents(),t.scrollLeft=this.scrollLeft),this.wireDragEvent()},t.prototype.unWireEvents=function(){var e=this;r.EventHandler.remove(this.parent.element,"click",this.parent.actionModule.clickHandler),r.EventHandler.remove(this.parent.element,"dblclick",this.parent.actionModule.doubleClickHandler),r.EventHandler.remove(document,r.Browser.touchStartEvent,this.documentClick),window.removeEventListener("resize",this.windowResize.bind(this));var t=this.parent.element.querySelector("."+eg);t&&(r.EventHandler.remove(t,"scroll",this.onContentScroll),r.EventHandler.remove(t,"scroll",this.onColScrollShowSkeleton),this.parent.allowDragAndDrop&&this.unWireDragEvent());var n=[].slice.call(this.parent.element.querySelectorAll("."+eE));n.length>0&&n.forEach(function(t){r.EventHandler.remove(t,"scroll",r.debounce(e.onColumnScroll,200))}),this.parent.isAdaptive&&this.parent.touchModule.unWireTouchEvents()},t.prototype.wireDragEvent=function(){var e=this;if(this.parent.allowDragAndDrop){var t=[].slice.call(this.parent.element.querySelectorAll("."+eu+"."+eD+" ."+eO));r.addClass(t,ex),t.length>0&&t.forEach(function(t){return e.parent.dragAndDropModule.wireDragEvents(t)})}},t.prototype.unWireDragEvent=function(){var e=this,t=[].slice.call(this.parent.element.querySelectorAll("."+eu+"."+eD+" ."+eO));r.removeClass(t,ex),t.length>0&&t.forEach(function(t){return e.parent.dragAndDropModule.unWireDragEvents(t)})},t.prototype.destroy=function(){this.parent.resetTemplates(),this.parent.off(F,this.initRender),this.parent.off(M,this.scrollUiUpdate),this.unWireEvents();var e=this.parent.element.querySelector("."+ea);e&&r.remove(e);var t=this.parent.element.querySelector("."+eg);t&&r.remove(t),this.treeViewObj&&(this.treeViewObj.destroy(),this.treeViewObj=null),this.treePopup&&(this.treePopup.destroy(),this.treePopup=null);var n=this.parent.element.querySelector("."+e3);n&&r.remove(n);var a=this.parent.element.querySelector("."+e8);a&&r.remove(a)},t}(th),v=function(e,t){return(v=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},ty=function(e,t){function n(){this.constructor=e}v(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},tv=function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},tb=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.columnDataCount={},r.needsID=!0,r}return ty(t,e),t.prototype.preRender=function(){this.isAdaptive=r.Browser.isDevice,this.kanbanData=[],this.enablePersistence&&this.swimlaneToggleArray||(this.swimlaneToggleArray=[]),this.activeCardData={data:null,element:null},this.localeObj=new r.L10n(this.getModuleName(),{items:"items",min:"Min",max:"Max",cardsSelected:"Cards Selected",addTitle:"Add New Card",editTitle:"Edit Card Details",deleteTitle:"Delete Card",deleteContent:"Are you sure you want to delete this card?",save:"Save",delete:"Delete",cancel:"Cancel",yes:"Yes",no:"No",close:"Close",noCard:"No cards to display",unassigned:"Unassigned"},this.locale),this.scrollPosition={content:{left:0,top:0},column:{}},this.isInitialRender=!0},t.prototype.requiredModules=function(){return[]},t.prototype.getPersistData=function(){return this.dataSource.length>0?this.addOnPersist(["columns","dataSource","swimlaneToggleArray"]):this.addOnPersist(["columns","kanbanData","swimlaneToggleArray"])},t.prototype.getModuleName=function(){return"kanban"},t.prototype.render=function(){var e=[Z],t=[];this.enableRtl?e.push("e-rtl"):t.push("e-rtl"),this.isAdaptive?e.push($):t.push($),this.cssClass&&e.push(this.cssClass),this.element.setAttribute("role","presentation"),r.classList(this.element,e,t),this.element.style.width=r.formatUnit(this.width),this.element.style.height=r.formatUnit(this.height),a.createSpinner({target:this.element}),this.showSpinner(),this.initializeModules()},t.prototype.onPropertyChanged=function(e,t){for(var n=0,a=Object.keys(e);n<a.length;n++)switch(a[n]){case"cssClass":t.cssClass&&r.removeClass([this.element],t.cssClass),e.cssClass&&r.addClass([this.element],e.cssClass);break;case"enableRtl":case"locale":this.refresh();break;case"width":this.element.style.width=r.formatUnit(e.width),this.element.querySelector("."+ea).firstElementChild.style.width="auto",this.notify(M,{});break;case"height":this.element.style.height=r.formatUnit(e.height),this.element.querySelector("."+eg).style.height="auto",this.notify(M,{});break;case"dataSource":case"query":this.dataModule&&this.dataModule.setState({isDataChanged:!1}),this.dataModule=new q(this);break;case"columns":case"constraintType":case"sortSettings":this.notify(F,{processedData:this.kanbanData});break;case"swimlaneSettings":this.onSwimlaneSettingsPropertyChanged(e.swimlaneSettings,t.swimlaneSettings);break;case"cardSettings":this.onCardSettingsPropertyChanged(e.cardSettings,t.cardSettings);break;case"allowDragAndDrop":e.allowDragAndDrop?this.enableVirtualization?this.virtualLayoutModule.wireDragEvent():this.layoutModule.wireDragEvent():this.enableVirtualization?this.virtualLayoutModule.unWireDragEvent():this.layoutModule.unWireDragEvent();break;case"enableTooltip":this.tooltipModule&&(this.tooltipModule.destroy(),this.tooltipModule=null),e.enableTooltip&&(this.tooltipModule=new tc(this),this.enableVirtualization?this.virtualLayoutModule.refreshCards():this.layoutModule.refreshCards());break;case"dialogSettings":e.dialogSettings&&(this.dialogModule=new ts(this));break;case"allowKeyboard":this.keyboardModule&&(this.keyboardModule.destroy(),this.keyboardModule=null),e.allowKeyboard&&(this.keyboardModule=new td(this));break;case"stackedHeaders":this.enableVirtualization?this.virtualLayoutModule.refreshHeaders():this.layoutModule.refreshHeaders()}},t.prototype.onSwimlaneSettingsPropertyChanged=function(e,t){for(var n=0,r=Object.keys(e);n<r.length;n++)switch(r[n]){case"keyField":case"textField":case"showEmptyRow":case"showItemCount":case"template":case"sortDirection":this.notify(F,{processedData:this.kanbanData});break;case"enableFrozenRows":this.layoutModule.frozenSwimlaneRow&&!this.swimlaneSettings.enableFrozenRows&&this.layoutModule.removeFrozenRows()}},t.prototype.onCardSettingsPropertyChanged=function(e,t){for(var n=[],a=0,i=Object.keys(e);a<i.length;a++)switch(i[a]){case"showHeader":case"headerField":case"contentField":case"template":case"tagsField":case"grabberField":case"footerCssField":this.enableVirtualization?this.virtualLayoutModule.refreshCards():this.layoutModule.refreshCards();break;case"selectionType":(n=this.getSelectedCards()).length>0&&(r.removeClass(n,e0),this.enableVirtualization?this.virtualLayoutModule.disableAttributeSelection(n):this.layoutModule.disableAttributeSelection(n))}},t.prototype.initializeModules=function(){this.dataModule=new q(this),this.enableVirtualization?this.virtualLayoutModule=new tf(this):this.layoutModule=new tg(this),this.allowKeyboard&&(this.keyboardModule=new td(this)),this.actionModule=new ti(this),this.crudModule=new to(this),this.dragAndDropModule=new tl(this),this.dialogModule=new ts(this),this.enableTooltip&&(this.tooltipModule=new tc(this)),(r.Browser.isDevice||r.Browser.isTouch)&&(this.touchModule=new tp(this))},t.prototype.renderTemplates=function(){this.isReact&&this.renderReactTemplates()},t.prototype.resetTemplates=function(e){this.isReact&&this.clearTemplate(e)},t.prototype.destroyModules=function(){this.layoutModule&&(this.layoutModule.destroy(),this.layoutModule=null),this.keyboardModule&&(this.keyboardModule.destroy(),this.keyboardModule=null),this.touchModule&&(this.touchModule.destroy(),this.touchModule=null),this.tooltipModule&&(this.tooltipModule.destroy(),this.tooltipModule=null),this.virtualLayoutModule&&(this.virtualLayoutModule.destroy(),this.virtualLayoutModule=null),this.dialogModule=null,this.actionModule=null,this.crudModule=null,this.dataModule=null,this.dragAndDropModule=null},t.prototype.templateParser=function(e){if(e)try{return"function"==typeof e?r.compile(e):document.querySelectorAll(e).length?r.compile(document.querySelector(e).innerHTML.trim()):r.compile(e)}catch(t){return r.compile(e)}},t.prototype.getCardDetails=function(e){var t=this,n="number"==typeof this.kanbanData[0][this.cardSettings.headerField]?parseInt(e.getAttribute("data-id"),10):e.getAttribute("data-id");return this.kanbanData.filter(function(e){return e[t.cardSettings.headerField]===n})[0]},t.prototype.getColumnData=function(e,t){return this.enableVirtualization?this.virtualLayoutModule.getColumnCards(t)[""+e]||[]:this.layoutModule.getColumnCards(t)[""+e]||[]},t.prototype.getSwimlaneData=function(e){return this.layoutModule.getSwimlaneCards()[""+e]||[]},t.prototype.getSelectedCards=function(){return[].slice.call(this.element.querySelectorAll(".e-card."+e0))},t.prototype.showSpinner=function(){a.showSpinner(this.element)},t.prototype.hideSpinner=function(){a.hideSpinner(this.element)},t.prototype.openDialog=function(e,t){this.dialogModule.openDialog(e,t)},t.prototype.closeDialog=function(){this.dialogModule.closeDialog()},t.prototype.addCard=function(e,t){this.crudModule.addCard(e,t)},t.prototype.updateCard=function(e,t){this.crudModule.updateCard(e,t)},t.prototype.deleteCard=function(e){this.crudModule.deleteCard(e)},t.prototype.addColumn=function(e,t){this.actionModule.addColumn(e,t)},t.prototype.deleteColumn=function(e){this.actionModule.deleteColumn(e)},t.prototype.showColumn=function(e){this.actionModule.showColumn(e)},t.prototype.hideColumn=function(e){this.actionModule.hideColumn(e)},t.prototype.refreshUI=function(e,t){t=t||0,this.dataModule.refreshUI(e,t)},t.prototype.refreshHeader=function(){this.resetTemplates(["columnTemplate"]),this.enableVirtualization?this.virtualLayoutModule.refreshHeaders():this.layoutModule.refreshHeaders(),this.renderTemplates()},t.prototype.destroy=function(){this.destroyModules(),[].slice.call(this.element.childNodes).forEach(function(e){r.detach(e)});var t=[Z];this.cssClass&&(t=t.concat(this.cssClass.split(" "))),r.removeClass([this.element],t),e.prototype.destroy.call(this)},tv([r.Property()],t.prototype,"cssClass",void 0),tv([r.Property("auto")],t.prototype,"width",void 0),tv([r.Property("auto")],t.prototype,"height",void 0),tv([r.Property("auto")],t.prototype,"cardHeight",void 0),tv([r.Property()],t.prototype,"enableVirtualization",void 0),tv([r.Property([])],t.prototype,"dataSource",void 0),tv([r.Property()],t.prototype,"query",void 0),tv([r.Property()],t.prototype,"keyField",void 0),tv([r.Property("Column")],t.prototype,"constraintType",void 0),tv([r.Property([])],t.prototype,"externalDropId",void 0),tv([r.Collection([],K)],t.prototype,"columns",void 0),tv([r.Property(!0)],t.prototype,"allowKeyboard",void 0),tv([r.Property(!0)],t.prototype,"enableHtmlSanitizer",void 0),tv([r.Collection([],Q)],t.prototype,"stackedHeaders",void 0),tv([r.Complex({},P)],t.prototype,"swimlaneSettings",void 0),tv([r.Complex({},I)],t.prototype,"cardSettings",void 0),tv([r.Complex({},J)],t.prototype,"sortSettings",void 0),tv([r.Complex({},_)],t.prototype,"dialogSettings",void 0),tv([r.Property(!0)],t.prototype,"allowDragAndDrop",void 0),tv([r.Property(!1)],t.prototype,"enableTooltip",void 0),tv([r.Property(!1)],t.prototype,"showEmptyColumn",void 0),tv([r.Property(!1)],t.prototype,"enablePersistence",void 0),tv([r.Property()],t.prototype,"tooltipTemplate",void 0),tv([r.Event()],t.prototype,"actionBegin",void 0),tv([r.Event()],t.prototype,"actionComplete",void 0),tv([r.Event()],t.prototype,"actionFailure",void 0),tv([r.Event()],t.prototype,"created",void 0),tv([r.Event()],t.prototype,"dataBinding",void 0),tv([r.Event()],t.prototype,"dataBound",void 0),tv([r.Event()],t.prototype,"cardClick",void 0),tv([r.Event()],t.prototype,"cardDoubleClick",void 0),tv([r.Event()],t.prototype,"queryCellInfo",void 0),tv([r.Event()],t.prototype,"cardRendered",void 0),tv([r.Event()],t.prototype,"dragStart",void 0),tv([r.Event()],t.prototype,"drag",void 0),tv([r.Event()],t.prototype,"dragStop",void 0),tv([r.Event()],t.prototype,"dialogOpen",void 0),tv([r.Event()],t.prototype,"dialogClose",void 0),tv([r.Event()],t.prototype,"dataStateChange",void 0),tv([r.Event()],t.prototype,"dataSourceChanged",void 0),t=tv([r.NotifyPropertyChanges],t)}(r.Component),t.Kanban=tb,t.actionBegin=b,t.actionComplete=S,t.actionFailure=C,t.cardClick="cardClick",t.cardDoubleClick=w,t.cardRendered=E,t.queryCellInfo=k,t.dataBinding=O,t.dataBound=x,t.dragStart="dragStart",t.drag="drag",t.dragStop="dragStop",t.documentClick="document-click",t.dialogOpen=D,t.dialogClose=A,t.contentReady=M,t.dataReady=F,t.bottomSpace=25,t.cardSpace=16,t.toggleWidth=50,t.dataSourceChanged=T,t.dataStateChange=j,Object.defineProperty(t,"__esModule",{value:!0})},2092:function(e,t,n){var r,a,i,o,l,s,d,c,p,h,u,g,m,f;/*!
*  filename: ej2-react-kanban.umd.min.js
*  version : 23.1.36
*  Copyright Syncfusion Inc. 2001 - 2020. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/r=n(12027),a=n(9885),i=n(17293),o=function(e,t){return(o=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},d=function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.moduleName="column",t}(r.ComplexBase),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.propertyName="columns",t.moduleName="columns",t}(r.ComplexBase),l=function(e,t){return(l=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},h=function(e,t){function n(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return h(t,e),t.moduleName="stackedHeader",t}(r.ComplexBase),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return h(t,e),t.propertyName="stackedHeaders",t.moduleName="stackedHeaders",t}(r.ComplexBase),s=function(e,t){return(s=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},m=function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},f=function(e){function t(t){var n=e.call(this,t)||this;return n.initRenderCalled=!1,n.checkInjectedModules=!0,n.directivekeys={columns:"column",stackedHeaders:"stackedHeader"},n.statelessTemplateProps=null,n.templateProps=null,n.immediateRender=!1,n.portals=[],n}return m(t,e),t.prototype.render=function(){if(!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return a.createElement("div",this.getDefaultAttributes(),[].concat(this.props.children,this.portals));e.prototype.render.call(this),this.initRenderCalled=!0},t}(i.Kanban),r.applyMixins(f,[r.ComponentBase,a.Component]),t.Inject=r.Inject,t.ColumnDirective=c,t.ColumnsDirective=p,t.StackedHeaderDirective=u,t.StackedHeadersDirective=g,t.KanbanComponent=f,Object.keys(i).forEach(function(e){t[e]=i[e]}),Object.defineProperty(t,"__esModule",{value:!0})},81219:()=>{},91862:()=>{}};